!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0e927fcf-7f81-4c03-a244-c1e5ae6d3fa6",e._sentryDebugIdIdentifier="sentry-dbid-0e927fcf-7f81-4c03-a244-c1e5ae6d3fa6")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"4f7a062e"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2542,9765],{705:(e,n,t)=>{"use strict";t.d(n,{R:()=>s});var r=t(34837),i=t(49999),o=t(67862),a=t(30724),l=t(9844),u=t(91953),c=t(85801);function s(e){var n=e.type,t=(0,a.Z)("org-roles-and-permissions-info-banner"),s=t.isLoading,d=t.isDone,p=t.setAsDone;return s||d?null:(0,r.Y)(l.N,{text:(0,r.FD)(u.EY,{children:["View detailed role permissions"," ",(0,r.Y)("a",{href:function(e){switch(e){case"org":return o.ik.ORG_PERMISSIONS;case"repl":return o.ik.REPL_PERMISSIONS;case"group":return o.ik.GROUP_PERMISSIONS;default:(0,i.A)(e)}}(n),target:"_blank",children:"here"}),"."]}),icon:(0,r.Y)(c.A,{}),colorway:"primary",closable:!0,closeAction:p})}},1220:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(12694),i=t(34837),o=t(21462),a=t(96513),l=t(6563),u=t(39534),c=t(70764),s=t(18712),d=t(99933),p=t(90233),f=t(25227),h=t(73635),g=t(70399),m=t(89364),v=t(80325),w=t(88976),y=t(22440),b=t(33683),x=t(90843),_=(0,c.x)({scopeSelector:[s.wp.position.relative],selectOption:[{"&:hover":{cursor:"auto"}}],icon:[s.wp.position.absolute,s.wp.top("50%"),s.wp.left(-4),{transform:"translate(-100%, -50%)"}]}),S=function(e){switch(e){case a.oOo.Owner:return{icon:(0,i.Y)(y.A,{}),label:"Owner",description:"Full permissions including App deletion"};case a.oOo.Deployer:return{icon:(0,i.Y)(m.A,{}),label:"Republisher",description:"Can edit code, republish, and manage resources"};case a.oOo.Editor:return{icon:(0,i.Y)(v.A,{}),label:"Editor",description:"Can edit code and view resources"};case a.oOo.Viewer:return{icon:(0,i.Y)(w.A,{}),label:"Viewer",description:"Can only view code and fork Apps"};case a.oOo.None:return{icon:(0,i.Y)(g.A,{}),label:"None",description:"Cannot search, view, or edit Apps"}}},Y=function(e){switch(e){case a.oOo.Owner:return a.Fvk.Owner;case a.oOo.Deployer:return a.Fvk.Deployer;case a.oOo.Editor:return a.Fvk.Editor;case a.oOo.Viewer:return a.Fvk.Viewer}};let A=function(e){var n,t=e.group,c=e.repl,s=e.options,g=e.onScopeChange,m=e.iconSize,v=void 0===m?24:m,w=(0,r._)((0,o.useState)(!1),2),y=w[0],A=w[1],I=(0,r._)((0,o.useState)(s.find(function(e){return e.status===a.jLn.Current})),2),k=I[0],E=I[1],C="".concat(c.id,"-role-").concat((0,o.useId)()),D=k?S(k.role).label:void 0,R=c.authorizations.editPermissions.isAuthorized,F=(0,r._)((0,l.k6)({onCompleted:function(e){"OrgGroup"===e.updateOrgGroupScopes.__typename&&(g(),A(!0),setTimeout(function(){return A(!1)},2e3))}}),2),U=F[0],P=F[1],O=P.data,T=P.loading,L=P.error,M=(null==O?void 0:O.updateOrgGroupScopes)&&"OrgGroup"!==O.updateOrgGroupScopes.__typename?O.updateOrgGroupScopes.message:null==L?void 0:L.message;return n=M?(0,i.Y)(p.m_,{tooltip:M,children:(0,i.Y)(x.A,{size:v,color:u.LU.accentNegativeDefault})}):T?(0,i.Y)(b.A,{size:v}):y?(0,i.Y)(h.A,{size:v,color:u.LU.accentPositiveDefault}):null,(0,i.FD)(f.S,{css:_.scopeSelector,row:!0,gap:8,justify:"end",children:[n?(0,i.Y)(f.S,{css:_.icon,children:n}):null,(0,i.Y)(p.m_,{tooltip:"You cannot edit this group's permissions.",isDisabled:R,children:(0,i.Y)(d.in,{id:C,label:null!=D?D:"Select a role...","aria-label":"".concat(t.name,"'s access to ").concat(c.title),onAction:function(e){var n=s.find(function(n){return n.role===e});if(n&&n.role!==(null==k?void 0:k.role)){E(n);var r=n.role===a.oOo.None?[]:[{resourceId:c.id,role:Y(n.role)}],i=n.role===a.oOo.None?[{resourceType:a.mWV.Repl,resourceId:c.id}]:[];U({variables:{input:{orgGroupId:t.id,orgScopes:[],groupScopes:[],replScopes:r,removeScopes:i}}})}},items:s,disallowEmptySelection:!0,isDisabled:!R,children:function(e){var n=S(e.role),r=e.status===a.jLn.Unavailable;return(0,i.Y)(d.Dr,{id:e.role,label:n.label,description:r?"".concat(t.name," cannot have ").concat(e.role," access"):n.description,css:_.selectOption,icon:n.icon,isDisabled:r},e.role)}})})]})}},3171:e=>{e.exports={avatar:"InviteButton_avatar__mHOhc",stacked:"InviteButton_stacked__C4XOq",remainingCountButton:"InviteButton_remainingCountButton__Ez4IJ",inviteDialog:"InviteButton_inviteDialog__pLiZ3"}},5684:e=>{var n=Object.prototype.toString;e.exports=function(e){return function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"==n.call(e)}(e)&&e!=+e}},6125:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(29593)}])},6563:(e,n,t)=>{"use strict";t.d(n,{LT:()=>L,TR:()=>H,c6:()=>W,hh:()=>k,k6:()=>O,qO:()=>B,vJ:()=>G});var r=t(17844),i=t(12584),o=t(41114),a=t(39590),l=t(54744),u=t(57933),c=t(6876),s=t(92084),d=t(42736);function p(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsOrgScopeOption on OrgScopeOption {\n    __typename\n    role\n    status\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsGroup on OrgGroup {\n    ...OrgGroupMetadata\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n    orgScopeOptions {\n      ...OrgGroupPermissionsOrgScopeOption\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgGroupOption on OrgGroupScopeOption {\n    status\n    role\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgGroupOptions on OrgGroupScopeOptions {\n    targetGroupId\n    options {\n      __typename\n      ...OrgGroupOption\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgGroupRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    authorizations {\n      editPermissions {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment GroupReplsPage on ReplConnection {\n    pageInfo {\n      hasNextPage\n      nextCursor\n      previousCursor\n    }\n    items {\n      __typename\n      ...OrgGroupRepl\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  fragment ReplScopeOption on ReplScopeOption {\n    status\n    role\n  }\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  fragment ReplScopeOptions on ReplScopeOptions {\n    replId\n    options {\n      __typename\n      ...ReplScopeOption\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation UpdateOrgGroupScopes($input: UpdateOrgGroupScopesInput!) {\n    updateOrgGroupScopes(input: $input) {\n      __typename\n      ... on OrgGroup {\n        ...OrgGroupPermissionsGroup\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function x(){var e=(0,i._)(["\n  query OrgGroupPermissionsGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupMetadata\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function _(){var e=(0,i._)(["\n  query OrgGroupScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupGroupScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              groupScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupGroupScopeOptions {\n                  items {\n                    ...OrgGroupOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function S(){var e=(0,i._)(["\n  query OrgGroupPermissionsRepls($orgId: String, $input: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...OrgReplManagement\n          replsCount\n          repls(input: $input) {\n            __typename\n            ... on ReplConnection {\n              ...GroupReplsPage\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function Y(){var e=(0,i._)(["\n  query OrgGroupReplScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupReplScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              replScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupReplScopeOptions {\n                  items {\n                    ...ReplScopeOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return Y=function(){return e},e}var A={},I=(0,o.J1)(p()),k=(0,o.J1)(f(),s.Fe,I),E=(0,o.J1)(h()),C=(0,o.J1)(g(),E),D=(0,o.J1)(m(),c.r),R=(0,o.J1)(v(),D),F=(0,o.J1)(w()),U=(0,o.J1)(y(),F),P=(0,o.J1)(b(),k);function O(e){var n=(0,r._)({},A,e);return a.n(P,n)}var T=(0,o.J1)(x(),s.Fe);function L(e){var n=(0,r._)({},A,e);return l.I(T,n)}var M=(0,o.J1)(_(),C);function G(e){var n=(0,r._)({},A,e);return l.I(M,n)}var N=(0,o.J1)(S(),d.PQ,R);function H(e){var n=(0,r._)({},A,e);return l.I(N,n)}var z=(0,o.J1)(Y(),U);function W(e){var n=(0,r._)({},A,e);return l.I(z,n)}function B(e){var n=(0,r._)({},A,e);return u._(z,n)}},7909:e=>{e.exports={dividerContainer:"PlanningTimeline_dividerContainer__1Fxqg",divider:"PlanningTimeline_divider__J7gIK",pill:"PlanningTimeline_pill__E8NBl",pillActive:"PlanningTimeline_pillActive__f75bR",step:"PlanningTimeline_step__TUJ76",stepInteractive:"PlanningTimeline_stepInteractive__8yHKb"}},7922:(e,n,t)=>{"use strict";t.d(n,{H:()=>eg,A:()=>em});var r=t(34837),i=t(10795),o=t(17844),a=t(12584),l=t(41114),u=t(54744),c=t(32516);function s(){var e=(0,a._)(["\n  fragment FigmaImportCurrentUser on CurrentUser {\n    id\n    url\n    image\n    username\n    fullName\n    email\n    timeCreated\n    isStaff: hasRole(role: REPLIT_STAFF)\n    replCount {\n      ... on ReplCount {\n        count\n      }\n    }\n    ...ReplOwnerCurrentUser\n    teams {\n      id\n      ...ReplOwnerTeam\n    }\n    figmaAuth: auth(provider: FIGMA) {\n      provider\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,a._)(["\n  query FigmaImport {\n    currentUser {\n      id\n      ...FigmaImportCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(s(),c.nM,c.eC),h=(0,l.J1)(d(),f),g=t(30284),m=t(46941),v=t(35897),w=t(34778),y=t(40756),b=t(91953),x=t(25227),_=t(29935),S=t(53847),Y=t(12694),A=t(82643),I=t(21462),k=t(90629),E=t(29765),C=t(44082),D=t(31980),R=t(16714),F=t(36925),U=t(12389),P=t(79316),O=t(89890),T=t(69498),L=t(32186),M=t(73496),G=t(31051),N=t(16653),H=t(83096),z=t(62019),W=t(37743),B=t(1833),j=t(93629),$=t(89264),q=t(40185),K=t(39590);function V(){var e=(0,a._)(["\n  mutation CreateFigmaRepl($input: CreateReplInput!) {\n    createRepl(input: $input, isTitleAutoGenerated: false) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        nextPagePathname\n        origin {\n          id\n          isOwner\n        }\n        config {\n          figmaUrl\n          figmaImportStatus\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return V=function(){return e},e}var Z={},J=(0,l.J1)(V()),X=t(89742),Q=t(47737),ee=t(99344),en=t(14385),et=function(e){function n(e){var t;return(0,W._)(this,n),(t=(0,z._)(this,n,[e])).name="CreateFigmaReplError",t}return(0,B._)(n,e),n}((0,$._)(Error)),er=t(74013),ei=t(33683),eo=t(89846),ea=t.n(eo),el="Invalid Figma URL. Please ensure link is a valid Figma frame for your connected account in the format https://www.figma.com/design/...";function eu(e){var n,t,a,l,u,c,s,d,p,f=e.currentUser,h=e.onUpsell,g=(0,Y._)((0,I.useState)(null),2),m=g[0],v=g[1],z=(0,Y._)((0,E.ZA)("figmaUrl",{defaultValue:""}),2),W=z[0],B=z[1],$=(0,M.A)(W,500),V=(0,L.ET)().orgId,eo=(0,Y._)((0,U.p)(f,V),1)[0],eu="Org"===eo.__typename,ec=eu?eo.name:eo.username,es=null!=(p=eo.image)?p:null,ed=(0,P.d)(eo,void 0),ep=ed.isPrivate,ef=ed.setIsPrivate,eh=ed.privacyAuthz,eg=ed.isValidPrivacy,em=(t=(n=(0,Y._)((0,I.useState)("idle"),2))[0],a=n[1],l=(0,Q.m6)(),c=(0,Y._)((u=(0,o._)({},Z,void 0),K.n(J,u)),1)[0],s=(0,q.useRouter)(),d=(0,ee.A)(),{createFigmaRepl:function(e){return(0,_._)(function(e){var n,t,r,u,p,f,h,g,m;return(0,A.YH)(this,function(v){switch(v.label){case 0:return n=e.isPrivate,t=e.orgId,r=e.figmaUrl,a("creating_repl"),[4,c({variables:{input:{isPrivate:n,orgId:t,figmaUrl:r,figmaImportStatus:i.u4D.Started}}})];case 1:if((f=v.sent()).errors)throw(0,X.B)(new et(f.errors.map(function(e){return e.message}).join(", "))),new et("Something went wrong. Please try again.");if((null==(p=f.data)||null==(u=p.createRepl)?void 0:u.__typename)==="UserError")throw(0,X.B)(new et(f.data.createRepl.message)),new et(f.data.createRepl.message);if(!f.data)throw new et("Something went wrong. Please try again.");if(h=f.data.createRepl,a("opening_repl"),g={enterInAgentMode:!0,agentOnboarding:!1},m=(0,en.q1)(h,g),!l)return[3,2];return window.location.href=(0,en.cY)(h,g),[3,4];case 2:return[4,s.push((0,j._)((0,o._)({},m.href),{pathname:d}),m.as)];case 3:v.sent(),v.label=4;case 4:return[2]}})}).apply(this,arguments)},status:t}),ev=em.createFigmaRepl,ew=em.status;(0,I.useEffect)(function(){$?v((0,Y._)((0,C.uQ)($),1)[0]?null:el):v(null)},[$]);var ey=(0,O.g)(),eb="CurrentUser"===eo.__typename&&eo.id===f.id,ex=eb&&"data"===ey.type&&!ey.canCreateRepl;return(0,r.Y)(x.S,{tag:"form",onSubmit:function(e){(0,_._)(function(){var e;return(0,A.YH)(this,function(n){switch(n.label){case 0:if(!(0,Y._)((0,C.uQ)(W),1)[0])return v(el),[2];(0,w.u4)(w.AZ.FIGMA_IMPORT_USED,{action:"form_submitted"}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ev({isPrivate:ep,orgId:"Org"===eo.__typename?eo.id:void 0,figmaUrl:W})];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),(0,S._)(e,et)?v(e.message):(v("Something went wrong. Please try again."),k.v4(function(n){n.setTag("figma-import-create-repl",!0),n.setExtras({figmaUrl:W,isPrivate:ep,orgId:"Org"===eo.__typename?eo.id:void 0}),k.Cp(e)})),[2];case 4:return[2]}})})(),e.preventDefault()},gap:16,children:(0,r.Y)(x.S,{gap:8,children:(0,r.FD)(x.S,{clsx:ea().container,p:16,children:[(0,r.FD)(x.S,{gap:8,pb:8,children:[(0,r.Y)("label",{htmlFor:"figmaUrl",children:"Figma URL"}),(0,r.Y)(H.pd,{id:"figmaUrl",value:W,onChange:function(e){return B(e.target.value)},placeholder:"https://www.figma.com/design/...",clsx:ea().input})]}),m?(0,r.Y)(x.S,{pb:8,py:4,children:(0,r.Y)(D.A,{children:m})}):null,(0,r.Y)(N.a,{clsx:ea().divider}),(0,r.FD)(x.S,{gap:12,children:[(0,r.FD)(x.S,{gap:8,children:[(0,r.Y)(b.EY,{children:"Owner"}),(0,r.FD)(x.S,{row:!0,align:"center",gap:8,children:[(0,r.Y)(G.e,{src:es,size:16,username:ec,isOrg:eu}),(0,r.Y)(b.EY,{children:ec})]})]}),"Org"===eo.__typename?(0,r.Y)(R.A,{org:eo,isPrivate:ep,setIsPrivate:ef,privacyAuthz:eh}):(0,r.Y)(F.Z,{isPrivate:ep,isTeam:"Team"===eo.__typename,setIsPrivate:ef,privacyAuthz:eh,onUpsell:h})]}),(0,r.FD)(x.S,{clsx:ea().importButtonContainer,row:!0,gap:12,justify:"space-between",pt:12,children:[(0,r.Y)(x.S,{clsx:ea().limitMeter,children:(0,r.Y)(T.g,{isIndividualOwner:eb,showUpgradeForm:function(){(0,w.u4)(w.AZ.UPGRADE_SELECTED,{source:"import_figma"}),null==h||h(!0)}})}),(0,r.Y)(x.S,{align:"center",justify:"center",children:(0,r.Y)(y.$n,{iconLeft:"idle"!==ew?(0,r.Y)(ei.A,{}):(0,r.Y)(er.A,{}),colorway:"primary",stretch:!0,type:"submit",loading:"loading"===ey.type,disabled:!!m||"idle"!==ew||"loading"===ey.type||ex||!eg,text:"Import from Figma",dataCy:"import-figma-btn"})})]})]})})})}var ec=t(12263),es=t(13298),ed=t(9648),ep=t(15549),ef=t(86059),eh=t.n(ef),eg=function(){return(0,r.FD)(x.S,{row:!0,justify:"center",gap:8,pb:12,align:"center",children:[(0,r.Y)(x.S,{justify:"center",align:"center",clsx:eh().figmaIcon,children:(0,r.Y)(ed.A,{size:24})}),(0,r.Y)(x.S,{justify:"center",align:"center",children:(0,r.Y)(es.A,{})}),(0,r.Y)(x.S,{justify:"center",align:"center",clsx:eh().replitIcon,children:(0,r.Y)(ep.A,{size:24})})]})};function em(e){var n,t,a,l=e.onUpsell,c=(n={fetchPolicy:"no-cache"},t=(0,o._)({},p,n),u.I(h,t)),s=c.data,d=c.refetch,f=null==s?void 0:s.currentUser,_=(0,v.A)().showConfirm,S=(0,m.m)({onAuth:function(){_("Successfully connected to Figma"),d(),(0,w.u4)(g.AZ.FIGMA_AUTH_COMPLETE,{source:"import_page"})}}),Y=(null==f?void 0:f.__typename)==="CurrentUser"&&(null==f||null==(a=f.figmaAuth)?void 0:a.provider)===i.edb.Figma;return(null==f?void 0:f.__typename)!=="CurrentUser"?(0,r.Y)(ec.A,{}):Y?(0,r.Y)(eu,{currentUser:f,onUpsell:l}):(0,r.FD)(x.S,{clsx:eh().container,px:24,py:32,gap:12,align:"center",justify:"center",children:[(0,r.Y)(eg,{}),(0,r.Y)(b.EY,{variant:"subheadDefault",children:"Connect Figma to Replit"}),(0,r.Y)(b.EY,{children:"Get started by logging in with your Figma account"}),(0,r.Y)(y.$n,{clsx:eh().button,onClick:function(){return S()},text:"Log in with Figma",colorway:"primary",iconRight:(0,r.Y)(es.A,{})})]})}},9313:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(86103);function i(){return(0,r._P)({controlName:"flag-agent-gossip-network",logFlagToAnalytics:!1})}},10384:e=>{e.exports={surface:"Header_surface__O1_Hg"}},12263:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(34837),i=t(70764),o=t(18712),a=t(25227),l=t(33683),u=(0,i.x)({container:[o.wp.width("100%"),o.wp.height(200),o.wp.center]});let c=function(){return(0,r.Y)(a.S,{css:u.container,children:(0,r.Y)(l.A,{size:24})})}},23680:e=>{e.exports={root:"Border_root__PbshN",pulse:"Border_pulse__dsy09","fade-out":"Border_fade-out__IgQfd"}},24759:(e,n,t)=>{"use strict";t.d(n,{A:()=>R});var r=t(17844),i=t(93629),o=t(12694),a=t(86105),l=t(34837),u=t(21462),c=t(30411),s=t(12584),d=t(41114),p=t(54744),f=t(97608);function h(){var e=(0,s._)(["\n  query OrgGroupSearch($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var g={},m=(0,d.J1)(h(),f.Um),v=t(73496),w=t(39534),y=t(70764),b=t(18712),x=t(73455),_=t(83096),S=t(9844),Y=t(91953),A=t(25227),I=t(70399),k=t(33683),E=t(90173),C=[b.wp.p(8),b.wp.cursor.pointer],D=(0,y.x)({container:[b.wp.position.relative],rightIcon:[b.wp.position.absolute,b.wp.right(8),b.wp.top("50%"),{transform:"translateY(-50%)"}],dropdownMenu:[b.wp.width("100%"),b.wp.position.absolute,b.wp.zIndex(1),b.wp.top("100%"),b.wp.left(0),b.wp.backgroundColor.backgroundDefault,b.wp.maxHeight(300),b.wp.overflow("auto"),b.wp.borderRadius(4),b.wp.border({color:w.LU.foregroundDimmest}),{borderTop:"0 none"}],result:(0,a._)(C),activeResult:(0,a._)(C).concat([b.wp.backgroundColor.accentPrimaryDimmer]),closeIconButton:[{"&:hover":{backgroundColor:"".concat(w.LU.backgroundHighest," !important")}}]});let R=function(e){var n,t,a,s=e.inputId,d=e.orgId,f=e.types,h=e.selectedGroups,w=e.value,y=e.setValue,b=e.onSelect,C=e.onClear,R=e.placeholder,F=void 0===R?"Find an existing group...":R,U=(0,o._)((0,u.useState)([]),2),P=U[0],O=U[1],T=(0,v.A)(w.trim(),250),L=(n={variables:{orgId:d,input:{count:10,types:f,filters:{name:{search:T}}}},ssr:!1,skip:!T,fetchPolicy:"cache-and-network",onCompleted:function(e){if((null==e||null==(t=e.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&(null==e||null==(o=e.currentUser)||null==(i=o.org)||null==(r=i.groups)?void 0:r.__typename)==="OrgGroupConnection"){var n,t,r,i,o;O(e.currentUser.org.groups.items.filter(function(e){return!h.some(function(n){return e.id===n.id})}))}}},t=(0,r._)({},g,n),p.I(m,t)),M=L.data,G=L.loading,N=L.error,H=M&&M.currentUser&&"Org"!==M.currentUser.org.__typename?M.currentUser.org.message:void 0,z=M&&M.currentUser&&"Org"===M.currentUser.org.__typename&&"OrgGroupConnection"!==M.currentUser.org.groups.__typename?M.currentUser.org.groups.message:void 0,W=null==N?void 0:N.message,B=null!=(a=null!=H?H:z)?a:W;return(0,u.useEffect)(function(){0===w.length&&0!==P.length&&O([])},[w.length,P.length]),(0,l.Y)(A.S,{css:D.container,children:(0,l.Y)(c.Ay,{onSelect:function(e){e&&b(e)},itemToString:function(e){return(null==e?void 0:e.name)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,t=e.getItemProps,o=e.getMenuProps,a=e.isOpen,u=e.highlightedIndex,c=e.getRootProps;return(0,l.FD)(A.S,(0,i._)((0,r._)({},c({refKey:"innerRef"})),{children:[(0,l.Y)(_.pd,(0,r._)({},n({id:s,ref:null,value:w,onChange:function(e){y(e.currentTarget.value)},placeholder:F,autoComplete:"off"}))),G||0!==w.length?null:(0,l.Y)(E.A,{css:D.rightIcon}),G?(0,l.Y)(A.S,{css:D.rightIcon,children:(0,l.Y)(k.A,{})}):null,!G&&w.length>0?(0,l.Y)(A.S,{css:D.rightIcon,children:(0,l.Y)(x.K0,{css:D.closeIconButton,alt:"Clear",tooltipBehavior:"hidden",onClick:function(){y(""),C&&C()},children:(0,l.Y)(I.A,{})})}):null,(0,l.FD)(A.S,(0,i._)((0,r._)({tag:"ul"},o({refKey:"innerRef"})),{children:[B?(0,l.Y)(A.S,{tag:"ul",css:D.dropdownMenu,children:(0,l.Y)(A.S,{tag:"li",css:D.result,children:(0,l.Y)(S.N,{colorway:"negative",text:B})})}):null,a&&P&&P.length?(0,l.Y)(A.S,{css:D.dropdownMenu,children:P.map(function(e,n){return(0,l.Y)(A.S,(0,i._)((0,r._)({tag:"li"},t({item:e,index:n})),{css:n===u?D.activeResult:D.result,children:(0,l.Y)(Y.EY,{height:"singleLine",multiline:!1,children:e.name})}),e.id)})}):null,a&&!G&&T.length>0&&0===P.length?(0,l.Y)(A.S,{tag:"ul",css:D.dropdownMenu,children:(0,l.Y)(A.S,{tag:"li",css:D.result,children:(0,l.FD)(Y.EY,{height:"singleLine",color:"dimmer",multiline:!1,children:['No results found for "',w,'"']})})}):null]}))]}))}})})}},25788:(e,n,t)=>{"use strict";t.d(n,{d:()=>f,_:()=>y});var r=t(53847),i=t(17844),o=t(37743),a=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,u=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),c=function(){function e(){var n,t,r,i,a,l,u,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;(0,o._)(this,e);var s="function"==typeof c?c:(n=c,r=0,i=0,a=0,l=1,r=(u=(t=0xefc8249d,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=0x100000000*r}return(t>>>0)*23283064365386963e-26}))(" "),i=u(" "),a=u(" "),(r-=u(n))<0&&(r+=1),(i-=u(n))<0&&(i+=1),(a-=u(n))<0&&(a+=1),function(){var e=2091639*r+23283064365386963e-26*l;return r=i,i=a,a=e-(l=0|e)});this.p=function(e){for(var n=new Uint8Array(256),t=0;t<256;t++)n[t]=t;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=n[r];n[r]=n[i],n[i]=o}return n}(s),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var d=0;d<512;d++)this.perm[d]=this.p[255&d],this.permMod12[d]=this.perm[d]%12}return e.prototype.noise2D=function(e,n){var t,r,i=this.permMod12,o=this.perm,c=0,s=0,d=0,p=(e+n)*a,f=Math.floor(e+p),h=Math.floor(n+p),g=(f+h)*l,m=e-(f-g),v=n-(h-g);m>v?(t=1,r=0):(t=0,r=1);var w=m-t+l,y=v-r+l,b=m-1+2*l,x=v-1+2*l,_=255&f,S=255&h,Y=.5-m*m-v*v;if(Y>=0){var A=3*i[_+o[S]];Y*=Y,c=Y*Y*(u[A]*m+u[A+1]*v)}var I=.5-w*w-y*y;if(I>=0){var k=3*i[_+t+o[S+r]];I*=I,s=I*I*(u[k]*w+u[k+1]*y)}var E=.5-b*b-x*x;if(E>=0){var C=3*i[_+1+o[S+1]];E*=E,d=E*E*(u[C]*b+u[C+1]*x)}return 70*(c+s+d)},e}(),s=t(26197),d=new c,p=t(95570);function f(e){var n=!1,t=0,r=0,i=null,o=function(l){if(n){var u=l-t;r+=u,t=l,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:u,stop:a})}},a=function(){n&&(n=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){n||(r=0,t=performance.now(),n=!0,i=window.requestAnimationFrame(o))},stop:a}}var h=function(){return(0,s.Im)(600,1200)},g=function(){return(0,s.Im)(1,3)},m=function(){return{width:(0,s.Im)(5,20),height:(0,s.Im)(5,20)}},v=function(){return(0,s.tR)()};function w(e){return Array.isArray(e)?(0,s.D6)(e):(0,r._)(e,Function)?e():e}function y(){var e=!1,n=null,t=null,r=[],o=null,a={},l=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)!function(){var e=i.value;if(!a[e]){var n=new Image;n.src=e,n.onerror=function(){p.error('Failed to load particle image "'.concat(e,'"'))},a[e]=n}}()}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}};return{getIsInstalled:function(){return e},addParticles:function(e){for(var n=e.x,t=e.y,u=e.numParticles,c=e.spread,d=e.heading,p=e.airDrag,f=void 0===p?.9:p,y=e.color,b=void 0===y?v:y,x=e.gravity,_=void 0===x?800:x,S=e.velocity,Y=void 0===S?h:S,A=e.size,I=void 0===A?m:A,k=e.lifetime,E=void 0===k?g:k,C=e.flip,D=void 0===C||C,R=e.image,F=void 0===R?void 0:R,U=w(void 0===c?60:c),P=w(void 0===d?90:d),O=(0,s.pu)(U),T=(0,s.pu)(-P),L=w(void 0===u?150:u),M=0;M<L;M++){var G=T+(0,s.Im)(-O/2,O/2),N=w(Y),H=w(I),z=H.width,W=H.height,B=w(E),j=w(b),$=w(f),q=w(n),K=w(t),V=w(F);"string"==typeof V&&(a[V]||l([V]),V=a[V]),r.push((0,i._)({seed:(0,s.Im)(0,1e5),x:q,y:K,gravity:_,airDrag:$,scaleX:1,scaleY:1,rotation:(0,s.Im)(0,(0,s.pu)(360)),velocityX:Math.cos(G)*N,velocityY:Math.sin(G)*N,angularVelocity:(0,s.Im)((0,s.pu)(-400),(0,s.pu)(400)),color:j,alpha:1,width:z,height:W,flip:D,lifetime:B,lifetimeRemaining:B},V?{image:V,type:"image"}:{type:(0,s.D6)(["rectangle","ellipse"])}))}null==o||o.start()},clearParticles:function(){r=[]},uninstall:function(){var r;e&&(n&&(null==(r=document.body)?void 0:r.contains(n))&&document.body.removeChild(n),o&&o.stop(),n=null,t=null,e=!1,a={})},install:function(){var i;!e&&document&&document.body&&((i=document.createElement("canvas")).style.position="fixed",i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",i.style.zIndex="999999",i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight,i.id="replit-particles-simulation",i.setAttribute("role","image"),i.ariaHidden="true",(t=(n=i).getContext("2d"))&&(document.body.appendChild(n),o=f(function(e){var i=e.deltaTime,o=e.stop;if(n&&t){var a=t,l=window.scrollX,u=window.scrollY;n.width!==document.documentElement.clientWidth&&(n.width=document.documentElement.clientWidth),n.height!==document.documentElement.clientHeight&&(n.height=document.documentElement.clientHeight),t.clearRect(0,0,n.width,n.height),r.map(function(e){var n,t,r,o,a,l;return t=(n={particle:e,deltaTime:i}).particle,r=n.deltaTime,t.velocityY+=t.gravity*r/1e3,t.x+=t.velocityX*r/1e3,t.y+=t.velocityY*r/1e3,t.rotation+=t.angularVelocity*r/1e3,t.velocityX*=t.airDrag,t.velocityY*=t.airDrag,t.flip&&(t.scaleY=2*(0,s.tH)(t.lifetimeRemaining,.5)),o=(0,s.IC)(t.velocityX,t.velocityY),a=(0,s.wQ)(t.velocityX,t.velocityY),l=o+.05*d.noise2D(t.seed,t.lifetimeRemaining),void(t.velocityX=Math.cos(l)*a,t.velocityY=Math.sin(l)*a,t.lifetimeRemaining-=r/1e3,t.lifetimeRemaining<=0?t.alpha=0:t.alpha=1-(t.lifetime-t.lifetimeRemaining)/t.lifetime)}),r.map(function(e){var n,t,r,i,o,c,s,d,p;return t=(n={particle:e,ctx:a,scrollX:l,scrollY:u}).particle,r=n.ctx,i=n.scrollX,o=n.scrollY,c=t.width*t.scaleX,s=t.height*t.scaleY,d=t.x-i,p=t.y-o,void(r.save(),r.translate(d,p),r.rotate(t.rotation),r.globalAlpha=t.alpha,"image"===t.type?r.drawImage(t.image,-c/2,-s/2,c,s):"rectangle"===t.type?(r.fillStyle=t.color,r.fillRect(-c/2,-s/2,c,s)):"ellipse"===t.type&&(r.fillStyle=t.color,r.beginPath(),r.ellipse(0,0,c/2,s/2,0,0,2*Math.PI),r.fill()),r.restore())}),0===(r=r.filter(function(e){return e.lifetimeRemaining>0})).length&&o()}}),e=!0))},preloadImages:l,unloadImages:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;delete a[l]}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}},26197:(e,n,t)=>{"use strict";t.d(n,{CL:()=>o,D6:()=>a,IC:()=>s,Im:()=>l,pu:()=>c,tH:()=>p,tR:()=>u,wQ:()=>d});var r=t(84282),i=t.n(r);function o(e){var n,t={x:(n=e.getBoundingClientRect()).left+n.width/2,y:n.top+n.height/2};return{x:t.x+window.scrollX,y:t.y+window.scrollY}}function a(e){var n;return e[n=e.length-1,i()(0,n,!1)]}function l(e,n){return i()(e,n,!0)}function u(){return"hsl(".concat(i()(0,360,!1),", 100%, 70%)")}function c(e){return e*Math.PI/180}function s(e,n){return Math.atan2(n,e)}function d(e,n){return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function p(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs((e%(n=2*t)+n)%n-t)}},28561:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(34837),i=t(96513),o=t(49999),a=t(70764),l=t(18712),u=t(25227),c=t(8440),s=[l.wp.backgroundColor.outlineDimmest,l.wp.color.foregroundDefault,l.wp.borderRadius(4),l.wp.align.center,l.wp.justify.center,{height:"var(--group-icon-size)",width:"var(--group-icon-size)"}],d=(0,a.x)({grey:[s,l.wp.backgroundColor.greyDimmest],red:[s,l.wp.backgroundColor.redDimmest],orange:[s,l.wp.backgroundColor.orangeDimmest],yellow:[s,l.wp.backgroundColor.yellowDimmest],lime:[s,l.wp.backgroundColor.limeDimmest],blue:[s,l.wp.backgroundColor.blueDimmest],purple:[s,l.wp.backgroundColor.purpleDimmest],pink:[s,l.wp.backgroundColor.pinkDimmest]});let p=function(e){var n,t,a=e.group,l=e.variant,s=void 0===l?"normal":l;switch(a.color){case i.RVn.Grey:n=d.grey;break;case i.RVn.Red:n=d.red;break;case i.RVn.Orange:n=d.orange;break;case i.RVn.Yellow:n=d.yellow;break;case i.RVn.Lime:n=d.lime;break;case i.RVn.Blue:n=d.blue;break;case i.RVn.Purple:n=d.purple;break;case i.RVn.Pink:n=d.pink;break;default:n=d.grey}switch(s){case"normal":t=32;break;case"compact":t=24;break;default:(0,o.A)(s)}return(0,r.Y)(u.S,{css:n,style:{"--group-icon-size":"".concat(t,"px")},children:(0,r.Y)(c.A,{})})}},28659:e=>{e.exports={surface:"replEnvironmentDesktop_surface__18l0g",loadingAnimationWrapper:"replEnvironmentDesktop_loadingAnimationWrapper__upKsd",emailVerificationWrapper:"replEnvironmentDesktop_emailVerificationWrapper__KPi4v"}},29593:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_9});var r,i,o,a,l,u=t(12694),c=t(34837),s=t(40185),d=t(21462),p=t(17844),f=t(12584),h=t(41114),g=t(54744),m=t(39590),v=t(41991),w=t(61480),y=t(73616);function b(){var e=(0,f._)(["\n  fragment FigmaImportFlowRepl on Repl {\n    id\n    config {\n      figmaUrl\n      figmaImportStatus\n    }\n    slug\n    title\n    layoutState\n    description\n    rootOriginReplUrl\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n  }\n  ","\n  ","\n  ","\n"]);return b=function(){return e},e}function x(){var e=(0,f._)(["\n  query FigmaImportFlow($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...FigmaImportFlowRepl\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function _(){var e=(0,f._)(["\n  mutation UpdateReplForFigmaImport($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          figmaUrl\n          figmaImportStatus\n        }\n        isRenamed\n        title\n      }\n    }\n  }\n"]);return _=function(){return e},e}function S(){var e=(0,f._)(["\n  mutation GetFigmaIntermediateToken($input: GetFigmaIntermediateTokenInput!) {\n    getFigmaIntermediateToken(input: $input) {\n      ... on FigmaImportIntermediateToken {\n        token\n      }\n      ... on NoOAuthFoundError {\n        message\n      }\n      ... on InvalidFigmaUrlError {\n        message\n      }\n      ... on FigmaRateLimitError {\n        message\n      }\n    }\n  }\n"]);return S=function(){return e},e}var Y={},A=(0,h.J1)(b(),v.c,y.c,w.b),I=(0,h.J1)(x(),A),k=(0,h.J1)(_()),E=(0,h.J1)(S()),C=t(29005),D=t(47378),R=t(63949);function F(){var e=(0,f._)(["\n  query ReplEnvironmentDesktop(\n    $replId: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n        ...HandleReplRedirectionRepl\n        ...FigmaImportFlowRepl\n      }\n      ... on ReplRedirect {\n        ...HandleReplRedirectionReplRedirect\n      }\n      ... on ReplSubscriptionExpired {\n        ...HandleReplRedirectionSubscriptionExpired\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      id\n      isVerified\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return F=function(){return e},e}var U={},P=(0,h.J1)(F(),D.cL,C.I,R.VU,A,R.V4,R.aU,D.dL),O=t(22618),T=t(86103),L=t(72058),M=t(33375),G=t(7343),N=t(83846);function H(){var e=(0,f._)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return H=function(){return e},e}var z={},W=(0,h.J1)(H()),B=t(86402);function j(e){return!e.origin&&"/@replit/Blank-Repl"===e.rootOriginReplUrl}var $=t(47676),q=t(26575),K=t(860),V=t(47737),Z=t(26279),J=t(40872),X=t(69948),Q=t(45725);function ee(){var e=(0,f._)(["\n  fragment AgentLayoutReplConfig on ReplConfig {\n    isInPlanningPhase\n    isAgentRepl\n  }\n"]);return ee=function(){return e},e}function en(){var e=(0,f._)(["\n  query CenteredAgentPresentationDuringInitialPlanning($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          id\n        }\n        config {\n          ...AgentLayoutReplConfig\n        }\n      }\n    }\n  }\n  ","\n"]);return en=function(){return e},e}var et={},er=(0,h.J1)(ee()),ei=(0,h.J1)(en(),er),eo=t(61125),ea=t(76957),el=t(69737),eu=t(96907),ec=t.n(eu),es=t(32978),ed=t(69832),ep=t(74651),ef=ep.ZU.String();ep.ZU.String();var eh=ep.ZU.Object({width:ep.ZU.Number(),height:ep.ZU.Number()}),eg=ep.ZU.Object({x:ep.ZU.Number(),y:ep.ZU.Number()}),em=ep.ZU.Intersect([eg,eh]),ev=ep.ZU.Object({top:ep.ZU.Number(),bottom:ep.ZU.Number(),left:ep.ZU.Number(),right:ep.ZU.Number()}),ew=ep.ZU.Object({id:ep.ZU.String(),type:ep.ZU.Literal("paneGroup"),panes:ep.ZU.Array(ef),percent:ep.ZU.Number(),activeIndex:ep.ZU.Number()}),ey=ep.ZU.Object({id:ep.ZU.String(),type:ep.ZU.Literal("floatingPaneGroup"),panes:ep.ZU.Array(ef),activeIndex:ep.ZU.Number(),rect:em}),eb=ep.ZU.Recursive(function(e){return ep.ZU.Object({type:ep.ZU.Literal("split"),stacked:ep.ZU.Boolean(),children:ep.ZU.Array(ep.ZU.Union([ew,e])),percent:ep.ZU.Number()})});ep.ZU.Union([ew,eb]);var ex=ep.ZU.Object({tiling:ep.ZU.Union([eb,ew,ep.ZU.Null()]),floating:ep.ZU.Array(ey)});ep.ZU.Union([ep.ZU.Literal("left"),ep.ZU.Literal("right")]),ep.ZU.Object({inset:ep.ZU.Optional(ev),size:eh,gap:ep.ZU.Number(),headerHeight:ep.ZU.Number()});var e_=ep.ZU.Union([ep.ZU.Literal("above"),ep.ZU.Literal("below"),ep.ZU.Literal("leftOf"),ep.ZU.Literal("rightOf")]);function eS(e,n){var t,r,i,o,a={width:t=.5*n.width,height:r=.5*n.height,x:n.x+(n.width-t)/2,y:n.y+(n.height-r)/2};if(i=e.x,o=e.y,i>a.x&&i<a.x+a.width&&o>a.y&&o<a.y+a.height)return{dropLocation:"middle",previewRect:n};var l={x:n.x+n.width/2,y:n.y+n.height/2},u=.3*n.width,c=l.x-u/2;if(e.x>=c&&e.x<=c+u){var s=e.y<=l.y?"above":"below",d=n.height/2;return{dropLocation:s,previewRect:{x:n.x,y:"above"===s?n.y:n.y+d,width:n.width,height:d}}}var p=e.x<=l.x?"leftOf":"rightOf",f=n.width/2;return{dropLocation:p,previewRect:{x:"leftOf"===p?n.x:n.x+f,y:n.y,width:f,height:n.height}}}ep.ZU.Union([e_,ep.ZU.Literal("replace")]),ep.ZU.Union([ep.ZU.Literal("up"),ep.ZU.Literal("left"),ep.ZU.Literal("right"),ep.ZU.Literal("down")]);var eY={height:0,width:0};function eA(e){if(e.length<1)throw Error("Expected a path with a parent");return e.slice(0,-1)}function eI(e){return"floatingPaneGroup"!==e.type}var ek=t(56902),eE=t(86105),eC=t(22531);function eD(e,n){var t=(0,ek._)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!=typeof o)throw Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw Error("Expected paneGroup");return a}if("tiling"!==r)throw Error("Expected tiling path");var l=e.tiling;if(!l)return null;var u=l,c=i.length,s=0,d=!0,p=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if("paneGroup"===u.type)break;if("number"!=typeof m)throw Error("Expected number");s++,u=u.children[m]}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return c===s?u:null}function eR(e,n){var t=e.floating.find(function(e){return e.panes.includes(n)});if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,u=void 0;try{for(var c,s=o.node.children[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,eE._)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function eF(e,n){var t=e.tiling;return t?function e(n,t,r){if("paneGroup"===n.type)return{paneGroup:n,path:r};var i=0,o=n.children.length-1;return"topRight"!==t||n.stacked?"bottomRight"===t?i=o:"bottomLeft"===t&&n.stacked&&(i=o):i=o,e(n.children[i],t,(0,eE._)(r).concat([i]))}(t,n,["tiling"]):null}function eU(e,n){var t=e.tiling,r=e.floating,i=(0,eE._)(r);for(t&&i.push(t);i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.type)i.push.apply(i,(0,eE._)(o.children));else if(o.id===n)return o}return null}function eP(e,n){var t=e.tiling;if(null===t)return null;for(var r=[[t,["tiling"]]];r.length;){var i=function(){var e=r.shift();if(!e)throw Error("Expected item");var t=(0,u._)(e,2),i=t[0],o=t[1];return"split"!==i.type?"continue":i.children.some(function(e){return"paneGroup"===e.type&&e.id===n})?{v:{node:i,path:o}}:void i.children.forEach(function(e,n){r.push([e,(0,eE._)(o).concat([n])])})}();if("object"===(0,eC._)(i))return i.v}return null}function eO(e,n){var t=eR(e,n);if((null==t?void 0:t.paneGroup.type)==="paneGroup"){var r=eP(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function eT(e){var n=e.relativeTo,t=e.rects,r=e.direction,i=t.get(n);if(!i)throw Error("Expected relativeTo rect to be included in rects");var o=null,a=!0,l=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var p=(0,u._)(s.value,2),f=p[0],h=p[1];if(f===n)continue;var g=function(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}({from:i,other:h,direction:r});if(("leftOf"!==r&&"above"!==r||!(g<=0))&&("rightOf"!==r&&"below"!==r||!(g<0))){var m=function(e,n,t){var r=(0,u._)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),i=r[0],o=r[1],a=Math.max(i[0],o[0]);return Math.min(i[1],o[1])-a}(i,h,"leftOf"===r||"rightOf"===r?"y":"x");!(m<=0)&&(!o||o.distance>g||o.distance===g&&o.overlap<m)&&(o={key:f,rect:h,distance:g,overlap:m})}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return(null==o?void 0:o.key)||null}var eL={top:0,bottom:0,left:0,right:0};function eM(e,n){var t=n.inside,r=n.minVisibleX,i=n.minVisibleY,o=-e.width+r,a=t.width-r,l=t.height-i;return{x:Math.min(Math.max(o,e.x),a),y:Math.min(Math.max(0,e.y),l)}}function eG(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating)return void e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=eR(e,n.relativeTo);if(!i)throw Error("Expected pane");r=i.paneGroupPath}if(null===r)throw Error("Expected relativeTo");if("tiling"!==r[0])throw Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,u="above"===o||"below"===o,c="rightOf"===o||"below"===o;if(!e.tiling&&1===r.length){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(!e.tiling)throw Error("Expected tiling");var s=eD(e,r);if(!s||!eI(s))throw Error("Expected tiled node");if(1===r.length&&"replace"===o){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];e.tiling={type:"split",percent:100,stacked:u,children:d},eN({id:n.id,insertIndex:+!!c,panes:a,children:d,percent:l,activeIndex:t});return}if(1===r.length&&"split"===e.tiling.type){if(!!e.tiling.stacked==!!u)return void eN({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:c?e.tiling.children.length:0,children:e.tiling.children});var p={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},f=c?[s,p]:[p,s];return s.percent=100-p.percent,void(e.tiling={type:"split",stacked:u,children:f,percent:100})}if(0===r.length)throw Error("Expected relativeTo length");var h=eD(e,eA(r));if((null==h?void 0:h.type)!=="split")throw Error("Expected split parent");if("replace"===o){var g=h.children.indexOf(s);h.children.splice(g,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t});return}if(!!h.stacked==!!u){var m=h.children.indexOf(s);eN({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:c?m+1:m,children:h.children});return}if(!!h.stacked!=!!u){var v={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},w=c?[s,v]:[v,s],y=s.percent;s.percent=100-v.percent;var b=h.children.indexOf(s);h.children[b]={type:"split",stacked:u,children:w,percent:y};return}}function eN(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0!==t){var l=(100-t)/100;r.forEach(function(e){e.percent=e.percent*l}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a});return}var u=r.reduce(function(e,n){return e+n.percent},0)/r.length,c=100/(100+u);r.forEach(function(e){e.percent=e.percent*c}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:u*c,activeIndex:a})}function eH(e,n){var t=eU(e,n.paneGroupId);if(!t)throw Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate;if(void 0!==r&&r>e.panes.length)throw Error("Invalid index");var a=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[a,0].concat((0,eE._)(i))),(void 0===o||o)&&(e.activeIndex=a)}(t,n)}function ez(e,n){e.panes.splice(n,1),0!==e.activeIndex&&(n>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function eW(e,n){var t=eR(e,n);if(!t)throw Error("Expected pane");if(t.floating){if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!=typeof r)throw Error("Expected floatingIndex");eB(e,["floating",r])}else ez(t.paneGroup,t.index);return}var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw Error("Expected paneIndex");if(!a&&1===i.panes.length){e.tiling=null;return}if(i.panes.length>1)return void ez(i,l);eB(e,o)}function eB(e,n){var t=(0,ek._)(n),r=t[0],i=t.slice(1);if("tiling"===r&&0===i.length){e.tiling=null;return}if("floating"===r&&0===i.length){e.floating=[];return}var o=eD(e,n);if(!o)throw Error("Expected node");if("floatingPaneGroup"===o.type){var a=e.floating.indexOf(o);if(-1===a)throw Error("Expected paneGroupIndex");e.floating.splice(a,1);return}var l=eA(n),c=eD(e,l);if((null==c?void 0:c.type)!=="split")throw Error("Expected split");var s=c.children.indexOf(o);if(-1===s)throw Error("Expected paneGroupIndex");var d=c.children;if(d.splice(s,1),d.length>1){var p=100/d.reduce(function(e,n){return e+n.percent},0);d.forEach(function(e){e.percent=e.percent*p});return}var f=(0,u._)(d,1)[0],h=l.length>1?eD(e,eA(l)):null;if(!h){f.percent=100,e.tiling=f;return}if("split"!==h.type)throw Error("Expected split");var g=h.children.indexOf(c);if(-1===g)throw Error("Expected parentIndex");f.percent=c.percent,h.children[g]=f}function ej(e,n){var t=n.paneGroupPath,r=n.rect,i=eD(e,t);if((null==i?void 0:i.type)!=="paneGroup")throw Error("Expected paneGroup");eB(e,t),eG(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}function e$(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:eD(e,n.paneGroupPath);if(!t||!("panes"in t))throw Error("Expected paneGroup");eW(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}function eq(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=eD(e,t);if(!a||!eI(a))throw Error("Expected leftNode");var l=eD(e,eA(t));if((null==l?void 0:l.type)!=="split")throw Error("Expected splitNode");var u=l.children.indexOf(a);if(-1===u)throw Error("Expected leftNodeIndex");var c=u+1,s=l.children[c];if(!s)throw Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&u>0)for(var d=Math.abs(r),p=u-1;d>0;){var f=l.children[p];if(f.percent>d){f.percent-=d;break}if(d-=f.percent,f.percent=0,0===p)break;p--}var h=l.children.reduce(function(e,n){return n===s?e:e+n.percent},0);s.percent=100-h;return}var g=a.percent+s.percent,m=l.children.slice(u).reduce(function(e,n){return e+n.percent},0);if(r>g-o){if(a.percent=Math.min(m,Math.max(g,r)),s.percent=0,r>g&&c<l.children.length-1)for(var v=r-g,w=c+1;v>0;){var y=l.children[w];if(y.percent>v){y.percent-=v;break}if(v-=y.percent,y.percent=0,w===l.children.length-1)break;w++}return}var b=a.percent-r;s.percent=s.percent+b,a.percent=r}var eK=t(35992),eV=(0,ea.eU)(!1),eZ=(0,ea.eU)([]),eJ=(0,ea.eU)([]),eX=(0,ea.eU)([]),eQ={x:0,y:0,width:0,height:0},e0={type:"commands",data:{autoFocus:!1}},e1=(0,el.Iz)(function(e){return(0,ea.eU)({paneId:e,type:"tile",rectAtom:(0,ea.eU)((0,p._)({},eQ)),dataAtom:(0,ea.eU)((0,p._)({},e0)),isHidden:!1,isCommitted:!1,highlight:!1})}),e2=(0,ea.eU)(function(e){return e(eZ).map(function(n){return e(e1(n))})}),e4=(0,ea.eU)(function(e){return e(e2).filter(function(e){return!e.isHidden})}),e5=(0,ea.eU)(function(e){return e(e2).filter(function(e){return e.isHidden})}),e3=(0,ea.eU)(function(e){return e(eX).map(function(n){return e(e8(n))})}),e6=(0,el.Iz)(function(e){return(0,ea.eU)({handleId:e,rect:eQ,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]})}),e8=(0,el.Iz)(function(e){return(0,ea.eU)({id:e,rectAtom:(0,ea.eU)((0,p._)({},eQ)),panes:[],path:["tiling"],activeIndex:0})}),e7=(0,ea.eU)(function(e){return e(eV)?34:32}),e9=(0,ea.eU)({x:0,y:0,width:0,height:0}),ne=t(62246),nn=(0,ea.eU)(null),nt=(0,ea.eU)(null,function(e,n,t){t!==e(nn)&&n(nn,t)}),nr=(0,ea.eU)(null,function(e,n,t){var r=e1(t);e(r).isCommitted||n(r,function(e){return(0,eK.jM)(e,function(e){e.isCommitted=!0})})}),ni=(0,ea.eU)(function(e){var n=e(nn);if(!n)return null;var t=e(e1(n)),r=e(t.dataAtom);return"markdown"===r.type?r.data.path:(0,ne.xS)(r)&&r.data.path||null}),no=(0,ea.eU)(null),na=t(23099),nl=t.n(na),nu=t(6983);ep.ZU.Object({width:ep.ZU.Number({minimum:0}),isOpen:ep.ZU.Boolean()});var nc=(0,ea.eU)({width:180,isOpen:!1}),ns=(0,ea.eU)(function(e){return e(nc).isOpen}),nd=(0,ea.eU)(function(e){var n=e(nc);return n.isOpen?n.width:0}),np=(0,ea.eU)(!0),nf=(0,ea.eU)(!1),nh=(0,ea.eU)({tiling:null,floating:[]}),ng=(0,ea.eU)(function(e){return e(e2).filter(function(n){return(0,ne.xS)(e(n.dataAtom))})}),nm=(0,ea.eU)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(e2)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&(0,ne.xS)(e(a.dataAtom)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),nv=(0,ea.eU)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(e2)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&!(0,ne.xS)(e(a.dataAtom)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),nw=(0,ea.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e4)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),ny=(0,ea.eU)([]),nb=(0,ea.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e5)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),nx=(0,ea.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e2)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),n_=(0,ea.eU)(function(e){return e(nx).length}),nS=(0,ea.eU)(function(e){var n=e(e9);return!!(n.width&&n.height)}),nY=(0,ea.eU)(null),nA=(0,ea.eU)(null,function(e,n,t){var r=e(e2).find(function(n){var r=e(n.dataAtom);return(0,ne.xS)(r)?t===(0,ne.Vj)(r):"markdown"===r.type&&t===r.data.path});r&&(n(nt,r.paneId),n(nr,r.paneId))}),nI=(0,ea.eU)(null);function nk(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function nE(e,n){var t,r,i,o,a,l,u,c,s,d=(r=(t={point:e,rect:n}).rect,i=t.point,o=r.height>r.width?r.width/r.height:1,a=r.width>r.height?r.height/r.width:1,l=(i.x-r.x)*a,(s=Math.min(l,u=(r.x+r.width-i.x)*a,c=(i.y-r.y)*o,(r.y+r.height-i.y)*o))===l?"left":s===u?"right":s===c?"top":"bottom"),p={x:n.x,y:n.y,width:n.width,height:n.height},f="below";return"top"===d?(p.height=n.height/2,f="above"):"bottom"===d?(p.height=n.height/2,p.y=n.y+n.height/2,f="below"):"left"===d?(p.width=n.width/2,p.x=n.x,f="leftOf"):"right"===d&&(p.width=n.width/2,p.x=n.x+n.width/2,f="rightOf"),{placement:f,rect:p}}function nC(e){return"handle:"+e.leftPath.join(":")}function nD(e){return(0,K.A)(function(){return(0,el.mg)(e,function(e){return{width:e.width,height:e.height}},function(e,n){return e.height===n.height&&e.width===n.width})},[e])}function nR(e){return(0,K.A)(function(){return(0,el.mg)(e,function(e){return{x:e.x,y:e.y}},function(e,n){return e.x===n.x&&e.y===n.y})},[e])}var nF=ep.ZU.Object({type:ep.ZU.Literal("centered")}),nU=ep.ZU.Object({type:ep.ZU.Literal("sidebar"),width:ep.ZU.Number({minimum:300})}),nP=(0,ea.eU)("leftSidebar"),nO=(0,ea.eU)(function(e){return e(nT)?"leftSidebar"===e(nP)?"agent-filetree":"filetree-agent":null});ep.ZU.Union([nU,nF]);var nT=(0,ea.eU)(null),nL=(0,el.mg)(nT,function(e){return null!==e});(0,ea.eU)(!0);var nM=(0,ea.eU)(6),nG=(0,ea.eU)(0),nN=(0,ea.eU)(function(e){var n=e(nc),t=e(nM),r=t+e(nG),i=t,o=t,a=e(nO),l=e(nT),u=n.isOpen?n.width+2*t:t;if(l){var c=t+("sidebar"===l.type?l.width:450)+("sidebar"===l.type&&0===l.width?0:t);i="agent-filetree"===a?c:u,o="agent-filetree"===a?u:c}else i=u;return{top:r,bottom:t,left:i,right:o}}),nH=(0,ea.eU)(function(e){var n=e(e7),t=e(nM),r=e(e9);return{headerHeight:n,inset:e(nN),gap:t,size:{width:r.width,height:r.height}}}),nz=(0,ea.eU)(null,function(e,n,t){n(e9,t),n(nB,e(nh))});function nW(e,n){return nl()(e,n)}var nB=(0,ea.eU)(null,function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var u=e1(r),c=e(u);nW(e(c.rectAtom),i)||n(c.rectAtom,i);var s=(0,eK.jM)(c,function(e){e.paneId=r,e.type=o,e.isHidden=a});nW(c,s)||n(u,s)},i=e(eZ),o=e(eJ),a=e(eX),l=new Set(i),u=new Set(o),c=new Set(a),s=function(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?eL:o,l=[],u=[],c=[],s=[],d=null,p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},f=e.tiling;if((null==f?void 0:f.type)==="paneGroup"){var h={x:p.x,y:p.y+i,width:p.width,height:p.height-i},g={x:h.x,y:h.y-i,width:h.width,height:i};s.push({id:f.id,rect:g,panes:f.panes,activeIndex:f.activeIndex,path:["tiling"]}),u.push.apply(u,(0,eE._)(f.panes.map(function(e,n){return{paneId:e,rect:h,active:n===f.activeIndex}})))}else f&&f.children.forEach(function(n,t){return function n(t,o,a,l){var p,f,h,g=o.children.indexOf(t),m=o.children.length,v=o.stacked?a.height:a.width,w=(p=a.width,f=a.height,h=t.percent/100,o.stacked?f=(v-(r*(m-1)+i*m))*h+i:p=(v-r*(m-1))*h,{width:p,height:f}),y=w.width,b=w.height,x=function(){var e=a.x,n=a.y;if(0===g)return{x:e,y:n};if(!d)throw Error("Expected previousRect");return o.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),_={x:x.x,y:x.y,height:b,width:y};if(d=_,"paneGroup"===t.type){var S={x:_.x,y:_.y+i,width:_.width,height:_.height-i},Y={x:S.x,y:S.y-i,width:S.width,height:i};s.push({id:t.id,rect:Y,panes:t.panes,activeIndex:t.activeIndex,path:l}),u.push.apply(u,(0,eE._)(t.panes.map(function(e,n){return{paneId:e,rect:S,active:n===t.activeIndex}})))}else t.children.forEach(function(e,r){return n(e,t,_,(0,eE._)(l).concat([r]))});if(0!==g){var A={x:_.x-(o.stacked?0:r),y:_.y-(o.stacked?r:0),width:o.stacked?_.width:r,height:o.stacked?r:_.height},I=eA(l),k=(0,eE._)(I).concat([g-1]),E=eD(e,k);if(!E||!eI(E))throw Error("Expected leftNode");var C=void 0;0===E.percent?C="left":0===t.percent&&(C="right"),c.push({parentPath:I,leftPath:k,rightPath:l,stacked:o.stacked,rect:A,snapped:C})}}(n,f,p,["tiling",t])});var m={x:p.x-a.left,y:p.y-a.top,width:p.width+a.left+a.right,height:p.height+a.top+a.bottom};return e.floating.forEach(function(e,n){var t=eM(e.rect,{inside:m,minVisibleX:2*i,minVisibleY:i}),r={height:i,width:e.rect.width,x:t.x,y:t.y},o={x:t.x,y:t.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};s.push({id:e.id,rect:r,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),l.push.apply(l,(0,eE._)(e.panes.map(function(n,t){return{paneId:n,rect:o,active:t===e.activeIndex}})))}),{tiles:u,gutters:c,headers:s,floating:l}}(t,e(nH)),d=s.tiles,p=s.floating,f=s.gutters,h=s.headers,g=f.map(nC);nW(o,g)||n(eJ,g);var m=(0,eE._)(d).concat((0,eE._)(p)).map(function(e){return e.paneId});nW(i,m)||n(eZ,(0,nu.A)(m,{existing:i,getKey:function(e){return e}}));var v=[];h.forEach(function(t){c.delete(t.id);var r=e8(t.id),i=e(r);v.push(t.id),nW(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,eK.jM)(i,function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path});nW(i,o)||n(r,o)}),nW(a,v)||n(eX,v),d.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"tile"})}),p.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"floating"})}),f.forEach(function(t){var r={handleId:nC(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};u.delete(r.handleId);var i=e6(r.handleId);nW(e(i),r)||n(i,r)}),l.forEach(e1.remove),u.forEach(e6.remove),c.forEach(e8.remove);var w=e(nn);w&&l.has(w)&&n(nn,null),n(nh,t)}),nj=t(79203),n$=t(26325),nq=t(67201),nK=t(67862),nV=function(){var e=new Map([["agentChat",40],["webview",60]]);if(.4*window.innerWidth>450){var n=Math.round(450/window.innerWidth*100);e.set("agentChat",n),e.set("webview",100-n)}return e},nZ=t(29935),nJ=t(82643),nX=t(62449),nQ=t(58631),n0=(0,ea.eU)(null),n1=(0,ea.eU)(null,function(e,n,t){nQ.A.set(n3(t.popupId),Date.now()+6048e5),nQ.A.set(n5(t.popupId),t.state);var r=!0,i=!1,o=void 0;try{for(var a,l=nQ.A.keys().filter(function(e){return e.startsWith(n4)})[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value,c=nQ.A.get(u);if("number"==typeof c&&c<Date.now()){var s=u.split(":")[1];nQ.A.remove(n3(s)),nQ.A.remove(n5(s))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}),n2=(0,ea.eU)(function(e){return!!e(n0)}),n4="popup-id-ttl:";function n5(e){return"".concat("popup-id-data:").concat(e)}function n3(e){return"".concat(n4).concat(e)}var n6=(0,ea.eU)(function(e){var n=e(nh),t={};e(e2).forEach(function(n){t[n.paneId]=e(n.dataAtom)});var r=e(nT);return{layout:n,data:t,agent:(null==r?void 0:r.type)==="sidebar"?{width:r.width}:void 0}}),n8=(0,ea.eU)(null),n7=(0,ea.eU)(null),n9=(0,ea.eU)(null),te=(0,ea.eU)(null,function(e,n,t){return(0,nZ._)(function(){var r,i,o,a,l,u,c;return(0,nJ.YH)(this,function(s){switch(s.label){case 0:var d;if((r=e(n7))&&!r.retry||r&&Date.now()-r.timestamp<6e4||!e(nS)||(i=e(n6),o=t.replId,a=e(n8),!t.force&&nl()(a,i)))return[2];if(l=e(n0))return n(n1,{popupId:l,state:i}),n(n8,i),[2];return n(n9,u=(0,nq.A)()),[4,(d=i,(0,nZ._)(function(){var e,n;return(0,nJ.YH)(this,function(t){switch(t.label){case 0:n=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,null===nX.V||void 0===nX.V?void 0:nX.V.mutate({mutation:W,variables:{input:{replId:o,state:d}}})];case 2:return n=t.sent(),[3,4];case 3:return t.sent(),[2,{success:!1,retry:!0}];case 4:if((null==n||null==(e=n.data)?void 0:e.setReplLayoutState.__typename)==="Repl")return[2,{success:!0,retry:void 0}];return[2,{success:!1,retry:!1}]}})})())];case 1:if(c=s.sent(),e(n9)!==u)return[2];if(n(n9,null),c.retry)return n(n7,{timestamp:Date.now(),retry:!0}),[2];if(!c.success)return n(n7,{timestamp:Date.now(),retry:!1}),[2];return n(n8,i),[2]}})})()}),tn=(0,ea.eU)(null,function(e,n,t){var r=t.data,i=t.layout,o=t.type;Object.entries(r).forEach(function(t){var r=(0,u._)(t,2),i=r[0],o=r[1],a=e1(i);n(a,(0,eK.jM)(e(a),function(e){e.isCommitted=!0})),n(e(a).dataAtom,o)}),n(nh,i),n(nB,i),n(nI,o),n(n8,e(n6))}),tt=(0,ea.eU)(!1),tr=(0,ea.eU)(function(e){return e(tt)?e(nn):null}),ti=(0,ea.eU)(null,function(e,n,t){n(nt,t),n(tt,!0)}),to=(0,ea.eU)(null,function(e,n,t){n(tt,!0);var r=eU(e(nh),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(nY,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(nY,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(nt,o)}),ta=(0,ea.eU)(null,function(e,n){e(n2)||n(tt,!1)}),tl=(0,ea.eU)(null,function(e,n,t){e(tr)===t?n(ta):n(ti,t)}),tu=(0,ea.eU)(null,function(e,n,t){var r=eU(e(nh),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(nY,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(nY,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(tl,o)}),tc=(0,ea.eU)(function(e){var n=e(e9),t=n.width+n.x,r=-n.x;if(e(eV)){var i=e(nM);return{x:r,width:t,y:i,height:n.height-i}}return{x:r,width:t,y:-n.y,height:n.height+n.y}}),ts=(0,ea.eU)(function(e){var n=e(e7),t=e(tc);return{x:t.x,y:t.y,width:t.width,height:n}}),td=(0,ea.eU)(function(e){var n=e(e7),t=e(tc);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}),tp=t(16182),tf=t.n(tp),th=(0,ea.eU)(null,function(e,n,t){var r=eU(e(nh),t);if(!r)return null;n(nt,r.panes[r.activeIndex])}),tg=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=eR(r,t);if(!i)throw Error("Expected pane");var o=!i.paneGroup.panes.some(function(e){return e!==t}),a=t===e(nn),l=eO(r,t),u=(0,eK.jM)(r,function(e){try{eW(e,t)}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});if(n(nB,u),o&&e(tt)&&!e(n2)&&n(tt,!1),a&&(o||n(th,i.paneGroup.id),o&&l)){do"split"===l.type&&(l=l.children[0]);while("paneGroup"!==l.type);n(th,l.id)}}),tm=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=eR(r,t),o=null==i?void 0:i.paneGroup.panes.filter(function(e){return e!==t});if(null==o?void 0:o.length){var a=(0,eK.jM)(r,function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var u=a.value;eW(e,u)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});n(nB,a)}}),tv=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=eR(r,t);i&&n(nB,(0,eK.jM)(r,function(e){var n=!1,r=!0,o=!1,a=void 0;try{for(var l,u=i.paneGroup.panes[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;n&&eW(e,c),c===t&&(n=!0)}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}))}),tw=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=eU(r,t.paneGroupId);if(!i){var o=Error("Expected pane group");throw n(nY,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,eK.jM)(r,function(e){try{i.panes.forEach(function(n){eW(e,n)})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),e}});e(tt)&&!e(n2)&&n(tt,!1),n(nB,a)}),ty=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=eR(r,t.paneId);if(!i){var o=Error("Expected relativeToPane");throw n(nY,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=(0,nq.A)();n(e(e1(a)).dataAtom,{type:"commands",data:{autoFocus:!!t.autoFocus}});var l=(0,eK.jM)(r,function(e){try{eG(e,{id:(0,nq.A)(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),e}});n(nB,l),n(nt,a)}),tb=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=(0,nq.A)();n(e(e1(i)).dataAtom,t.pane),(0,ne.NM)(t.pane)&&n(nr,i);var o=(0,eK.jM)(r,function(e){try{eG(e,{id:(0,nq.A)(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),e}});return n(nB,o),i}),tx=(0,ea.eU)(null,function(e,n,t){var r=e(nh);n(nB,(0,eK.jM)(r,function(e){eq(e,{leftPath:t.leftPath,percent:t.percent})}))}),t_=t(843),tS=(0,ea.eU)(null,function(e,n,t){if(0===t.panes.length){var r=Error("Expect at least one pane");throw n(nY,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(nh),o=t.panes.map(function(){return(0,nq.A)()}),a=(0,eK.jM)(i,function(e){try{eG(e,{id:(0,nq.A)(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),e}});if(n(nB,a),t.panes.forEach(function(t,r){var i=o[r];n(e(e1(i)).dataAtom,t),(0,ne.NM)(t)&&n(nr,i);var a=(0,ne.gG)(t.type)?e(e2).find(function(n){return e(n.dataAtom).type===t.type&&n.paneId!==i}):null;a&&n(tg,a.paneId)}),t.commit){var l=!0,u=!1,c=void 0;try{for(var s,d=o[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(nr,p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}return t.makeActive&&n(nt,o[0]),o}),tY={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},tA=(0,ea.eU)(null,function(e,n,t){n(tb,{pane:t.pane,relativeTo:["tiling"],placement:tY[t.edge]})}),tI=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=(0,nq.A)(),o=(0,nq.A)(),a=(0,eK.jM)(r,function(e){try{eG(e,{id:o,panes:[i],isFloating:!0,rect:t.rect})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),e}});return n(nB,a),n(e(e1(i)).dataAtom,t.pane),(0,ne.NM)(t.pane)&&n(nr,i),t.makeActive&&(n(nt,i),t.makeModal&&n(t_.LY,o)),i}),tk=(0,ea.eU)(null,function(e,n,t){var r=t.paneId,i=t.activate,o=e(nh);if("tile"===e(e1(r)).type?n(nB,(0,eK.jM)(o,function(e){try{!function(e,n){var t=eR(e,n.paneId);if(t){var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map(function(e,n){return r.slice(0,n+1)}),o=!0,a=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,d=eD(e,s);if(!d)throw Error("Expected node");if("floatingPaneGroup"===d.type)throw Error("Expected tiled pane");if(1!==s.length){var p=s[s.length-1];if("number"!=typeof p)throw Error("Expected number");var f=eD(e,eA(s));if((null==f?void 0:f.type)!=="split")throw Error("Expected split");var h=f.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var g=p===f.children.length-1,m=g?(0,eE._)(s.slice(0,-1)).concat([p-1]):s,v=g?f.children[p-1].percent-(h-d.percent):h;eq(e,{leftPath:m,percent:v})}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(e){throw n(nY,{error:e,origin:"Layout: revealPaneAtom/revealTiledPane"}),e}})):n(nB,(0,eK.jM)(o,function(e){try{!function(e,n){var t=eR(e,n.paneId);if(t){var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}}(e,{paneId:r,minWidth:200,minHeight:140})}catch(e){throw n(nY,{error:e,origin:"Layout: revealPaneAtom/revealFloatingPane"}),e}})),!i){var a=eR(o,r),l=e(nn);if(!a)throw Error("Expected pane");if(!l)return;var u=eR(o,l);if(!u)throw Error("Expected active pane");if(u.paneGroup.id!==a.paneGroup.id)return}n(nt,r)}),tE=(0,ea.eU)(null),tC=(0,ea.eU)(null),tD=(0,el.mg)(tC,function(e){return null!==e}),tR=(0,ea.eU)(null,function(e,n,t){n(tC,t),requestAnimationFrame(function(){n(tC,null)})}),tF=(0,ea.eU)(null),tU=(0,el.mg)(tF,Boolean),tP=(0,ea.eU)(null,function(e,n,t){switch(t.type){case"start":var r=e(nT);if((null==r?void 0:r.type)!=="sidebar")return;n(tF,{startWidth:r.width});break;case"update":var i=e(tF);if(!i)return;var o=e(nO),a=i.startWidth+t.moveDelta.x*("filetree-agent"===o?-1:1),l=e(e9).width,u=.6-Math.max(0,l-1e3)/5e3,c=l*u;n(nT,function(e){return(0,eK.jM)(e,function(e){(null==e?void 0:e.type)==="sidebar"&&(a<300?e.width=300-a>150?0:300:a>c?e.width=c:e.width=a)})}),n(nB,e(nh));break;case"end":var s=e(nT);if((null==s?void 0:s.type)!=="sidebar")return;var d=e(tF);if(n(tF,null),s.width>0&&s.width<300&&d){var f={width:s.width}.width>d.startWidth;n(tO,(0,p._)({type:"sidebar"},f?{width:450}:{width:300}))}}}),tO=(0,ea.eU)(null,function(e,n,t){n(tR,{headers:new Map(e(eX).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eZ).map(function(e){return[e,{snappiness:400}]}))}),n(nT,t),n(nB,e(nh))}),tT=(0,ea.eU)(null,function(e,n,t){n(tO,{type:"sidebar",width:450*!!t})}),tL=(0,el.mg)(nT,function(e){return(null==e?void 0:e.type)==="sidebar"&&0===e.width}),tM=(0,ea.eU)(null,function(e,n){n(tO,{type:"sidebar",width:450})}),tG=(0,ea.eU)(null,function(e,n,t){if(0===t.panes.length)return[];var r=e(nh),i=t.panes.map(function(){return(0,nq.A)()}),o=(0,eK.jM)(r,function(e){try{eH(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),e}});return n(nB,o),t.panes.forEach(function(r,o){var a=i[o];n(e(e1(a)).dataAtom,r);var l=(0,ne.gG)(r.type)?e(e2).find(function(n){return e(n.dataAtom).type===r.type&&n.paneId!==a}):null;l&&n(tg,l.paneId),(t.commit||(0,ne.NM)(r))&&n(nr,a)}),t.activate&&n(tk,{paneId:(0,u._)(i,1)[0],activate:!0}),i}),tN=(0,ea.eU)(null,function(e,n,t){var r=t.pane,i=t.activate,o=t.commit,a=t.placement;if("agentChat"===r.type&&e(eV)){n(tT,!0);var l,c=e(tE),s=null==(l=r.data)?void 0:l.sessionId;null==c||c.setSessionId(null!=s?s:null),null==c||c.focusInput();return}var d=e(nh);if(!d.tiling){var p=n(tb,{pane:r,relativeTo:["tiling"],placement:"replace"});return i&&n(nt,p),p}if("after"===a.type){var f=eR(d,a.paneId);if(f){var h=(0,u._)(n(tG,{panes:[r],paneGroupId:f.paneGroup.id,index:f.index+1,activate:i}),1)[0];return i&&n(nt,h),h}}if("secondary"===a.type&&a.relativeTo){var g=eO(d,a.relativeTo);if(g){if("paneGroup"===g.type){var m=(0,u._)(n(tG,{panes:[r],paneGroupId:g.id,activate:i}),1)[0];return i&&n(nt,m),m}var v=n(tb,{pane:r,relativeTo:a.relativeTo,placement:"rightOf"});return i&&n(nt,v),v}var w=eR(d,a.relativeTo);if((null==w?void 0:w.paneGroup.type)==="floatingPaneGroup"){var y=e(e1(a.relativeTo)),b=e(y.rectAtom);return n(tI,{rect:{x:b.x+b.width,y:b.y,width:b.width,height:b.height},pane:r,makeActive:i})}}var x=n(tb,{pane:r,relativeTo:["tiling"],placement:"rightOf"});return i&&n(nt,x),o&&n(nr,x),x}),tH=t(49555),tz=(0,ea.eU)(null,function(e,n,t){var r;n(e(e1(t.paneId)).dataAtom,t.pane),(t.makeActive||t.reveal)&&n(tk,{paneId:t.paneId,activate:null!=(r=t.makeActive)&&r}),(t.commit||(0,ne.NM)(t.pane))&&n(nr,t.paneId)}),tW=function(e){return e.EXACT="EXACT",e.FUZZY="FUZZY",e.NONE="NONE",e}({});function tB(e,n){return(null==e?void 0:e.ports)||(null==n?void 0:n.ports)?(null==e?void 0:e.ports)&&!(null==n?void 0:n.ports)||!(null==e?void 0:e.ports)&&(null==n?void 0:n.ports)?"FUZZY":(null==e?void 0:e.ports)&&(null==n?void 0:n.ports)&&e.ports.port!==n.ports.port?"NONE":(null==e?void 0:e.ports)&&(null==n?void 0:n.ports)&&e.ports.port===n.ports.port?e.ports.path===n.ports.path?"EXACT":"FUZZY":"NONE":"EXACT"}var tj=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=eR(r,t);if(!i){var o=Error("Expected selectedPane");throw n(nY,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}n(e8(i.paneGroup.id),function(e){return(0,eK.jM)(e,function(e){e.activeIndex=i.index})});var a=!0,l=!1,u=void 0;try{for(var c,s=i.paneGroup.panes[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value,p=e1(d);n(p,function(e){return(0,eK.jM)(e,function(e){e.isHidden=e.paneId!==t})})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}n(nh,(0,eK.jM)(r,function(e){try{var r=eR(e,t);if(!(null==r?void 0:r.paneGroup))throw Error("Expected pane group");var i=r.paneGroup,o=i.panes.indexOf(t);if(-1===o)throw Error("Expected index");i.activeIndex=o}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),e}})),0===e(e(e1(t)).rectAtom).width?n(tk,{paneId:t,activate:!0}):n(nt,t)}),t$=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=eF(r,"topRight"),o=eF(r,"topLeft");if(!i||!o||!r.tiling){var a=n(tb,{pane:t,relativeTo:["tiling"],placement:"replace"});n(nr,a);return}if("paneGroup"===r.tiling.type){var l=n(tb,{pane:t,relativeTo:["tiling"],placement:"rightOf"});n(nr,l);return}if("split"===r.tiling.type&&2===r.tiling.children.length&&"paneGroup"===r.tiling.children[1].type){var u=r.tiling.stacked,c=n(tb,{pane:t,relativeTo:i.path,placement:u?"rightOf":"above"});n(nr,c);return}n(tG,{panes:[t],paneGroupId:i.paneGroup.id,commit:!0})}),tq=(0,ea.eU)(null,function(e,n,t){var r=t.pane,i=t.focusIfExists,o=e(e2).find(function(n){return e(n.dataAtom).type===r.type});if(o){i&&(n(tj,o.paneId),n(nr,o.paneId));return}n(t$,r)}),tK=(0,ea.eU)(null,function(e,n,t){if(!e(e2).find(function(n){var r=e(n.dataAtom);return"webview"===r.type&&tB(t,r.data)!==tW.NONE}))return void n(t$,{type:"webview",data:t})}),tV=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=(0,eK.jM)(r,function(e){var r=eR(e,t.paneId);if(!r){var i=Error("Expected pane");throw n(nY,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=eU(e,t.toPaneGroupId);if(!o){var a=Error("Expected toPaneGroup");throw n(nY,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,u=!o.panes.includes(t.paneId);if(!l||u)try{eW(e,t.paneId),eH(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),u&&n(nr,t.paneId)}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),e}});n(nB,i)}),tZ=(0,ea.eU)(null,function(e,n,t){var r=e(nn);if(r){var i=e(nh),o=eR(i,r);if(o){var a=o.paneGroup,l=eT({relativeTo:r,rects:new Map(e(e2).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t}),u=l?eR(i,l):null;if(u)return void n(tV,{paneId:r,toPaneGroupId:u.paneGroup.id});var c=a.panes.find(function(e){return e!==r});c&&n(nB,(0,eK.jM)(i,function(e){eW(e,r),eG(e,{id:(0,nq.A)(),relativeTo:c,panes:[r],placement:t})}))}}}),tJ=(0,ea.eU)(!1),tX=(0,ea.eU)(null,function(e,n,t){var r=e(ng).map(function(n){return{paneId:n.paneId,path:(0,ne.Vj)(e(n.dataAtom))}}).filter(function(e){return t===e.path}),i=[],o=e(nh),a=(0,eK.jM)(o,function(e){var t=!0,o=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(t=(l=u.next()).done);t=!0){var c=l.value.paneId,s=eR(e,c);if(!s){var d=Error("Expected pane");throw n(nY,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}s.floating||1!==s.paneGroup.panes.length?eW(e,c):i.push(c)}}catch(e){o=!0,a=e}finally{try{t||null==u.return||u.return()}finally{if(o)throw a}}}),l=!0,u=!1,c=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(tz,{paneId:p,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}n(nB,a)}),tQ=(0,ea.eU)(null,function(e,n,t){var r=t.node.path;if(t.eventType===tH.dV.Delete)return void n(tX,r);var i=e(ng).filter(function(n){return(0,ne.Vj)(e(n.dataAtom))===r}),o={type:(0,ne.QY)({path:t.to}),data:{path:t.to}},a=!0,l=!1,u=void 0;try{for(var c,s=i[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value.paneId;n(tz,{paneId:d,pane:o})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}}),t0=(0,ea.eU)(null,function(e,n,t){var r=e(nn),i=e(nh);if(r){var o=eR(i,r);if(o)return void n(tG,{panes:t,paneGroupId:null==o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length})}var a=eF(i,"topLeft");if(a)return void n(tG,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});var l=i.floating.length?i.floating[0]:null;if(l)return void n(tG,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t});n(tS,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),t1=(0,ea.eU)(null,function(e,n){n(t0,[{type:"commands",data:{autoFocus:!0}}])}),t2=(0,ea.eU)(null,function(e,n){var t=e(nn);return!!t&&(n(tg,t),!0)}),t4=(0,ea.eU)(null,function(e,n,t){var r=e(nn);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=eR(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(nh),{paneId:r,dir:t});i&&n(tj,i)}}),t5=(0,ea.eU)(null,function(e,n,t){var r=t.paneId,i=t.pane;n(tz,{paneId:r,pane:i});var o=(0,ne.gG)(i.type)?e(e2).find(function(n){return e(n.dataAtom).type===i.type&&n.paneId!==r}):null;if(o){var a=eR(e(nh),o.paneId);if(!(null==a?void 0:a.floating)&&(null==a?void 0:a.paneGroup.panes.length)===1)return void n(tz,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}});n(tg,o.paneId)}}),t3=(0,ea.eU)(null,function(e,n,t){var r=e(e(e1(t.b)).dataAtom);n(tz,{paneId:t.a,pane:r});var i=eR(e(nh),t.b);if(!(null==i?void 0:i.floating)&&(null==i?void 0:i.paneGroup.panes.length)===1)return void n(t5,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}});n(tg,t.b)}),t6=(0,ea.eU)(null,function(e,n,t){if(e(eV)){var r=e1(t);n(r,function(e){return(0,eK.jM)(e,function(e){e.highlight=!0})}),setTimeout(function(){n(r,function(e){return(0,eK.jM)(e,function(e){e.highlight=!1})})},200)}}),t8=(0,ea.eU)(null,function(e,n,t){var r,i,o=e(nh),a=t.activate,l=void 0===a||a,u=t.update,c=void 0===u||u,s=function(r){return r.paneId===e(nn)&&n(t6,r.paneId),(l||t.reveal)&&n(tj,r.paneId),c&&n(tz,{paneId:r.paneId,pane:t.pane,makeActive:l,reveal:t.reveal}),r.paneId};if("diff"===t.pane.type){var d=e(e2).find(function(n){var r=e(n.dataAtom);return tf()(r,t.pane)});if(d)return s(d)}if("webview"===t.pane.type){var p=e(e2).filter(function(n){return"webview"===e(n.dataAtom).type}),f=p.find(function(n){var r=e(n.dataAtom);return"webview"===r.type&&"webview"===t.pane.type&&tB(r.data,t.pane.data)!==tW.NONE});if(f)return s(f);if(p.length>0)return s(p[0])}var h=e(e2).find(function(n){return e(n.dataAtom).type===t.pane.type});if((0,ne.gG)(t.pane.type)&&h)return s(h);var g=eF(o,"topRight"),m=eF(o,"topLeft"),v=g,w="rightOf";if("agentChat"===t.pane.type||"ghostwriterChat"===t.pane.type?(null==(i=o.tiling)?void 0:i.type)==="paneGroup"?(v=null,w="leftOf"):v=m:(null==(r=o.tiling)?void 0:r.type)!=="paneGroup"||e(nL)||(v=null,w="rightOf"),!v)return n(tS,{panes:[t.pane],placement:w,relativeTo:["tiling"],makeActive:l,commit:t.commit,percent:nV().get(t.pane.type)})[0];var y=v.paneGroup.panes.find(function(n){var t=e(e1(n));if(t.isHidden)return!1;var r=e(t.dataAtom);return!t.isCommitted&&!(0,ne.Dx)(r.type)});if(y)return n(tz,{paneId:y,pane:t.pane,makeActive:l,reveal:t.reveal}),y;var b=!!t.commit||l,x=n(tG,{panes:[t.pane],paneGroupId:v.paneGroup.id,activate:b,commit:t.commit});return t.reveal&&n(tk,{paneId:x[0],activate:b}),x[0]}),t7=t(11257),t9=t(8928),re=t(52424),rn=(0,ea.eU)(!1),rt=(0,ea.eU)(!1),rr=(0,d.createContext)(null);function ri(e){var n,t,r,i=e.children,o=e.savedLayoutState,a=e.isExtension,l=void 0!==a&&a,p=e.isBlankRepl,f=e.popupId,h=e.initialPane,g=e.agentCenteredLayout,m=void 0!==g&&g,v=e.agentLayoutVariation,w=e.agentPosition,y=void 0===w?"leftSidebar":w,b=(0,t9.p)(),x=(0,t7.E)(),_=(n=(0,s.useRouter)(),t=(0,V.Po)(n),r=(0,V.ME)(n,"workspace2"),t&&!r?6:re.c0),S=(0,q.A)(),Y=(0,u._)((0,d.useState)(function(){var e,n,t,r,i,a,u,c,s,d,g,w,Y,A=(0,ea.y$)();A.set(eV,b),b&&A.set(nP,y),A.set(rt,x),A.set(rn,S),A.set(nG,S?_:0);var I=null!=o?o:(n=(e={isExtension:l,isInPopup:!!f,isBlankRepl:p}).codeEditorPath,{data:(r=(t={isExtension:e.isExtension,isInPopup:e.isInPopup,codeEditorPath:n,isBlankRepl:e.isBlankRepl}).isExtension,i=t.isInPopup,u=void 0===(a=t.codeEditorPath)?"":a,c=t.isBlankRepl,s={config:{paneId:(0,nq.A)(),pane:{type:"config",flow:"incompleteConfig"}},codeEditor:{paneId:(0,nq.A)(),pane:{type:u.toLowerCase().endsWith(".md")?"markdown":"codeEditor",data:{path:u}}},output:{paneId:(0,nq.A)(),pane:{type:"runnerOutput"}},shell:{paneId:(0,nq.A)(),pane:{type:"shell"}},commands:{paneId:(0,nq.A)(),pane:{type:"commands",data:{autoFocus:!1}}},ghostwriter:{paneId:(0,nq.A)(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:(0,nq.A)(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:(0,nq.A)(),pane:{type:"docs",data:{url:nK.ik.EXTENSIONS}}}},d={},Object.values(s).forEach(function(e){var n=e.paneId,t=e.pane;d[n]=t}),g={layout:function(e){var n=e.configId,t=e.codeEditorId,r=e.outputId,i=e.shellId,o=e.extensionDevtoolsId,a=e.extensionDocsId,l=e.ghostwriterId,u=e.isExtension,c=e.isInPopup,s=e.isBlankRepl;if(c)return{floating:[],tiling:null};var d=s?[n]:[t],p={type:"split",stacked:!1,percent:100,children:[{id:(0,nq.A)(),percent:55,type:"paneGroup",panes:d,activeIndex:0},{id:(0,nq.A)(),percent:45,type:"paneGroup",panes:[r,i],activeIndex:0}]};return u&&(p={type:"split",stacked:!1,percent:100,children:[{id:(0,nq.A)(),percent:55,type:"paneGroup",panes:d,activeIndex:0},{id:(0,nq.A)(),percent:45,type:"paneGroup",panes:[o,a,i],activeIndex:0}]}),s||(p={type:"split",stacked:!1,percent:100,children:[{id:(0,nq.A)(),percent:40,type:"paneGroup",panes:[l],activeIndex:0},{id:(0,nq.A)(),percent:60,type:"paneGroup",panes:[t],activeIndex:0}]}),{floating:[],tiling:p}}({configId:s.config.paneId,codeEditorId:s.codeEditor.paneId,outputId:s.output.paneId,shellId:s.shell.paneId,commandsId:s.commands.paneId,extensionDevtoolsId:s.extensionDevtools.paneId,extensionDocsId:s.extensionDocs.paneId,ghostwriterId:s.ghostwriter.paneId,isExtension:r,isInPopup:i,isBlankRepl:c}),data:d}).data,layout:g.layout,type:"default"});return f&&(A.set(n0,f),A.set(tt,!0)),(m||"split-with-webview"===v||"split-with-console"===v||"split-with-automations"===v)&&(I=function(e){var n,t,r=e.wsUiSimplification,i=e.variation,o=(0,nq.A)(),a=(0,nq.A)(),l={type:"split-with-console"===i?"runnerOutput":"split-with-automations"===i?"automations":"webview"},u=null!=(n=nV().get("agentChat"))?n:40;if(r)return{data:(0,N._)({},a,l),layout:{floating:[],tiling:{type:"paneGroup",panes:[a],activeIndex:0,id:(0,nq.A)(),percent:100}},type:"default"};var c={tiling:{type:"split",stacked:!1,percent:100,children:[{id:(0,nq.A)(),percent:u,type:"paneGroup",panes:[o],activeIndex:0},{id:(0,nq.A)(),percent:100-u,type:"paneGroup",panes:[a],activeIndex:0}]},floating:[]};return{data:(t={},(0,N._)(t,o,{type:"agentChat"}),(0,N._)(t,a,l),t),layout:c,type:"default"}}({wsUiSimplification:b,variation:v})),A.set(tn,I),void 0!==v&&(A.set(no,"tilingLayout"),A.set(nT,{type:"sidebar",width:null!=(Y=null==o||null==(w=o.agent)?void 0:w.width)?Y:450})),m&&(A.set(no,"centeredVisualPlanner"),A.set(nT,{type:"centered"})),null!=h&&(A.get(e4).some(function(e){return A.get(e.dataAtom).type===(null==h?void 0:h.type)})||A.set(t8,{pane:h,commit:!0})),A}),1)[0];return(0,c.Y)(rr.Provider,{value:Y,children:i})}function ro(){var e=(0,d.useContext)(rr);if(!e)throw Error("Expected store in context");return e}function ra(e){return(0,nj.md)(e,{store:ro()})}function rl(e){return(0,ed._)(e,ro())}var ru=function(e){return(0,nj.Xr)(e,{store:ro()})};function rc(e){return(0,n$.yF)((0,d.useCallback)(function(n){return n(e)},[e]),{store:ro()})}var rs=(0,ea.eU)(null),rd=(0,ea.eU)(null,function(e,n){var t=e(nc);n(rs,{startWidth:t.width,startIsOpen:t.isOpen})}),rp=(0,ea.eU)(function(e){return!!e(rs)}),rf=(0,ea.eU)(null,function(e,n,t){var r=e(rs);if(r){var i=t*("agent-filetree"===e(nO)&&e(eV)?-1:1),o=.6*e(e9).width,a=Math.min(Math.max(r.startWidth+i,0),o),l=i>0;0===a&&l?a=140:!l&&a<140&&140-a>20&&(a=0),n(nc,function(e){return(0,eK.jM)(e,function(e){e.width=a,0===a?e.isOpen=!1:e.isOpen=r.startIsOpen})}),r.startIsOpen&&n(nB,e(nh))}}),rh=(0,ea.eU)(null,function(e,n){var t=e(nc),r=e(rs);t.isOpen||n(nc,function(e){return(0,eK.jM)(e,function(e){var n;e.width=null!=(n=null==r?void 0:r.startWidth)?n:140})}),n(rs,null)}),rg=(0,ea.eU)(function(e){var n=e(nc),t=e(e9),r=e(nM),i=e(eV),o=i?e(e7)+r:e(nG),a=n.width,l=n.isOpen,u=+!!l;if(i){var c=e(nT),s={y:o,width:a,isOpen:l,opacity:u,height:t.height-o},d=e(nO);return c&&"agent-filetree"===d?(0,p._)({x:l?t.width-a-r:t.width},s):(0,p._)({x:l?r:-(a+r)},s)}return{isOpen:l,opacity:u,width:a,height:t.height-r-o-2,x:l?48:-a,y:o}}),rm=(0,ea.eU)(function(e){var n=e(nc),t=e(nM);return n.isOpen?{isOpen:!0,width:t}:{isOpen:!1,width:t}}),rv=t(14229),rw=t(35275),ry=t(39534),rb=t(70764),rx=t(19944),r_=(0,ea.eU)(null),rS=(0,rx.v)(["backgroundColor","borderRadius","zIndex","border","opacity","visibility","width","height","x","y","innerScale","innerOpacity"]),rY=rS.cssVars,rA=rS.styleTokens,rI=(0,el.mg)(r_,function(e){return(0,N._)({},rY.border,(null==e?void 0:e.type)==="detachPreview"&&e.progress<.98?"1px dashed ".concat(ry.LU.foregroundDefault):"1px solid ".concat(ry.LU.accentPrimaryDefault))},nl()),rk=(0,el.mg)(r_,function(e){return null==e?void 0:e.rect},nl()),rE=(0,el.mg)(rk,function(e){var n;return e?(n={},(0,N._)(n,rY.width,e.width+"px"),(0,N._)(n,rY.height,e.height+"px"),n):null},nl()),rC=(0,el.mg)(rk,function(e){var n;return e?(n={},(0,N._)(n,rY.x,e.x+"px"),(0,N._)(n,rY.y,e.y+"px"),n):null},nl()),rD=(0,el.mg)(r_,function(e){var n,t;return e?"detachPreview"===e.type?(n={},(0,N._)(n,rY.zIndex,rw.W.detachPreview.toString()),(0,N._)(n,rY.borderRadius,"100%"),(0,N._)(n,rY.backgroundColor,"transparent"),n):(t={},(0,N._)(t,rY.zIndex,rw.W.dropPreview.toString()),(0,N._)(t,rY.borderRadius,"8px"),(0,N._)(t,rY.backgroundColor,ry.LU.accentPrimaryDimmer),t):null},nl()),rR=(0,el.mg)(r_,function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,N._)(t,rY.opacity,(.5*e.progress).toString()),(0,N._)(t,rY.visibility,"visible"),t):(r={},(0,N._)(r,rY.opacity,"0.2"),(0,N._)(r,rY.visibility,"visible"),r):(n={},(0,N._)(n,rY.opacity,"0"),(0,N._)(n,rY.visibility,"hidden"),n)},nl()),rF=(0,el.mg)(r_,function(e){return(0,N._)({},rY.innerOpacity,(null==e?void 0:e.type)==="detachPreview"?"0.5":"0")},nl()),rU=(0,el.mg)(r_,function(e){return(0,N._)({},rY.innerScale,(null==e?void 0:e.type)==="detachPreview"?e.progress.toString():"1")},nl()),rP=(0,rb.x)({root:[{position:"absolute",pointerEvents:"none",opacity:rA.opacity,width:rA.width,height:rA.height,transform:"translate(".concat(rA.x,", ").concat(rA.y,")"),backgroundColor:rA.backgroundColor,borderRadius:rA.borderRadius,border:rA.border,zIndex:rA.zIndex,visibility:rA.visibility,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(ry.LU.backgroundHighest,")"),opacity:rA.innerOpacity,transform:"scale(".concat(rA.innerScale,")")}]}),rO=(0,d.memo)(function(){var e=(0,d.useRef)(null);(0,rv.d)(e,rl(rC)),(0,rv.d)(e,rl(rE)),(0,rv.d)(e,rl(rI)),(0,rv.d)(e,rl(rD)),(0,rv.d)(e,rl(rR));var n=(0,d.useRef)(null);return(0,rv.d)(n,rl(rF)),(0,rv.d)(n,rl(rU)),(0,c.Y)("div",{ref:e,css:rP.root,children:(0,c.Y)("div",{ref:n,css:rP.inner})})}),rT=(0,ea.eU)(function(e){var n=e(rg),t=e(nO),r=e(nT),i=e(nM);if(r){var o="sidebar"===r.type?r.width:450;switch(t){case"filetree-agent":return{left:n.isOpen?n.width+2*i:i,right:i+o+i};case"agent-filetree":return{right:n.isOpen?n.width+2*i:i,left:i+o+i}}}return{right:i,left:n.isOpen?n.width+i:i}}),rL=(0,ea.eU)(null,function(e,n){n(r_,{type:"dropPreview",rect:e(rG)})}),rM=(0,ea.eU)(null,function(e,n,t){n(r_,null),n(tJ,!1),n(tS,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),rG=(0,ea.eU)(function(e){if(e(n2))return e(tc);var n=e(nG),t=e(e9),r=e(nc),i=r.isOpen?r.width:0,o=e(nM);if(e(eV)){var a=e(e7),l=e(rT),u=a+n+o;return{x:l.left,y:u,width:t.width-l.left-l.right,height:t.height-u-o}}var c=Math.round(i+o)+48-o,s=t.width-i-2*o-48;return i>0?c+=o:s+=o,{x:c,y:n,width:s,height:t.height-n-o}});function rN(){var e=(0,f._)(["\n  query FiletypeAssociations {\n    currentUser {\n      id\n      filetypeAssociations\n    }\n  }\n"]);return rN=function(){return e},e}function rH(){var e=(0,f._)(["\n  mutation SetFiletypeAssociation($input: FiletypeAssociationInput!) {\n    setFiletypeAssociation(input: $input) {\n      ... on UserFiletypeAssociations {\n        associations\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return rH=function(){return e},e}var rz={},rW=(0,h.J1)(rN()),rB=(0,h.J1)(rH()),rj=(0,ea.eU)({}),r$=(0,ea.eU)(null),rq=(0,ea.eU)(null,function(e,n,t){return(0,nZ._)(function(){var r,i,o,a,l,u;return(0,nJ.YH)(this,function(c){switch(c.label){case 0:r=e(rj),n(rj,(0,eK.jM)(r,function(e){if(!t.newAssociation)return void delete e[t.fileExtension];e[t.fileExtension]={extensionId:t.newAssociation.extensionId,fileHandlerId:t.newAssociation.fileHandlerId}})),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,null===nX.V||void 0===nX.V?void 0:nX.V.mutate({mutation:rB,variables:{input:t}})];case 2:if((null==(a=c.sent())||null==(o=a.data)||null==(i=o.setFiletypeAssociation)?void 0:i.__typename)!=="UserFiletypeAssociations")throw Error("Failed to set Filetype Association: "+(null==a||null==(u=a.data)||null==(l=u.setFiletypeAssociation)?void 0:l.message));return[3,4];case 3:return c.sent(),n(rj,r),[3,4];case 4:return[2]}})})()}),rK=1920/1020,rV=(0,ea.eU)(null,function(e,n,t){var r,i,o,a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{location:"bottomRight"},u=e(e2).find(function(n){return e(n.dataAtom).type===t.type});if(u){n(tz,{paneId:u.paneId,pane:t}),l.commit&&n(nr,u.paneId);return}var c=e(e9),s=e(e7),d=n(tI,{pane:t,rect:"bottomRight"===l.location?{width:r=Math.min(600,c.width),height:i=Math.min(600/rK+s,c.height),x:c.width-r,y:c.height-i}:(a=Math.min((o=Math.min(600,c.width))/rK+s,c.height),{width:o,height:a,x:(c.width-o)/2,y:(c.height-a)/2})});l.commit&&n(nr,d)}),rZ=(0,ea.eU)(null,function(e,n,t){e(e2).filter(function(n){return e(n.dataAtom).type===t}).forEach(function(e){return n(tg,e.paneId)})}),rJ=(0,ea.eU)(null),rX=(0,ea.eU)(null,function(e,n,t){if("end"===t.type)return void n(rJ,null);if("update"===t.type){var r=e(rJ);if(!r){var i=Error("Expected tilingResize");throw n(nY,{error:i,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),i}var o=r.stacked,a=r.leftPath,l=r.startPercent,u=r.resizeDistance,c=r.initialLayout,s=r.snapPercent,d=l+(o?t.moveDelta.y:t.moveDelta.x)/u*100;if(e(eV)){var p=e(e9);d/100*p.width<240&&(d=240/p.width*100)}n(nB,(0,eK.jM)(c,function(e){eq(e,{leftPath:a,percent:d,snapPercent:s})}));return}var f=e(nh),h=t.stacked?window.innerHeight:window.innerWidth,g=eD(f,t.leftPath);if(!g||!eI(g)){var m=Error("Expected left node");throw n(nY,{error:m,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),m}var v=eA(t.leftPath),w=g.percent,y=null;try{y=function(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=eD(e,t);if(!r||"split"!==r.type)throw Error("Expected split node");for(var i=100,o=eA(t);o.length;){var a=eD(e,o);if(!a)break;o=eA(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=eD(n,t);if((null==o?void 0:o.type)!=="split")throw Error("Expected split node");var a=r.size,l=r.gap,u=r.headerHeight,c=r.inset,s=void 0===c?{top:0,bottom:0,left:0,right:0}:c,d=o.children.length,p=o.stacked?l*(d-1)+u*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-p)}({splitPath:v,layout:f,tilingOptions:e(nH)})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),e}if(null===y)throw Error("Expected resizeDistance");n(rJ,{stacked:t.stacked,leftPath:t.leftPath,startPercent:w,resizeDistance:y,snapPercent:30/h*100,initialLayout:f})});function rQ(e){return(0,K.A)(function(){return e6(e)},[e])}function r0(e){var n=rQ(e);return(0,K.A)(function(){return(0,el.mg)(n,function(e){return e.rect})},[n])}function r1(e){return(0,K.A)(function(){return(0,ea.eU)(function(n){var t=n(rJ);return!!t&&e===nC({leftPath:t.leftPath})})},[e])}function r2(e){var n=rQ(e);return(0,K.A)(function(){return(0,el.mg)(n,function(e){return e.stacked})},[n])}var r4=t(93629),r5={width:100,height:200},r3={width:200,height:100},r6=function(e){var n=e.container,t=e.sidebarWidths,r=e.gap,i=n.width-t.left-t.right,o=n.width-r3.width/2-i/2,a=(n.height-r)/2-r5.height/2;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:o,y:0,width:r3.width,height:r3.height}},below:{visible:!1,rect:{x:o,y:n.height-r3.height-r,width:r3.width,height:r3.height}},leftOf:{visible:!1,rect:{x:t.left+r,y:a,width:r5.width,height:r5.height}},rightOf:{visible:!1,rect:{x:n.width-r5.width-r,y:a,width:r5.width,height:r5.height}}}},r8=["above","rightOf","leftOf","below","middle"],r7=(0,ea.eU)(null),r9=(0,ea.eU)(function(e){var n=e(r7);if(!n)return null;var t=eU(e(nh),n.paneGroupId);return t&&t.panes[t.activeIndex]||null}),ie=(0,el.mg)(r7,function(e){return null==e?void 0:e.dropPoints}),it=(0,ea.eU)(null,function(e,n,t){if(!e(tt)){var r=e(e9),i=eU(e(nh),t.paneGroupId);if(!i){var o=Error("Expected paneGroup");throw n(nY,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(e1(i.panes[i.activeIndex])),l=e(a.rectAtom),u=e(e7),c={x:l.x,y:l.y-u,width:l.width,height:l.height+u},s=t.mouse.x-(r.x+l.x),d=e(nM),p=new Map(e(eX).filter(function(e){return e!==i.id}).map(function(e){return[e,{snappiness:400}]}));n(tR,{panes:new Map(e(eZ).filter(function(e){return e!==a.paneId}).map(function(e){return[e,{snappiness:400}]})),headers:p}),n(r7,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:c,movedAtAll:!1,dropPoints:"floating"===a.type?r6({container:r,sidebarWidths:e(rT),gap:d}):null})}}),ir=(0,ea.eU)(null,function(e,n,t){if(!e(tt)){var r=e(r7);if(!r)return void n(r_,null);var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(nh),c=eU(e(nh),o);if(!c){var s=Error("Expected paneGroup");throw n(nY,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),s}var d=c.panes[c.activeIndex],p=eR(l,d);if(!p){var f=Error("Expected pane");throw n(nY,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var h=e1(d),g=e8(p.paneGroup.id),m=e(e7),v=Math.max(Math.abs(i.x),Math.abs(i.y)),w=v>=50,y=v>0;if(w&&!p.floating){var b=e(h).rectAtom,x=e(b),_=(0,eK.jM)(l,function(e){try{ej(e,{paneGroupPath:p.paneGroupPath,rect:{x:x.x+i.x,y:x.y-m+i.y,width:x.width,height:x.height+m}})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),e}});n(tR,{headers:new Map(e(eX).filter(function(e){return e!==p.paneGroup.id}).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eZ).filter(function(e){return e!==d}).map(function(e){return[e,{snappiness:400}]}))}),n(nB,_),n(io,t.mouse);return}var S=e(g),Y=e(h);c.id===e(t_.LY)&&n(t_.LY,null);var A="floating"===r.startType?eM({x:a.x+i.x,y:a.y+i.y,width:a.width,height:a.height},{inside:e(e9),minVisibleX:2*m,minVisibleY:m}):{x:a.x+i.x,y:a.y+i.y},I=A.x,k=A.y;if(n(S.rectAtom,function(e){return(0,eK.jM)(e,function(e){e.x=I,e.y=k})}),n(Y.rectAtom,function(e){return(0,eK.jM)(e,function(e){e.x=I,e.y=k+m})}),!w&&!p.floating){var E=r.startPoint,C=1-.7*(1-Math.sqrt(1-Math.pow(v/50,2)));n(r_,{type:"detachPreview",rect:{x:E.x-50,y:E.y-50,width:100,height:100},progress:v/50}),n(r7,(0,eK.jM)(r,function(e){e.scale=C,e.movedAtAll=e.movedAtAll||y}));return}var D=e(nM);if(r.dropPoints)return void n(r7,function(n){return(0,eK.jM)(n,function(n){(null==n?void 0:n.dropPoints)&&function(e,n){var t=n.container,r=n.gap,i=n.sidebarWidths,o=n.headerHeight,a=n.paneRects,l=n.mouse,c={x:l.x-t.x,y:l.y-t.y},s=null,d=null;if(a.length){var p=!0,f=!1,h=void 0;try{for(var g,m=a[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=(0,u._)(g.value,2),w=v[0],y=v[1],b={x:y.x-r/2,y:y.y-r/2-o,width:y.width+r,height:y.height+r+o};if(nk(l,b)){s=w,d=y;break}}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}if(e.middle.visible=!!d,d){var x={width:Math.min(100,d.width),height:Math.min(100,d.height)};e.middle.paneId=s,e.middle.rect={x:d.x+d.width/2-x.width/2,y:d.y-o+(d.height+o)/2-x.height/2-r,width:x.width,height:x.height+o/2}}}else{var _={x:t.x+i.left+r,y:t.y,width:t.width-r-i.left-i.right-r,height:t.height},S={width:Math.min(100,_.width),height:Math.min(100,_.height)};e.middle.rect={x:_.x+_.width/2-S.width/2,y:_.height/2-S.height/2,width:S.width,height:S.height},e.middle.visible=!0}var Y=null,A=!0,I=!1,k=void 0;try{for(var E,C=r8[Symbol.iterator]();!(A=(E=C.next()).done);A=!0){var D=E.value,R=e[D].rect;if(nk(c,R)){Y=D;break}}}catch(e){I=!0,k=e}finally{try{A||null==C.return||C.return()}finally{if(I)throw k}}var F=!0,U=!1,P=void 0;try{for(var O,T=r8[Symbol.iterator]();!(F=(O=T.next()).done);F=!0){var L=O.value;e[L].visible=!Y||L===Y}}catch(e){U=!0,P=e}finally{try{F||null==T.return||T.return()}finally{if(U)throw P}}}(n.dropPoints,{paneRects:e(ii),container:e(e9),sidebarWidths:e(rT),headerHeight:e(e7),gap:D,mouse:t.mouse})})});if(!p.floating)throw Error("Expected floating pane");n(io,t.mouse)}}),ii=(0,ea.eU)(function(e){return e(e2).filter(function(e){return"tile"===e.type&&!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})}),io=(0,ea.eU)(null,function(e,n,t){var r=e(e7),i=e(e9),o=e(ii),a=e(nM),l=function(e){var n=e.views,t=e.mouse,r=e.container,i=e.headerHeight,o=e.sidebarWidths,a=e.gap,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,s=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,u._)(p.value,2),g=h[0],m=h[1],v={x:m.x,y:m.y-i,width:m.width,height:i},w={x:v.x-a/2,y:v.y-a/2,width:v.width+a,height:i+a/2};if(nk(l,w))return{dropPreview:v,drop:{type:"insert",paneId:g}};var y={x:m.x,y:m.y-i,width:m.width,height:m.height+i},b={x:y.x-a/2,y:y.y-a/2,width:y.width+a,height:y.height+a};if(nk(l,b)){var x=nE(l,y);return{dropPreview:x.rect,drop:{type:"split",relativeTo:g,placement:x.placement}}}}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}var _=nE(l,{x:o.left,y:0,width:r.width-o.left-o.right,height:r.height});return{dropPreview:_.rect,drop:{type:"split",relativeTo:["tiling"],placement:_.placement}}}({views:o,container:i,mouse:t,headerHeight:r,sidebarWidths:e(rT),gap:a}),c=l.drop;n(r_,{type:"dropPreview",rect:l.dropPreview}),n(r7,function(e){return(0,eK.jM)(e,function(e){e&&(e.drop=c,e.movedAtAll=!0)})})}),ia=(0,ea.eU)(null,function(e,n,t){var r=t.delta;if(!e(tt)){n(r_,null);var i=e(r7);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,u=e(nh),c=eU(e(nh),o);if(!c){var s=Error("Expected paneGroup");throw n(nY,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=c.panes[c.activeIndex],p=eR(u,d);if(!p){var f=Error("Expected pane");throw n(nY,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}var h=(0,eK.jM)(u,function(t){if(!a&&p.floating&&"floating"===i.startType){var o=eD(t,p.paneGroupPath);if((null==o?void 0:o.type)!=="floatingPaneGroup")return;var u=e(e7),c=eM({x:l.x+r.x,y:l.y+r.y,width:l.width,height:l.height},{inside:e(e9),minVisibleX:2*u,minVisibleY:u}),s=c.x,f=c.y;o.rect.x=s,o.rect.y=f;return}if(a){if(p.paneGroup.panes.forEach(function(e){n(nr,e)}),"split"===a.type){if(null===t.tiling){var h=(0,nq.A)();try{eG(t,{id:(0,nq.A)(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=eR(e,t);if(!o)throw Error("Expected fromPane");var a=o.paneGroup,l=a.panes,u=a.activeIndex;eB(e,o.paneGroupPath),eG(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:u})}(t,{from:d,to:a.relativeTo,placement:a.placement})}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}return}var g=eR(t,a.paneId);p.paneGroup.panes.forEach(function(e){e$(t,{paneId:e,paneGroupPath:(null==g?void 0:g.paneGroupPath)||["tiling"],activate:!1})})}});n(r7,null),n(nB,h),(null==a?void 0:a.type)==="insert"&&n(tj,d)}}}),il=(0,ea.eU)(function(e){var n=e(nT);if(!n)return!0;switch(n.type){case"sidebar":return 0===n.width;case"centered":return!1}}),iu=(0,ea.eU)(function(e){var n=e(nT);if(!n)return null;switch(n.type){case"sidebar":return e(il)?"collapsed":"sidebar";case"centered":return n.type}}),ic=(0,ea.eU)(function(e){var n=e(nT);if(!n)return{x:0,y:0,width:0,height:0};var t=e(e7),r=e(e9),i=e(nO),o=t+e(nM),a=r.height-o;switch(n.type){case"sidebar":var l=e(nM),u={width:n.width,height:a,y:o};switch(i){case"filetree-agent":return(0,p._)({x:r.width-n.width-l},u);case"agent-filetree":return(0,p._)({x:l},u);default:return{x:0,y:0,width:0,height:0}}case"centered":return{x:0,y:o,width:r.width,height:a}}});function is(e){var n=e.rect,t=e.insets,r=e.agentFiltreeOrder,i=e.gap,o=e.paneGroupId,a=e.topLeftPaneGroup,l=e.topRightPaneGroup,u=e.sidebar,c=e.agent,s=e.agentRect,d=e.container,p=n.x,f=n.width;if(t.left>0&&(null==a?void 0:a.id)===o&&(p=t.left,"filetree-agent"===r?u.isOpen&&u.x+u.width+i>=t.left&&(p=n.x):"agent-filetree"===r&&(null==c?void 0:c.type)==="sidebar"&&s.x+s.width>t.left&&(p=n.x),f=n.width-(p-n.x)),t.right>0&&(null==l?void 0:l.id)===o){if("agent-filetree"===r){var h=d.width-(u.x+u.width),g=u.isOpen?h+u.width+i:0;g<=t.right&&(f-=t.right-(g-i))}else if("filetree-agent"===r&&(null==c?void 0:c.type)==="sidebar"){var m=c.width+i+i;m<=t.right&&(f-=t.right-m)}}return{x:p,width:f}}var id=(0,ea.eU)({left:0,right:0}),ip=(0,ea.eU)(null,function(e,n,t,r){n(id,function(e){return(0,r4._)((0,p._)({},e),(0,N._)({},t,r))}),n(nB,e(nh))}),ih=(0,ea.eU)(function(e){var n,t,r=e(nh),i=e(to),o={topLeft:null==(n=eF(r,"topLeft"))?void 0:n.paneGroup,topRight:null==(t=eF(r,"topRight"))?void 0:t.paneGroup};if(!o.topLeft||!o.topRight)return{left:0,right:0,leftPaneWidth:0,rightPaneWidth:0};if(i===o.topLeft||i===o.topRight){var a=e(td).width;return{left:a,right:a,leftPaneWidth:a,rightPaneWidth:a}}var l={left:e(e8(o.topLeft.id)),right:e(e8(o.topRight.id))},u={left:e(l.left.rectAtom),right:e(l.right.rectAtom)},c={insets:e(id),agentFiltreeOrder:e(nO),gap:e(nM),topLeftPaneGroup:o.topLeft,topRightPaneGroup:o.topRight,sidebar:e(rg),agent:e(nT),agentRect:e(ic),container:e(e9)},s={left:is((0,r4._)((0,p._)({},c),{rect:u.left,paneGroupId:o.topLeft.id})),right:is((0,r4._)((0,p._)({},c),{rect:u.right,paneGroupId:o.topRight.id}))};return{leftPaneWidth:u.left.width,left:s.left.width,rightPaneWidth:u.right.width,right:s.right.width}});function ig(e){var n=ib(e);return(0,K.A)(function(){return(0,ea.eU)(function(t){if(t(n))return t(ts);var r,i,o=t(nh),a=t(e8(e)),l=t(a.rectAtom);if(!t(eV))return l;var u={topLeft:null==(r=eF(o,"topLeft"))?void 0:r.paneGroup,topRight:null==(i=eF(o,"topRight"))?void 0:i.paneGroup},c=t(nM),s=is({rect:l,insets:t(id),agentFiltreeOrder:t(nO),gap:c,paneGroupId:e,topLeftPaneGroup:u.topLeft||null,topRightPaneGroup:u.topRight||null,sidebar:t(rg),agent:t(nT),agentRect:t(ic),container:t(e9)});if("floating"===a.path[0]){var d=l.y-c,f=l.height+c+1;return(0,r4._)((0,p._)({},l,s),{y:d,height:f})}return(0,p._)({},l,s)})},[n,e])}function im(e){var n=iv(e),t=ig(e);return(0,K.A)(function(){var r=(0,ea.eU)(function(r){var i,o,a,l=r(t),u=r(n)||(null==(a=r(tC))||null==(o=a.headers)||null==(i=o.get(e))?void 0:i.dropState)?"transform":"top-left";return{x:l.x,y:l.y,positioning:u}});return(0,el.mg)(r,function(e){return e},nl())},[n,e,t])}function iv(e){return(0,K.A)(function(){return(0,ea.eU)(function(n){var t=n(r7);return t&&e===t.paneGroupId?t:null})},[e])}function iw(e){var n=iv(e);return(0,K.A)(function(){return(0,el.mg)(n,function(e){var n;return null!=(n=null==e?void 0:e.scale)?n:1})},[n])}function iy(e){return(0,K.A)(function(){return(0,el.mg)(nh,function(n){return eU(n,e)})},[e])}function ib(e){var n=iy(e);return(0,K.A)(function(){return(0,ea.eU)(function(e){if(e(n2))return!0;if(!e(tt))return!1;var t=e(n);if(!t)return!1;var r=e(nn);return!!r&&t.panes.includes(r)})},[n])}function ix(e){var n=e8(e);return(0,K.A)(function(){return(0,el.mg)(n,function(e){return"floating"===e.path[0]})},[n])}var i_=t(59270),iS=t(81515),iY=(0,ea.eU)(null,function(e,n,t){var r,i=t.path,o=e(nh),a=(0,p._)({},t);if(!a.opener){var l=e(rj),u=(0,iS.QC)(i);if(u){var c=l[u];if(c){var s=e(ny).find(function(e){return e.extension.extensionId===c.extensionId});s&&(a.opener={paneType:"extension",extensionFileHandler:s,supports:function(){return!0}})}}}if(a.newPane)return void n(tA,{pane:iA(a),edge:null!=(r=a.newPaneEdge)?r:"left"});var d=eF(o,"topLeft");if(!d)return void n(tb,{pane:iA(a),relativeTo:["tiling"],placement:"replace"});var f=e(e2).find(function(n){var t,r=e(n.dataAtom);return(0,ne.xS)(r)?i===(0,ne.Vj)(r):!!((null==(t=a.opener)?void 0:t.paneType)==="extension"&&(0,ne.En)(r))&&r.data.filePath===i&&a.opener.extensionFileHandler.extension.installationId===r.data.installationId||"markdown"===r.type&&i===r.data.path});if(f&&!a.newTab){var h=e(f.dataAtom);if((0,ne.xS)(h)||"markdown"===h.type){n(tj,f.paneId),n(tz,{paneId:f.paneId,pane:iA((0,p._)({opener:{paneType:h.type}},a))});return}if((0,ne.En)(h))return void n(tj,f.paneId)}var g=d.paneGroup;if(e(eV)){var m=eF(o,"topRight");m&&(g=m.paneGroup)}if(a.newTab)return void n(tG,{panes:[iA(a)],paneGroupId:g.id,activate:!0,commit:!0,index:g.activeIndex+1});var v=e(e2).find(function(n){return!n.isCommitted&&((0,ne.xS)(e(n.dataAtom))||"markdown"===e(n.dataAtom).type)});if(v){n(tz,{paneId:v.paneId,pane:iA(a)}),n(tj,v.paneId);return}var w=e(ng).find(function(n){var t=e(n.dataAtom);return"codeEditor"===t.type&&""===(0,ne.Vj)(t)});if(w){n(tz,{paneId:w.paneId,pane:iA(a)}),n(tj,w.paneId);return}var y=g.panes.find(function(n){var t=e(e1(n));return"commands"===e(t.dataAtom).type});if(y){n(tz,{paneId:y,pane:iA(a)}),n(e1(y),function(e){return(0,eK.jM)(e,function(e){e.isCommitted=!1})}),n(tj,y);return}n(tG,{panes:[iA(a)],paneGroupId:g.id,activate:!0})});function iA(e){var n=e.path,t=e.col,r=e.line,i=e.opener;if(!(null==i?void 0:i.paneType)&&(0,i_.e$)(n.toLowerCase()))return{type:"markdown",data:{path:n}};if(!(null==i?void 0:i.paneType)&&(0,i_.Zy)(n.toLowerCase()))return{type:"csvPreview",data:{path:n}};var o=(null==i?void 0:i.paneType)||(0,ne.QY)({path:n});if("codeEditor"===o)return{type:"codeEditor",data:{path:n,col:t,line:r}};if("extension"===o){var a=i.extensionFileHandler;return{type:"extension",data:{filePath:n,extensionId:a.extension.extensionId,installationId:a.extension.installationId,name:a.extension.manifest.name,baseUrl:a.extension.baseUrl,path:a.handler}}}return"markdown"===o?{type:"markdown",data:{path:n}}:{type:o,data:{path:n}}}var iI=(0,ea.eU)(null,function(e,n,t){var r=t.paths.map(function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,ne.QY)({path:r}),data:{path:r,line:i,col:o}}}).filter(Boolean),i=r.length-1,o=e(nn);r.forEach(function(e,t){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(r){return n(tN,{pane:e,activate:i===t,placement:{type:"secondary",relativeTo:o}}),[2]})})()})}),ik=(0,ea.eU)(null,function(e,n,t){var r=t.urls.map(function(e){var n;try{n=new URL(e)}catch(e){return!1}return"0.0.0.0"===n.hostname||"localhost"===n.hostname?{ports:{type:"local",path:n.pathname,port:parseInt(n.port,10)}}:(window.open(e,"_blank"),!1)}).filter(Boolean);if(0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;n(tK,c)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}),iE=(0,ea.eU)(null,function(e,n,t){if(!e(tt)){var r=e(e9),i=t.pageX,o=t.pageY,a=e(e1(t.over)),l=eS({x:i-r.x,y:o-r.y},e(a.rectAtom)).previewRect;n(tJ,!0),n(r_,{type:"dropPreview",rect:l})}}),iC=(0,ea.eU)(null,function(e,n,t){if(!e(tt)){var r=e(e9),i=t.pageX,o=t.pageY,a=t.over,l=e(e1(a)),u=eS({x:i-r.x,y:o-r.y},e(l.rectAtom)).dropLocation;n(r_,null),n(tJ,!1);var c=e(nh);if("newPaneGroup"===t.type){if("middle"===u){var s=eR(c,l.paneId);if(!s)return;n(tG,{panes:t.panes,paneGroupId:s.paneGroup.id,activate:!0,index:s.index+1});return}n(tS,{panes:t.panes,placement:u,makeActive:!0,relativeTo:l.paneId});return}var d=a;if("middle"===u){if(d===t.paneId)return;var p=eR(c,l.paneId);if(!p)return;n(tV,{paneId:t.paneId,toPaneGroupId:p.paneGroup.id,index:p.index+1});return}if(d===t.paneId){var f=eR(c,t.paneId);if(!f){var h=Error("Expected pane");throw n(nY,{error:h,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),h}if(f.floating)throw Error("Expected paneGroup");var g=f.paneGroup.panes.find(function(e){return e!==t.paneId});if(!g)return;d=g}var m=(0,eK.jM)(c,function(e){try{eW(e,t.paneId),eG(e,{id:(0,nq.A)(),panes:[t.paneId],relativeTo:d,placement:u}),n(nr,t.paneId)}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),e}});n(nB,m)}}),iD=(0,ea.eU)(null,function(e,n,t){var r=e(nx).find(function(e){var n=(0,u._)(e,2);return"agentChat"===(n[0],n[1]).type}),i=new Map(e(eZ).map(function(e){return[e,{snappiness:60,delay:r&&e===r[0]?0:400}]})),o=new Map(e(eX).map(function(e){return[e,{snappiness:60,delay:400}]}));n(iR,!0),n(tR,{panes:i,headers:o}),setTimeout(function(){n(iR,!1)},400),n(no,t),e(eV)&&n(tM)}),iR=(0,ea.eU)(!1);function iF(e){var n=(0,K.A)(function(){return(0,ea.eU)(function(n){return!!n(n2)||!!n(tt)&&n(nn)===e})},[e]);return(0,K.A)(function(){return(0,ea.eU)(function(t){if(t(n))return t(td);var r=t(e1(e));if("agentChat"===t(r.dataAtom).type){var i=t(e9),o=t(no),a=Math.min("centeredVisualPlanner"===o?1/0:600,i.width-32);if("centeredVisualPlanner"===o){var l=t(nG);return{x:i.width/2-a/2,y:l,width:a,height:i.height-l}}}return t(r.rectAtom)})},[e,n])}function iU(e){return(0,K.A)(function(){return(0,ea.eU)(function(n){var t=n(r7);return t&&e===n(r9)?t:null})},[e])}function iP(e){var n=iU(e);return(0,K.A)(function(){return(0,el.mg)(n,function(e){var n;return null!=(n=null==e?void 0:e.scale)?n:1})},[n])}function iO(e){return(0,K.A)(function(){return(0,ea.eU)(function(n){return n(n(e1(e)).dataAtom)})},[e])}function iT(e){return(0,K.A)(function(){return(0,ea.eU)(function(n){var t=n(e1(e));return"centeredVisualPlanner"===n(no)?"agentChat"!==n(t.dataAtom).type:t.isHidden})},[e])}function iL(e){return(0,K.A)(function(){return(0,el.mg)(e1(e),function(e){return"floating"===e.type})},[e])}var iM=(0,ea.eU)(null),iG=(0,ea.eU)(function(e){var n=e(iM);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=eR(e(nh),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map(function(n){var t=e(e1(n));return[t.paneId,e(t.dataAtom)]})}}),iN=(0,ea.eU)(function(e){var n=e(iG);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}}),iH=(0,ea.eU)(function(e){var n=e(iM);if(!n||"sidebar"===n.target)return null;if(e(tr)===n.paneId)return e(td);var t=e(e1(n.paneId)),r=e(t.rectAtom),i=e(e7);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}),iz=(0,ea.eU)(null,function(e,n,t){var r=e(nn),i=null!=t?t:r;if(i){n(iM,{target:"pane",paneId:i}),i!==r&&n(nt,i);return}var o=eF(e(nh),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;if(a)return void n(iM,{target:"pane",paneId:a})}),iW=(0,ea.eU)(null,function(e,n){var t=e(iM);t&&(n(iM,null),"sidebar"!==t.target&&n(tk,{paneId:t.paneId,activate:!0}))}),iB=(0,ea.eU)(null,function(e,n){if(e(iG))return void n(iW);var t=e(nn);if(t)return void n(iz,t);var r=eF(e(nh),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;if(i)return void n(iz,i)}),ij=(0,ea.eU)(function(e){return null!==e(iM)}),i$=(0,ea.eU)(null,function(e,n){n(iM,null)}),iq=(0,ea.eU)(null,function(e,n,t){var r=e(nn);if(!(!r||e(tr))){var i=eT({relativeTo:r,rects:new Map(e(e2).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t});i&&(n(nn,i),e(iM)&&n(iM,{target:"pane",paneId:i}))}}),iK=(0,ea.eU)(null,function(e,n,t){var r=e(iG);null!==r&&"sidebar"!==r.target&&n(nB,(0,eK.jM)(e(nh),function(e){!function(e,n){var t=n.paneGroupId,r=n.direction,i=eU(e,t),o=eP(e,t);if((null==i?void 0:i.type)==="paneGroup"&&o){var a=o.node.children.indexOf(i);if(-1===a)throw Error("Expected index");var l=(0,eE._)(o.path).concat([a]),u="down"===r||"right"===r,c=0===a,s=a===o.node.children.length-1,d=o.node.stacked===("up"===r||"down"===r),p=o.path.length>2;if(d&&!((s&&u||c&&!u)&&p))return function(e,n,t){var r=e.indexOf(n);if(-1===r)throw Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1;if("forward"===t&&i){e.pop(),e.unshift(n);return}if("back"===t&&0===r){e.shift(),e.push(n);return}var o="forward"===t?1:-1;e[r]=e[r+o],e[r+o]=n}}(o.node.children,i,u?"forward":"back");var f=(v=eP(e,i.id))?function e(n,t){var r=t.path,i=t.forwards,o=t.vertical,a=eD(n,r);if((null==a?void 0:a.type)!=="split")return null;var l=eA(r);if(0===l.length)return null;var u=eD(n,l);if((null==u?void 0:u.type)!=="split")return null;if(u.stacked!==o)return e(n,{path:l,forwards:i,vertical:o});var c=u.children.indexOf(a),s=0===c;if(!(c===u.children.length-1&&i||s&&!i)){var d=c+(i?1:-1),p=u.children[d],f=u.children[c];return p?{other:f,node:p,parent:u,path:(0,eE._)(l).concat([d])}:null}if(1===l.length){var h=s&&!i?u.children.length-1:0;return{parent:u,other:u.children[c],path:(0,eE._)(l).concat([h]),node:u.children[h]}}return e(n,{path:l,forwards:i,vertical:o})}(e,{path:v.path,forwards:"down"===r||"right"===r,vertical:"up"===r||"down"===r}):null;if(f){var h=l.slice(0,f.path.length+("paneGroup"===f.node.type?2:1));if("tiling"!==h[0])throw Error("Expected tiling path");var g=eD(e,h);if(!g||"floatingPaneGroup"===g.type)throw Error("Expected adjacentNode");if("split"!==f.other.type)throw Error("Expected split");var m=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,u=e.slice(0,t)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value.percent;r+=c}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(f.other.children,g);if("paneGroup"===f.node.type){var v,w,y,b=(w={start:0,end:100},y=!f.parent.stacked,m.start-w.start<w.end-m.end?y?"above":"rightOf":y?"below":"leftOf");eB(e,(0,eE._)(o.path).concat([a])),eG(e,{placement:b,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:f.path});return}var x=function(e,n){var t=e.children,r=e.stacked,i="above",o=0,a=0,l=0,u=0,c=!0,s=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,g={start:l,end:l+h.percent},m=Math.max(0,Math.min(n.end,g.end)-Math.max(n.start,g.start));m>u&&(u=m,o=a,i=n.start-g.start<g.end-n.end?r?"above":"rightOf":r?"below":"leftOf"),l+=h.percent,a++}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}return{placement:i,index:o}}(f.node,m),_=x.index,S=x.placement;eB(e,(0,eE._)(o.path).concat([a])),eG(e,{placement:S,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,eE._)(f.path).concat([_])})}}}(e,{paneGroupId:r.paneGroupId,direction:t.direction})}))}),iV={width:120,height:120},iZ=(0,ea.eU)(null),iJ=(0,ea.eU)(null,function(e,n,t){var r=e(nh);if("end"===t.type){n(iZ,null),n(nB,r);return}if("update"===t.type){var i=e(iZ);if(!i){var o=Error("Expected floatingResizeState");throw n(nY,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}var a=e(e7),l=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?eY:i,a=(0,p._)({},e),l=o.height,u=o.width;if("top"===t||"topLeft"===t||"topRight"===t){var c=e.height-r.y;a.height=Math.max(c,l),c<l?a.y=e.y+e.height-l:a.y=e.y+r.y}else("bottom"===t||"bottomLeft"===t||"bottomRight"===t)&&(a.height=Math.max(e.height+r.y,l));if("right"===t||"bottomRight"===t||"topRight"===t)a.width=Math.max(e.width+r.x,u);else if("left"===t||"bottomLeft"===t||"topLeft"===t){var s=e.width-r.x;a.width=Math.max(s,u),s<u?a.x=e.x+e.width-u:a.x=e.x+r.x}return a}(i.rectStart,{delta:t.moveDelta,edge:i.edge,minSize:iV}),u=i.paneId,c=(0,eK.jM)(r,function(e){var t=e.floating.find(function(e){return e.panes.includes(u)});if(!t){var r=Error("Expected floating");throw n(nY,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=l.x,i.y=l.y-a,i.width=l.width,i.height=l.height+a});n(nB,c);return}var s=e(e2).find(function(e){return e.paneId===t.paneId});if(!s){var d=Error("Expected pane");throw n(nY,{error:d,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),d}n(nt,t.paneId),n(iZ,{paneId:t.paneId,edge:t.edge,rectStart:e(s.rectAtom)})}),iX=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=e(e1(t)),o=i.rectAtom,a=i.type,l=e(o),u=eR(r,t);if(!u){var c=Error("Expected pane");throw n(nY,{error:c,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),c}if("tile"===a)return void n(nB,(0,eK.jM)(r,function(e){ej(e,{paneGroupPath:u.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})}));u.paneGroup.id===e(t_.LY)&&n(t_.LY,null);var s=e(e2).filter(function(e){return"tile"===e.type&&!e.isHidden}),d=e(e7),p={x:l.x+l.width/2,y:l.y+l.height/2},f=s.find(function(n){var t=e(n.rectAtom);return nk(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})});if(!f)return void n(nB,(0,eK.jM)(r,function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=eD(e,t);if((null==o?void 0:o.type)!=="floatingPaneGroup")throw Error("Expected floatingPaneGroup");if(eB(e,t),null===i){e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex};return}eG(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r})}(e,{paneGroupPath:u.paneGroupPath,to:["tiling"],placement:"leftOf"})}));n(nB,(0,eK.jM)(r,function(e){var n=eR(e,f.paneId);u.paneGroup.panes.forEach(function(t){e$(e,{paneId:t,paneGroupPath:(null==n?void 0:n.paneGroupPath)||["tiling"],activate:!1})})})),n(tj,u.paneGroup.panes[u.paneGroup.activeIndex])}),iQ=(0,ea.eU)(null),i0=(0,ea.eU)(function(e){var n=e(iQ);return n&&e(e2).find(function(t){var r=e(t.dataAtom);return"videoPlayer"===r.type&&r.data.embedUrl===(null==n?void 0:n.embedUrl)})||null}),i1=(0,ea.eU)(function(e){var n=e(i0);return n&&!n.isHidden?n:null}),i2=(0,ea.eU)(null,function(e,n,t){n(iQ,t);var r,i="videoPlayer";if(!t)return void n(rZ,i);n(rV,{type:i,data:{title:null!=(r=t.title)?r:"Tutorial",embedUrl:t.embedUrl}},{commit:!0,location:"center"})}),i4=(0,ea.eU)(null,function(e,n){var t=e(i0);if(null==t?void 0:t.isHidden){n(tj,t.paneId),n(nr,t.paneId);return}var r=e(iQ);r&&n(i2,r)}),i5=(0,ea.eU)(function(e){return e(e2).find(function(n){return"tutorial"===e(n.dataAtom).type})||null}),i3=(0,ea.eU)(null,function(e,n){var t=e(i5);if(null==t?void 0:t.isHidden)return void n(tj,t.paneId);n(tS,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1,commit:!0})}),i6=(0,ea.eU)(function(e){return!!(e(r7)||e(iZ)||e(rJ)||e(tJ)||e(rp)||e(tU))}),i8=(0,ea.eU)(null,function(e,n,t){n(nP,t),n(nB,e(nh))}),i7=(0,ea.eU)(null,function(e,n,t){e(eV)&&n(tR,{headers:new Map(e(eX).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eZ).map(function(e){return[e,{snappiness:400}]}))}),n(nc,function(e){return(0,eK.jM)(e,function(e){e.isOpen=null!=t?t:!e.isOpen,t&&0===e.width&&(e.width=180)})}),n(nB,e(nh))}),i9=(0,ea.eU)(null,function(e,n,t){var r=e(nh),i=e(nn)===t.to,o=(0,eK.jM)(r,function(e){try{eW(e,t.from);var r=eR(e,t.to);r&&(eH(e,{paneIds:[t.from],activate:i,paneGroupId:r.paneGroup.id,index:r.index}),eW(e,t.to))}catch(e){throw n(nY,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});n(nB,o)}),oe=t(39938),on=t(47993),ot=(0,ea.eU)(!1),or=(0,ea.eU)(null,function(e,n,t){if(e(ot))return void(0,on.flushSync)(function(){n(oi,null),n(ot,!1)});t&&n(oi,t),n(ot,!0)}),oi=(0,ea.eU)(null),oo=(0,ea.eU)([]),oa=(0,ea.eU)(function(e){if(e(ij)||e(ot))return null;var n=e(nn);if(!n)return null;var t=e(e1(n)),r=e(t.dataAtom),i=t.paneId+r.type;return(0,ne.xS)(r)&&(i+=r.data.path),i}),ol=t(18712),ou=t(25227),oc=t(25590);function os(e){return(0,c.FD)(oc.Ay,(0,r4._)((0,p._)({},e),{children:[(0,c.Y)("path",{fillRule:"evenodd",d:"M2 6.75A4.75 4.75 0 0 1 6.75 2h10a4.75 4.75 0 0 1 4.75 4.75v10a4.75 4.75 0 0 1-4.75 4.75h-10A4.75 4.75 0 0 1 2 16.75v-10ZM6.75 3.5A3.25 3.25 0 0 0 3.5 6.75v10A3.25 3.25 0 0 0 6.75 20h10A3.25 3.25 0 0 0 20 16.75v-10a3.25 3.25 0 0 0-3.25-3.25h-10Z",clipRule:"evenodd"}),(0,c.Y)("path",{d:"M5.25 8.398a3.167 3.167 0 0 1 3.167-3.167h6.666a3.167 3.167 0 0 1 3.167 3.167v6.667a3.167 3.167 0 0 1-3.167 3.166H8.417a3.167 3.167 0 0 1-3.167-3.166V8.398Z"})]}))}function od(e){return(0,c.Y)(oc.Ay,(0,r4._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M17 21.75A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10ZM20.25 12H3.75V7A3.25 3.25 0 0 1 7 3.75h10A3.25 3.25 0 0 1 20.25 7v5Z",clipRule:"evenodd"})}))}var op=t(31111),of=t(23706);function oh(e){return(0,c.Y)(oc.Ay,(0,r4._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M7 2.25A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7ZM3.75 12h16.5v5A3.25 3.25 0 0 1 17 20.25H7A3.25 3.25 0 0 1 3.75 17v-5Z",clipRule:"evenodd"})}))}var og=(0,ea.eU)(null,function(e,n,t){if(null===t){n(r_,null),n(r7,function(e){return e?(0,eK.jM)(e,function(e){e.drop=null}):e});return}n(r7,function(e){return e?(0,eK.jM)(e,function(e){!function(e,n){if("edge"===n.type||"emptyLayout"===n.type){e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===n.type?n.position:"replace"};return}var t=n.paneId;if("middle"===n.position){e.drop={type:"insert",paneId:t};return}e.drop={type:"split",relativeTo:t,placement:n.position}}(e,t)}):e});var r=e(e9),i=e(e7),o=e(nd),a=e(nM);if("pane"===t.type){var l=e(e1(t.paneId)),u=e(l.rectAtom);n(r_,{type:"dropPreview",rect:{x:u.x,y:u.y-i,width:u.width,height:u.height+i}});return}if("emptyLayout"===t.type)return void n(r_,{type:"dropPreview",rect:function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=e.location,o={x:t+r,y:0,width:n.width-t-2*r,height:n.height-r},a=o.x,l=o.y,u=o.width,c=o.height;switch(i){case"middle":return o;case"leftOf":return{x:a,y:l,width:u/2,height:c};case"rightOf":return{x:a+u/2,y:l,width:u/2,height:c};case"above":return{x:a,y:l,width:u,height:c/2};case"below":return{x:a,y:l+c/2,width:u,height:c/2}}}({container:r,sidebarWidth:o,location:t.position,gap:a})});n(r_,{type:"dropPreview",rect:function(e,n){var t=n.container,r=n.sidebarWidth,i=n.position,o=n.gap,a={x:r+o,y:0,width:t.width-r-2*o,height:t.height-o};if((null==e?void 0:e.type)!=="split"){switch(i){case"above":case"below":a.height=a.height/2,"below"===i&&(a.y+=a.height);break;case"rightOf":case"leftOf":a.width=a.width/2,"rightOf"===i&&(a.x+=a.width)}return a}if(e.stacked){switch(i){case"above":a.height=a.height*(e.children[0].percent/100)/2;break;case"below":a.height=a.height*(e.children[e.children.length-1].percent/100)/2,a.y=t.height-a.height;break;case"leftOf":a.width=a.width/2;break;case"rightOf":a.width=a.width/2,a.x=t.width-a.width-o}return a}switch(i){case"above":a.height=a.height/2;break;case"below":a.height=a.height/2,a.y=t.height-a.height-o;break;case"leftOf":a.width=a.width*(e.children[0].percent/100)/2;break;case"rightOf":a.width=a.width*(e.children[e.children.length-1].percent/100)/2,a.x=t.width-a.width}return a}(e(nh).tiling,{container:r,sidebarWidth:o,position:t.position,gap:a})})}),om=(0,rx.v)(["opacity","width","height","transform","pointerEvents"]),ov=om.cssVars,ow=om.styleTokens,oy=(0,rb.x)({dropPoint:[ol.wp.center,ol.wp.top(0),ol.wp.left(0),ol.wp.position.absolute,{zIndex:rw.W.overlay,cursor:"grabbing",width:ow.width,height:ow.height,transform:ow.transform,opacity:"var(".concat(ov.opacity,", 0)"),pointerEvents:ow.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:ry.LU.accentPrimaryStronger}}]}),ob={above:(0,c.Y)(oh,{}),below:(0,c.Y)(od,{}),leftOf:(0,c.Y)(op.A,{}),rightOf:(0,c.Y)(of.A,{}),middle:(0,c.Y)(os,{})};function ox(e){var n=(0,d.useRef)(null),t=(0,d.useMemo)(function(){return(0,el.mg)(ie,function(n){return null==n?void 0:n[e]})},[e]),r=(0,d.useMemo)(function(){return(0,el.mg)(t,function(e){return e?(0,N._)({},ov.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null},nl())},[t]);(0,rv.d)(n,rl(r));var i=(0,d.useMemo)(function(){return(0,el.mg)(t,function(e){var n;return e?(n={},(0,N._)(n,ov.width,e.rect.width+"px"),(0,N._)(n,ov.height,e.rect.height+"px"),n):null},nl())},[t]);(0,rv.d)(n,rl(i));var o=(0,d.useMemo)(function(){return(0,el.mg)(t,function(e){var n;return n={},(0,N._)(n,ov.opacity,(null==e?void 0:e.visible)?"1":"0"),(0,N._)(n,ov.pointerEvents,(null==e?void 0:e.visible)?"all":"none"),n},nl())},[t]);return(0,rv.d)(n,rl(o)),n}function o_(){var e=ox("middle"),n=ru(og),t=rc((0,d.useMemo)(function(){return(0,el.mg)(ie,function(e){var n;return null!=(n=null==e?void 0:e.middle.paneId)?n:null})},[]));return(0,c.Y)(ou.S,{css:oy.dropPoint,innerRef:e,onMouseEnter:function(){var e=t(),r="middle";n(e?{type:"pane",position:r,paneId:e}:{type:"emptyLayout",position:r})},onMouseLeave:function(){return n(null)},children:(0,c.Y)(os,{size:32})})}function oS(e){var n=e.position,t=ox(n),r=ru(og);return(0,c.Y)(ou.S,{css:oy.dropPoint,innerRef:t,onMouseEnter:function(){return r({type:"edge",position:n})},onMouseLeave:function(){return r(null)},children:(0,d.cloneElement)(ob[n],{size:32})})}var oY=(0,d.memo)(function(){return(0,c.FD)(c.FK,{children:[(0,c.Y)(oS,{position:"above"}),(0,c.Y)(oS,{position:"below"}),(0,c.Y)(oS,{position:"leftOf"}),(0,c.Y)(oS,{position:"rightOf"}),(0,c.Y)(o_,{})]})}),oA=(0,ea.eU)(null);function oI(e){return ra((0,K.A)(function(){return(0,ea.eU)(function(n){var t=n(e1(e));return n(t.dataAtom)})},[e]))}function ok(){var e=ro();return(0,d.useCallback)(function(n){var t=e.get(e1(n));return{pane:e.get(t.dataAtom),isCommitted:t.isCommitted}},[e])}function oE(){var e=ru(nt),n=ru(nr);return(0,K.A)(function(){return function(t,r){(null==r?void 0:r.commit)&&n(t),e(t)}},[n,e])}function oC(){return ru(t8)}var oD=(0,ea.eU)(null,function(e,n){n(tJ,!1)});function oR(){return ru(iY)}function oF(){return{maximizePane:ru(ti),maximizePaneGroup:ru(to),restoreMaximizedPaneGroup:ru(ta),toggleMaximizePane:ru(tl),toggleMaximizedPaneGroup:ru(tu)}}function oU(e){var n,t,r=(n=e8(e),{activeIndexAtom:(0,K.A)(function(){return(0,ea.eU)(function(e){return e(n).activeIndex})},[n]),pathAtom:(0,K.A)(function(){return(0,el.mg)(n,function(e){return e.path},nl())},[n]),panesAtom:(0,K.A)(function(){return(0,el.mg)(n,function(e){return e.panes},nl())},[n]),activeFileAtom:(0,K.A)(function(){return(0,ea.eU)(function(e){var t=e(n),r=e(e1(t.panes[t.activeIndex])),i=e(r.dataAtom);return(0,ne.xS)(i)?(0,ne.Vj)(i):null})},[n])}),i=r.activeIndexAtom,o=r.pathAtom,a=r.panesAtom;return{activeIndex:rl(i),path:rl(o),panes:rl(a),activeTabPaneId:rl((t=e8(e),(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(t);return e(e1(n.panes[n.activeIndex])).paneId})},[t])))}}function oP(e){var n,t,r,i,o,a,l,u,c,s,d=iF(e),f=nD(d),h=nR(d),g=iP(e),m=(n=iU(e),(0,K.A)(function(){return(0,ea.eU)(function(t){var r,i,o,a,l,u=t(n);if(u)return null!=(a=u.transformOriginX)?a:"0px";var c=null==(o=t(tC))||null==(i=o.panes)||null==(r=i.get(e))?void 0:r.dropState;return null!=(l=null==c?void 0:c.transformOrginX)?l:"0x"})},[n,e])),v=(t=iF(e),(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(t),r=e(e9);return{x:Math.round(r.x+n.x),y:Math.round(r.y+n.y)}})},[t])),w=iT(e),y=(0,K.A)(function(){return(0,ea.eU)(function(n){var t,r,i,o=n(e1(e));if(o.isHidden)return rw.W.hiddenPane;var a=e===n(nn);return n(tr)===e?rw.W.maximizedPane:e===n(r9)||(null==(i=n(tC))||null==(r=i.panes)||null==(t=r.get(e))?void 0:t.dropState)?rw.W.draggingPane:"floating"===o.type?a?rw.W.floatingPaneActive:rw.W.floatingPane:"agentChat"===n(o.dataAtom).type&&"centeredVisualPlanner"===n(no)||n(iR)||a?rw.W.tiledPaneActive:rw.W.tiledPane})},[e]),b=(0,K.A)(function(){return(0,ea.eU)(function(n){var t,r,i=n(tC);return null!=(r=null==i||null==(t=i.panes)?void 0:t.get(e))&&r})},[e]),x=(r=iO(e),(0,K.A)(function(){return(0,el.mg)(r,function(e){return e.type})},[r])),_=iL(e),S=(0,K.A)(function(){return(0,ea.eU)(function(n){var t,r=null==(t=eR(n(nh),e))?void 0:t.paneGroup;return!!r&&r.id===n(t_.LY)})},[e]),Y=(0,K.A)(function(){return(0,ea.eU)(function(n){return n(nn)===e})},[e]),A=(0,K.A)(function(){return(0,ea.eU)(function(n){return n(nn)===e})},[e]),I=(0,K.A)(function(){return(0,el.mg)(e1(e),function(e){return e.isCommitted})},[e]),k=iO(e),E=(i=iL(e),o=iU(e),(0,K.A)(function(){return(0,ea.eU)(function(e){return e(tt)?null:e(o)?"dragging":e(i)?"floating":"tiled"})},[i,o])),C=(a=iU(e),(0,K.A)(function(){return(0,ea.eU)(function(n){var t,r,i;return!!n(a)||!!(null==(i=n(tC))||null==(r=i.panes)||null==(t=r.get(e))?void 0:t.dropState)})},[a,e])),D=(l=iU(e),(0,K.A)(function(){return(0,el.mg)(l,function(e){var n;return null!=(n=null==e?void 0:e.movedAtAll)&&n})},[l])),R=(0,K.A)(function(){return(0,ea.eU)(function(n){if((null==(t=n(nh).tiling)?void 0:t.type)!=="paneGroup")return!1;var t,r,i=null==(r=eR(n(nh),e))?void 0:r.paneGroup;return!!i&&1===i.panes.length})},[e]),F=(u=iF(e),c=iP(e),s=iT(e),(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(s);return(0,r4._)((0,p._)({},e(u)),{scale:e(c),opacity:+!n})})},[u,c,s])),U=(0,K.A)(function(){return(0,ea.eU)(function(n){return n(tr)===e})},[e]);return{properties:rl(F),size:rl(f),position:rl(h),scale:rl(g),paneType:rl(x),transformOriginXAtom:rl(m),viewportInset:rl(v),zIndex:rl(y),disableInteractions:rl(i6),getTransitionEnabled:rc(b),data:rl(k),isFloating:rl(_),isModal:rl(S),isActive:rl(Y),isActivePane:rl(A),isCommitted:rl(I),isHidden:rl(w),isBeingDragged:rl(C),hasMovedWhileDragging:rl(D),headerHeight:rl(e7),border:rl(E),isOnlyPane:rl(R),isMaximized:rl(U)}}function oO(e){var n,t,r,i,o,a,l,u,c,s=nD(ig(e)),d=im(e),f=iw(e),h=(t=iv(e),(0,K.A)(function(){return(0,ea.eU)(function(n){var r,i,o,a,l,u=n(t);if(u)return null!=(a=u.transformOriginX)?a:"0px";var c=null==(o=n(tC))||null==(i=o.headers)||null==(r=i.get(e))?void 0:r.dropState;return null!=(l=null==c?void 0:c.transformOrginX)?l:"0x"})},[t,e])),g=(r=iv(e),i=ib(e),o=ix(e),n=iy(e),a=(0,K.A)(function(){return(0,ea.eU)(function(e){var t=e(nn);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)})},[n]),(0,K.A)(function(){return(0,ea.eU)(function(n){var t,l,u;return n(i)?rw.W.maximizedHeader:n(r)||(null==(u=n(tC))||null==(l=u.headers)||null==(t=l.get(e))?void 0:t.dropState)?rw.W.draggingHeader:n(o)?n(a)?rw.W.floatingHeaderActive:rw.W.floatingHeader:rw.W.tiledHeader})},[r,i,o,a,e])),m=(0,K.A)(function(){return(0,ea.eU)(function(n){var t,r,i=n(tC);return null!=(r=null==i||null==(t=i.headers)?void 0:t.get(e))&&r})},[e]),v=ib(e),w=ix(e),y=(0,K.A)(function(){return(0,ea.eU)(function(n){return n(t_.LY)===e})},[e]),b=(0,K.A)(function(){return(0,ea.eU)(function(n){var t;return(null==(t=n(r7))?void 0:t.paneGroupId)===e})},[e]);return{properties:rl((l=ig(e),u=iw(e),c=im(e),(0,K.A)(function(){return(0,ea.eU)(function(e){var n="centeredVisualPlanner"===e(no);return(0,r4._)((0,p._)({},e(l)),{scale:e(u),positioning:e(c).positioning,opacity:+!n})})},[l,u,c]))),size:rl(s),position:rl(d),scale:rl(f),transformOriginX:rl(h),zIndex:rl(g),getTransitionEnabled:rc(m),isMaximized:rl(v),isFloating:rl(w),isModal:rl(y),isBeingDragged:rl(b)}}function oT(){return ra(no)}function oL(){return{view:rl(rg),resizeHandleView:rl(rm),isOpen:rl(ns),toggle:ru(i7),resize:{start:ru(rd),update:ru(rf),end:ru(rh)},getTransitionEnabled:rc(tD)}}function oM(){var e=rl(ic),n=rl(nM),t=rl(iu),r=ru(tP),i=ru(tT);return{rect:e,gutter:n,displayState:t,collapsedWidth:0,getTransitionEnabled:rc(tD),resizeSidebar:r,toggle:i,setChatRef:ru(tE),agentFiletreeOrder:rl(nO),setAgentPosition:ru(i8),headerHeight:rl(e7),isCollapsed:rl(tL)}}var oG=(0,el.mg)(nh,function(e){var n=e.tiling;return(null==n?void 0:n.type)==="paneGroup"&&1===n.panes.length}),oN=t(18374),oH=t(49803),oz=t(32543);function oW(){var e,n,t,r,i,o,a,l,c,s,f,h,m,v;return t=(0,eo.A)(),r=oT(),i=ru(iD),o=(0,B.Ik)(),a=(0,oN.Y)(),l=(0,d.useRef)(!1),c=(0,u._)((0,Q.V)(),1)[0],h=(s={variables:{replId:t}},f=(0,p._)({},et,s),g.I(ei,f)).data,m=null,v=!1,(null==h||null==(e=h.getRepl)?void 0:e.__typename)==="Repl"&&(m=h.getRepl.config,v=(null==(n=h.getRepl.origin)?void 0:n.id)!=null),(0,d.useEffect)(function(){(null==m?void 0:m.isAgentRepl)&&!v&&a&&null!=o&&!l.current&&("approved"===o?("centeredVisualPlanner"===r&&i("tilingLayout"),(null==m?void 0:m.isInPlanningPhase)!==!1&&c({variables:{input:{id:t,isInPlanningPhase:!1}}})):("centeredVisualPlanner"!==r&&i("centeredVisualPlanner"),(null==m?void 0:m.isInPlanningPhase)!==!0&&c({variables:{input:{id:t,isInPlanningPhase:!0}}})),l.current=!0)},[r,t,i,c,o,a,m,v]),(0,oz.g)(),(0,oH.c)(),null}var oB=t(34778),oj=t(1224),o$=t(69010),oq=t(99708);function oK(e){var n=e.currentPaneId,t=e.type,r=(0,ne.Vv)(),i=ru(t3),o=ru(tj),a=(0,t_.t3)(),l=(0,oq.gB)(),s=n?"Move existing tab here":"Jump to existing tab";return(0,d.useCallback)(function(e){var d=e.searchQuery;return(0,nZ._)(function(){var e,p,f,h,g,m,v,w,y,b,x,_,S,Y,A,I,k,E,C,D,R,F,U,P,O;return(0,nJ.YH)(this,function(T){switch(T.label){case 0:if(e=a(),!(p=n?e.filter(function(e){return(0,u._)(e,1)[0]!==n}):e).length||!d&&"files"===t)return[2,[]];f=new Map,h=[],g=!0,m=!1,v=void 0;try{for(w=p[Symbol.iterator]();!(g=(y=w.next()).done);g=!0)(b=(0,u._)(y.value,2))[0],x=b[1],(0,ne.xS)(x)&&x.data.path&&h.push(x.data.path)}catch(e){m=!0,v=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw v}}return[4,(0,o$.UI)(d,h)];case 1:_=T.sent(),S=!0,Y=!1,A=void 0;try{for(I=_[Symbol.iterator]();!(S=(k=I.next()).done);S=!0)E=k.value,f.set(E.path,{score:E.score,ranges:E.ranges})}catch(e){Y=!0,A=e}finally{try{S||null==I.return||I.return()}finally{if(Y)throw A}}C=[],D=!0,R=!1,F=void 0;try{for(U=function(){var e=(0,u._)(O.value,2),a=e[0],d=e[1],p=(0,ne.NM)(d);if("tools"===t&&!p||"tools"===t&&"commands"===d.type||"files"===t&&p)return"continue";var h=(0,ne.xS)(d)?d.data.path:null,g=h?f.get(h):null;if("deployments"===d.type){var m=l(a);if((null==m?void 0:m.type)==="deployments"){var v=m.getTabs();if(v)return C.push({match:oj.KK,data:{type:"context",label:r.getTitle(d),icon:(0,c.Y)(r.Icon,{pane:d})},commands:function(){return v.map(function(e){return{match:oj.KK,data:{key:a+e.id,type:"action",label:e.label,icon:(0,c.Y)(e.Icon,{size:16}),run:function(){o(a),m.setTab(e.id)}}}})}}),"continue"}}var w=h&&g?function(){return{score:g.score,render:(0,o$.SS)({path:h,ranges:g.ranges,description:s})}}:oj.KK,y=r.getTitle(d),b=r.Icon({pane:d});C.push({match:w,data:{key:a,type:"action",label:y,icon:b,run:function(){return n?i({a:n,b:a}):o(a)},description:s}})},P=p[Symbol.iterator]();!(D=(O=P.next()).done);D=!0)U()}catch(e){R=!0,F=e}finally{try{D||null==P.return||P.return()}finally{if(R)throw F}}return[2,C]}})})()},[n,a,r,o,i,l,s,t])}var oV=t(454),oZ=t(87773),oJ=t(98927),oX=t(99365),oQ=t(94144),o0=t(18663),o1=t(48707),o2="Search";function o4(){var e=(0,nj.Xr)(or);return(0,d.useCallback)(function(n){e(n)},[e])}var o5=t(9092),o3=t(70251),o6=t(3937),o8=t(95391),o7={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,o5.FM)({cmdOrCtrl:!0,key:"k"})};function o9(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,nj.Xr)(oo);(0,d.useEffect)(function(){if(n)return t(function(n){return(0,eE._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var ae=(0,rb.x)({surface:[ol.wp.maxHeight("70vh"),ol.wp.borderRadius(8)]});let an=(0,d.memo)(function(){var e,n,t,r,i,o,a,l,s,p,f,h=(0,nj.md)(ot),g=o4(),m=(e=oC(),n=(0,d.useCallback)(function(n){(0,oB.u4)(oB.AZ.TOOL_OPENED,{source:"Command Bar",tool:n.pane.type}),e(n)},[e]),t=(0,ne.Vv)(),r=(0,oJ.Tb)(),i=(0,t_.t3)(),o=(0,d.useCallback)(function(){var e=i().map(function(e){var n=(0,u._)(e,2);return(n[0],n[1]).type}),o=[],a=!0,l=!1,c=void 0;try{for(var s,d=r[Symbol.iterator]();!(a=(s=d.next()).done);a=!0)!function(){var r=s.value;if(!((0,ne.gG)(r.type)&&e.includes(r.type))){var i=t.getTitle(r),a=t.Icon({pane:r});o.push({match:(0,oV.T)({pane:r,aliases:oZ.f.get(r.type)}),data:{key:"extension"===r.type?"extension-".concat(r.data.installationId,"-").concat(r.data.path):void 0,type:"action",label:i,description:t.getDescription(r,{short:!0}),icon:a,run:function(){n({pane:r})}}})}}()}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return o},[r,n,i,t]),a=oK({type:"tools"}),l=(0,oX.Jn)("toggleGlobalCommandBarCommand"),s=(0,K.A)(function(){return{type:"context",icon:(0,c.Y)(o0.A,{}),label:"",description:o2,keyboardShortcut:l}},[l]),p=(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(oo),t={data:{type:"context",label:oQ.Ve,icon:(0,c.Y)(o1.A,{})},commands:function(e){var n=e.searchQuery;return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,a({searchQuery:n})];case 1:return[2,eE._.apply(void 0,[e.sent()]).concat((0,eE._)(o()))]}})})()}};return{data:s,commands:function(){return(0,eE._)(n).concat([t])}}})},[o,s,a]),f=(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(p),t=e(oi);return t?[n,t]:n})},[p]),(0,nj.md)(f)),v=(0,oX.Jn)(o7.id);return(0,c.Y)(o3.a,{hideCloseButton:!0,isOpen:h,onRequestClose:g,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,c.Y)(o6.ui,{css:ae.surface,children:(0,c.Y)(o8.r,{keyboardShortcut:v,onAction:function(){return g()},command:m,autoFocus:!0})})})});var at=t(6723);function ar(){var e=(0,f._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return ar=function(){return e},e}var ai=(0,h.J1)(ar(),at.Fz,at.Tu),ao=t(22585),aa=t(24270),al=t(40756),au=t(91953),ac=(0,rb.x)({container:ol.wp.colWithGap(24)});function as(e){var n=e.fileExtension,t=e.onCancel,r=e.onConfirm;return(0,c.FD)(ou.S,{css:ac.container,children:[(0,c.Y)(au.Y9,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,c.FD)(au.EY,{children:["Do you want to use this extension to open ",n," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,c.FD)(ou.S,{row:!0,gap:12,justify:"end",children:[(0,c.Y)(al.$n,{onClick:function(){return t()},text:"Cancel"}),(0,c.Y)(al.$n,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}var ad=t(35897);function ap(){var e=(0,t_.RG)(),n=rc(nw),t=rc(nb),r=rc(n6),i=ru(tN),o=ru(tk),a=ru(tz),l=rc(nm),c=rc(nv),s=rc(tt);return(0,d.useCallback)(function(d){var p=d.pane,f=d.activate,h=d.updateOnReveal,g=e(),m=(0,ne.xS)(p)?l():c();m||(m=function(e){var n,t,r=e.panes,i=e.pane;if((0,ne.xS)(i)){var o,a,l=i.data.path;return null!=(a=null==(o=r.find(function(e){var n=(0,u._)(e,2)[1];return(0,ne.xS)(n)&&n.data.path===l}))?void 0:o[0])?a:null}if((0,ne.En)(i))return null!=(s=null==(c=r.find(function(e){var n=(0,u._)(e,2)[1];return!!(0,ne.En)(n)&&n.data.installationId===i.data.installationId&&n.data.path===i.data.path&&n.data.filePath===i.data.filePath}))?void 0:c[0])?s:null;if("diff"===i.type){var c,s,d,p=r.find(function(e){var n=(0,u._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&nl()(t.data,i.data)});return null!=(d=null==p?void 0:p[0])?d:null}return(0,ne.gG)(i.type)&&null!=(t=null==(n=r.find(function(e){return(0,u._)(e,2)[1].type===i.type}))?void 0:n[0])?t:null}({panes:(0,eE._)(n()).concat((0,eE._)(t())),pane:p}));var v=s();if(m&&g){var w,y,b=r().layout,x=null==(w=eR(b,g))?void 0:w.paneGroup,_=null==(y=eR(b,m))?void 0:y.paneGroup;if(!v||(null==x?void 0:x.id)===(null==_?void 0:_.id))return(void 0===h||h)&&a({paneId:m,pane:p}),o({paneId:m,activate:f}),m}var S=d.placement;return v&&null!=g?S={type:"after",paneId:g}:(null==S?void 0:S.type)!=="secondary"||S.relativeTo||(S={type:"secondary",relativeTo:g}),i({pane:p,activate:f,placement:S})},[e,l,c,i,n,t,r,s,o,a])}var af=t(45261);function ah(){var e,n=oR(),t=(0,t_.T_)(),r=(e=(0,t_.dm)(),(0,K.A)(function(){return function(n){return e.subscribe(n)}},[e])),i=(0,t_.w1)(),o=(0,ad.A)(),a=ap(),l=(0,t_.RG)(),u=rc(n6),c=ru(tn),s=(0,af.A)(),p=(0,oe.A)(s),f=(0,d.useCallback)(function(e){a({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:l()}})},[a,l]);return(0,K.A)(function(){return{openFile:n,watchActiveFile:r,getActiveFile:i,activatePane:t,toasts:o,revealOrInsertTool:f,getLayoutState:u,setLayoutState:c,getSshConfig:function(){return p.current}}},[n,r,i,t,o,f,u,c,p])}var ag=t(85689),am=t(40115),av=t(45380),aw=t(13421),ay=t(31736),ab=t(35862),ax=t(57068),a_=t(77135),aS=t(42008),aY=t(1114),aA=t(53847),aI=function(e){return e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER",e}({}),ak=function(e){return e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE",e}({}),aE=Symbol("Comlink.proxy"),aC=Symbol("Comlink.endpoint"),aD=Symbol("Comlink.releaseProxy"),aR=Symbol("Comlink.thrown"),aF=function(e){return(void 0===e?"undefined":(0,eC._)(e))==="object"&&null!==e||"function"==typeof e},aU=new Map([["proxy",{canHandle:function(e){return aF(e)&&e[aE]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return aP(e,t),[r,[r]]},deserialize:function(e){var n;return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(aT(i),a===aD)return function(){return az(n,{type:ak.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){aO(n),i=!0})};if("then"===a){if(0===t.length)return{then:function(){return o}};var l=az(n,{type:ak.GET,path:t.map(function(e){return e.toString()})}).then(aH);return l.then.bind(l)}return e(n,(0,eE._)(t).concat([a]))},set:function(e,r,o){aT(i);var a=(0,u._)(aN(o),2),l=a[0],c=a[1];return az(n,{type:ak.SET,path:(0,eE._)(t).concat([r]).map(function(e){return e.toString()}),value:l},c).then(aH)},apply:function(r,o,a){aT(i);var l=t[t.length-1];if(l===aC)return az(n,{type:ak.ENDPOINT}).then(aH);if("bind"===l)return e(n,t.slice(0,-1));var c=(0,u._)(aL(a),2),s=c[0],d=c[1];return az(n,{type:ak.APPLY,path:t.map(function(e){return e.toString()}),argumentList:s},d).then(aH)},construct:function(e,r){aT(i);var o=(0,u._)(aL(r),2),a=o[0],l=o[1];return az(n,{type:ak.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(aH)}});return o}(e,[],n)}}],["throw",{canHandle:function(e){return aF(e)&&aR in e},serialize:function(e){var n=e.value;return[(0,aA._)(n,Error)?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function aP(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,p._)({path:[]},i.data),l=a.id,c=a.type,s=a.path,d=(i.data.argumentList||[]).map(aH);try{var f=s.slice(0,-1).reduce(function(e,n){return e[n]},e),h=s.reduce(function(e,n){return e[n]},e);switch(c){case ak.GET:o=h;break;case ak.SET:f[s.slice(-1)[0]]=aH(i.data.value),o=!0;break;case ak.APPLY:o=h.apply(f,d);break;case ak.CONSTRUCT:var g=(0,aY._)(h,(0,eE._)(d));o=aG(g);break;case ak.ENDPOINT:var m,v,w=new MessageChannel,y=w.port1,b=w.port2;aP(e,b),m=y,v=[y],aM.set(m,v),o=m;break;case ak.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,N._)({value:e},aR,0)}Promise.resolve(o).catch(function(e){return(0,N._)({value:e},aR,0)}).then(function(e){var t=(0,u._)(aN(e),2),i=t[0],o=t[1];n.postMessage((0,r4._)((0,p._)({},i),{id:l}),o),c===ak.RELEASE&&(n.removeEventListener("message",r),aO(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),aO(n)}}function aO(e){"MessagePort"===e.constructor.name&&e.close()}function aT(e){if(e)throw Error("Proxy has been released and is not useable")}function aL(e){var n,t=e.map(aN);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var aM=new WeakMap;function aG(e){return Object.assign(e,(0,N._)({},aE,!0))}function aN(e){var n=!0,t=!1,r=void 0;try{for(var i,o=aU[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,u._)(i.value,2),l=a[0],c=a[1];if(c.canHandle(e)){var s=(0,u._)(c.serialize(e),2),d=s[0],p=s[1];return[{type:aI.HANDLER,name:l,value:d},p]}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:aI.RAW,value:e},aM.get(e)||[]]}function aH(e){switch(e.type){case aI.HANDLER:return aU.get(e.name).deserialize(e.value);case aI.RAW:return e.value}}function az(e,n,t){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,p._)({id:i},n),t)})}var aW=t(29705),aB=t(43517),aj=Symbol("timeout"),a$=t(20671);function aq(){var e=(0,f._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return aq=function(){return e},e}function aK(){var e=(0,f._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return aK=function(){return e},e}function aV(){var e=(0,f._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return aV=function(){return e},e}function aZ(){var e=(0,f._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    ...CoreSubscriptionPlanStatus\n  }\n  ","\n"]);return aZ=function(){return e},e}function aJ(){var e=(0,f._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return aJ=function(){return e},e}function aX(){var e=(0,f._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return aX=function(){return e},e}function aQ(){var e=(0,f._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return aQ=function(){return e},e}function a0(){var e=(0,f._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return a0=function(){return e},e}function a1(){var e=(0,f._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n  }\n"]);return a1=function(){return e},e}function a2(){var e=(0,f._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return a2=function(){return e},e}function a4(){var e=(0,f._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return a4=function(){return e},e}function a5(){var e=(0,f._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return a5=function(){return e},e}function a3(){var e=(0,f._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a3=function(){return e},e}function a6(){var e=(0,f._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a6=function(){return e},e}function a8(){var e=(0,f._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a8=function(){return e},e}function a7(){var e=(0,f._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return a7=function(){return e},e}function a9(){var e=(0,f._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a9=function(){return e},e}function le(){var e=(0,f._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    getRepl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return le=function(){return e},e}var ln=(0,h.J1)(aq()),lt=(0,h.J1)(aK()),lr=(0,h.J1)(aV()),li=(0,h.J1)(aZ(),a$.y),lo=(0,h.J1)(aJ()),la=(0,h.J1)(aX()),ll=(0,h.J1)(aQ()),lu=(0,h.J1)(a0()),lc=(0,h.J1)(a1()),ls=(0,h.J1)(a2()),ld=(0,h.J1)(a4(),ls),lp=(0,h.J1)(a5(),ls),lf=(0,h.J1)(a3(),ln,lt,lr,li),lh=(0,h.J1)(a6(),ls,lo,la,ll),lg=(0,h.J1)(a8(),ls,lo,la,ll),lm=(0,h.J1)(a7()),lv=(0,h.J1)(a9(),lu,lc,ld,lp),lw=(0,h.J1)(le(),lu,lc,ld,lp);function ly(e){return function(n){return(0,nZ._)(function(){var t,r;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return[4,null===nX.V||void 0===nX.V?void 0:nX.V.query({query:e,variables:n||void 0})];case 1:if(null==(t=i.sent())?void 0:t.data)return[2,t.data];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})})()}}var lb=t(97858);function lx(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)(0,u.value)()}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return n.apply(void 0,(0,eE._)(r))}}(e,n[r]));return t}function l_(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(!t.scopes.has(u)){var c="Scope not declared in extension.json: ".concat(u);e.logger.warn("".concat(c,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var lS=ep.ZU.Record(ep.ZU.String(),ep.ZU.String({minLength:1})),lY=t(44626);function lA(){var e=(0,f._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return lA=function(){return e},e}var lI=(0,h.J1)(lA());function lk(e){return{registerCommand:function(n,t){return(0,nZ._)(function(){var r,i,o;return(0,nJ.YH)(this,function(a){switch(a.label){case 0:if(t)return[3,2];return e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,[4,(0,aw.c)(r,e)];case 1:if(!(o=a.sent()).data.id)throw Error("Command: expected id to be defined");if(!("contributions"in o.data))throw Error("Command: In ".concat(o.data.id,", contributions should be an array"));return 0===o.data.contributions.length&&e.logger.warn("Command: ".concat(o.data.id," has no contributions")),(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,4];case 2:return i=n,r=t,[4,(0,aw.c)(r,e)];case 3:o=a.sent(),a.label=4;case 4:return e.store.set(aW.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,ao.eb)(i.commandId),contributions:i.contributions,create:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){return[2,o]})})()}}}),[2]}})})()},registerCreateCommand:function(n,t){return(0,nZ._)(function(){var r,i;return(0,nJ.YH)(this,function(o){if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in aB.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(aB.P))),i={id:(0,ao.eb)(n.commandId),contributions:n.contributions,create:function(n){var r=n.path;return(0,nZ._)(function(){var n;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:r}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(n=i.sent()))return[2,null];return[2,(0,aw.c)(n,e)]}})})()}},e.store.set(aW.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})})()}}}function lE(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var lC=t(98565),lD=t(1874);function lR(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var lF=t(92972),lU=t(76903),lP=t(69071),lO=function(e,n){var t=e.extension,r=n.showMessage,i=n.hideMessage,o=n.hideAllMessages,a=function(e){return function(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,a=arguments.length>2?arguments[2]:void 0,s=Date.now();s-u>=6e4&&(u=s,l=0);var d=null!=(i=t.manifest.name.trim())?i:"Unknown Extension";l<10?(r({content:(0,c.FD)(c.FK,{children:[n,(0,c.Y)("div",{children:(0,c.Y)(au.EY,{variant:"small",children:d})})]}),type:e,time:o>1e4?1e4:o,style:a}),l++):lP.vF.error("Extension reached showMessage throttle limit",{extensionId:t.extensionId,extensionName:t.manifest.name,content:n})}},l=0,u=Date.now();return{showConfirm:a("confirm"),showError:a("error"),showNotice:a("notice"),showWarning:a("warning"),hideMessage:i,hideAllMessages:o}},lT=t(67333),lL=t(73712);function lM(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,l=(0,d.useRef)(null),c=(0,eo.A)(),s=(0,aa.T)(),f=(0,am.A)(),h=(0,d.useRef)(),g=(0,lT.p9)(),m=(0,av.X_)(null==n?void 0:n.installationId),v=(0,lL.D)(),w=(0,d.useRef)(v),y=(0,d.useRef)([]);w.current=v;var b=(0,K.A)(function(){return{}},[]),x=(0,aS.A)(f.container),_=(0,u._)((0,d.useState)(!1),2),S=_[0],Y=_[1];(0,d.useEffect)(function(){x===ab.KN.CONNECTED&&Y(!0)},[x]),(0,d.useEffect)(function(){y.current.forEach(function(e){return e(v.theme)})},[v.theme]),(0,d.useEffect)(function(){return function(){h.current&&h.current()}},[]);var A=(0,d.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),I=(0,d.useCallback)(function(){l.current&&A()&&n&&m&&s&&(h.current&&h.current(),h.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,i,o,a,l,u,c,s,d,f=e.filePath,h=e.replId,g=e.environmentAPIs,m=e.logger.createLogger({api:"debug"});return(0,r4._)((0,p._)({filePath:f},(n=e.services.fs,t=e.logger.createLogger({api:"fs"}),lx([l_(e,["read"])],(0,p._)({readFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return(0,nZ._)(function(){var r,i;return(0,nJ.YH)(this,function(o){switch(o.label){case 0:return r=(0,lD.Fd)(e),[4,n.readFile(r)];case 1:var a;if((i=o.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(a=i.content,"utf8"===t?a.toString():"binary"===t?a.toBuffer():a)}]}})})()},readDir:function(e){return(0,nZ._)(function(){var t,r;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return t=(0,lD.Fd)(e),[4,n.readDir(t)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})()},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,lD.Fd)(e);(0,i_.m6)(o)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(o,{onChange:function(e){if("utf8"===i)return void r.onChange(e.toString("utf8"));r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return aG(function(){a()})},watchDir:function(e,t){var r=(0,lD.Fd)(e),i=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,lD.me)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return aG(function(){i()})}},lx([l_(e,["write-exec"])],{createDir:function(e){return(0,nZ._)(function(){var t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return t=(0,lD.Fd)(e),[4,n.createDir(t)];case 1:return[2,lR(r.sent())]}})})()},deleteDir:function(e){return(0,nZ._)(function(){var t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return t=(0,lD.Fd)(e),[4,n.deleteDir(t)];case 1:return[2,lR(r.sent())]}})})()},writeFile:function(e,t){return(0,nZ._)(function(){var r,i,o;return(0,nJ.YH)(this,function(a){switch(a.label){case 0:if(r=(0,lD.Fd)(e),"string"!=typeof t)return[3,1];return i=t,[3,4];case 1:if(!(0,aA._)(t,Blob))return[3,3];return o=lC.A.from,[4,t.arrayBuffer()];case 2:return i=o.apply(lC.A,[a.sent()]),[3,4];case 3:i=lC.A.from(t),a.label=4;case 4:return[4,n.writeFile(r,i)];case 5:return[2,lR(a.sent())]}})})()},deleteFile:function(e){return(0,nZ._)(function(){var t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return t=(0,lD.Fd)(e),[4,n.deleteFile(t)];case 1:return[2,lR(r.sent())]}})})()},copyFile:function(e,t){return(0,nZ._)(function(){var r;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return r=(0,lD.Fd)(e),[4,n.copyFile(r,t)];case 1:return[2,lR(i.sent())]}})})()},move:function(e,t){return(0,nZ._)(function(){var r,i,o;return(0,nJ.YH)(this,function(a){switch(a.label){case 0:return r=(0,lD.Fd)(e),[4,n.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==tH.pt.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return o=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:o=a.sent(),a.label=5;case 5:return[2,lR(o)]}})})()},watchTextFile:function(e,r){(0,i_.m6)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(aG({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:i,updateSelections:o}))},onChange:function(e){var n=e.latestContent,t=e.changeSource,i=e.changes,o=e.version;return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){return r.onChange({latestContent:n.toString(),version:o,changeSource:t,changes:i.toJSON()}),[2]})})()},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return aG(function(){i()})}})))),function(e){var n=e.services.container,t=null;function r(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})()}return lx([l_(e,["repldb:read"])],(0,p._)({getReplDbValue:function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}})})()},listReplDbKeys:function(e){return(0,nZ._)(function(){var i;return(0,nJ.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})()}},lx([l_(e,["repldb:write"])],{setReplDbValue:function(e,i){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})()},deleteReplDbKey:function(e){return(0,nZ._)(function(){var i;return(0,nJ.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})()}})))}(e),{watchActiveFile:function(e){return aG(r.environmentAPIs.watchActiveFile(e))},openFile:(r=e).environmentAPIs.openFile,getActiveFile:function(){return r.environmentAPIs.getActiveFile()}},(i=e.getThemeContext,o=e.onThemeChange,{getCurrentTheme:function(){return i().theme},getCurrentThemeValues:function(){return i().theme.values.global},onThemeChange:function(e){var n=o(e);return aG(function(){n()})},onThemeChangeValues:function(e){var n=o(function(n){return e(n.values.global)});return aG(function(){n()})}}),lO(e,g.toasts),{currentUser:ly(lf),userById:ly(lg),userByUsername:ly(lh),currentRepl:function(e){return ly(lv)((0,p._)({id:h},e))},replById:ly(lv),replByUrl:ly(lw)},(a=e.services.container.client(),l=e.logger.createLogger({api:"exec"}),(0,p._)({},lx([l_(e,["write-exec"])],{exec:function(e){return(0,nZ._)(function(){var n,t,r,i;return(0,nJ.YH)(this,function(o){switch(o.label){case 0:return[4,e.args];case 1:return n=o.sent(),[4,e.env];case 2:if(t=o.sent(),l.info("exec: [".concat(n.join(", "),"]"),{environmentVariables:t}),!lb.J(lS,t))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return r=o.sent(),i=function(){},[2,aG({dispose:function(){i()},promise:new Promise(function(o){i=a.openChannel({service:"exec"},function(a){var u=a.channel;u.onCommand(function(n){r?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),u.request({exec:{args:n,env:t,splitStderr:!!r}}).then(function(n){if(n.ok)return void o({exitCode:0,error:null});if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),o({exitCode:null,error:t});return}if("open"===u.status&&i(),n.error){var r,a,l=Number(null==(a=n.error)||null==(r=a.match(/-?[0-9]+/g))?void 0:r[0]);o({exitCode:"number"==typeof l?l:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){l.error("exec: threw crosis error:\n".concat(String(n||"")));var t="exec() failed due to internal error. See console for details.";e.onError(t),o({error:t,exitCode:null})})})})})]}})})()}}))),(u=e.extension,c=e.paneId,s=e.environmentAPIs,d=!1,{activatePane:function(){c&&(s.activatePane(c),d||(d=!0,(0,oB.u4)(oB.AZ.EXTENSION_USED,{extensionId:u.extensionId,extensionName:u.manifest.name})))}})),{commands:{registerCommand:function(n,t){return(0,nZ._)(function(){var r;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),[4,(0,aw.c)(t,e)];case 1:return r=i.sent(),e.store.set(aW.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){return[2,r]})})()}}}),[2]}})})()},registerCreateCommand:function(n,t){return(0,nZ._)(function(){var r,i;return(0,nJ.YH)(this,function(o){if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in aB.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(aB.P))),i={id:n.commandId,contributions:n.contributions,create:function(n){var r=n.path;return(0,nZ._)(function(){var n;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:r}),new Promise(function(e){return setTimeout(function(){return e(aj)},50)})])];case 1:if(null===(n=i.sent()))return[2,null];if(n===aj)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,aw.c)(n,e)]}})})()}},e.store.set(aW.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})})()}},experimental:(0,r4._)((0,p._)({},lx([lE(e)],{hasExperimentalApi:function(){return!0}})),{editor:lx([lE(e)],(0,p._)({},{getPreferences:function(){return(0,nZ._)(function(){var e,n,t,r;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return[4,null===nX.V||void 0===nX.V?void 0:nX.V.query({query:lm})];case 1:if(null==(t=i.sent())||null==(n=t.data)||null==(e=n.currentUser)?void 0:e.workspacePreferences)return[2,(0,lY.o)(t.data.currentUser.workspacePreferences)];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})})()}})),commands:lx([lE(e)],(0,p._)({},lk(e))),auth:lx([lE(e)],(0,p._)({},{getAuthToken:function(){return(0,nZ._)(function(){var n,t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===nX.V||void 0===nX.V?void 0:nX.V.query({query:lI,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:lx([lE(e)],(0,p._)({},lk(e)))}),internal:function(e){var n,t,r;return e.store.get(e.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},container:(n=e.services.container,{getConnectionState:function(){return n.getConnectionState()},onConnectionStateChanged:function(e){var t=n.onConnectionStateChanged(e);return aG(function(){t()})}}),layout:{revealOrInsertTool:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.logger.createLogger({api:"revealOrInsertTool"});if(!e.extension.manifest.tools)return void t.warn("No tools defined in extension manifest");if(e.extension.manifest.tools.length<n+1)return void t.warn("Tool index out of bounds");var r=e.extension.manifest.tools[n],i=r.name||e.extension.manifest.name,o=r.handler;e.environmentAPIs.revealOrInsertTool({extensionId:e.extension.extensionId,installationId:e.extension.installationId,baseUrl:e.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return e.environmentAPIs.getLayoutState()},setLayoutState:function(n){return e.environmentAPIs.setLayoutState(n)}},secrets:(t=e.services.secrets,{setSecret:function(e){return(0,nZ._)(function(e){var n,r;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return n=e.key,r=e.value,[4,t.addEntries([{key:n,value:r}])];case 1:return i.sent(),[2,(0,lF.Ok)(!0)]}})}).apply(this,arguments)},getSecret:function(e){return(0,nZ._)(function(){var n;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.read()];case 1:return[2,lF.Ok.apply(void 0,[r.sent().get(e.key)])];case 2:return n=r.sent(),[2,(0,lF._)(n)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){return[2,(0,lU.M)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(r=e.services.dotReplit).getConfig,update:r.updateDotReplit},ssh:{getSshConfig:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){return[2,e.environmentAPIs.getSshConfig()]})})()}},commands:lk(e)}:null}(e),debug:{info:function(e,n){return m.info(e,n)},warn:function(e,n){return m.warn(e,n)},error:function(e,n){return m.error(e,n)}},handshake:function(n){return(0,nZ._)(function(){var t,r,i,o;return(0,nJ.YH)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!=(t=a.sent())?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return o=null!=(i=a.sent())?i:"(unset)",(0,oB.u4)(oB.AZ.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,nZ._)(function(){var n,t,i;return(0,nJ.YH)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((i=JSON.parse(null==(n=t.output)?void 0:n.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})()}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var i=aP(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}({extension:n,extensionIframe:l.current,services:f,paneId:i,replId:c,getThemeContext:function(){return w.current},onThemeChange:function(e){return y.current.push(e),function(){y.current.splice(y.current.indexOf(e),1)}},store:g,extensionStateAtom:m,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:s,ghostwriter:b}))},[s,w,f,A,i,g,m,o,c,a,n,t,r,b]);return{isValidExtensionPaneUrl:A,didConnectOnce:S,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r4._)((0,p._)({title:r,src:t},ax.A,e),{ref:(0,a_.P)([l,e.ref],{breadcrumb:"client/workspace/extensions/sandbox/useExtensionSandbox.tsx:191"}),onLoad:function(n){I(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,d.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function lG(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,av.X_)(n.installationId),i=lM({extension:n,sandboxUrl:(0,ay.sU)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,l=i.getIframeProps;return a()&&o&&r?(0,c.Y)("iframe",(0,p._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var lN=t(11082),lH=t(75538),lz=t(29576),lW=t(2142),lB=t(55929),lj=t(12785);function l$(){var e,n,t,r=(0,eo.A)(),i=(0,aa.T)(),o=(0,am.A)().container,a=(0,ag.A)(o).url,l=(0,lN.oR)(),s=(0,av.Sc)(),f=oC(),h=(0,lH.yb)(),m=(0,av.hS)(),v=(0,lH.iD)();(0,lN.Ju)();var w=(0,av.Ot)(),y=ah(),b=(0,u._)((0,d.useState)(!1),2),x=b[0],_=b[1];(0,d.useEffect)(function(){r&&i&&v({replId:r,userId:i})},[r,i,v]);var S=(0,aW.xx)(),Y=ru(ny);(0,d.useEffect)(function(){Y(S)},[S,Y]);var A=ru(rq);n=(e=(0,p._)({},rz,void 0),g.I(rW,e)).data,t=ru(rj),(0,d.useEffect)(function(){var e;(null==n||null==(e=n.currentUser)?void 0:e.filetypeAssociations)&&t(n.currentUser.filetypeAssociations)},[n,t]);var I=ra(r$),k=ru(r$),E=function(e){var n=e.filterUser;return function(e){var t=e.active;return(0,nZ._)(function(){var e,o;return(0,nJ.YH)(this,function(a){switch(a.label){case 0:if(!t)return[2,[]];return[4,null===nX.V||void 0===nX.V?void 0:nX.V.query({query:ai,variables:{replId:r,userId:n?i:void 0}})];case 1:if(!(e=a.sent())||e.error||!(o=e.data.extensionList))return[2,[]];return[2,o.map(function(e){var n;return{match:oj.G2,data:{type:"action",label:e.name,icon:(0,c.Y)(lj.A,{}),description:null!=(n=e.description)?n:"",run:function(){e.url&&(e.installation?m({installationId:(0,ao.qq)(e.installation.id)}):s({replId:r,extensionId:(0,ao.PM)(e.id)}))}}}})]}})})()}},C=(0,aW.Zp)(aB.P.CommandBar);return o9({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:function(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{}}],[4,Promise.all(C.map(function(n){return(0,nZ._)(function(){var t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aw.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}},{enabled:!0}),o9({match:oj.G2,commands:function(e){return e.active||""!==e.searchQuery?[{match:oj.G2,data:{type:"action",label:"Extension Devtools",icon:(0,c.Y)(lB.A,{}),description:"Manage and deploy this Repl as an extension",run:function(){f({pane:{type:"extensionDevtools"}})}}},{match:oj.G2,data:{type:"action",label:"URL",icon:(0,c.Y)(lB.A,{}),description:"Add an extension by URL",run:function(){_(!0)}}},{match:oj.G2,data:{type:"action",label:"From this Repl",icon:(0,c.Y)(lB.A,{}),description:"Load this Repl as an extension",run:function(){a&&h(a)}}},{match:oj.G2,data:{type:"context",label:"My Extensions",icon:(0,c.Y)(lj.A,{}),description:"Browse extensions you have created"},commands:E({filterUser:!0})},{match:oj.G2,data:{type:"action",label:"Docs",icon:(0,c.Y)(lW.A,{}),description:"Read the Extensions docs",run:function(){f({pane:{type:"docs",data:{url:nK.ik.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,c.Y)(lj.A,{}),description:"Manage extensions"}},{enabled:l}),(0,c.FD)(c.FK,{children:[(0,c.Y)(o3.a,{isOpen:x,onRequestClose:function(){return _(!1)},children:(0,c.Y)(lz.A,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return _(!1)},onConfirm:function(e){h(e)}})}),(0,c.Y)(o3.a,{isOpen:!!I,onRequestClose:function(){return k(null)},children:I?(0,c.Y)(as,{fileExtension:I.fileExtension,extensionId:I.extensionId,fileHandlerId:I.fileHandlerId,onCancel:function(){return k(null)},onConfirm:function(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return e=I.fileExtension,[4,A({fileExtension:e,newAssociation:{extensionId:I.extensionId,fileHandlerId:I.fileHandlerId}})];case 1:return n.sent(),k(null),[2]}})})()}}):null}),w.map(function(e){return e.manifest.background?(0,c.Y)(lG,{environmentAPIs:y,extension:e},e.installationId):null})]})}var lq=t(69029),lK=t(21550),lV=t(55247);function lZ(){var e=(0,am.A)().fs,n=(0,u._)((0,d.useState)(!1),2),t=n[0],r=n[1],i=(0,u._)((0,d.useState)(!1),2),o=i[0],a=i[1],l=(0,d.useId)();(0,d.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var s=(0,d.useCallback)(function(){r(!1)},[r]);return(0,c.Y)(o3.a,{isOpen:t,onRequestClose:s,children:(0,c.Y)(ou.S,{gap:24,children:(0,c.FD)(ou.S,{gap:24,children:[(0,c.FD)(au.Y9,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,c.Y)(lK.A,{color:ry.LU.accentNegativeDefault,size:20})]}),(0,c.FD)(au.EY,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,c.Y)(lV.A,{})," icon on the left."]}),(0,c.Y)(au.EY,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,c.FD)(ou.S,{row:!0,gap:8,tag:"label",children:[(0,c.Y)(lq.S,{id:l,checked:o,onChange:a}),(0,c.Y)(au.EY,{variant:"small",children:"Do not show this message again for this session."})]}),(0,c.Y)(al.$n,{onClick:s,text:"Close"})]})})})}var lJ=t(29544),lX=t(21365),lQ=t(78574),l0=t(46680);function l1(){var e=ru(tQ),n=(0,lX.A)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,u=n.setSelectedFile,s=n.reviewingPrompt,d=n.onChoice,p=n.local,f=n.remote,h=[ol.wp.minHeight("7em"),ol.wp.maxHeight("50vh"),ol.wp.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,c.Y)(o3.a,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,c.FD)(ou.S,{gap:24,children:[(0,c.Y)(au.Y9,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,c.FD)(au.EY,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,c.FD)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,c.Y)(l0.A,{}):(0,c.FD)(c.FK,{children:[a.length?(0,c.Y)(lQ.l,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){u(e.path)}}):null,i?(0,c.FD)(ou.S,{css:[ol.wp.backgroundColor.redDimmest,ol.wp.font.code],pt:16,p:8,row:!0,gap:16,justify:"start",align:"center",children:[(0,c.Y)(au.EY,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,c.FD)(au.EY,{multiline:!1,children:["Divergence type: ",null==s?void 0:s.case]})]}):null,(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.FD)(ou.S,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,c.Y)(au.EY,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,c.Y)(o6.ui,{elevated:!0,grow:!0,shrink:!0,py:8,children:(0,c.Y)(ou.S,{css:h,children:(0,c.Y)(lJ.N,{diffViewer:p})})}),(0,c.FD)(ou.S,{pt:16,children:[(0,c.Y)(au.EY,{css:[ol.wp.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,c.Y)(al.$n,{onClick:function(){d("local")},text:"Reset to Mine"})]})]}),(0,c.FD)(ou.S,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,c.Y)(au.EY,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,c.Y)(o6.ui,{elevated:!0,grow:!0,shrink:!0,py:8,children:(0,c.Y)(ou.S,{css:h,children:(0,c.Y)(lJ.N,{diffViewer:f})})}),(0,c.FD)(ou.S,{pt:16,justify:"end",children:[(0,c.Y)(au.EY,{css:[ol.wp.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,c.Y)(al.$n,{onClick:function(){d("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var l2=t(62760),l4=t(46855),l5=t(33052),l3=t(46138),l6=t(36448),l8=t(84194),l7=t(42793),l9=t(90233),ue=t(86868),un=t(89204);function ut(e){return(0,c.Y)(oc.Ay,(0,r4._)((0,p._)({},e),{children:(0,c.Y)("path",{d:"M2.47 5.53a.75.75 0 0 1 1.06-1.06l16 16a.75.75 0 1 1-1.06 1.06l-16-16ZM1.291 11.215a7.593 7.593 0 0 1 1.42-3.675l1.077 1.077a6.024 6.024 0 0 0-.376 6.128 6.352 6.352 0 0 0 2.402 2.554 6.73 6.73 0 0 0 3.462.951h4.146l1.5 1.5H9.277a8.23 8.23 0 0 1-4.234-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211ZM5.828 5l1.15 1.15.02-.008a6.787 6.787 0 0 1 3.593-.263 6.62 6.62 0 0 1 3.185 1.603 6.2 6.2 0 0 1 1.81 2.962.75.75 0 0 0 .725.556h1.145c1.015 0 1.983.389 2.693 1.072a3.544 3.544 0 0 1 1.101 2.553c0 .952-.393 1.871-1.101 2.553a3.817 3.817 0 0 1-1.317.825l1.134 1.134a5.286 5.286 0 0 0 1.223-.878 5.044 5.044 0 0 0 1.561-3.634 5.044 5.044 0 0 0-1.56-3.634A5.385 5.385 0 0 0 17.455 9.5h-.593a7.725 7.725 0 0 0-2.074-3.124 8.118 8.118 0 0 0-3.907-1.968A8.287 8.287 0 0 0 5.828 5Z"})}))}var ur=(0,l7.i7)("0%,100%{opacity:1;}50%{opacity:0.25;}"),ui=(0,rb.x)({root:[ol.wp.height(20),ol.wp.width(20),ol.wp.center]}),uo=(0,rb.x)({root:[ui.root],pulseRoot:[ui.root,{animation:"".concat(ur," 2s infinite")}]});function ua(){var e=(0,l8.A)(),n=e.isSaving;return e.isOffline?(0,c.Y)(l9.m_,{tooltip:"Reconnecting, changes will be synced when youre online",placement:"right",children:(0,c.Y)(ou.S,{css:uo.root,children:(0,c.Y)(ut,{size:16,color:ry.LU.redDefault})})}):n?(0,c.Y)(l9.m_,{tooltip:"Saving",placement:"right",children:(0,c.Y)(ou.S,{css:uo.pulseRoot,children:(0,c.Y)(ue.A,{size:16,color:ry.LU.foregroundDimmest})})}):(0,c.Y)(l9.m_,{tooltip:"Saved",placement:"right",children:(0,c.Y)(ou.S,{css:uo.root,children:(0,c.Y)(un.A,{size:16,color:ry.LU.foregroundDimmest})})})}var ul=t(24739),uu="color-mix(in srgb, ".concat(ry.LU.interactiveBackground," 60%, ").concat(ry.LU.surfaceBackground,")"),uc=t(2152),us=t(48373),ud=t(59547),up=t(80667),uf=t.n(up),uh=(0,ry.CK)("ResizeHandle.module.css",["--width","--grip-height","--grip-opacity","--grip-color"]);function ug(){var e,n=oL(),t=(0,t9.p)(),r=oM(),i=(0,us.A)(r.agentFiletreeOrder),o=(0,d.useRef)(null);(0,rv.d)(o,n.resizeHandleView,function(e){var n;return n={},(0,N._)(n,uh.gripOpacity,e.isOpen?"1":"0"),(0,N._)(n,uh.gripColor,ry.LU.outlineDimmest),(0,N._)(n,uh.width,e.width+"px"),(0,N._)(n,uh.gripHeight,"24px"),n});var a=(0,d.useRef)(null);return(0,c.Y)(ou.S,{clsx:[uf().root,(e={},(0,N._)(e,uf().left,"agent-filetree"===i&&t),(0,N._)(e,uf().right,"filetree-agent"===i||!t),e)],innerRef:o,onPointerDown:function(e){(0,ud.j)(e,{start:function(){(0,aA._)(document.activeElement,HTMLElement)&&(a.current=document.activeElement),n.resize.start()},move:function(e){var t=e.delta;n.resize.update(t.x)},end:function(){var e,t;n.resize.end(),null==(t=a.current)||null==(e=t.focus)||e.call(t),a.current=null}})},align:"center",justify:"center",children:t?null:(0,c.Y)(ou.S,{clsx:uf().grip})})}var um=t(17370),uv=t(67312),uw=t(90173),uy=t(65169),ub=t.n(uy),ux=(0,ry.CK)("Search.module.css",["--background-color","--input-height"]),u_={type:"context",icon:(0,c.Y)(uw.A,{}),label:"",description:"Search"};function uS(e){var n,t=(0,am.A)().fs,r=(0,t_.Sx)(),i=oR(),o=(0,uv.J)(),a=(0,d.useMemo)(function(){var e=(0,um.g)({openFile:i,fs:t,shouldHideFile:o,getRecentFiles:r});return e.data=u_,delete e.match,e},[i,t,o,r]),l=(0,t9.p)();return(0,c.Y)(ou.S,{onContextMenu:e.onContextMenu,clsx:ub().root,style:(n={padding:l?0:void 0},(0,N._)(n,ux.backgroundColor,l?ry.LU.surfaceBackground:uu),(0,N._)(n,ux.inputHeight,"32px"),n),children:(0,c.Y)(o8.r,{fullWidth:!0,command:a,openOnInput:!0,compact:!0})})}var uY=t(26737),uA=t(60910),uI=t(20907),uk=t(36163),uE=t(50916),uC=t(80023),uD=t(31185),uR=t(81920),uF=t(88233),uU=t(9797),uP=t(79690),uO=t(88976),uT=t(13315),uL=t(52389),uM=t(43193);function uG(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,c.Y)(uU.A,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var uN=/[*]{2}\/[*]\.([a-z0-9.]+)/,uH=t(71132),uz=t(62721),uW=t(11148),uB=t(44237);function uj(){var e,n,t,r,i,o,a,l,s,p,f,h,g,m,v,w,y,b,x,_,S=(0,eo.A)(),Y=(0,u._)((0,d.useState)(null),2),A=Y[0],I=Y[1],k=oR(),E=(0,uW.v)(),C=(0,uv.J)(!0),D=(0,d.useCallback)(function(e){return!C(e.filename)},[C]),R=(0,am.A)().fs,F=(0,uY.g)("multiselectModifierKey").preferences,U=ru(nA),P="cmdOrCtrlKey"===F.multiselectModifierKey?"cmdOrCtrlKey":"altKey",O=(0,t_.Sx)(),L=(0,d.useCallback)(function(e){return(0,uB.J9)(e,O)},[O]),M=(0,uH.EF)().onContextMenu,G=(e=(0,eo.A)(),n=(0,am.A)().fs,t=oR(),r=ru(tA),i=ra(ny),o=(0,aW.Zp)(aB.P.FiletreeContextMenu),a=ra(rj),l=ru(rq),s=(0,T._P)({controlName:"flag-folder-downloads"}),p=(0,T._P)({controlName:"flag-direct-file-downloads"}),f=ru(r$),h=(0,d.useCallback)(function(e){var n=e.extensionId,t=e.fileExtension,r=e.fileHandlerId,i=a[t];i&&i.extensionId===n&&i.fileHandlerId===r||f(e)},[f,a]),g=(0,d.useCallback)(function(r,s){var d=r.path,f=[{data:{type:"group",key:"rename"},commands:function(){return[(0,uD.ep)(function(){return s.rename(d)})]}}];(0,i_.m6)(d)&&f.push({data:{type:"group",key:"saveFile"},commands:function(){return[(0,uD.tH)(function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,n.flush(new Set([d]),tH.sT.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()})]}}),f.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,i=[{type:tH.pt.File,path:n}],o=!0,a=!1,l=void 0;try{for(var s,d=t()[Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var p=(0,u._)(s.value,2),f=p[0],h=p[1];h!==tH.pt.Directory&&f!==n&&i.push({path:f,type:h})}}catch(e){a=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}var g=i.length,m=1===g?"Open":"Open ".concat(g," files");return[{label:m,icon:(0,c.Y)(uO.A,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:m+" in split",icon:(0,c.Y)(op.A,{}),run:function(){var e=(0,ek._)(i),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var o=!0,a=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;r({path:s.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:oj.G2,data:{type:"action",label:n,icon:t,run:r}}})}({path:d,getSelectedNodes:s.getSelectedNodes,openFile:t})}});var g=function(e){var n=function(e){var n=r[e],i=(0,uI.tL)(n.glob);if(!i||!i.exec(t))return"continue";var l=uN.exec(n.glob),u=n.icon?n.icon:n.extension.manifest.icon,s=n.name?n.name:n.extension.manifest.name,p=u?(0,ay.sU)(n.extension.baseUrl,u):null;d.push({match:oj.G2,data:{type:"action",icon:p?(0,c.Y)(uG,{size:16,name:s,iconUrl:p}):(0,c.Y)(uO.A,{}),label:"Open with "+s,run:function(){l&&a({extensionId:n.extension.extensionId,fileHandlerId:e,fileExtension:l[1]}),o({path:t,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},t=e.path,r=e.handlers,i=e.filetypeAssociations,o=e.openFile,a=e.requestAssociateFiletype,l=e.associateFiletype,u=(0,iS.QC)(t),s=u?i[u]:null,d=[];for(var p in r)n(p);return s&&u&&d.length&&d.push({match:oj.G2,data:{icon:(0,c.Y)(uM.A,{}),type:"action",label:"Use default opener",run:function(){l({fileExtension:u,newAssociation:null})}}}),d}({path:d,handlers:i,filetypeAssociations:a,requestAssociateFiletype:h,associateFiletype:l,openFile:t});return g.length&&f.push({data:{type:"group",key:"extensions"},commands:function(){return g}}),f.push({data:{type:"group",key:"copy"},commands:function(){return(0,uD.kx)(d)}}),f.push((0,uD.Z4)(function(){return(0,nZ._)(function(){var t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:t=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,uE.A)(d,n)];case 2:return t=r.sent(),[3,4];case 3:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,uR.A)({replId:e,action:"duplicated",fileType:tH.pt.File}),s.rename(t),[2]}})})()})),f.push((0,uC.Gp)(d,n,p)),f.push({data:{type:"group",key:"deleteFile"},commands:function(){return[(0,uD.tE)(function(){return s.deleteNodes(r)})]}}),f.push({data:{type:"group",key:"extensions"},commands:function(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{filePath:d,fileType:tH.pt.File}}],[4,Promise.all(o.map(function(n){return(0,nZ._)(function(){var t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aw.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}}),f},[i,a,h,l,t,n,p,e,o]),m=(0,uF.xu)(),v=(0,uF.xi)(),w=(0,B.jt)(),b=(y=(0,uY.g)("agentPosition")).preferences.agentPosition,x=y.update,_=(0,d.useCallback)(function(e,n){var t=e.path,i=t===uk.Dl,a=i?[]:[{data:{type:"group",key:"rename"},commands:function(){return[(0,uD.ep)(function(){return n.rename(e.path)})]}}];if(a.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:oj.G2,data:{type:"action",icon:(0,c.Y)(uw.A,{}),label:"Search this directory",run:function(){r({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),a.push.apply(a,(0,eE._)((0,uD.DN)(function(t){return n.create(t,e.path)}))),a.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:oj.G2,data:{type:"action",label:"Open shell here",icon:(0,c.Y)(uL.A,{}),run:function(){r({pane:{type:"shell",data:{initialPwd:t}},edge:"left"})}}}]}}),i||a.push({data:{type:"group",key:"copy"},commands:function(){return(0,uD.kx)(t)}}),n.getExpandedDirs()&&a.push({match:oj.G2,data:{icon:(0,c.Y)(uP.A,{}),type:"action",label:"Collapse "+(i?"all":"child folders"),run:function(){var e=n.getExpandedDirs(t);e&&n.collapse((0,eE._)(e))}}}),!i&&s&&a.push({data:{type:"group",key:"downloadFolder"},commands:function(){return[(0,uC.QW)(t)]}}),i||a.push({data:{type:"group",key:"deleteFile"},commands:function(){return[(0,uD.tE)(function(){return n.deleteNodes(e)})]}}),i&&a.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:oj.G2,data:{type:"action",label:(v?"Hide":"Show")+" hidden files",icon:v?(0,c.Y)(uT.A,{}):(0,c.Y)(uO.A,{}),run:function(){m(!v)}}}]}}),a.push({data:{type:"group",key:"extensions"},commands:function(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{dirPath:t,fileType:tH.pt.Directory}}],[4,Promise.all(o.map(function(n){return(0,nZ._)(function(){var t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aw.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}}),i&&w){var l={type:"action",label:"Move filetree to the "+("leftSidebar"===b?"left":"right"),icon:"leftSidebar"===b?(0,c.Y)(op.A,{}):(0,c.Y)(of.A,{}),run:function(){x({agentPosition:"leftSidebar"===b?"rightSidebar":"leftSidebar"})}};a.push({data:{type:"group",key:"move"},commands:function(){return[{match:oj.G2,data:l}]}})}return a},[v,m,o,r,s,w,x,b]),(0,d.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,c.Y)(uw.A,{})},commands:function(){return e.type===tH.pt.Directory?_(e,n):g(e,n)}}},[g,_])),N=(0,uF.Qd)(),H=(0,l3.u)({fs:R,filter:D,fontSize:13,onFileDoubleClick:function(e,n){U(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,i="click"===t&&"altKey"===P?(0,uA.T$)(r):r.altKey;k({path:n,newTab:i}),E(n,{newTab:i})},onCreate:function(e){e.type===tH.pt.File&&k({opener:{paneType:(0,ne.QY)({path:e.path})},path:e.path})},multiselectModifierKey:P,onConflicts:function(e){return I({type:"conflicts",data:e})},onDeleteNodes:function(e){return I({type:"deleteNode",data:e})},onContextMenu:function(e,n){return M(e,{command:G(n,H)})},autocomplete:L,localCacheKey:S+":sidebar",onFileRenameStart:N,onFileRenameEnd:function(){return N(null)}}),z=(0,uz._)();(0,d.useEffect)(function(){return H.setFileStatus(z)},[H,z]);var W=(0,t_.dm)();(0,d.useEffect)(function(){var e=function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){switch(n.label){case 0:if(null===e)return H.select(null),[2];return[4,H.select({path:e,type:tH.pt.File})];case 1:if(n.sent(),W.current!==e)return[2];return H.scrollToPath(e),[2]}})})()};return e(W.current),W.subscribe(e)},[W,H]);var j=oL(),$=(0,t_.Mg)(),q=(0,t_.JZ)();(0,d.useEffect)(function(){var e=function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){switch(n.label){case 0:if(null===e)return[2];return j.isOpen.current||j.toggle(),[4,H.select({path:e,type:tH.pt.File})];case 1:return n.sent(),H.scrollToPath(e),q(null),[2]}})})()};return e($.current),$.subscribe(e)},[$,q,H,j]);var K=(0,d.useCallback)(function(e){return M(e,{command:G({type:tH.pt.Directory,path:"."},H)})},[H,G,M]);return{filetree:H,activeModal:A,closeModal:function(){return I(null)},onRootContextMenu:K}}var u$=t(84014),uq=t(59260),uK=t(1698),uV=t(30799),uZ=t.n(uV),uJ={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"b"})},uX=(0,ry.CK)("index.module.css",["--width","--height","--transform","--border-color","--background-color","--display","--z-index"]),uQ=(0,d.memo)(function(){var e=(0,d.useRef)(null),n=oL().view;(0,rv.d)(e,n,function(e){var n,t=e.isOpen?uu:"transparent";return n={},(0,N._)(n,uX.width,e.width+"px"),(0,N._)(n,uX.height,e.height+"px"),(0,N._)(n,uX.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,N._)(n,uX.display,e.isOpen?"flex":"none"),(0,N._)(n,uX.borderColor,t),(0,N._)(n,uX.backgroundColor,uu),(0,N._)(n,uX.zIndex,rw.W.filetreeDragLayer.toString()),n});var t=uj(),r=t.filetree,i=t.activeModal,o=t.closeModal;return(0,c.FD)(c.FK,{children:[(0,c.FD)(o6.ui,{clsx:uZ().root,innerRef:e,children:[(0,c.Y)(u0,{filetree:r}),(0,c.FD)(ou.S,{clsx:uZ().content,grow:!0,shrink:!0,children:[(0,c.Y)(uS,{onContextMenu:function(){}}),(0,c.Y)(ou.S,{grow:!0,shrink:!0,dataCy:"sidebar-filetree-section",children:(0,c.Y)(l3.J,{store:r.store})}),(0,c.FD)(ou.S,{clsx:uZ().footerButtons,p:4,row:!0,gap:4,justify:"end",align:"center",children:[(0,c.Y)(al.$n,{dataCy:"filetree-add-file",size:"small",variant:"outlined",iconLeft:(0,c.Y)(uq.A,{}),text:"File",onClick:function(){r.create(tH.pt.File)}}),(0,c.Y)(al.$n,{size:"small",variant:"outlined",iconLeft:(0,c.Y)(uK.A,{}),text:"Folder",onClick:function(){r.create(tH.pt.Directory)}})]})]}),(0,c.Y)(ug,{})]}),(0,c.FD)(o3.a,{isOpen:!!i,onRequestClose:o,children:[(null==i?void 0:i.type)==="conflicts"?(0,c.Y)(l6.A,{paths:i.data.conflicts.map(function(e){return e.path}),onCancel:o,onConfirm:function(){var e=i.data;"move"===e.type?r.move({nodes:e.nodes,to:e.to,overwrite:!0}):r.upload({files:e.files,parentPath:e.to,overwrite:!0}),o()}}):null,(null==i?void 0:i.type)==="deleteNode"?(0,c.Y)(u$.A,(0,r4._)((0,p._)({},(0,ul.D)(i.data.nodes)),{delete:function(){return i.data.confirm()},hideModal:o})):null]})]})});function u0(e){var n=e.filetree,t=oL().toggle,r=(0,d.useCallback)(function(){return t(!1)},[t]);return(0,c.FD)(ou.S,{clsx:uZ().header,row:!0,gap:4,align:"center",pl:6,pr:4,children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:[(0,c.Y)(au.EY,{css:uZ().title,children:"Files"}),(0,c.Y)(ua,{})]}),(0,c.Y)(ou.S,{row:!0,gap:0,align:"center",children:(0,c.Y)(uc.U,{closeFiletree:r,filetree:n})})]})}var u1=t(69945),u2=t.n(u1),u4=t(52963),u5=t(19786),u3=t(33747),u6=t(46973),u8=t(51481),u7=t(86035),u9=t(72643),ce=t(43585),cn=t(72096),ct=t.n(cn),cr=t(6876);function ci(){var e=(0,f._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    ...ReplLinkRepl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n  ","\n"]);return ci=function(){return e},e}function co(){var e=(0,f._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return co=function(){return e},e}var ca=(0,h.J1)(ci(),cr.r),cl=(0,h.J1)(co(),ca),cu=t(83045),cc=t(3383),cs=t(12466),cd=t(88589),cp=t(24529),cf=(0,rb.x)({root:[ol.wp.viewStyle,ol.wp.rowWithGap(8),ol.wp.align.center,ol.wp.px(8),{textDecoration:"none"}],meta:{fontSize:10}});function ch(e){var n=e.repl,t=e.height,r=e.isActive,i=e.searchQuery,o=n.title,a=(0,d.useMemo)(function(){return i?cu.A.match(i,o):null},[i,o]);return(0,c.FD)(ct(),{href:n.url,passHref:!0,style:{height:t},css:cf.root,children:[(0,c.Y)(cs.Ay,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,children:[(0,c.Y)(cd.e,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,c.FD)(au.EY,{css:cf.meta,color:"dimmest",multiline:!1,children:[n.owner.username,"  edited ",(0,cc.K)(n.timeUpdated)]})]})]})}var cg=t(52712),cm=t(53153),cv=t(13298),cw=t(45206),cy=t(94686),cb=["fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","multiselectModifierKey","codeSuggestion","chatEngine","ghostwriterModelSelection"],cx=t(41608),c_=t(71234),cS=t(41572),cY=t(1453),cA=t(44642),cI=t(91683),ck=t(49402);function cE(e){return(0,d.useMemo)(function(){var n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return Object.entries(t).forEach(function(t){var o,a=(0,u._)(t,2),l=a[0],s=a[1],d=(0,eE._)(r).concat([l]);if(s.children){var p,f=n(s.children,d);i.push({match:oj.G2,data:{type:"context",label:s.label,icon:null!=(p=s.icon)?p:(0,c.Y)(c.FK,{})},commands:function(){return f}})}else s.component&&i.push({match:oj.G2,data:{type:"action",label:s.label,icon:null!=(o=s.icon)?o:(0,c.Y)(c.FK,{}),run:function(){return e(d)}}})}),i},t=n(cI.N);return{data:{type:"context",label:"Developer",icon:(0,c.Y)(ck.A,{})},commands:function(e){return e.active||""!==e.searchQuery?t:[]}}},[e])}var cC=t(63591),cD=t(10795),cR={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,N._)({},cD._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,N._)({},cD._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,N._)({},cD._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,N._)({},cD._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,N._)({},cD._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,o5.FM)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:cA.G},run:{id:"repl.run",name:"Run Repl",default:(0,o5.FM)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,o5.FM)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,o5.FM)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,N._)({},cD._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,o5.FM)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}},cF=t(17682),cU=t(29274),cP=t(64424),cO=t(6525),cT=t(63704),cL=t(90991),cM=t(26796),cG=t(54139),cN=t(96617),cH=t(95780),cz=Object.values(cR);let cW=(0,d.memo)(function(e){var n,t,r,i,o,a,l,u,s,p,f,h,g,m,v,w,y,b,x=e.isAdmin,_=e.isSubscribed,S=o4(),Y=(0,t_.Sx)(),A=(0,am.A)(),I=A.fs,k=A.container,E=(0,cF.Z)(),C=E.fork,D=E.isForking,R=(0,cC.lO)(),F=R.isOffline,U=R.isWorkflowsLoading,P=R.isRunning,O=(0,cC.qP)(),T=(0,uv.J)(),L=oR(),M=ru(t1),G=ru(t2),H=ru(tZ),z=ru((n=(0,t_.Ru)(),(0,K.A)(function(){return(0,ea.eU)(null,function(e,t){var r=n();if(r){t(t0,[r.pane]);var i=e(nn);i&&t(nr,i)}})},[n]))),W=ru(iq),j=ru(t4),$=ru(nr),V=ra(nn),J=ra((0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(nn);if(!n)return null;var t=eR(e(nh),n);return t?t.paneGroup.id:null})},[])),X=ru(iX),Q=oF().toggleMaximizePane,ee=ru(tw),en=ru(tm),et=ru(i$),er=ru(ty),ei=(0,oq.eq)(V),el=(0,Z.pE)("replUrl","string"),eu=(0,eo.A)(),ec=(0,q.A)(),es=rc(n_),ed=oC(),ep=(0,af.A)(),ef=(0,cS.A)(),eh=(0,ag.A)(k).url,eg=(0,ad.A)().showNotice,em=x||!1,ev=(0,cY.A)("vscode"),ew=ev.openEditor,ey=ev.onConfirmConfig,eb=ev.isConfigModalOpen,ex=ev.closeConfigModal,e_=(0,B.jt)(),eS=u2()(function(e){return(0,oB.u4)(oB.AZ.PROJECT_RAN,{replId:eu,placement:e})},500);(0,oX.SJ)(function(){return[cR.saveAllFiles.id,function(){I.flush(void 0,tH.sT.MANUAL_SAVE)}]},[I]),(0,oX.SJ)(function(){return[cR.newTab.id,function(){return M()}]},[M]),(0,oX.SJ)(function(){return[cR.nextTab.id,function(){return j("next")}]},[j]),(0,oX.SJ)(function(){return[cR.previousTab.id,function(){return j("previous")}]},[j]),(0,oX.SJ)(function(){return[cR.closeTab.id,function(){var e=G();return e||es()>0}]},[G,es]),(0,oX.SJ)(function(){return[cR.reopenClosedTab.id,function(){return z()}]},[z]),(0,oX.SJ)(function(){return[cR.moveTabUpGroup.id,function(){return H("above")}]},[H]),(0,oX.SJ)(function(){return[cR.moveTabRightGroup.id,function(){return H("rightOf")}]},[H]),(0,oX.SJ)(function(){return[cR.moveTabLeftGroup.id,function(){return H("leftOf")}]},[H]),(0,oX.SJ)(function(){return[cR.moveTabDownGroup.id,function(){return H("below")}]},[H]),(0,oX.SJ)(function(){return V?[cR.keepTab.id,function(){return $(V)}]:void 0},[V,$]),(0,oX.SJ)(function(){return V?[cR.insertPaneGroupUp.id,function(){return er({paneId:V,placement:"above",autoFocus:!0})}]:void 0},[V]),(0,oX.SJ)(function(){return V?[cR.insertPaneGroupRight.id,function(){return er({paneId:V,placement:"rightOf",autoFocus:!0})}]:void 0},[V]),(0,oX.SJ)(function(){return V?[cR.insertPaneGroupLeft.id,function(){return er({paneId:V,placement:"leftOf",autoFocus:!0})}]:void 0},[V]),(0,oX.SJ)(function(){return V?[cR.insertPaneGroupDown.id,function(){return er({paneId:V,placement:"below",autoFocus:!0})}]:void 0},[V]),(0,oX.SJ)(function(){return[o7.id,function(){return S()}]},[S]);var eY=(0,oX.Jn)(cR.findFile.id),eA=(0,t9.p)();(0,oX.SJ)(function(){return[cR.findFile.id,function(){return S(um.g({openFile:L,fs:I,shouldHideFile:T,getRecentFiles:Y,keyboardShortcut:eY}))}]},[S]);var eI=oK({type:"files"});o9(um.g({openFile:L,fs:I,shouldHideFile:T,getRecentFiles:Y,getCurrentlyOpenFilePanesCommands:eI,keyboardShortcut:eY,lazyLoad:!!eA}));var ek=(0,oX.Jn)(cR.searchFileContents.id),eC=oC(),eD=(0,d.useCallback)(function(e){(0,ne.xS)(e.pane)||(0,oB.u4)(oB.AZ.TOOL_OPENED,{source:"Command Bar",tool:e.pane.type}),eC(e)},[eC]);(0,oX.SJ)(function(){return[cR.searchFileContents.id,function(){(0,oB.u4)(oB.AZ.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,n=void 0;(null==ei?void 0:ei.type)==="codeEditor"&&(n=null==(e=ei.getCurrentSelectionText)?void 0:e.call(ei)),eD({pane:{type:"searchReplace",data:{initialQuery:n}}})}]},[ei,eD]),(0,oX.SJ)(function(){return V?[cR.toggleFloatPaneGroup.id,function(){return X(V)}]:void 0},[V]),(0,oX.SJ)(function(){return V?[cR.toggleMaximizePaneGroup.id,function(){return Q(V)}]:void 0},[V]),(0,oX.SJ)(function(){return J?[cR.removePaneGroup.id,function(){ee({paneGroupId:J}),et()}]:void 0},[J]),(0,oX.SJ)(function(){return V?[cR.removeOthersInPaneGroup.id,function(){en(V)}]:void 0},[V]),(0,oX.SJ)(function(){return[cR.moveFocusUp.id,function(){return W("above")}]},[]),(0,oX.SJ)(function(){return[cR.moveFocusDown.id,function(){return W("below")}]},[]),(0,oX.SJ)(function(){return[cR.moveFocusRight.id,function(){return W("rightOf")}]},[]),(0,oX.SJ)(function(){return[cR.moveFocusLeft.id,function(){return W("leftOf")}]},[]),o9((t=(0,ne.Vv)(),(0,K.A)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,c.Y)(uw.A,{}),key:"codeSearch"},commands:function(e){var n=e.searchQuery;if(!n)return[];var r={type:"searchReplace",data:{initialQuery:n}};return[{match:(0,oj.u4)({defaultScore:u9.q.codeSearch,matchScoreMultiplier:u9.B.codeSearch,filterLowMatchScores:!1}),data:{type:"action",label:t.getTitle(r),icon:t.Icon({pane:r}),run:function(){ed({pane:r})}}}]}}},[t,ed]))),o9((r=(0,B.dm)().setAssistantMode,i=(0,B.NC)(),o=(0,d.useCallback)(function(e){return(0,nZ._)(function(){var n,t;return(0,nJ.YH)(this,function(o){switch(o.label){case 0:return[4,i.sessions.create({sessionType:u7.dF3.CHAT})];case 1:if(!(n=o.sent()).ok)return[2];return ed({pane:{type:"ghostwriterChat",data:{sessionId:(t=n.payload).id}}}),r("basic"),[4,t.appendEvent({kind:"message",message:e,intent:u7.qRv.NONE,modelType:u7.e3q.BASIC})];case 2:return o.sent(),(0,oB.u4)(oB.AZ.ASSISTANT_USED,{action:"message_sent",intent_type:"explain",model:"basic",user_model_selection:"basic",message_content:e,message_source:"ask_ai_command_bar"}),[2]}})})()},[i,ed,r]),(0,K.A)(function(){return{data:{type:"context",label:"Assistant",icon:(0,c.Y)(ce.A,{size:16}),key:"assistant"},commands:function(e){var n=e.searchQuery;return n?[{match:(0,oj.u4)({defaultScore:u9.q.askAssistant,matchScoreMultiplier:u9.B.askAssistant,filterLowMatchScores:!1}),data:{type:"action",label:"Ask Assistant: ".concat(n),icon:(0,c.Y)(ce.A,{size:16}),run:function(){return o(n)}}}]:[]}}},[o])),{enabled:!e_&&!eA}),o9(cA.Y({container:k,activeOnly:!0,keyboardShortcut:ek,openFile:L})),(0,oX.SJ)(function(){if(!F&&!U)return[cR.run.id,function(){O(cx.QG.KEYBOARD_SHORTCUT),eS("shortcut_cmd_enter")}]},[O]);var eF=(0,oX.Jn)(cR.run.id);o9({match:oj.KK,data:{type:"action",icon:(0,c.Y)(cT.A,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){u4.M.openNewWindow()}}},{enabled:ec}),o9({match:oj.KK,data:{type:"action",icon:(0,c.Y)(cL.A,{}),label:"Run",description:"Run Repl",run:function(){O(cx.QG.KEYBOARD_SHORTCUT)},keyboardShortcut:eF}},{enabled:!P}),o9({match:oj.KK,data:{type:"action",icon:(0,c.Y)(cN.A,{}),label:"Stop",description:"Stop Repl",run:function(){O(cx.QG.KEYBOARD_SHORTCUT)}}},{enabled:P}),o9({match:oj.KK,data:{type:"action",icon:(0,c.Y)(cM.A,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){k.exec("kill","1")}}},{enabled:em}),o9({match:oj.KK,data:{type:"action",icon:(0,c.Y)(cP.A,{}),label:"Open development URL",run:function(){if(!eh)throw Error("Expected dotdevUrl");window.open(eh,"_blank","noopener")}}}),o9({match:oj.KK,data:{type:"action",icon:(0,c.Y)(cO.A,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!el)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(el);window.open(e,"_blank")}}},{enabled:!ec}),o9({match:oj.KK,data:{type:"action",icon:(0,c.Y)(cH.A,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,oB.u4)(oB.AZ.OPEN_IN_VSCODE_CLICKED,{source:"command_bar",editor:"vscode"}),ew()}}},{enabled:!!ep&&_}),o9({match:oj.KK,data:{type:"action",icon:(0,c.Y)(cU.A,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!ep)throw Error("Expected sshConfig");var e=ep.sshPort,n=ep.sshUser,t=ep.sshHostname,r="ssh -i ".concat(ef,"/.ssh/replit -p ").concat(e," ").concat(n,"@").concat(t);(0,oB.u4)(oB.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"command_bar"}),(0,u5.default)(r),eg("Copied SSH command")}}},{enabled:!!ep&&_}),o9((l=(a={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,u=a.onRun,s=(0,oe.A)(u),(0,K.A)(function(){return{match:(0,oj.u4)({defaultScore:u9.q.myRepls}),data:{type:"context",label:"My Apps",icon:(0,c.Y)(cp.A,{}),description:l},commands:function(e){return(0,nZ._)(function(e){var n;return(0,nJ.YH)(this,function(t){switch(t.label){case 0:var r;if(n=e.searchQuery,!e.active)return[2,[]];return[4,(r={query:n,count:50},(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:if(!nX.V)throw Error("Expected apolloClient");return[4,nX.V.query({query:cl,variables:r})];case 1:return[2,(null==(e=n.sent().data.currentUser)?void 0:e.search.repls.filter(function(e){return!!e.owner}))||[]]}})})())];case 1:return[2,t.sent().map(function(e){var t,r,i,o;return r=(t={repl:e,searchQuery:n,run:function(){return s.current(e)}}).repl,i=t.searchQuery,o=t.run,{match:function(){return{score:1,render:{height:44,content:(0,c.Y)(ch,{repl:r,height:44,searchQuery:i})}}},data:{type:"action",label:r.title,icon:(0,c.Y)(cs.Ay,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return o(r)}}}})]}})}).apply(this,arguments)}}},[l,s]))),o9({match:(0,oj.u4)({defaultScore:u9.q.fork}),data:{type:"action",label:"Remix",icon:(0,c.Y)(cG.A,{}),description:"Remix App",run:function(){D||C()}}}),f=(p=uY.g.apply(void 0,(0,eE._)(cb))).preferences,h=p.update,g=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,oB.u4)(oB.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t,isCommandBar:!0})}),h(e)},v=(m=(0,lL.D)()).setActiveTheme,w=m.theme,o9({match:(0,oj.u4)({defaultScore:u9.q.settings,matchScoreMultiplier:u9.B.settings}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,c.Y)(cy.A,{})},commands:function(e){var n=e.active,t=e.searchQuery;if(!n&&!t)return[];var r={match:(0,oj.u4)({defaultScore:u9.q.settings,matchScoreMultiplier:u9.B.settings}),data:{type:"context",label:"Theme",icon:(0,c.Y)(cw.A,{}),description:"Change Replit Theme"},commands:function(){return cm.U.map(function(e){return{match:(0,oj.u4)({defaultScore:u9.q.settings,matchScoreMultiplier:u9.B.settings}),data:{type:"action",label:e.title,icon:w.id===e.id?(0,c.Y)(cv.A,{}):(0,c.Y)(cy.A,{opacity:0}),description:"Use "+e.title+" theme "+(w.id===e.id?" (current)":""),run:function(){v(e.id)}}}})}},i=Object.values(cg.KY).filter(function(e){return -1!==cb.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:(0,oj.u4)({defaultScore:u9.q.settings,matchScoreMultiplier:u9.B.settings}),data:{type:"context",label:e.name,icon:(0,c.Y)(cy.A,{}),description:e.description},commands:function(){return e.options.map(function(n){var t=f[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&n.editorPreferencesValue===t;return{match:(0,oj.u4)({defaultScore:u9.q.settings,matchScoreMultiplier:u9.B.settings}),data:{type:"action",label:n.title,icon:r?(0,c.Y)(cv.A,{}):(0,c.Y)(cy.A,{opacity:0}),description:n.description,run:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(t){switch(t.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,g((0,N._)({},e.editorPreferencesKey,n.editorPreferencesValue))];case 1:return t.sent(),[2]}})})()}}}})}}});return(0,eE._)(i).concat([r])}},{enabled:!0}),o9(cE((0,d.useCallback)(function(e){eD({pane:{type:"developer",data:{tab:e}}})},[eD])));var eU=(y=(0,B.Wq)(),b=(0,B.jt)(),(0,d.useMemo)(function(){var e=[];return b||e.push({match:oj.KK,data:{type:"action",label:"[Admin] Enable ".concat(u3.g$),icon:(0,c.Y)(u8.A,{}),run:function(){y()}}}),{match:oj.G2,data:{icon:(0,c.Y)(u6.A,{}),label:"Admin",type:"context",description:"Manage internal only settings"},commands:function(){return e},numCommands:e.length}},[b,y]));return o9(eU,{enabled:em&&eU.numCommands>0}),(0,c.Y)(c.FK,{children:(0,c.Y)(o3.a,{isOpen:eb,onRequestClose:ex,centered:!0,children:(0,c.Y)(c_.A,{onConfirm:ey})})})});var cB=t(73321),cj=t(18558),c$=t(41833),cq=t(14420),cK=t(33759),cV=t(71687),cZ=(0,l7.i7)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),cJ=(0,rb.x)({root:[ol.wp.color.foregroundDimmest,ol.wp.position.relative,ol.wp.width("100%"),ol.wp.height("100%"),{overflow:"hidden"}],arrows:[ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),ol.wp.flex.row,ol.wp.flex.wrap,ol.wp.width("200%"),ol.wp.height("200%"),{animationName:cZ,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[ol.wp.width("50%"),ol.wp.height("50%"),ol.wp.center]});function cX(e){var n=e.delay,t=e.duration;return(0,c.Y)(ou.S,{css:cJ.root,children:(0,c.FD)(ou.S,{css:cJ.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,c.Y)(ou.S,{css:cJ.arrow,children:(0,c.Y)(cq.A,{size:12})}),(0,c.Y)(ou.S,{css:cJ.arrow,children:(0,c.Y)(cK.A,{size:12})}),(0,c.Y)(ou.S,{css:cJ.arrow,children:(0,c.Y)(cv.A,{size:12})}),(0,c.Y)(ou.S,{css:cJ.arrow,children:(0,c.Y)(cV.A,{size:12})})]})})}var cQ=t(17459),c0=t(70399),c1=(0,rb.x)({root:[ol.wp.position.relative],circle:[ol.wp.top(-6),ol.wp.right(-6),ol.wp.minWidth(12),ol.wp.borderRadius(8),ol.wp.position.absolute,ol.wp.backgroundColor.backgroundHighest,ol.wp.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:ry.LU.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function c2(e){var n=e.count,t=(0,cQ._)(e,["count"]);return(0,c.FD)(ou.S,{css:c1.root,children:[(0,c.Y)(c0.A,(0,p._)({},t)),(0,c.Y)(ou.S,{css:[c1.circle,c1.count],children:n})]})}function c4(){return(0,c.FD)(ou.S,{css:c1.root,children:[(0,c.Y)(c0.A,{}),(0,c.Y)(ou.S,{css:c1.circle,children:(0,c.Y)(cv.A,{size:6})})]})}function c5(e){var n,t=e.paneId,r=e.paneGroupId,i=(0,ne.Vv)(),o=oI(t),a=ru(tg),l=ru(tv),u=ru(tm),s=ra((0,K.A)(function(){return(0,ea.eU)(function(e){var n=eR(e(nh),t);return n?n.paneGroup.panes.findIndex(function(e){return e===t}):null})},[t])),d=ra((n=({paneGroupId:({paneGroupId:r}).paneGroupId}).paneGroupId,(0,K.A)(function(){return(0,ea.eU)(function(e){var t=eU(e(nh),n);return t?t.panes.length:null})},[n])));return(0,K.A)(function(){var e=i.getTitle(o),n=[{match:oj.G2,data:{type:"action",label:"Close "+e,icon:(0,c.Y)(c0.A,{}),run:function(){a(t)}}}];return d&&d>1&&(null!==s&&s<d-1&&n.push({match:oj.G2,data:{type:"action",label:"Close to the right",icon:(0,c.Y)(c4,{}),run:function(){l(t)}}}),n.push({match:oj.G2,data:{type:"action",label:"Close all other tabs",icon:(0,c.Y)(c2,{count:d-1}),run:function(){u(t)}}})),n},[i,o,d,s,a,t,l,u])}function c3(){var e=ok(),n=ru(nr);return(0,d.useCallback)(function(t){var r=e(t),i=r.isCommitted,o=r.pane;return!i&&(0,ne.xS)(o)?{match:oj.G2,data:{type:"action",label:"Keep open",icon:(0,c.Y)(lV.A,{}),run:function(){return n(t)}}}:null},[e,n])}var c6=t(3552),c8=new Map([["left",{label:"Move Left",icon:(0,c.Y)(cK.A,{})}],["right",{label:"Move Right",icon:(0,c.Y)(cv.A,{})}],["up",{label:"Move Up",icon:(0,c.Y)(cV.A,{})}],["down",{label:"Move Down",icon:(0,c.Y)(cq.A,{})}]]),c7=t(93019),c9=new Map([["leftOf",{label:"Move Left",icon:(0,c.Y)(cK.A,{})}],["rightOf",{label:"Move Right",icon:(0,c.Y)(cv.A,{})}],["above",{label:"Move Up",icon:(0,c.Y)(cV.A,{})}],["below",{label:"Move Down",icon:(0,c.Y)(cq.A,{})}]]),se=t(51940);function sn(e){return(0,c.Y)(oc.Ay,(0,r4._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM7 3.75A3.25 3.25 0 0 0 3.75 7v10A3.25 3.25 0 0 0 7 20.25h4.25V3.75H7Zm5.75 0v16.5H17A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-4.25Z",clipRule:"evenodd"})}))}var st=new Map([["leftOf",{commandId:cR.insertPaneGroupUp.id,label:"Insert Left",icon:(0,c.Y)(op.A,{})}],["rightOf",{commandId:cR.insertPaneGroupRight.id,label:"Insert Right",icon:(0,c.Y)(of.A,{})}],["above",{commandId:cR.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,c.Y)(oh,{})}],["below",{commandId:cR.insertPaneGroupDown.id,label:"Insert Down",icon:(0,c.Y)(od,{})}]]),sr=t(93403),si=t(17761);function so(e){return(0,c.Y)(oc.Ay,(0,r4._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M20.483 14.37v2.871a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276a4.259 4.259 0 0 1 4.259-4.259h2.87A3.059 3.059 0 0 1 13.007 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437c0 1.324-.84 2.45-2.017 2.876ZM9.948 5.362h-2.69a2.914 2.914 0 0 0-2.913 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914v-2.69h-6.132a3.057 3.057 0 0 1-3.058-3.057V5.362ZM17 4.75a.75.75 0 0 0-1.5 0V7.5h-2.75a.75.75 0 0 0 0 1.5h2.75v2.75a.75.75 0 0 0 1.5 0V9h2.75a.75.75 0 0 0 0-1.5H17V4.75Z",clipRule:"evenodd"})}))}function sa(e){var n,t,r,i,o,a,l,s,d,f,h,g,m,v,w,y,b,x,_,S,Y,A,I,k,E,C,D,R,F,U,P,O,T,L,M,G,H=e.paneGroupId,z=e.paneId,W=function(e){var n,t,r=e.paneId,i=oO(e.paneGroupId),o=(0,us.A)(i.isMaximized),a=(0,us.A)(i.isFloating),l=!o&&!a,s=(n=(0,se.RI)(),t=ru(ty),(0,K.A)(function(){return(0,eE._)(st.entries()).map(function(e){var i,o,a=(0,u._)(e,2),l=a[0],c=a[1],s=c.commandId,d=c.label,p=c.icon;return{match:oj.G2,data:{label:d,icon:p,type:"action",keyboardShortcut:null!=(o=null==(i=n.get(s))?void 0:i.shortcut)?o:void 0,run:function(){t({placement:l,paneId:r,autoFocus:!0}),(0,oB.u4)(oB.AZ.WS_SPLIT_USED,{action:"opened",placement:l})}}}})},[n,t,r]));return(0,K.A)(function(){return l?[{match:oj.G2,data:{type:"context",label:"Add pane",icon:(0,c.Y)(sn,{})},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?s:[]}}]:[]},[l,s])}({paneId:z,paneGroupId:H}),B=(n=oP(z),t=ra(tt),r=(0,us.A)(n.isFloating),i=!t&&!r,o=ru(tZ),(0,K.A)(function(){var e=(0,eE._)(c9.entries()).map(function(e){var n=(0,u._)(e,2),t=n[0],r=n[1],i=r.label,a=r.icon;return{match:oj.G2,data:{label:i,icon:a,type:"action",run:function(){o(t)}}}});return i?[{match:oj.G2,data:{type:"context",label:"Move tab",icon:(0,c.Y)(c7.A,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[i,o])),j=(a=oO(H),l=(0,us.A)(a.isMaximized),s=(0,us.A)(a.isFloating),d=!l&&!s,f=ru(iK),(0,K.A)(function(){var e=(0,eE._)(c8.entries()).map(function(e){var n=(0,u._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:oj.G2,data:{label:i,icon:o,type:"action",run:function(){f({direction:t})}}}});return d?[{match:oj.G2,data:{type:"context",label:"Move group",icon:(0,c.Y)(c6.A,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[d,f])),$=(g=(h=oF()).maximizePaneGroup,m=h.restoreMaximizedPaneGroup,v=oO(H),w=(0,us.A)(v.isMaximized),y=ra(n2),b=(0,oX.Jn)(cR.toggleMaximizePaneGroup.id),(0,K.A)(function(){return w?y?[]:[{match:oj.G2,data:{type:"action",label:"Restore",icon:(0,c.Y)(si.A,{}),run:function(){return m()},keyboardShortcut:b}}]:[{match:oj.G2,data:{type:"action",label:"Maximize",icon:(0,c.Y)(sr.A,{}),run:function(){return g({paneGroupId:H})},keyboardShortcut:b}}]},[w,b,y,m,g,H])),q=(x=ru(tw),_=ru(i$),S=ra(n2),Y=(0,oX.Jn)(cR.removePaneGroup.id),(0,K.A)(function(){return S?[]:[{match:oj.G2,data:{type:"action",label:"Close",icon:(0,c.Y)(c0.A,{}),run:function(){_(),x({paneGroupId:H})},keyboardShortcut:Y}}]},[_,x,S,Y,H])),V=(I=(A={paneId:z,paneGroupId:H}).paneId,k=A.paneGroupId,E=ru(iX),C=oO(k),D=(0,us.A)(C.isMaximized),R=(0,us.A)(C.isFloating),F=(0,oX.Jn)(cR.toggleFloatPaneGroup.id),(0,K.A)(function(){return D?[]:[{match:oj.G2,data:{type:"action",label:R?"Unfloat":"Float",icon:R?(0,c.Y)(os,{}):(0,c.Y)(cT.A,{}),keyboardShortcut:F,run:function(){E(I)}}}]},[I,E,F,R,D])),Z=(P=oO((U={paneId:z,paneGroupId:H}).paneGroupId),O=oP(U.paneId),T=oU(U.paneGroupId),L=rc(nx),M=ru(n1),G=(0,us.A)(P.isMaximized),(0,K.A)(function(){return G?[]:[{match:oj.G2,data:{type:"action",label:"New window",icon:(0,c.Y)(so,{}),run:function(){var e=(0,nq.A)(),n=L().filter(function(e){var n=(0,u._)(e,1)[0];return T.panes.current.includes(n)});M({popupId:e,state:{type:"saved",layout:{floating:[],tiling:{id:(0,nq.A)(),type:"paneGroup",percent:100,activeIndex:T.activeIndex.current,panes:T.panes.current}},data:n.reduce(function(e,n){var t=(0,u._)(n,2),r=t[0],i=t[1];return(0,r4._)((0,p._)({},e),(0,N._)({},r,i))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(O.size.current.height,"px,width=").concat(O.size.current.width,"px")),(0,oB.u4)(oB.AZ.WS_POPOUT_OPENED,{ai:n.some(function(e){var n=(0,u._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type}),console:n.some(function(e){var n=(0,u._)(e,2);return"runnerOutput"===(n[0],n[1]).type}),editor:n.some(function(e){var n=(0,u._)(e,2);return"codeEditor"===(n[0],n[1]).type}),shell:n.some(function(e){var n=(0,u._)(e,2);return"shell"===(n[0],n[1]).type}),paneData:n})}}}]},[G,T.activeIndex,T.panes,L,M,O.size]));return(0,K.A)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,eE._)(W).concat((0,eE._)(B),(0,eE._)(j),(0,eE._)($),(0,eE._)(V),(0,eE._)(Z),(0,eE._)(q))}}]},[W,B,j,$,V,Z,q])}var sl=t(11901),su=t(30705);function sc(e){return(0,c.Y)(oc.Ay,(0,r4._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M16.47.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H7A3.25 3.25 0 0 0 3.75 9v2a.75.75 0 0 1-1.5 0V9A4.75 4.75 0 0 1 7 4.25h12.19l-2.72-2.72a.75.75 0 0 1 0-1.06ZM20.25 15v-2a.75.75 0 0 1 1.5 0v2A4.75 4.75 0 0 1 17 19.75H4.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-2.72 2.72H17A3.25 3.25 0 0 0 20.25 15Z",clipRule:"evenodd"})}))}function ss(e){var n,t,r,i,o,a,l,u,s=e.paneId,p=(n=(0,ne.Vv)(),t=(0,oJ.N0)(),r=ru(t5),(0,d.useCallback)(function(){return{data:{type:"context",label:oQ.Ve,icon:(0,c.Y)(o1.A,{})},commands:function(){return t().map(function(e){return{match:oj.G2,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,oB.u4)(oB.AZ.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:s,pane:e})}}}})}}},[t,n,r,s])),f=(i=(0,t_.Sx)(),o=(0,t_.L4)(),a=ru(t5),(0,d.useCallback)(function(){var e=o(),n=i().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,c.Y)(su.A,{})},commands:function(e){var t=e.searchQuery;return(0,um.h)({paths:n,searchQuery:t,run:function(e){a({paneId:s,pane:{type:(0,ne.QY)({path:e}),data:{path:e}}})}})}}},[i,a,s,o])),h=(l=(0,am.A)().fs,u=ru(t5),(0,K.A)(function(){return{match:oj.G2,data:{type:"context",label:"Files",icon:(0,c.Y)(lV.A,{})},commands:function(e){return(0,nZ._)(function(e){var n,t,r;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:if(n=e.searchQuery,t=e.active,!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((r=i.sent()).error)return[2,[]];if(!r.files)throw Error("Expected files");return[2,(0,um.h)({paths:r.files,searchQuery:n,run:function(e){u({paneId:s,pane:{type:(0,ne.QY)({path:e}),data:{path:e}}})}})]}})}).apply(this,arguments)}}},[l,u,s]));return(0,K.A)(function(){return{match:oj.G2,data:{type:"context",label:"Change tab",icon:(0,c.Y)(sc,{})},commands:function(e){var n=e.searchQuery,t=e.active;return n||t?[f(),h,p()]:[]}}},[f,p,h])}var sd=(0,l7.AH)(ol.wp.center,{fontSize:ry.LU.fontSizeSmall,border:"1px solid",borderColor:ry.LU.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},ol.wp.borderRadius(8));function sp(e){return(0,c.Y)(ou.S,{css:sd,children:(0,c.Y)(ou.S,{css:{lineHeight:1},children:e.count})})}var sf=t(27608),sh=(0,ea.eU)([]);function sg(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,nj.Xr)(sh);(0,d.useEffect)(function(){if(i){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return o(function(e){return(0,eE._)(e).concat((0,eE._)(n))}),function(){o(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,o,i])}function sm(){var e=(0,nj.md)(sh);return(0,d.useEffect)(function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,u=o.value,c=u.shortcut,s=u.run;!!c.cmdOrCtrlKey==!!(0,uA.T$)(n)&&!!c.altKey==!!n.altKey&&!!c.shiftKey==!!n.shiftKey&&(null==(l=c.key)?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),s(c))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var sv=t(44879),sw=(0,rb.x)({overlay:[ol.wp.position.absolute,ol.wp.overflow("hidden"),ol.wp.zIndex(rw.W.overlay)],surface:[ol.wp.position.relative,ol.wp.borderRadius(8),ol.wp.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:ry.LU.outlineDefault,opacity:0},ol.wp.shadow(3)],innerSurface:[ol.wp.borderRadius(8)]}),sy=(0,rb.x)({root:[{borderTop:"1px solid",borderColor:ry.LU.outlineDimmer}],row:[ol.wp.rowWithGap(2),ol.wp.align.center,ol.wp.justify.spaceBetween]});function sb(){var e=(0,o5.Kg)();return(0,c.FD)(ou.S,{css:sy.root,p:8,gap:8,children:[(0,c.FD)(ou.S,{css:sy.row,children:[(0,c.Y)(au.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,c.FD)(ou.S,{row:!0,gap:4,children:[(0,c.Y)(oX._y,{keyCombo:"".concat(e),small:!0}),(0,c.Y)(sf.Js,{text:(0,c.Y)(cX,{duration:6e3,delay:6e3})})]})]}),(0,c.FD)(ou.S,{css:sy.row,children:[(0,c.Y)(au.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,c.FD)(ou.S,{row:!0,gap:4,children:[(0,c.Y)(oX._y,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,c.Y)(sf.Js,{text:(0,c.Y)(cX,{duration:6e3,delay:1500})})]})]})]})}var sx=(0,d.memo)(function(){var e=function(){var e=ra(tt),n=ra(iH);if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:ry.LU.accentPrimaryStronger,borderRadius:ry.LU.borderRadius6,boxShadow:ry.LU.shadow3,transitionProperty:"transform, height, width",transitionDuration:sv.Ds.duration,transitionTimingFunction:sv.Ds.timingFunction};return(0,p._)({width:r,height:i,transform:o},e?void 0:a)}}(),n=ru(i$),t=(0,cj.A)(n,[]);return(0,d.useEffect)(function(){var e=setTimeout(function(){(0,c$.U)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,c.Y)(cB.n1,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,c.Y)(ou.S,{style:e,css:sw.overlay,p:16,align:"end",children:(0,c.Y)(o6.ui,{innerRef:t,elevated:!0,css:sw.surface,children:(0,c.Y)(o6.ui,{css:sw.innerSurface,grow:!0,shrink:!0,elevated:!0,children:(0,c.Y)(sA,{})})})})})}),s_={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},sS={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},sY=Object.keys(s_),sA=(0,d.memo)(function(){var e=ru(iq),n=ru(iK),t=ru(iW),r=ra(tt);sg({key:"Escape"},{run:function(){t()}}),sg(sY.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(s_[n.key])},enabled:!r}),sg(sY.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:sS[e.key]})},enabled:!r});var i=ra(iN);return i&&"sidebar"!==i.target?(0,c.Y)(sI,{paneGroupId:i.paneGroupId,paneId:i.paneId}):null});function sI(e){var n,t,r,i,o,a,l,s,d,p,f,h,g,m,v,w,y,b,x,_,S,Y=ra(tt),A=ru(i$),I=ru(iW),k=(n=e.paneGroupId,i=(r={paneId:t=e.paneId,paneGroupId:n}).paneId,o=r.paneGroupId,a=(0,ne.Vv)(),l=oI(i),s=(0,oq.eq)(i),d=c3(),p=c5({paneId:i,paneGroupId:o}),f=(0,K.A)(function(){var e=a.getTitle(l),n=function(e){return!!e&&(void 0===e?"undefined":(0,eC._)(e))==="object"&&"data"in e},t=[{data:{type:"group",key:"pane-actions"},commands:function(){var e,t;return(null!=(t=null==s||null==(e=s.commands)?void 0:e.flatMap(function(e){return e.commands}))?t:[]).filter(n)}},{data:{type:"group",key:"pane-close"},commands:function(){return[d(i)].concat((0,eE._)(p)).filter(n)}}];return{match:oj.G2,data:{type:"context",label:e,icon:(0,c.Y)(a.Icon,{pane:l})},commands:function(e){var n=e.active,r=e.searchQuery;return n||r?t:[]}}},[l,s,a,i,p,d]),g=(h={paneId:t,paneGroupId:n}).paneGroupId,m=h.paneId,v=ra((0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(e3),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,s=c.panes.map(function(n){return[n,e(e(e1(n)).dataAtom)]}),d="floating"===c.path[0];(d?t:r).push({activeIndex:c.activeIndex,paneGroupId:c.id,isFloating:d,panes:s})}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{floating:t,tiling:r}})},[])),w=(0,ne.Vv)(),y=ru(tk),b=ru(tG),x=ss({paneId:m}),_=(0,K.A)(function(){var e=v.tiling,n=v.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:oj.G2,data:{type:"action",label:"New tab",icon:(0,c.Y)(lB.A,{}),run:function(){b({paneGroupId:g,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[x,{match:oj.G2,data:{type:"context",label:(0,sl.A)("Tab",t),icon:(0,c.Y)(sp,{count:t})},commands:function(t){var i=t.active,o=t.searchQuery;if(!(i||o))return[];var a=(0,eE._)(e).concat((0,eE._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,u._)(e,2),t=n[0],r=n[1];return{match:oj.G2,data:{type:"action",label:w.getTitle(r),icon:(0,c.Y)(w.Icon,{pane:r}),run:function(){y({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[x,r]},[v,w,y,b,g,x]),S=sa({paneGroupId:n,paneId:t}),(0,K.A)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[f].concat((0,eE._)(_),(0,eE._)(S))}}},[f,_,S]));return(0,c.Y)(o8.r,{iconBreadcrumbs:!0,command:k,onAction:function(){return A()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),I();return}(0,uA.T$)(e)&&e.preventDefault()},footer:Y?null:(0,c.Y)(sb,{}),compact:!0})}var sk={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,o5.FM)({cmdOrCtrl:!0,key:"j"})};function sE(){var e=ru(iB),n=ra(ij);return((0,oX.SJ)(function(){return[sk.id,function(){return e()}]},[e]),n)?(0,c.Y)(sx,{}):null}var sC=t(23585),sD=t(46909),sR=t(75640),sF=t(56624),sU=t(37566),sP=t(13040),sO=t(38527);function sT(e){var n=e.isInLayout,t=(0,cQ._)(e,["isInLayout"]),r=(0,ed.J2)((0,sP.S)()),i=(0,ed.J2)((0,sU.e)()),o=(0,u._)((0,d.useState)(!1),2),a=o[0],l=o[1];(0,d.useEffect)(function(){if(!i||r||n)return void l(!1);var e=setTimeout(function(){return l(!a)},a?1e3:5e3);return function(){clearTimeout(e)}},[a,i,r,n]);var s=!n&&r||a;return(0,c.Y)(sO.l,(0,p._)({loading:s},t))}var sL=t(73455),sM=t(30354),sG=t.n(sM),sN={id:"agent.toggle",name:"Toggle Agent",description:"Opens or closes the Agent",default:(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"i"})};function sH(){var e,n=oM(),t=(0,ed.J2)(n.displayState),r=(0,ed.J2)(n.agentFiletreeOrder),i=(0,ed.G9)(n.isCollapsed),o=(0,oX.Jn)(sN.id),a=n.toggle;return(0,oX.SJ)(function(){return[sN.id,function(){return a(!!i.current)}]},[a,i]),(0,c.Y)(ou.S,{clsx:[sG().root,(e={},(0,N._)(e,sG().show,"collapsed"===t),(0,N._)(e,sG().right,"filetree-agent"===r),e)],children:(0,c.Y)(sL.K0,{tooltipContents:o?(0,c.Y)(oX._y,{fontSize:10,keyCombo:o}):null,alt:"Expand Agent",onClick:function(){n.toggle(!0)},children:(0,c.Y)(sT,{size:16,isInLayout:!1})})})}var sz=[sN,uJ,o7,sk].concat((0,eE._)(cz),(0,eE._)(l5.ke),(0,eE._)(sD.$f),[sF.B,sC.G,sR.Ws]),sW=t(91616);function sB(e){var n=(0,sW.O)();return(0,c.Y)(oX.jM,{commands:sz,onChange:n,keybindings:e.keybindings,children:e.children})}var sj=t(63083),s$=t(93783);function sq(e){var n=e.children,t=(0,K.A)(function(){return new l2.Y(nQ.A.get("stateCache","object"))},[]);return(0,c.Y)(l2.H.Provider,{value:t,children:n})}function sK(e){var n,t=e.ui,r=e.repl,i=e.services,o=e.userKeybindings,a=e.children;return(0,c.Y)(sB,{keybindings:o,children:(0,c.Y)(ne.lQ,{value:t,children:(0,c.Y)(sq,{children:(0,c.Y)(sj.A.Provider,{value:i,children:(0,c.Y)(l4.F,{replId:r.id,orgId:null==(n=r.org)?void 0:n.id,container:i.container,fs:i.fs,dotReplit:i.dotReplit,ports:i.ports,secrets:i.secrets,children:(0,c.Y)(cF.B,{repl:r,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},children:(0,c.Y)(lT.Ey,{children:(0,c.Y)(s$.A,{children:a})})})})})})})})}var sV=t(792),sZ=t(22227),sJ=function(e){return(0,nZ._)(function(){var n,t,r,i;return(0,nJ.YH)(this,function(o){switch(o.label){case 0:if(!(0,sZ.Fp)())return[2,null];return[4,(0,sZ.Eb)(e)];case 1:if(t=(n=o.sent()).path,r=n.line,i=n.col,!t)return[2,null];return[2,{path:t,line:r,col:i}]}})})()};function sX(e){var n,t,r,i,o,a,l,c,s,f,h,g,m,v,w,y=e.repl;return t=(n=(0,am.A)()).fs,r=n.dotReplit,i=ra(ni),o=(0,oe.A)(i),l=(a=(0,u._)((0,d.useState)(!1),2))[0],c=a[1],s=oR(),f=(0,d.useCallback)(function(e){var n;(0,i_.e$)(e.path.toLowerCase())?n={paneType:"markdown"}:(0,i_.Zy)(e.path.toLowerCase())&&(n={paneType:"csvPreview"}),s((0,r4._)((0,p._)({},e),{opener:n}))},[s]),h=j(y),g=ra(nI),m=ra(n2),v=(0,B.jt)(),w=(0,d.useRef)(!1),(0,d.useEffect)(function(){if(l&&!w.current){if(!i){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,r4._)((0,p._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,sZ.cg)({path:i}),t=window.location.hash;if(!(t.slice(1)===i||t.startsWith(n+":"))){var r=new URL(window.location.href);r.hash=n,window.history.pushState((0,r4._)((0,p._)({},history.state),{as:r.pathname+r.hash}),"",r)}}},[l,i]),(0,d.useEffect)(function(){if(!l){var e=!1;return(0,nZ._)(function(){var n,i;return(0,nJ.YH)(this,function(a){switch(a.label){case 0:if(!g)return[2];if(o.current)return c(!0),[2];return[4,sJ(t)];case 1:if(n=a.sent(),e)return[2];if(n)return f(n),c(!0),[2];if(o.current||"saved"===g||m||v)return c(!0),[2];return[4,(0,sV.o)({fs:t,dotReplit:r})];case 2:return i=a.sent().entrypoint,e||!i||h||f({path:i}),c(!0),[2]}})})(),function(){e=!0}}},[t,f,r,o,g,l,m,h,v]),(0,d.useEffect)(function(){if(g){var e=function(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return w.current=!0,[4,sJ(t)];case 1:return(e=n.sent())&&f(e),w.current=!1,[2]}})})()};return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}},[g,t,f]),null}function sQ(){var e=(0,uF.W9)(),n=(0,uF.gi)(),t=(0,am.A)().fs,r=function(){n(null)};return(0,c.Y)(o3.a,{isOpen:!!e,onRequestClose:r,children:e?(0,c.Y)(u$.A,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var s0=t(49999),s1=t(18454),s2=t(57282),s4=t(25396);function s5(){var e,n,t=(0,s.useRouter)(),r=(0,V.ME)(t,"mobileBridge"),i=oL(),o=(0,l8.A)(),a=o.isSaving,l=o.isOffline,u=(0,d.useRef)(null),c=(0,s4.d)(),p=oC(),f=o4(),h=(e=(0,cC.g3)(),n=(0,cC.qP)(),{runState:(0,d.useMemo)(function(){return e?e.step:cx.ll.OFFLINE},[e]),toggleRunState:(0,d.useCallback)(function(){n()},[n])}),g=h.runState,m=h.toggleRunState,v=(0,d.useCallback)(function(e){var n=function(e){switch(e){case s1.TK.OPEN_FILETREE:i.toggle();break;case s1.TK.TOGGLE_RUN_STATE:m();break;case s1.TK.TOGGLE_ALLPANES:f();break;case s1.TK.OPEN_NEW_PANE:case s1.TK.TOGGLE_DRAWER:break;default:(0,s0.A)(e)}},t=function(e){c(e)},r=function(e){var n=e.type,t=e.messageId;try{p({pane:{type:n}})}catch(e){(0,s2.Cf)(t)}};(0,s2.E6)(e,function(e){var i=e.type;switch(i){case s1.tF.SET_KEYBOARD_STATE:t(e.keyboardState);break;case s1.tF.WORKSPACE_REQUEST_ACTION:n(e.action);break;case s1.tF.WORKSPACE_REQUEST_OPEN_PANE:r({messageId:e.id,type:e.paneType});break;default:(0,s0.A)(i)}})},[m,c,p,f,i]);return(0,d.useEffect)(function(){if(r){var e={messageType:s1.tF.WORKSPACE_STATE,isDrawerOpen:!1,isShowingAllPanes:!0,isSaving:a,isOffline:l,runState:g,activePaneType:null,activePaneFilePath:null,isInAgentMode:!1,insets:{top:0,bottom:0}},n=u.current;return(null==n||JSON.stringify(e)!==JSON.stringify(n))&&((0,s2._z)(e,(0,nq.A)()),u.current=e),window.addEventListener("message",v),function(){window.removeEventListener("message",v)}}},[r,v,g,a,l,u]),null}var s3=t(7368),s6=t(46941),s8=t(46434),s7=t(90629),s9=t(44744),de=t(45620);function dn(){var e=oR(),n=oC();return(0,d.useCallback)(function(t){return(0,ne.xS)(t)&&t.data.path?e((0,r4._)((0,p._)({},t.data),{path:t.data.path})):n({pane:t})},[n,e])}var dt=t(36946),dr=t(7922),di=t(33683),da=t(86296),dl=t.n(da);function du(e){var n=e.text,t=Math.floor(100*e.progress);return(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{row:!0,align:"center",justify:"center",gap:8,style:{cursor:"not-allowed"},children:[(0,c.Y)(di.A,{}),(0,c.Y)(au.EY,{children:n})]}),(0,c.Y)(ou.S,{clsx:dl().progressBarContainer,children:(0,c.Y)(ou.S,{clsx:dl().progressBarTrack,children:(0,c.Y)(ou.S,{clsx:dl().progressBarFill,style:{width:"".concat(t,"%")}})})}),(0,c.Y)(ou.S,{justify:"center",align:"center",children:(0,c.FD)(au.EY,{variant:"small",color:"dimmer",children:[t,"%"]})})]})}function dc(e){var n=e.errorMessage;return(0,c.FD)(ou.S,{align:"center",gap:8,children:[(0,c.Y)(au.EY,{children:n}),(0,c.Y)(au.EY,{children:"Please try again or contact support"}),(0,c.Y)(ct(),{href:"/~",children:(0,c.Y)(au.EY,{children:"Return to Home"})})]})}function ds(e){var n=e.onClick;return(0,c.FD)(ou.S,{align:"center",gap:16,children:[(0,c.Y)(au.EY,{children:"You must login again to continue importing"}),(0,c.Y)(al.$n,{text:"Reconnect to Figma",onClick:n,colorway:"primary",iconRight:(0,c.Y)(cv.A,{})})]})}function dd(){var e,n,t,r,i,o,a,l,s,f,h,v,w,y,b,x,_,S,A,C,D,R,F=(e=(0,eo.A)(),t=(0,u._)((n=(0,p._)({},Y,void 0),m.n(k,n)),1)[0],i=(0,u._)((r=(0,p._)({},Y,void 0),m.n(E,r)),1)[0],a=(o=(0,u._)((0,d.useState)({status:"not_started"}),2))[0],l=o[1],s=dn(),f=(0,B.NC)(),h=(0,d.useRef)(!1),v=(0,d.useCallback)(function(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:if(h.current)return[2];return h.current=!0,[4,f.sessions.create({sessionType:u7.dF3.AGENT_SESSION})];case 1:if(!(e=n.sent()).ok)throw Error("Failed to create Agent session");return s({type:"agentChat",data:{sessionId:e.payload.id}}),[4,e.payload.appendEvent({kind:"setupImportedProject",importSource:u7.aJd.PROJECT_IMPORT_SOURCE_FIGMA})];case 2:return n.sent(),[2]}})})()},[f,s]),y=(w=(0,u._)((0,d.useState)(0),2))[0],b=w[1],A=(x={variables:{replId:e}},_=(0,p._)({},Y,x),S=g.I(I,_)).data,C=!S.loading&&A&&"Repl"===A.getRepl.__typename&&A.getRepl.config.figmaImportStatus===cD.u4D.Started?A.getRepl.config.figmaUrl:null,D=(0,d.useCallback)(function(n){var r=n.errorMessage;return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return l({status:"error",errorMessage:r}),[4,t({variables:{input:{id:e,figmaImportStatus:cD.u4D.Failed}}})];case 1:return n.sent(),[2]}})})()},[e,t]),((0,de.b)(function(n,r){var o=r.signal;return(0,nZ._)(function(){var r,a,u,c,s,d,p,f,h,g,m,w,y,x,_,S;return(0,nJ.YH)(this,function(Y){switch(Y.label){case 0:if(!C)return[2];return[4,i({variables:{input:{figmaUrl:C}}})];case 1:if((null==(r=Y.sent().data)?void 0:r.getFigmaIntermediateToken.__typename)==="NoOAuthFoundError")return l({status:"needs_auth",retryAuth:function(){return b(function(e){return e+1})}}),[2];if((null==r?void 0:r.getFigmaIntermediateToken.__typename)==="InvalidFigmaUrlError"||(null==r?void 0:r.getFigmaIntermediateToken.__typename)==="FigmaRateLimitError")return s7.Cp(r.getFigmaIntermediateToken,{extra:{replId:e,figmaUrl:C}}),lP.vF.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:C,payload:r.getFigmaIntermediateToken}),D({errorMessage:r.getFigmaIntermediateToken.message}),[2];if(!(a=null==r?void 0:r.getFigmaIntermediateToken)||"FigmaImportIntermediateToken"!==a.__typename)return lP.vF.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:C,payload:r}),D({errorMessage:"Something went wrong while importing. Please try again."}),[2];return u=a.token,l(function(e){return"in_progress"===e.status?e:{status:"in_progress",progress:0,text:"Preparing Figma import..."}}),[4,n.figmaImport.startImport.rpc({intermediateToken:u},{signal:o})];case 2:if(!(c=Y.sent()).ok)switch(s=c.payload.code){case"INVALID_REQUEST":case"UNCAUGHT_ERROR":return D({errorMessage:"Something went wrong while importing. Please try again."}),[2];case"UNEXPECTED_DISCONNECT":case"CANCEL":return[2];default:(0,s0.A)(s)}d=n.figmaImport.status.subscribe({},{signal:o}).resReadable,p=void 0,f=!1,h=!1,Y.label=3;case 3:Y.trys.push([3,8,9,14]),m=function(){var n=y.value;if(!n.ok){var t=n.payload.code;switch(t){case"FIGMA_TOKEN_EXPIRED":case"FIGMA_INVALID_TOKEN":return l({status:"needs_auth",retryAuth:function(){return b(function(e){return e+1})}}),{v:void 0};case"FIGMA_NODE_NOT_FOUND":return D({errorMessage:"The selected Figma component could not be found, please ensure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_FILE_NOT_FOUND":return D({errorMessage:"The Figma file could not be accessed, please ensure you have copied the link to the file."}),{v:void 0};case"FIGMA_SELECTION_TOO_LARGE":return D({errorMessage:"Your Figma selection is too large to process, please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_RATE_LIMIT_EXCEEDED":return D({errorMessage:"Too many requests. Please wait a moment and try again."}),{v:void 0};case"NO_CODE_GENERATED":return D({errorMessage:"No code could be generated from your frame. Please try a different link."}),{v:void 0};case"TIMEOUT":return D({errorMessage:"The import took too long. Please try again, or try a different component."}),{v:void 0};case"FIGMA_NODE_NOT_SUPPORTED":return D({errorMessage:"The selected Figma component is not supported. Please make sure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_PAGE_WITH_MULTIPLE_CHILDREN":return D({errorMessage:"The selected Figma page has multiple children. Please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_PAGE_WITH_NO_VALID_CHILDREN":return D({errorMessage:"The selected Figma page doesn't have any content we can convert to code. Please make sure you've selected a page with visible designs then try again."}),{v:void 0};case"INVALID_REQUEST":case"UNKNOWN":case"UNCAUGHT_ERROR":return D({errorMessage:"Something went wrong while importing. Please try again."}),{v:void 0};case"NOT_STARTED":return lP.vF.error("Figma Import: Failed to import from Figma",{repl:e,figmaUrl:C,payload:n.payload}),s7.Cp(Error("Figma import: not started"),{extra:{replId:e,figmaUrl:C,payload:n.payload}}),D({errorMessage:"Something went wrong while importing. Please try again."}),{v:void 0};case"READABLE_BROKEN":case"CANCEL":case"UNEXPECTED_DISCONNECT":return{v:void 0};default:(0,s0.A)(t)}}var r=n.payload;"progress"===r.kind?l(function(e){return"in_progress"===e.status&&e.progress>=r.number?e:{status:"in_progress",progress:r.number,text:r.statusText}}):"success"===r.kind&&(p=function(e){var n=e.file,t=e.frame,r="".concat(n," (").concat(t,")");if(r.length<=s9.z)return r;var i=s9.z-3;if(n.length<=i-1){var o=i-n.length,a=t.length>o?t.substring(0,o-1)+"":t;return"".concat(n," (").concat(a,")")}var l=i-Math.min(t.length,10),u=n,c=t;n.length>l&&(u=n.substring(0,l-1)+"");var s=i-u.length;return t.length>s&&(c=t.substring(0,s-1)+""),"".concat(u," (").concat(c,")")}({file:r.figmaFileName,frame:r.figmaSelectedFrameName}))},w=(0,s8._)(d),Y.label=4;case 4:return[4,w.next()];case 5:if(!(f=!(y=Y.sent()).done))return[3,7];if(x=m(),"object"===(0,eC._)(x))return[2,x.v];Y.label=6;case 6:return f=!1,[3,4];case 7:return[3,14];case 8:return _=Y.sent(),h=!0,g=_,[3,14];case 9:if(Y.trys.push([9,,12,13]),!(f&&null!=w.return))return[3,11];return[4,w.return()];case 10:Y.sent(),Y.label=11;case 11:return[3,13];case 12:if(h)throw g;return[7];case 13:return[7];case 14:return l({status:"in_progress",progress:1,text:"Creating checkpoint"}),[4,n.git.init.rpc({initialCommit:!0,includeAllInitialFiles:!0},{signal:o})];case 15:if(!(S=Y.sent()).ok)switch(S.payload.code){case"ALREADY_INITIALIZED":break;case"CANCEL":case"UNEXPECTED_DISCONNECT":return[2];default:s7.v4(function(e){e.setExtra("gitInitError",S.payload),s7.Cp(Error("figma import: git init failed"))})}return l({status:"in_progress",progress:1,text:"Handing off to Agent"}),[4,v()];case 16:return Y.sent(),[4,t({variables:{input:{id:e,title:p,makeTitleUnique:!0,figmaImportStatus:cD.u4D.Completed}}})];case 17:return Y.sent(),(0,oB.u4)(oB.AZ.FIGMA_IMPORT_USED,{action:"completed"}),l({status:"success"}),[2]}})})()},[C,e,t,v,y,i,D]),A&&"Repl"===A.getRepl.__typename&&A.getRepl.config.figmaImportStatus===cD.u4D.Failed)?{status:"error",errorMessage:"Something went wrong"}:a),U=(0,s6.m)({onAuth:function(){"needs_auth"===F.status&&F.retryAuth(),(0,oB.u4)(oB.AZ.FIGMA_AUTH_COMPLETE,{source:"workspace"})}});return"not_started"===F.status||"success"===F.status?null:("in_progress"===F.status?R=(0,c.Y)(du,{text:F.text,progress:F.progress}):"error"===F.status?R=(0,c.Y)(dc,{errorMessage:F.errorMessage}):"needs_auth"===F.status&&(R=(0,c.Y)(ds,{onClick:U})),(0,c.Y)(dt.Z,{children:(0,c.Y)(ou.S,{clsx:dl().overlay,style:{cursor:"in_progress"===F.status?"wait":"default"},children:(0,c.Y)(s3.Ay,{children:(0,c.FD)(ou.S,{clsx:dl().animationWrapper,tabIndex:-1,children:[(0,c.FD)(ou.S,{align:"center",gap:16,children:[(0,c.Y)(dr.H,{}),(0,c.Y)(au.EY,{multiline:!1,variant:"subheadBig",dataCy:"figma-lock-screen",children:"Importing from Figma..."})]}),(0,c.Y)(ou.S,{pt:16,px:16,gap:4,children:R})]})})})}))}var dp=t(59864),df=t(95043);function dh(){var e=(0,am.A)().replspaceApi,n=(0,u._)((0,d.useState)(!1),2),t=n[0],r=n[1],i=ru(tq),o=oR(),a=dn();return(0,dp.D)({insertConfigPlugin:function(){return i({pane:{type:"config",flow:"githubImport"},focusIfExists:!0})},setConfigScreenLockIsOpen:r,openFile:o,openPane:a}),(0,d.useEffect)(function(){if(t)return e.onConfirmSendToken(function(e){e&&e(!0,!1)})},[t,e]),t?(0,c.Y)(df.A,{reason:"Importing"}):null}var dg=t(25189),dm=t(42811),dv=(0,l7.AH)([ol.wp.dragRegion,ol.wp.flex.growAndShrink(1),ol.wp.height(32)]);function dw(){return(0,c.Y)(ou.S,{css:dv})}var dy=t(64957),db=t(44411),dx=t(48125),d_=t(56988),dS=t(87087),dY=t(9844),dA=t(94356),dI=t(84e3);function dk(e){var n=e.title,t=e.current,r=e.max,i=e.unit,o=e.isUbbV2,a=e.shouldShowImprovedPaywallUpsell,l=function(e){return i?"".concat(i).concat(e):e.toString()},u=r>0?t/r:0,s=a?ry.LU.accentPrimaryDimmer:(0,dA.d8)({decimal:u});return(0,c.FD)(ou.S,{gap:6,children:[(0,c.FD)(ou.S,{css:dE.usageMeterAndTitle,children:[(0,c.Y)(ou.S,{row:!0,align:"center",gap:4,children:(0,c.Y)(au.EY,{height:"singleLine",children:n})}),(0,c.Y)(au.EY,{height:"singleLine",color:"dimmer",children:void 0!==o&&o?"".concat(Math.floor(100*u),"%"):"".concat(l(t),"/").concat(l(r))})]}),(0,c.Y)("div",{children:(0,c.Y)(dS.W,{css:dE.measureBar,total:r,current:t,color:s,tooltipHidden:!0})})]})}var dE=(0,rb.x)({measureBar:[ol.wp.height(8),{pointerEvents:"none"}],usageMeterAndTitle:[ol.wp.display.flex,ol.wp.flex.row,ol.wp.justify.spaceBetween,ol.wp.align.center]});function dC(e){var n=e.limit,t=e.usage,r=e.shouldShowImprovedPaywallUpsell,i=e.title;if(!n||void 0===t)return(0,c.Y)(di.A,{});var o=100*Math.min(1,t/n),a="",l="primary";return o>d_.Kd?(a="You've exceeded the ".concat(db.Lm," plan usage limit."),l="negative"):o===d_.Kd?(a="You've reached the ".concat(db.Lm," plan usage limit."),l="negative"):o>=d_.a6?(a="You're nearing the ".concat(db.Lm," plan usage limit."),l="orange"):o>=d_.s7&&(a="You're approaching the ".concat(db.Lm," plan usage limit."),l="yellow"),(0,c.FD)(c.FK,{children:[(0,c.Y)(ou.S,{gap:4,children:(0,c.Y)(dk,{title:null!=i?i:"Usage",current:t,max:n,unit:"$",isUbbV2:!0,shouldShowImprovedPaywallUpsell:r})}),a&&(r?(0,c.Y)(au.EY,{children:a}):(0,c.Y)(dY.N,{text:a,colorway:l})),(0,c.Y)(dx.A,{text:r?"Upgrade to continue using agent":"Upgrade for more",colorway:"primary",variant:r?"default":"outlined",context:r?"agent_freemium_quota_v2":"agent_freemium_quota",highlightUpsell:"agent",iconLeft:r?void 0:(0,c.Y)(dI.A,{}),hideCoreIcon:r})]})}var dD=t(92775),dR=t(51292),dF=t(28611),dU=(0,rb.x)({root:[ol.wp.px(8),dR.b.nofill,ol.wp.height(32),ol.wp.align.center,ol.wp.rowWithGap(4),ol.wp.px(6),ol.wp.borderRadius(),ol.wp.color.foregroundDefault],measureBar:[ol.wp.width(50),ol.wp.height(8),{pointerEvents:"none"}],popoverWrapper:[ol.wp.width(280)],header:[ol.wp.fontWeight.bold]});function dP(e){var n,t,r=e.shouldShowImprovedPaywallUpsell,i=(0,u._)((0,d.useState)(!1),2),o=i[0],a=i[1],l=(0,dD.i)().agentUsage;(0,d_.Nk)({usage:null==l?void 0:l.usage,limit:null==l?void 0:l.limit,percentThreshold:d_.s7,onHitThreshold:function(){a(!0)}}),(0,d_.Nk)({usage:null==l?void 0:l.usage,limit:null==l?void 0:l.limit,percentThreshold:d_.a6,onHitThreshold:function(){a(!0)}}),(0,d_.Nk)({usage:null==l?void 0:l.usage,limit:null==l?void 0:l.limit,percentThreshold:d_.Kd,onHitThreshold:function(){a(!0),(0,oB.u4)(oB.AZ.AGENT_USED,{action:"hit_freemium_quota"})}});var s=(0,d.useMemo)(function(){return(null==l?void 0:l.usage)&&(null==l?void 0:l.limit)?Math.min(1,l.usage/l.limit):0},[null==l?void 0:l.usage,null==l?void 0:l.limit]),p=(0,d.useMemo)(function(){return(0,dA.d8)({decimal:s})},[s]),f=r?ry.LU.accentPrimaryDimmer:p;return(0,c.FD)(dF.Wv,{isOpen:o,onOpenChange:function(e){a(e)},label:"Agent Usage",placement:"bottom start",children:[(0,c.Y)(al.SC,{css:dU.root,children:(0,c.FD)(ou.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(dS.W,{css:dU.measureBar,total:null!=(n=null==l?void 0:l.limit)?n:0,current:null!=(t=null==l?void 0:l.usage)?t:0,color:f,tooltipHidden:!0}),!r&&(0,c.FD)(au.EY,{color:"dimmer",variant:"small",children:[Math.floor(100*s),"% used"]})]})}),(0,c.Y)(ou.S,{css:dU.popoverWrapper,p:8,children:(0,c.FD)(ou.S,{gap:12,children:[(0,c.FD)(au.EY,{css:dU.header,children:[u3.g$," usage"]}),(0,c.Y)(dC,{limit:null==l?void 0:l.limit,usage:null==l?void 0:l.usage,shouldShowImprovedPaywallUpsell:r})]})})]})}var dO=t(70197);function dT(){var e=(0,f._)(["\n  query ProjectHeaderMenu($id: String!, $input: ProjectReplsInput!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        title\n        ...CreateProjectForkRepl\n        project {\n          id\n          mainRepl {\n            id\n            title\n            ...CreateProjectForkRepl\n          }\n          repls(input: $input) {\n            items {\n              id\n              title\n              ...ReplLinkRepl\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return dT=function(){return e},e}var dL={},dM=(0,h.J1)(dT(),dO.T,cr.r),dG=t(82207),dN=t(14524),dH=t(43162),dz=t(62058),dW=t(94280),dB=t(7503),dj=t(93868),d$=t(16653),dq=t(37379),dK=t(99933),dV=t(35751),dZ=t(2400),dJ=t(70598),dX=t(14385),dQ=t(73635),d0=(0,rb.x)({self:[ol.wp.display.grid,ol.wp.p(4),{gap:4,alignItems:"stretch"}],list:[ol.wp.maxHeight(640)],listItem:[dq.iF.item,ol.wp.px(8),ol.wp.height(28),{span:ol.wp.color.foregroundDefault}],listItemLabel:{flex:1},listButtonLink:[ol.wp.height(28),ol.wp.px(6),ol.wp.transition.none],currentReplIcon:[ol.wp.color.foregroundDimmer],tourWrapper:[ol.wp.p(8)]});function d1(e){var n=e.label,t=e.icon,r=(0,cQ._)(e,["label","icon"]);return(0,c.FD)(dq.if,(0,r4._)((0,p._)({css:d0.listItem},r),{textValue:n,children:[(0,c.Y)(dq.PX,{css:d0.listItemLabel,children:n}),(0,c.Y)(oc.Z_,{size:16,children:t})]}))}var d2=(0,d.forwardRef)(function(e,n){var t,r,i,o,a,l,s,f,h,m,v,w,y=(0,eo.A)(),b=(0,u._)((0,d.useState)(""),2),x=b[0],_=b[1],S=(0,dB.Os)(dW.X.id,dW.F.Forks),Y=(t={variables:{id:y,input:{}},notifyOnNetworkStatusChange:!0},r=(0,p._)({},dL,t),g.I(dM,r)),A=Y.refetch,I=(0,ad.A)(),k=I.showConfirm,E=I.showError,C=(0,u._)((0,dz.B)({onFork:function(){k("App forked, redirecting...")},onError:function(){E("Error creating fork - please try again")}}),2),D=C[0],R=C[1].loading;(0,dG.A)(function(){A({input:{filters:{title:{search:x}}},id:y})},[x],300);var F=(null==(i=Y.data)?void 0:i.getRepl.__typename)==="Repl"?Y.data.getRepl.project:null,U=(null==(o=Y.previousData)?void 0:o.getRepl.__typename)==="Repl"?null==(a=Y.previousData.getRepl.project)?void 0:a.repls.items:null,P=null!=(m=null==F?void 0:F.mainRepl)?m:(null==(l=Y.previousData)?void 0:l.getRepl.__typename)==="Repl"&&null!=(h=null==(s=Y.previousData.getRepl.project)?void 0:s.mainRepl)?h:null,O=(null==(f=Y.data)?void 0:f.getRepl.__typename)==="Repl"?Y.data.getRepl:null,T=(0,dN.Si)({orgId:e.org.id,projectId:e.projectId}),L=(0,dB.mR)();return(0,c.FD)("div",{css:d0.self,ref:n,children:[(0,c.FD)(dV.U,{children:[(0,c.Y)(dZ.L,{"aria-label":"Search Apps in Project",placeholder:"Search by App title...",onChange:_,isLoading:Y.loading,autoFocus:!0}),(0,c.Y)(dq.qF,{isLoading:Y.loading,items:null!=(w=null!=(v=null==F?void 0:F.repls.items)?v:U)?w:[],css:d0.list,children:function(e){var n;return(0,c.Y)(d1,(0,r4._)((0,p._)({icon:e.id===y?(0,c.Y)(l9.m_,{tooltip:"You are here",placement:"right",children:(0,c.Y)(dQ.A,{css:d0.currentReplIcon})}):void 0,isDisabled:e.id===y,id:e.id,label:e.title},(0,dX.q1)(e)),{sessions:null!=(n=T[e.id])?n:[]}),e.id)}})]}),(0,c.Y)(d$.a,{}),(0,c.FD)(ou.S,{children:[(0,c.Y)(dj.v,(0,r4._)((0,p._)({alignment:"start"},(0,dH.gm)({org:e.org,projectId:e.projectId})),{target:"_blank",iconLeft:(0,c.Y)(cP.A,{}),text:"Project dashboard",variant:"nofill",css:d0.listButtonLink})),(0,c.FD)(dK.in,{elevated:!1,placement:"right top",trigger:(0,c.Y)(al.$n,{alignment:"start",variant:"nofill",text:"New fork",iconLeft:R?(0,c.Y)(di.A,{}):(0,c.Y)(lB.A,{}),loading:R,css:d0.listButtonLink}),children:[O?(0,c.Y)(dK.Dr,{label:"From here (".concat(O.title,")"),isDisabled:R,onAction:function(){D({forkSource:"projectHeaderMenu",orgId:e.org.id,repl:O})}}):null,O&&P&&O.id!==P.id?(0,c.Y)(dK.Dr,{label:"From main App (".concat(P.title,")"),isDisabled:!P||R,onAction:function(){P&&D({orgId:e.org.id,repl:P,forkSource:"projectHeaderMenu"})}}):null]}),S.isActive&&L?(0,c.Y)("div",{css:d0.tourWrapper,children:(0,c.Y)(dJ.p,{content:L.content,title:L.title,onDismiss:S.next,onCurrentStepChange:S.goto,currentStepIndex:dW.X.steps.findIndex(function(e){return e.id===dW.F.Forks}),totalSteps:dW.X.steps.length})}):null]})]})}),d4=t(22290),d5=t(24499),d3=(0,rb.x)({container:[ol.wp.position.relative],loadingGeneratedIcon:[d5.S.foregroundPulse(ry.LU.blurpleDimmest,ry.LU.blurpleDefault),ol.wp.borderRadius()]});function d6(e){var n=e.replId,t=e.replIconUrl,r=e.size,i=(0,d4.b)({replId:n,replIconUrl:t}),o=i.loading,a=i.generatedIconUrl;return(0,c.Y)(ou.S,{css:d3.container,children:(0,c.Y)(ou.S,{css:o&&d3.loadingGeneratedIcon,children:(0,c.Y)(cs.Ay,{iconUrl:a||t,size:void 0===r?20:r,alt:""})})})}var d8=t(81512),d7=(0,rb.x)({projectLinkTooltip:[ol.wp.maxWidth(400),ol.wp.flex.shrink(2)],projectLink:[ol.wp.px(6),ol.wp.noDragRegion,ol.wp.flex.growAndShrink(1)],inheritanceChevron:[ol.wp.color.outlineStrongest,{marginInline:-1}]});function d9(e){var n=e.repl,t=(0,u._)((0,d.useState)(!1),2),r=t[0],i=t[1];return n.project&&n.org?(0,c.FD)(c.FK,{children:[(0,c.Y)(l9.m_,{tooltip:"Project forks",css:d7.projectLinkTooltip,isOpen:!r&&void 0,children:(0,c.FD)(dF.Wv,{label:"Project Menu",isOpen:r,onOpenChange:i,placement:"bottom start",children:[(0,c.Y)(al.$n,{iconLeft:(0,c.Y)(d6,{replId:n.id,replIconUrl:n.iconUrl}),text:n.project.title,variant:"nofill",css:d7.projectLink}),(0,c.Y)(d2,{org:n.org,projectId:n.project.id})]})}),(0,c.Y)(d8.A,{size:12,css:d7.inheritanceChevron})]}):null}var pe=t(90803),pn=t.n(pe);function pt(){return(0,c.Y)(o6.ui,{background:"higher",clsx:pn().root,children:(0,c.Y)(au.EY,{children:"Planning"})})}var pr=t(55158),pi=t(48686),po=t(44495),pa={backgroundDefault:"var(--background-default)",backgroundHigher:"var(--background-higher)"},pl={primary:{strongest:"var(--accent-primary-strongest)",stronger:"var(--accent-primary-stronger)",default:"var(--accent-primary-default)",dimmer:"var(--accent-primary-dimmer)",dimmest:"var(--accent-primary-dimmest)"},positive:{strongest:"var(--accent-positive-strongest)",stronger:"var(--accent-positive-stronger)",default:"var(--accent-positive-default)",dimmer:"var(--accent-positive-dimmer)",dimmest:"var(--accent-positive-dimmest)"},negative:{strongest:"var(--accent-negative-strongest)",stronger:"var(--accent-negative-stronger)",default:"var(--accent-negative-default)",dimmer:"var(--accent-negative-dimmer)",dimmest:"var(--accent-negative-dimmest)"},red:{strongest:"var(--accent-red-strongest)",stronger:"var(--accent-red-stronger)",default:"var(--accent-red-default)",dimmer:"var(--accent-red-dimmer)",dimmest:"var(--accent-red-dimmest)"},orange:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},yellow:{strongest:"var(--accent-yellow-strongest)",stronger:"var(--accent-yellow-stronger)",default:"var(--accent-yellow-default)",dimmer:"var(--accent-yellow-dimmer)",dimmest:"var(--accent-yellow-dimmest)"},lime:{strongest:"var(--accent-lime-strongest)",stronger:"var(--accent-lime-stronger)",default:"var(--accent-lime-default)",dimmer:"var(--accent-lime-dimmer)",dimmest:"var(--accent-lime-dimmest)"},green:{strongest:"var(--accent-green-strongest)",stronger:"var(--accent-green-stronger)",default:"var(--accent-green-default)",dimmer:"var(--accent-green-dimmer)",dimmest:"var(--accent-green-dimmest)"},teal:{strongest:"var(--accent-teal-strongest)",stronger:"var(--accent-teal-stronger)",default:"var(--accent-teal-default)",dimmer:"var(--accent-teal-dimmer)",dimmest:"var(--accent-teal-dimmest)"},blue:{strongest:"var(--accent-blue-strongest)",stronger:"var(--accent-blue-stronger)",default:"var(--accent-blue-default)",dimmer:"var(--accent-blue-dimmer)",dimmest:"var(--accent-blue-dimmest)"},blurple:{strongest:"var(--accent-blurple-strongest)",stronger:"var(--accent-blurple-stronger)",default:"var(--accent-blurple-default)",dimmer:"var(--accent-blurple-dimmer)",dimmest:"var(--accent-blurple-dimmest)"},purple:{strongest:"var(--accent-purple-strongest)",stronger:"var(--accent-purple-stronger)",default:"var(--accent-purple-default)",dimmer:"var(--accent-purple-dimmer)",dimmest:"var(--accent-purple-dimmest)"},magenta:{strongest:"var(--accent-magenta-strongest)",stronger:"var(--accent-magenta-stronger)",default:"var(--accent-magenta-default)",dimmer:"var(--accent-magenta-dimmer)",dimmest:"var(--accent-magenta-dimmest)"},pink:{strongest:"var(--accent-pink-strongest)",stronger:"var(--accent-pink-stronger)",default:"var(--accent-pink-default)",dimmer:"var(--accent-pink-dimmer)",dimmest:"var(--accent-pink-dimmest)"},grey:{strongest:"var(--accent-grey-strongest)",stronger:"var(--accent-grey-stronger)",default:"var(--accent-grey-default)",dimmer:"var(--accent-grey-dimmer)",dimmest:"var(--accent-grey-dimmest)"},brown:{strongest:"var(--accent-brown-strongest)",stronger:"var(--accent-brown-stronger)",default:"var(--accent-brown-default)",dimmer:"var(--accent-brown-dimmer)",dimmest:"var(--accent-brown-dimmest)"},warning:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},brand:{strongest:"var(--brand-accent-strongest)",stronger:"var(--brand-accent-stronger)",default:"var(--brand-accent-default)",dimmer:"var(--brand-accent-dimmer)",dimmest:"var(--brand-accent-dimmest)"}},pu=new Map,pc=new Map,ps=new Map;Object.keys(pl),Object.keys(pl[Object.keys(pl)[0]]);var pd=!0,pp=!1,pf=void 0;try{for(var ph,pg=Object.entries({borderRadius1:"--border-radius-1",borderRadius2:"--border-radius-2",borderRadius4:"--border-radius-4",borderRadius6:"--border-radius-6",borderRadius8:"--border-radius-8",borderRadius12:"--border-radius-12",borderRadius16:"--border-radius-16",borderRadiusDefault:"--border-radius-default",borderRadiusContainer:"--border-radius-container",borderRadiusRound:"--border-radius-round",space1:"--space-1",space2:"--space-2",space4:"--space-4",space6:"--space-6",space8:"--space-8",space12:"--space-12",space16:"--space-16",space24:"--space-24",space32:"--space-32",space40:"--space-40",space48:"--space-48",space56:"--space-56",space64:"--space-64",space80:"--space-80",space96:"--space-96",space128:"--space-128",space256:"--space-256",spaceDefault:"--space-default",shadow1:"--shadow-1",shadow2:"--shadow-2",shadow3:"--shadow-3",shadowDefault:"--shadow-default",fontFamilyDefault:"--font-family-default",fontFamilyCode:"--font-family-code",fontSizeSmall:"--font-size-small",fontSizeDefault:"--font-size-default",fontSizeSubheadDefault:"--font-size-subhead-default",fontSizeSubheadBig:"--font-size-subhead-big",fontSizeHeaderDefault:"--font-size-header-default",fontSizeHeaderBig:"--font-size-header-big",fontWeightRegular:"--font-weight-regular",fontWeightMedium:"--font-weight-medium",fontWeightBold:"--font-weight-bold",lineHeightSmall:"--line-height-small",lineHeightDefault:"--line-height-default",lineHeightSubheadDefault:"--line-height-subhead-default",lineHeightSubheadBig:"--line-height-subhead-big",lineHeightHeaderDefault:"--line-height-header-default",lineHeightHeaderBig:"--line-height-header-big",transitionDurationSnappy:"--transition-duration-snappy",transitionDurationChill:"--transition-duration-chill",transitionTimingFunctionSnappy:"--transition-timing-function-snappy",transitionTimingFunctionChill:"--transition-timing-function-chill",borderWidthDefault:"--border-width-default",singleLine:"--single-line",backgroundRoot:"--background-root",backgroundDefault:"--background-default",backgroundHigher:"--background-higher",backgroundHighest:"--background-highest",backgroundOverlay:"--background-overlay",foregroundDefault:"--foreground-default",foregroundDimmer:"--foreground-dimmer",foregroundDimmest:"--foreground-dimmest",outlineDimmest:"--outline-dimmest",outlineDimmer:"--outline-dimmer",outlineDefault:"--outline-default",outlineStronger:"--outline-stronger",outlineStrongest:"--outline-strongest",accentPrimaryStrongest:"--accent-primary-strongest",accentPrimaryStronger:"--accent-primary-stronger",accentPrimaryDefault:"--accent-primary-default",accentPrimaryDimmer:"--accent-primary-dimmer",accentPrimaryDimmest:"--accent-primary-dimmest",accentPositiveStrongest:"--accent-positive-strongest",accentPositiveStronger:"--accent-positive-stronger",accentPositiveDefault:"--accent-positive-default",accentPositiveDimmer:"--accent-positive-dimmer",accentPositiveDimmest:"--accent-positive-dimmest",accentNegativeStrongest:"--accent-negative-strongest",accentNegativeStronger:"--accent-negative-stronger",accentNegativeDefault:"--accent-negative-default",accentNegativeDimmer:"--accent-negative-dimmer",accentNegativeDimmest:"--accent-negative-dimmest",redStrongest:"--accent-red-strongest",redStronger:"--accent-red-stronger",redDefault:"--accent-red-default",redDimmer:"--accent-red-dimmer",redDimmest:"--accent-red-dimmest",orangeStrongest:"--accent-orange-strongest",orangeStronger:"--accent-orange-stronger",orangeDefault:"--accent-orange-default",orangeDimmer:"--accent-orange-dimmer",orangeDimmest:"--accent-orange-dimmest",yellowStrongest:"--accent-yellow-strongest",yellowStronger:"--accent-yellow-stronger",yellowDefault:"--accent-yellow-default",yellowDimmer:"--accent-yellow-dimmer",yellowDimmest:"--accent-yellow-dimmest",limeStrongest:"--accent-lime-strongest",limeStronger:"--accent-lime-stronger",limeDefault:"--accent-lime-default",limeDimmer:"--accent-lime-dimmer",limeDimmest:"--accent-lime-dimmest",greenStrongest:"--accent-green-strongest",greenStronger:"--accent-green-stronger",greenDefault:"--accent-green-default",greenDimmer:"--accent-green-dimmer",greenDimmest:"--accent-green-dimmest",tealStrongest:"--accent-teal-strongest",tealStronger:"--accent-teal-stronger",tealDefault:"--accent-teal-default",tealDimmer:"--accent-teal-dimmer",tealDimmest:"--accent-teal-dimmest",blueStrongest:"--accent-blue-strongest",blueStronger:"--accent-blue-stronger",blueDefault:"--accent-blue-default",blueDimmer:"--accent-blue-dimmer",blueDimmest:"--accent-blue-dimmest",blurpleStrongest:"--accent-blurple-strongest",blurpleStronger:"--accent-blurple-stronger",blurpleDefault:"--accent-blurple-default",blurpleDimmer:"--accent-blurple-dimmer",blurpleDimmest:"--accent-blurple-dimmest",purpleStrongest:"--accent-purple-strongest",purpleStronger:"--accent-purple-stronger",purpleDefault:"--accent-purple-default",purpleDimmer:"--accent-purple-dimmer",purpleDimmest:"--accent-purple-dimmest",magentaStrongest:"--accent-magenta-strongest",magentaStronger:"--accent-magenta-stronger",magentaDefault:"--accent-magenta-default",magentaDimmer:"--accent-magenta-dimmer",magentaDimmest:"--accent-magenta-dimmest",pinkStrongest:"--accent-pink-strongest",pinkStronger:"--accent-pink-stronger",pinkDefault:"--accent-pink-default",pinkDimmer:"--accent-pink-dimmer",pinkDimmest:"--accent-pink-dimmest",greyStrongest:"--accent-grey-strongest",greyStronger:"--accent-grey-stronger",greyDefault:"--accent-grey-default",greyDimmer:"--accent-grey-dimmer",greyDimmest:"--accent-grey-dimmest",brownStrongest:"--accent-brown-strongest",brownStronger:"--accent-brown-stronger",brownDefault:"--accent-brown-default",brownDimmer:"--accent-brown-dimmer",brownDimmest:"--accent-brown-dimmest",white:"--white",black:"--black",surfaceBackground:"--surface-background",interactiveBackground:"--interactive-background",interactiveBackgroundActive:"--interactive-background--active",interactiveBorder:"--interactive-border",interactiveBorderHover:"--interactive-border--hover",brandText:"--brand-text",brandTextSecondary:"--brand-secondary-text",brandTextLight:"--brand-text-light",brandBackground:"--brand-background",brandBackgroundDarker:"--brand-background-darker",brandBorder:"--brand-border",brandAccentStrongest:"--brand-accent-strongest",brandAccentStronger:"--brand-accent-stronger",brandAccentDefault:"--brand-accent-default",brandAccentDimmer:"--brand-accent-dimmer",brandAccentDimmest:"--brand-accent-dimmest",brandBlack:"--brand-black",fontFamilyBrand:"--font-family-brand",fontFamilyBrandVariable:"--font-family-brand-variable",fontFamilyBrandPixel:"--font-family-brand-pixel",breakpointMobileMin:"--breakpoint-mobile-min",breakpointMobileMax:"--breakpoint-mobile-max",breakpointTabletMin:"--breakpoint-tablet-min",breakpointTabletMax:"--breakpoint-tablet-max"})[Symbol.iterator]();!(pd=(ph=pg.next()).done);pd=!0){var pm=(0,u._)(ph.value,2),pv=pm[0],pw=pm[1];pu.set(pv,pw),pc.set(pw,pv),ps.set(pv,"var(".concat(pw,")"))}}catch(e){pp=!0,pf=e}finally{try{pd||null==pg.return||pg.return()}finally{if(pp)throw pf}}var py=t(8086),pb=t(5857),px=(0,rb.x)({metadata:[],iconWrapper:[ol.wp.position.relative,ol.wp.display.none,(0,N._)({},ol.$_.min("tabletMax"),[ol.wp.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[ol.wp.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[ol.wp.flex.shrink(1),ol.wp.truncate],placeholderTitle:[ol.wp.width(100),ol.wp.borderRadius("default"),{alignSelf:"stretch"},d5.S.foregroundPulse(pa.backgroundDefault,pa.backgroundHigher)]});function p_(e){var n,t=e.repl,r=e.hideTitle,i=(0,py.A)().didDisconnect,o=(0,t9.p)();return(0,c.FD)(ou.S,{grow:!0,shrink:!0,row:!0,gap:6,align:"center",children:[(0,c.FD)(ou.S,{css:px.iconWrapper,style:o?{display:"flex"}:void 0,children:[(null==(n=t.project)?void 0:n.id)?null:(0,c.Y)(ou.S,{css:i&&px.dimIcon,children:(0,c.Y)(d6,{replId:t.id,replIconUrl:t.iconUrl,size:o?16:void 0})}),i?(0,c.Y)(l9.m_,{tooltip:"Reconnecting",children:(0,c.Y)(pb.A,{size:16,css:px.diconnectedIcon})}):null]}),r?null:(0,c.Y)(au.EY,{multiline:!1,css:px.title,"data-cy":"header-repl-title",color:i?"dimmer":"default",children:t.title})]})}var pS=(0,rb.x)({popover:[ol.wp.maxWidth(460),ol.wp.width("100%")],button:[dR.b.nofill,ol.wp.height(32),ol.wp.flex.growAndShrink(1),ol.wp.align.center,ol.wp.rowWithGap(4),ol.wp.px(6),ol.wp.borderRadius(),ol.wp.color.foregroundDefault,{'&[aria-expanded="true"]':{backgroundColor:ry.LU.interactiveBackgroundActive}}]});function pY(e){var n=e.repl,t=e.getDesktopLayoutState,r=e.hideTitle,i=(0,u._)((0,d.useState)(!1),2),o=i[0],a=i[1],l=(0,t9.p)(),s=function(){var e=(0,V.E5)("simplifiedTabletUI"),n=(0,d.useCallback)(function(){e&&(0,s2._z)({messageType:s1.tF.SHOW_REPL_INFO},(0,pi.Ak)())},[e]);if(e)return n}();return(0,V.m6)()?(0,c.Y)(ou.S,{css:pS.button,onClick:s,children:(0,c.Y)(p_,{repl:n,hideTitle:r})}):(0,c.FD)(dF.Wv,{isOpen:o,onOpenChange:function(e){a(e),e&&(0,oB.u4)(oB.AZ.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",css:pS.popover,children:[(0,c.Y)(ou.D.button,{dataCy:"ws-repl-info-container",css:pS.button,onClick:function(){(0,oB.u4)(oB.AZ.REPL_METADATA_OPENED)},"aria-expanded":o,style:l?{height:28}:void 0,children:(0,c.Y)(p_,{repl:n,hideTitle:r})}),(0,c.Y)(po.A,{getDesktopLayoutState:t,setIsEditing:a})]})}var pA=t(31207),pI=(0,rb.x)({replInfo:[ol.wp.maxWidth(530),{"& > span":[ol.wp.viewStyle,ol.wp.flex.shrink(1)]}]});function pk(e){var n,t=e.repl,r=e.isAgentCentered,i=rc(n6),o=oT(),a=(0,pA.F)().isFreemiumStarterPlanUsersOwnRepl,l=(0,T._P)({controlName:"flag-improved-paywall-upsell"}),u=(0,t9.p)();return(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",justify:"start",css:ol.wp.noDragRegion,children:[(0,c.Y)(dy.A,{}),(0,c.Y)(pr.C,{org:null!=(n=t.org)?n:void 0}),(0,c.Y)(d9,{repl:t}),(0,c.Y)(ou.S,{row:!0,align:"center",justify:"start",children:r?(0,c.Y)(pE,{repl:t}):(0,c.FD)(ou.S,{row:!0,gap:4,children:[(0,c.Y)(ou.S,{row:!0,align:"center",css:pI.replInfo,shrink:!0,children:(0,c.Y)(pY,{repl:t,getDesktopLayoutState:i})}),"centeredVisualPlanner"===o?(0,c.Y)(pt,{}):null]})}),a?(0,c.FD)(c.FK,{children:[(0,c.Y)(dP,{shouldShowImprovedPaywallUpsell:l}),l?(0,c.Y)(dx.A,{text:"Upgrade",context:"agent_freemium_quota_v2",colorway:"primary",variant:"default",highlightUpsell:"agent",size:u?"small":void 0}):null]}):null,(0,c.Y)(dw,{})]})}function pE(e){var n=e.repl;return(0,c.Y)(ou.S,{px:12,children:(0,c.Y)(au.EY,{children:n.title})})}var pC=t(73215),pD=t(90843),pR=(0,rb.x)({brokenNixButton:[ol.wp.noDragRegion,ol.wp.backgroundColor.orangeDimmest,ol.wp.color.orangeStrongest,ol.wp.height(32),ol.wp.p(8),ol.wp.borderRadius(4),ol.wp.cursor.pointer,{border:"1px solid",borderColor:"transparent","&:hover":[ol.wp.backgroundColor.orangeDimmer],"&:active":[{borderColor:ry.LU.orangeDefault}]}],brokenNixButtonLabel:[ol.wp.display.none,(0,N._)({},"@media (min-width: ".concat(sv.LO.tabletMax,"px)"),[ol.wp.display.block])]});function pF(e){var n=e.nixState,t=(0,u._)((0,d.useState)(!1),2),r=t[0],i=t[1],o=dn(),a=(0,d.useCallback)(function(e){o({type:"codeEditor",data:{path:e}})},[o]);return(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{align:"center",css:pR.brokenNixButton,row:!0,gap:8,tag:"button",onClick:function(){i(!0)},children:["error"===n.status?(0,c.Y)(pD.A,{}):null,"rebuilding-after-error"===n.status?(0,c.Y)(di.A,{}):null,(0,c.Y)(ou.S,{css:pR.brokenNixButtonLabel,children:"App is in recovery mode"})]}),(0,c.Y)(pC.E,{isOpen:r,setIsOpen:i,nixState:n,openFile:a})]})}var pU=t(12252),pP=t(2717),pO=t(16935),pT=t(91175),pL=t(7909),pM=t.n(pL);function pG(){var e=oT(),n=(ru(iD),(0,T._P)({controlName:"flag-agent-debug-info-button"})),t=(0,B.NC)(),r=(0,ed.Rj)(function(){return t.sessions.agent.current},[t.sessions.agent]);return(0,c.FD)(ou.S,{row:!0,align:"center",gap:4,children:[(0,c.Y)(pN,{icon:(0,c.Y)(pO.A,{size:12}),text:"Plan",isActive:"centeredVisualPlanner"===e}),(0,c.Y)(ou.S,{clsx:pM().dividerContainer,children:(0,c.Y)(d$.a,{clsx:pM().divider})}),(0,c.Y)(pN,{icon:(0,c.Y)(pT.A,{size:12}),text:"Build",isActive:"tilingLayout"===e,onClick:void 0}),n&&r?(0,c.FD)(c.FK,{children:[(0,c.Y)(ou.S,{clsx:pM().dividerContainer,children:(0,c.Y)(d$.a,{clsx:pM().divider})}),(0,c.Y)(pU.O,{sessionId:r.id,sessionType:u7.dF3.AGENT_SESSION})]}):null]})}function pN(e){var n=e.icon,t=e.text,r=e.isActive,i=e.onClick;return(0,c.FD)(ou.S,{row:!0,align:"center",gap:4,clsx:[pM().step,(0,N._)({},pM().stepInteractive,null!=i)],onClick:i,p:4,children:[(0,c.Y)(pP.a,{iconLeft:n,colorway:r?"positive":"grey",clsx:[pM().pill,(0,N._)({},pM().pillActive,r)]}),(0,c.Y)(au.EY,{color:r?"default":"dimmer",clsx:pM().text,children:t})]})}var pH=t(78828);function pz(e){var n=(0,am.A)().presence,t=(0,t_.w1)(),r=(0,oe.A)(e);return(0,d.useCallback)(function(e){var i=e.username,o=e.id,a=n.getFollowedUser();if((null==a?void 0:a.username)===i)return void n.unfollowUser();n.followUser(i);var l=n.getActiveFileForUser(o),u=t();l&&l!==u&&r.current({path:l})},[r,t,n])}var pW=t(97139),pB=t(85024),pj=t(96513),p$=t(97608),pq=t(78627);function pK(){var e=(0,f._)(["\n  fragment ReplMultiplayerOrg on Org {\n    ...OrgMetadata\n    membersCount\n  }\n  ","\n"]);return pK=function(){return e},e}function pV(){var e=(0,f._)(["\n  fragment ReplMultiplayerOrgGroup on OrgGroup {\n    ...OrgGroupsOrgGroup\n  }\n  ","\n"]);return pV=function(){return e},e}function pZ(){var e=(0,f._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return pZ=function(){return e},e}function pJ(){var e=(0,f._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return pJ=function(){return e},e}function pX(){var e=(0,f._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    isPrivate\n    url\n    org {\n      ...ReplMultiplayerOrg\n    }\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return pX=function(){return e},e}function pQ(){var e=(0,f._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return pQ=function(){return e},e}function p0(){var e=(0,f._)(["\n  mutation UpdateOrgReplVisibility($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return p0=function(){return e},e}var p1={},p2=(0,h.J1)(pK(),pq.wW),p4=(0,h.J1)(pV(),p$.Um),p5=(0,h.J1)(pZ(),p4),p3=(0,h.J1)(pJ(),p4),p6=(0,h.J1)(pX(),p2,p5,p3),p8=(0,h.J1)(pQ(),p6),p7=(0,h.J1)(p0(),p6),p9=t(6563),fe=t(28561),fn=t(24759),ft=t(705),fr=t(1220),fi=t(31051),fo=t(85826),fa=t(22440),fl=t(8548),fu=(0,rb.x)({section:[ol.wp.colWithGap(12),ol.wp.px(12)],sectionWithBorders:[ol.wp.colWithGap(12),ol.wp.p(12),ol.wp.border({direction:"top"}),ol.wp.border({direction:"bottom"}),{"&:last-of-type":{borderBottom:0,paddingBottom:0}}],sectionTitle:[ol.wp.fontWeight.medium],subtitle:[ol.wp.fontWeight.medium],item:[ol.wp.rowWithGap(16),ol.wp.align.center,ol.wp.justify.spaceBetween],groupName:[ol.wp.colWithGap(6),ol.wp.justify.center],visibilitySelector:[ol.wp.position.relative,ol.wp.justify.start,ol.wp.align.center]}),fc=function(e){var n,t,r,i,o,a,l,u,s,d,f,h=e.replId,m=(0,aa.T)(),v=(0,q.A)(),w=(n={variables:{replId:h}},t=(0,p._)({},p1,n),g.I(p8,t)),y=w.data,b=w.loading,x=w.error,_=w.refetch,S=(null==y||null==(r=y.getRepl)?void 0:r.__typename)==="Repl"?y.getRepl:void 0,Y=(null!=(s=null==S||null==(i=S.multiplayerStatus)?void 0:i.groups)?s:[]).filter(function(e){return"custom"!==e.group.type}),A=(null!=(d=null==S||null==(o=S.multiplayerStatus)?void 0:o.groups)?d:[]).filter(function(e){return"custom"===e.group.type}),I=null!=(f=null==S||null==(a=S.multiplayerStatus)?void 0:a.individuals)?f:[],k=Y.map(function(e){return e.group}).concat(A.map(function(e){return e.group})).concat(I.map(function(e){return e.group})),E=function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),[2]}})})()};return(null==x?void 0:x.message)?(0,c.Y)(ou.S,{gap:12,children:(0,c.Y)(dY.N,{colorway:"negative",text:x.message})}):b||!S?(0,c.Y)(ou.S,{px:12,align:"center",justify:"center",children:(0,c.Y)(di.A,{})}):(0,c.FD)(ou.S,{gap:12,children:[(0,c.FD)(ou.S,{tag:"header",px:12,gap:2,children:[(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Share App"}),(0,c.FD)(ou.S,{css:fu.subtitle,row:!0,gap:4,children:[S.org?(0,c.FD)(au.EY,{variant:"small",color:"dimmer",children:[S.org.name," /"]}):null,(0,c.Y)(au.EY,{variant:"small",children:S.title})]})]}),(null==(l=S.org)?void 0:l.id)&&S.authorizations.editPermissions.isAuthorized?(0,c.Y)(ou.S,{css:fu.sectionWithBorders,children:(0,c.Y)(fp,{orgId:S.org.id,selectedGroups:k,repl:S,onScopeChange:E})}):null,(0,c.FD)(ou.S,{css:fu.section,children:[(0,c.Y)(au.EY,{variant:"small",css:fu.sectionTitle,children:"Roles with access"}),(0,c.Y)(ou.S,{gap:12,children:Y.map(function(e){var n=e.group,t=e.options;return(0,c.Y)(fd,{repl:S,group:n,options:t,onScopeChange:E},n.id)})}),A.length>0?(0,c.FD)(c.FK,{children:[(0,c.Y)(au.EY,{variant:"small",css:fu.sectionTitle,children:"Groups with access"}),(0,c.Y)(ou.S,{gap:12,children:A.map(function(e){var n=e.group,t=e.options;return(0,c.Y)(fd,{repl:S,group:n,options:t,onScopeChange:E},n.id)})})]}):null]}),I.length>0?(0,c.FD)(ou.S,{css:fu.section,children:[(0,c.Y)(au.EY,{variant:"small",css:fu.sectionTitle,children:"People with access"}),I.map(function(e){var n=e.group,t=e.user,r=e.options;return(0,c.Y)(fs,{currentUserId:m,repl:S,group:n,user:t,options:r,onScopeChange:E},t.id)})]}):null,(0,c.Y)(ou.S,{css:fu.section,children:(0,c.Y)(ft.R,{type:"repl"})}),(null==(u=S.org)?void 0:u.id)?(0,c.Y)(ou.S,{css:fu.sectionWithBorders,children:(0,c.FD)(ou.S,{row:!0,justify:"space-between",children:[(0,c.Y)(ff,{repl:S,org:S.org}),v?null:(0,c.Y)(dj.v,(0,r4._)((0,p._)({prefetch:!1},(0,dX.z9)(S)),{iconRight:(0,c.Y)(cP.A,{}),variant:"outlined",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}}))]})}):null]})},fs=function(e){var n=e.user,t=e.currentUserId,r=e.repl,i=e.group,o=e.options,a=e.onScopeChange,l=t===n.id;return(0,c.FD)(ou.S,{css:fu.item,children:[(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(fi.e,{src:n.image,username:n.username,fullName:n.displayName,size:24}),(0,c.FD)(ou.S,{css:fu.groupName,children:[(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(au.EY,{height:"singleLine",children:n.username}),l?(0,c.Y)(au.EY,{height:"singleLine",color:"dimmest",children:"(You)"}):null]}),n.username!==n.displayName?(0,c.Y)(au.EY,{variant:"small",color:"dimmest",height:"singleLine",children:n.displayName}):null]})]}),(0,c.Y)(ou.S,{children:(0,c.Y)(fr.A,{repl:r,group:i,options:o,onScopeChange:a})})]})},fd=function(e){var n=e.repl,t=e.group,r=e.options,i=e.onScopeChange;return(0,c.FD)(ou.S,{css:fu.item,children:[(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(fe.A,{group:t}),(0,c.FD)(ou.S,{css:fu.groupName,children:[(0,c.Y)(au.EY,{height:"singleLine",children:t.name}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[t.isMember?(0,c.Y)(au.EY,{variant:"small",color:"dimmest",height:"singleLine",children:"(you)"}):null,null!=t.memberCount?(0,c.Y)(au.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,sl.A)("member",t.memberCount,!0)}):null]})]})]}),(0,c.Y)(ou.S,{children:(0,c.Y)(fr.A,{repl:n,group:t,options:r,onScopeChange:i})})]})},fp=function(e){var n,t,r,i,o,a,l,s=e.orgId,p=e.selectedGroups,f=e.repl,h=e.onScopeChange,g="group-search-".concat((0,d.useId)()),m=(0,u._)((0,d.useState)(),2),v=m[0],w=m[1],y=(0,u._)((0,d.useState)(""),2),b=y[0],x=y[1],_=(0,u._)((0,p9.qO)(),2),S=_[0],Y=_[1],A=Y.data,I=Y.error,k=Y.loading,E=A&&(null==(t=A.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&"OrgGroup"===A.currentUser.org.group.__typename&&(null==(r=A.currentUser.org.group.replScopeOptions)?void 0:r.__typename)==="OrgGroupReplScopeOptions"?A.currentUser.org.group.replScopeOptions.items[0].options:void 0,C=(null==A?void 0:A.currentUser)&&"Org"!==A.currentUser.org.__typename?A.currentUser.org.message:void 0,D=(null==A?void 0:A.currentUser)&&"Org"===A.currentUser.org.__typename&&"OrgGroup"!==A.currentUser.org.group.__typename?A.currentUser.org.group.message:void 0,R=(null==A?void 0:A.currentUser)&&"Org"===A.currentUser.org.__typename&&"OrgGroup"===A.currentUser.org.group.__typename&&(null==(i=A.currentUser.org.group.replScopeOptions)?void 0:i.__typename)!=="OrgGroupReplScopeOptions"?null==(o=A.currentUser.org.group.replScopeOptions)?void 0:o.message:void 0,F=null!=(l=null!=(a=null!=C?C:D)?a:R)?l:null==I?void 0:I.message;return(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(ou.S,{grow:!0,shrink:!0,children:(0,c.Y)(fn.A,{inputId:g,orgId:s,types:[pj.Oi9.Custom,pj.Oi9.SystemIndividual],selectedGroups:p,value:b,setValue:x,onSelect:function(e){w(e),x(e.name),S({variables:{orgId:s,groupId:e.id,input:{replIds:[f.id]}}})},onClear:function(){return w(void 0)},placeholder:"Share with groups or other members"})}),v&&E||k?(0,c.FD)(ou.S,{pl:24,row:!0,align:"center",children:[v&&E&&!k?(0,c.Y)(fr.A,{group:v,repl:f,options:E,onScopeChange:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,h()];case 1:return e.sent(),x(""),w(void 0),[2]}})})()}}):null,k?(0,c.Y)(di.A,{size:24}):null]}):null]}),F?(0,c.Y)(dY.N,{colorway:"negative",text:F}):null]})},ff=function(e){var n,t,r,i=e.repl,o=e.org,a=(0,u._)((0,d.useState)(),2),l=a[0],s=a[1],f=(0,u._)((0,d.useState)(),2),h=f[0],g=f[1],v=(0,u._)((n={variables:{input:{id:i.id}},onError:function(e){g(e.message)}},t=(0,p._)({},p1,n),m.n(p7,t)),2),w=v[0],y=v[1].loading,b="repl-visibility-".concat((0,d.useId)()),x=i.authorizations.editVisibility.isAuthorized,_=i.authorizations.editVisibility.message,S=[{id:"private",icon:(0,c.Y)(fl.A,{}),name:"Internal to ".concat(o.name),selected:i.isPrivate,description:"Only selected organization members can view or edit."},{id:"public",icon:(0,c.Y)(fa.A,{}),name:"Public on Replit",selected:!i.isPrivate,description:"Anyone on Replit can see or fork. You choose who can edit."}],Y=S.find(function(e){return e.selected}),A=Y?(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[Y.icon," ",Y.name]}):void 0;return r=h?(0,c.Y)(l9.m_,{tooltip:h,children:(0,c.Y)(pD.A,{size:24,color:ry.LU.accentNegativeDefault})}):y?(0,c.Y)(di.A,{size:24}):l?(0,c.Y)(dQ.A,{size:24,color:ry.LU.accentPositiveDefault}):null,(0,c.FD)(ou.S,{css:fu.visibilitySelector,grow:!0,shrink:!0,row:!0,gap:4,children:[(0,c.Y)(l9.m_,{tooltip:_,isDisabled:x,children:(0,c.Y)(dK.in,{id:b,trigger:(0,c.Y)(al.$n,{iconRight:(0,c.Y)(fo.A,{}),text:null!=A?A:"Control Repl visibility",disabled:!x}),"aria-label":"Control ".concat(i.title," visibility"),onAction:function(e){var n="private"===e;n!==i.isPrivate&&(g(void 0),w({variables:{input:{id:i.id,isPrivate:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,r4._)((0,p._)({},i),{isPrivate:n})}},onCompleted:function(e){"UpdateReplPayload"===e.updateRepl.__typename&&(s(!0),setTimeout(function(){return s(!1)},2e3))}}))},items:S,disallowEmptySelection:!0,isDisabled:!x,children:function(e){return(0,c.Y)(dK.Dr,{id:e.id,label:e.name,description:e.description,icon:e.icon},e.id)}})}),r?(0,c.Y)(ou.S,{children:r}):null]})},fh=t(7576),fg=t.n(fh),fm=t(66246);function fv(){var e=(0,f._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return fv=function(){return e},e}var fw={},fy=(0,h.J1)(fv(),fm._9),fb=t(41287),fx=(0,rb.x)({root:[ol.wp.color.foregroundDefault,ol.wp.p(24),ol.wp.display.grid,{gap:ry.LU.space24}],controls:[ol.wp.display.grid,{gap:ry.LU.space8,gridAutoFlow:"column"}],message:[ol.wp.pb(16)],textContainer:[ol.wp.textAlign.center]});function f_(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,c.FD)("div",{css:fx.root,children:[(0,c.Y)(au.Y9,{level:3,textAlign:"center",variant:"subheadBig",children:"Are you sure?"}),(0,c.Y)("div",{css:fx.textContainer,children:(0,c.FD)(au.EY,{variant:"text",children:[(0,c.Y)("p",{css:fx.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,c.Y)("p",{children:n})]})}),(0,c.FD)("div",{css:fx.controls,children:[(0,c.Y)(al.$n,{onClick:r,text:"Cancel"}),(0,c.Y)(al.$n,{colorway:"primary",onClick:t,text:"Invite"})]})]})}var fS=t(69522),fY=t(42600),fA=t(59092),fI=t(8440);function fk(e){var n,t,r,i,o,a,l,f,h,m,v,w,y=e.replId,b=(0,s.useRouter)(),x=(0,V.Po)(b),_=(0,uF.Q4)(),S=(0,u._)((0,d.useState)(null),2),Y=S[0],A=S[1],I=(n={variables:{replId:y}},t=(0,p._)({},fw,n),g.I(fy,t)),k=I.data,E=I.loading,C=(null==k||null==(r=k.currentUser)?void 0:r.id)||null,D=(null==k?void 0:k.getRepl.__typename)==="Repl"?k.getRepl:null,R=(0,fb.A)({isMobileApp:x,isTeam:!0,replId:y}),F=R.addOrInviteReplMultiplayer,U=R.loadingAddMutation;if(D&&!D.owner)throw Error("Cannot manage members on anon repls");if((null==D?void 0:D.owner)&&(null==D?void 0:D.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var P=(null==D||null==(i=D.owner)?void 0:i.__typename)==="Team"?D.owner:null,O=!(null==P||null==(o=P.capabilities)?void 0:o.hasValidSubscription)&&!(null==P||null==(a=P.capabilities)?void 0:a.isBusinessPlan),T=(null!=(l=null==D?void 0:D.collaborators)?l:[]).reduce(function(e,n){var t=n.user.username;return -1===e.indexOf(t)&&e.push(),e},[]),L=null==D?void 0:D.multiplayerInvites,M=(null!=(f=null==D?void 0:D.collaborators)?f:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),G=M.length,N=(null!=(h=null==D?void 0:D.collaborators)?h:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),H=(null!=(m=null==D?void 0:D.collaborators)?m:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),z=H.some(function(e){return e.id===C}),W=N.filter(function(e){return _.some(function(n){return n.id===e.id})}),B=N.filter(function(e){return!_.some(function(n){return n.id===e.id})}),j=null!=(v=null==D?void 0:D.authorizations.editPermissions.isAuthorized)&&v,$=null!=(w=null==D?void 0:D.authorizations.inviteGuests.isAuthorized)&&w;return E?(0,c.Y)(o6.ui,{css:[pB.Nx.root],background:"default",children:(0,c.FD)(ou.S,{css:pB.Nx.loading,children:[(0,c.Y)(di.A,{color:ry.LU.foregroundDimmer}),(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,c.FD)(o6.ui,{css:pB.Nx.root,background:"default",children:[(0,c.Y)(ou.S,{css:[pB.Nx.header,x&&pB.Nx.header_mobile],children:(0,c.Y)(ou.S,{css:pB.Nx.titleContainer,children:(0,c.Y)(au.EY,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),$?(0,c.Y)(ou.S,{css:pB.Nx.searchContainer,children:(0,c.Y)(fY.A,{existingUsernames:T,onSubmit:function(e){if(!U){if(fg()(e))return void A(e);F({variables:{input:{replId:y,target:{method:pj.LIG.Username,value:e},level:pj.Hy.Rw}}})}},isDisabled:E})}):null,!$&&O?(0,c.Y)(ou.S,{px:16,children:(0,c.Y)(fA.d,{iconLeft:(0,c.Y)(fI.A,{}),text:'You can add people to this App by inviting them to the "'.concat(null==P?void 0:P.displayName,'" Friends Team.'),href:"/teams/".concat(null==P?void 0:P.username),target:"_blank"})}):null,(0,c.Y)(o3.a,{isOpen:!!Y,onRequestClose:function(){return A(null)},children:Y?(0,c.Y)(f_,{email:Y,onInvite:function(){F({variables:{input:{replId:y,target:{method:pj.LIG.Email,value:Y},level:pj.Hy.Rw}}}),A(null)},onCancel:function(){return A(null)}}):null}),(0,c.FD)(o6.ui,{css:pB.Nx.userList,children:[(null==L?void 0:L.length)?(0,c.FD)(ou.S,{css:pB.Nx.userGroup.root,children:[(0,c.Y)(pB.jl,{title:"Pending Invitations",color:ry.LU.outlineStrongest,count:G}),null==L?void 0:L.map(function(e){return(0,c.Y)(fS.A,{canEditMultiplayers:z||!1,email:e.email,isPendingInvitation:!0,replId:y},e.email)})]}):null,M.length?(0,c.FD)(ou.S,{css:pB.Nx.userGroup.root,children:[(0,c.Y)(pB.jl,{title:"External Guests",color:ry.LU.outlineStrongest,count:null==M?void 0:M.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),M.map(function(e){return(0,c.Y)(fS.A,{canEditMultiplayers:z||!1,isPendingInvitation:!1,replId:y,user:e},e.id)})]}):null,W.length?(0,c.FD)(ou.S,{css:pB.Nx.userGroup.root,children:[(0,c.Y)(pB.jl,{title:"Online Members",color:ry.LU.greenStrongest,count:null==W?void 0:W.length}),W.map(function(e){return(0,c.Y)(fS.A,{isPendingInvitation:!1,canEditMultiplayers:!!z,replId:y,user:e},e.id)})]}):null,B.length?(0,c.FD)(ou.S,{css:pB.Nx.userGroup.root,children:[(0,c.Y)(pB.jl,{title:"Offline Members",color:ry.LU.outlineStrongest,count:null==B?void 0:B.length}),B.map(function(e){return(0,c.Y)(fS.A,{isPendingInvitation:!1,canEditMultiplayers:!!z,replId:y,user:e},e.id)})]}):null,H.length?(0,c.FD)(ou.S,{css:pB.Nx.userGroup.root,children:[(0,c.Y)(pB.jl,{title:"Admins",color:ry.LU.accentPrimaryStronger,count:H.length}),H.map(function(e){return(0,c.Y)(fS.A,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:y},e.id)})]}):null,j||E?null:(0,c.Y)(au.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var fE=t(81690),fC=t(68990),fD=function(){var e=(0,fC.A)(),n=e.showPrivateUpsell,t=e.refetch,r=(0,u._)((0,d.useState)(!1),2),i=r[0],o=r[1];return n?(0,c.FD)(ou.S,{px:12,children:[(0,c.Y)(ou.S,{tag:"button",css:fR.bannerWrapper,onClick:function(){return o(!0)},children:(0,c.Y)(dY.N,{icon:(0,c.Y)(uO.A,{}),colorway:"yellow",text:"This App is publicly visible. Upgrade for unlimited private Apps, better AI, more storage, speed, and more."})}),(0,c.Y)(fE.default,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,c.FD)(c.FK,{children:[(0,c.Y)(au.EY,{variant:"subheadBig",children:"Upgrade for private Apps"}),(0,c.Y)(au.EY,{multiline:!0,children:"Keep your code secure and private"})]}),headingText:"Upgrade for private Apps",subHeadingText:"Keep your code secure and private",analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}},highlightUpsell:"replLimit"})]}):null},fR=(0,rb.x)({bannerWrapper:[ol.wp.cursor.pointer,ol.wp.borderRadius(),ol.wp.textAlign.left]}),fF=(0,rb.x)({self:[ol.wp.borderRadius(8),ol.wp.align.stretch,ol.wp.flex.growAndShrink(1),ol.wp.maxHeight("calc(100vh - ".concat(re.uF+12,"px)")),ol.wp.backgroundColor.backgroundDefault]});let fU=function(e){var n,t=e.replId,r=e.handleUpgradeTriggered,i=e.isTeamRepl,o=e.org;return n=o?(0,c.Y)(fc,{replId:t}):i?(0,c.Y)(fk,{replId:t}):(0,c.Y)(pB.Ay,{replId:t,handleUpgradeTriggered:r}),(0,c.FD)(ou.S,{css:fF.self,py:12,gap:12,children:[n,o&&"personal"!==o.type?null:(0,c.Y)(fD,{}),o?null:(0,c.FD)(c.FK,{children:[(0,c.Y)(d$.a,{}),(0,c.Y)(pW.A,{replId:t})]})]})};var fP={owner:"Owner",editor:"Can edit"};function fO(){var e=(0,f._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return fO=function(){return e},e}function fT(){var e=(0,f._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return fT=function(){return e},e}var fL={},fM=(0,h.J1)(fO()),fG=(0,h.J1)(fT(),fM),fN=t(169),fH=(0,rb.x)({container:[ol.wp.pl(8),ol.wp.pr(16),ol.wp.py(4),ol.wp.flex.row,ol.wp.align.center,ol.wp.justify.start],button:[ol.wp.display.flex,ol.wp.align.center],img:[ol.wp.width(32),ol.wp.height(32),ol.wp.borderRadius("full"),ol.wp.backgroundColor.white,ol.wp.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[ol.wp.display.flex,ol.wp.flex.column,ol.wp.justify.center,ol.wp.ml(8),ol.wp.flex.growAndShrink(1),ol.wp.colWithGap(2)]});let fz=function(e){var n=e.id,t=e.username,r=e.image,i=e.isOwner,o=e.color,a=e.hideModal,l=e.canClickAvatar,u=e.isCurrentUser,s=e.onAvatarClick,d=function(){l&&(s({username:t,id:n}),a())};return(0,c.FD)("div",{css:[fH.container,i&&dR.b.listItem],style:(0,p._)({cursor:l?"pointer":"auto"},l&&dR.b.listItem),role:"button",onClick:d,onKeyDown:d,tabIndex:0,children:[(0,c.FD)("div",{css:fH.button,children:[(0,c.Y)(uU.A,{src:r,alt:"",css:fH.img,style:{borderColor:o},width:32,height:32}),l?(0,c.FD)(fN.s,{children:["Observe ",t]}):null]}),(0,c.FD)("div",{css:fH.usernameContainer,children:[(0,c.FD)(au.EY,{multiline:!1,children:["@",t,u?" (you)":null]}),(0,c.Y)(au.EY,{variant:"small",color:"dimmer",multiline:!1,children:i?fP.owner:fP.editor})]})]})};var fW=(0,rb.x)({loaded:[ol.wp.maxHeight(330),{overflowY:"auto"}]});let fB=function(e){var n,t,r=e.replId,i=e.activeUsers,o=e.hideModal,a=e.onAvatarClick,l=(n={variables:{replId:r}},t=(0,p._)({},fL,n),g.I(fG,t)),u=l.data,s=l.loading,d=l.error;if(s)return(0,c.Y)(ou.S,{p:32,row:!0,justify:"center",children:(0,c.Y)(di.A,{})});if(d)return(0,c.Y)("div",{children:d.message});if((null==u?void 0:u.getRepl.__typename)==="Repl"){var f=u.getRepl,h=u.currentUser,m=f.user,v=m&&i.find(function(e){return e.username===m.username}),w=f.multiplayers.filter(function(e){var n;return e&&(n=e.id,i.some(function(e){return e.id===n}))}).slice(2);return(0,c.Y)(ou.S,{css:fW.loaded,py:8,gap:8,children:(0,c.FD)(ou.S,{children:[m?(0,c.Y)(fz,(0,r4._)((0,p._)({},m),{color:v?v.color:"transparent",isOwner:!0,hideModal:o,isCurrentUser:m.id===(null==h?void 0:h.id),canClickAvatar:!!v&&m.id!==(null==h?void 0:h.id),onAvatarClick:a})):null,w.map(function(e){if(!e)throw Error("Expected user");var n=i.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==h?void 0:h.id);return(0,c.Y)(fz,(0,r4._)((0,p._)({isCurrentUser:e.id===(null==h?void 0:h.id)},e),{canClickAvatar:t,color:n.color,hideModal:o,isOwner:!1,onAvatarClick:a}),"chat-user-list-".concat(e.username))})]})})}return(null==u?void 0:u.getRepl.__typename)==="ReplRedirect"?(0,c.FD)("div",{children:["This App has moved to"," ",(0,c.Y)("a",{href:u.getRepl.replUrl,children:u.getRepl.replUrl})]}):(null==u?void 0:u.getRepl.__typename)==="ReplSubscriptionExpired"?(0,c.FD)("div",{children:["Your subscription has expired.",(0,c.Y)("a",{href:"/pricing",children:"Upgrade here"})]}):null};var fj=t(19170),f$=t(28861);let fq=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,i=e.onAvatarClick,o=(0,eo.A)(),a=(0,fj.Q4)();return(0,c.FD)(f$.A,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,c.Y)(fB,{replId:o,activeUsers:a,hideModal:t,onAvatarClick:i})]})};var fK=t(84118),fV=(0,rb.x)({root:[ol.wp.backgroundColor.backgroundDefault],userStack:[(0,N._)({},ol.$_.max(sv.LO.mobileMax+100),[ol.wp.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[ol.wp.borderRadius("full"),ol.wp.minWidth(24),ol.wp.height(24),ol.wp.fontSize(10),ol.wp.border({color:ry.LU.outlineDefault})]});function fZ(e){var n=(0,u._)((0,d.useState)(!1),2),t=n[0],r=n[1],i=(0,uF.Q4)();if(0===i.length)return null;var o=i.slice(0,2),a=i.length-2;return(0,c.Y)(ou.S,{css:fV.root,row:!0,align:"center",children:(0,c.FD)(ou.S,{tag:"ul",css:fV.userStack,px:8,py:4,row:!0,gap:4,align:"center","aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[o.map(function(n){return(0,c.Y)("li",{css:fV.userStackListItem,children:(0,c.Y)(fK.A,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,c.Y)("li",{css:fV.userStackListItem,children:(0,c.Y)(ou.S,{children:(0,c.Y)(fq,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,c.Y)(o6.ui,{background:"root",css:fV.overflowContainer,children:(0,c.Y)(al.$n,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:fV.overflowButton})})})})}):null]})})}function fJ(){var e=o4(),n=(0,oX.Jn)(o7.id),t=(0,t9.p)(),r=n?"".concat(o2," (").concat(n,")"):o2;return(0,c.Y)(sL.K0,{alt:r,onClick:function(){return e()},size:t?28:32,dataCy:"command-bar-btn",children:(0,c.Y)(uw.A,{})})}var fX=t(50646),fQ=t(31366),f0=t(72885),f1=t(51002),f2=t(24347),f4=t(36456),f5=t(54741),f3=t(26299),f6=t(69272),f8=t(32264),f7=t(39169),f9=t(77481),he=t(77898),hn=t(89364),ht=t(42019),hr=t(5501),hi=t(6571);function ho(e){return(0,c.Y)(oc.Ay,(0,r4._)((0,p._)({},e),{children:(0,c.Y)("path",{d:"M12.147 1.896a1.45 1.45 0 0 1 .967.502l.112.15.009.013 3.702 5.942-.003.001a1.447 1.447 0 0 1 .078 1.465 1.451 1.451 0 0 1-1.281.781H8.3v-.002a1.449 1.449 0 0 1-1.49-1.482l.02-.198a1.45 1.45 0 0 1 .21-.546L10.764 2.6h.001c.12-.202.287-.374.488-.497l.165-.087c.17-.076.354-.12.541-.126l.187.005ZM8.353 9.25h7.282l-3.623-5.815-3.66 5.815ZM9.25 15a.25.25 0 0 0-.25-.25H4a.25.25 0 0 0-.25.25v5c0 .138.112.25.25.25h5a.25.25 0 0 0 .25-.25v-5Zm1.5 5A1.75 1.75 0 0 1 9 21.75H4A1.75 1.75 0 0 1 2.25 20v-5c0-.966.784-1.75 1.75-1.75h5c.966 0 1.75.784 1.75 1.75v5ZM20.25 17.5a2.75 2.75 0 1 0-5.5 0 2.75 2.75 0 0 0 5.5 0Zm1.5 0a4.25 4.25 0 1 1-8.5 0 4.25 4.25 0 0 1 8.5 0Z"})}))}var ha=t(55224),hl=t(44114),hu=t.n(hl),hc=function(e){return e.Welcome="Welcome",e.AiFirstWorkspace="AiFirstWorkspace",e.Assistant="Assistant",e.Agent="Agent",e.SidebarDock="SidebarDock",e.Run="Run",e.Deploy="Deploy",e.NewTab="NewTab",e.Filetree="Filetree",e}({}),hs=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},hd=(0,rb.x)({tooltipContainer:[ol.wp.width("100%"),ol.wp.maxWidth(300),ol.wp.position.relative,ol.wp.colWithGap(8),ol.wp.pb(8)],image:[ol.wp.borderRadius(8)],textContent:[ol.wp.width("100%"),{wordBreak:"break-word",overflowWrap:"anywhere"}]}),hp={id:"AiFirstWorkspace",title:"Welcome to the Workspace",isModal:!0,content:function(){return(0,c.Y)(ou.S,{css:hd.tooltipContainer,"data-cy":"workspace-tour-welcome",children:(0,c.Y)(au.EY,{css:hd.textContent,children:"This is where you will turn your ideas to reality. Lets take a look around!"})})},colorway:!1},hf={id:"AiFirstWorkspace",title:"Welcome to the workspace",isModal:!0,content:function(){return(0,c.Y)(ou.S,{css:hd.tooltipContainer,"data-cy":"workspace-tour-welcome",children:(0,c.Y)(au.EY,{css:hd.textContent,children:"This is where you will turn your ideas to reality. Lets take a look around!"})})},colorway:!1},hh={id:"AiFirstWorkspace",title:"Welcome back to Replit!",isModal:!0,content:function(){return(0,c.Y)(ou.S,{css:hd.tooltipContainer,"data-cy":"workspace-tour-welcome",children:(0,c.Y)(au.EY,{css:hd.textContent,children:"Weve moved a few things around, making the workspace more focused to keep you in flow. Lets explore the changes!"})})},colorway:!1},hg={id:"AiFirstWorkspace",title:"The AI-first Workspace",isModal:!0,content:function(){return(0,c.FD)(ou.S,{css:hd.tooltipContainer,"data-cy":"workspace-tour-welcome",children:[(0,c.FD)(au.EY,{css:hd.textContent,children:["Your workspace has a powerful AI chat called"," ",(0,c.Y)("strong",{children:u3.BP})," which can be used in all your projects."]}),(0,c.Y)(uU.A,{css:hd.image,src:"/public/images/ai/assistant.png",alt:"Assistant available",layout:"fixed",width:300,height:168})]})},colorway:!1},hm={id:"Assistant",title:"".concat(u3.BP,": Chat & quick edits"),icon:function(){return(0,c.Y)(ce.A,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:hd.tooltipContainer,children:[(0,c.FD)(au.EY,{css:hd.textContent,children:[(0,c.Y)("strong",{children:u3.BP})," is a general AI chat for your project."]}),(0,c.Y)(f7.A,{src:hs("assistant-dark"),autoPlay:!0,loop:!0}),(0,c.Y)(f9.s,{css:hd.textContent,children:(0,c.FD)("p",{children:["Use ",(0,c.Y)("strong",{children:u3.BP})," when you want to",(0,c.FD)("ul",{children:[(0,c.Y)("li",{children:"Chat with AI about any topic"}),(0,c.Y)("li",{children:"Request quick, one-off edits to code"}),(0,c.Y)("li",{children:"Ask questions about your project"})]})]})}),(0,c.FD)(au.EY,{color:"dimmer",variant:"small",multiline:!1,children:[f6.a7," cents per ",f6.go]})]})},autoSkipIfNoTarget:!0,colorway:!1},hv={id:"Agent",title:"Meet Replit ".concat(u3.g$),icon:function(){return(0,c.Y)(he.A,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:hd.tooltipContainer,children:[(0,c.Y)(au.EY,{css:hd.textContent,children:"Agent is a creative partner that builds apps for you. You can customize it to fit your needs with these menus:"}),(0,c.Y)(hw,{icon:(0,c.Y)(pT.A,{}),title:"Agent Modes",description:"Switch between ".concat(f8.q7,", ").concat(f8.Pz,", and ").concat(f8.CM,".")}),(0,c.Y)(hw,{icon:(0,c.Y)(ht.A,{}),title:"Tools",description:"Modify the tools and capabilities of Agent"})]})},autoSkipIfNoTarget:!0,colorway:!1};function hw(e){var n=e.icon,t=e.title,r=e.description;return(0,c.FD)(ou.S,{row:!0,gap:6,grow:!0,shrink:!0,children:[(0,c.Y)(o6.ui,{p:2,className:hu().iconSurface,elevated:!0,align:"center",justify:"center",style:{flexShrink:0},children:n}),(0,c.FD)(ou.S,{style:{minWidth:0,flex:1},children:[(0,c.Y)(au.EY,{style:{wordBreak:"break-word"},children:t}),r?(0,c.Y)(au.EY,{variant:"small",color:"dimmer",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:r}):null]})]})}var hy={id:"SidebarDock",title:"Dock: Open files & tools",icon:function(){return(0,c.Y)(c6.A,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:hd.tooltipContainer,children:[(0,c.Y)(au.EY,{css:hd.textContent,children:"In addition to AI tools, you can access code files and other workspace features via the Dock."}),(0,c.Y)(f7.A,{src:hs("sidebar"),autoPlay:!0,loop:!0}),(0,c.FD)(au.EY,{css:hd.textContent,children:["Notice that ",(0,c.Y)("strong",{children:"Files"})," has its own button at the top left."]})]})},colorway:!1},hb={id:"NewTab",title:"Open tools & files",icon:function(){return(0,c.Y)(ho,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:hd.tooltipContainer,children:[(0,c.Y)(au.EY,{css:hd.textContent,children:"You can find tools, and search for code by opening a new tab. Not sure what to check out first? Try these:"}),(0,c.Y)(hw,{icon:(0,c.Y)(lK.A,{}),title:"Database",description:"Manage or create your app's built-in database"}),(0,c.Y)(hw,{icon:(0,c.Y)(ha.A,{}),title:"Auth",description:"Add support for signing up and logging in to your app"}),(0,c.Y)(hw,{icon:(0,c.Y)(hi.A,{}),title:"Integrations",description:"Connect external services to your app"}),(0,c.Y)(hw,{icon:(0,c.Y)(ck.A,{}),title:"Developer Tools",description:"Advanced access to networking, dependencies, and resources"}),(0,c.Y)(hw,{icon:(0,c.Y)(lB.A,{}),title:"Open a new tab to discover more"})]})},colorway:!1},hx={id:"Deploy",title:"Publish your project",icon:function(){return(0,c.Y)(hn.A,{size:16})},content:function(){return(0,c.Y)(ou.S,{css:hd.tooltipContainer,children:(0,c.FD)(au.EY,{css:hd.textContent,children:["Once your app is ready, ",(0,c.Y)("strong",{children:"publish"})," it to the internet with a URL you can share with anyone. You can also publish on the go using the"," ",(0,c.Y)("a",{href:"https://replit.com/mobile",target:"_blank",children:"Replit mobile app"}),"."]})})},colorway:!1},h_={id:"Filetree",title:"Quick access to files",icon:function(){return(0,c.Y)(hr.A,{size:16})},content:function(){return(0,c.Y)(ou.S,{css:hd.tooltipContainer,children:(0,c.FD)(au.EY,{css:hd.textContent,children:["Click the ",(0,c.Y)("strong",{children:"Files"})," button to browse and manage your project files. You can create, rename, delete, and organize files and folders here."]})})},colorway:!1},hS={id:"Run",title:"Run Button: Preview your App",icon:function(){return(0,c.Y)(cL.A,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:hd.tooltipContainer,children:[(0,c.FD)(au.EY,{css:hd.textContent,children:["Click the ",(0,c.Y)("strong",{children:"Run button"})," at any time to see the output of your app."]}),(0,c.Y)(f7.A,{src:hs("run-button"),autoPlay:!0,loop:!0})]})},advanceOnTargetClick:!0,colorway:!1},hY="workspace-desktop-tour-2024",hA="workspace-desktop-tour-2025",hI=t(51089),hk=(0,rb.x)({self:[ol.wp.position.relative,ol.wp.borderRadius(4,0,0,4)],dotWrapper:[ol.wp.position.absolute,ol.wp.top("-3px"),ol.wp.right("-3px"),ol.wp.width("10px"),ol.wp.height("10px"),ol.wp.borderRadius("full"),ol.wp.border({color:ry.LU.backgroundDefault,width:2})],dot:[ol.wp.width("100%"),ol.wp.height("100%"),ol.wp.borderRadius("full")]});function hE(e){var n=e.color;return(0,c.FD)(ou.S,{css:hk.self,children:[(0,c.Y)(hn.A,{}),(0,c.Y)(ou.S,{tag:"span",css:hk.dotWrapper,children:(0,c.Y)(ou.S,{tag:"span",css:hk.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var hC=(0,l7.AH)([ol.wp.flex.growAndShrink(1),ol.wp.borderRadius(4,0,0,4),(r={},(0,N._)(r,ol.$_.max("tabletMin"),{"div span":[ol.wp.display.none],"div svg":[ol.wp.mr(0)]}),(0,N._)(r,'&[data-icon-only="true"]',{svg:[ol.wp.mr(0)],span:[ol.wp.display.none]}),r)]),hD=(0,l7.AH)([hC,ol.wp.borderRadius()]),hR={base:{self:hC,loading:(0,l7.AH)([hC,d5.S.backgroundPulse()])},rounded:{self:hD,loading:(0,l7.AH)([hD,d5.S.backgroundPulse()])}};function hF(e){var n=e.text,t=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,l=e.loading,u=e.iconOnly,s=e.tourStepRef,d=e.colorway,p=(0,t9.p)(),f=(0,c.Y)(al.$n,{ref:s,loading:l,size:p?"small":void 0,text:n,iconLeft:t,colorway:d,css:hR[i?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:o,"data-icon-only":u});return a?(0,c.Y)(l9.m_,{tooltip:a,children:f}):f}function hU(e){var n,t,r,i,o,a=e.iconOnly,l=(0,f0.uS)(),s=(0,fX.j)(),p=(0,f5.z)(),f=(0,f3.C)().agentStackPlatformType,h=function(e,n,t){switch(e){case f1.d.Ready:case f1.d.Suspended:case f1.d.ProcessingLifecycleCommand:case f1.d.Loading:switch(n){case pj.J_c.Slack:return"Publish to Slack";case pj.J_c.Telegram:return"Publish to Telegram";case pj.J_c.TimeBased:return"Publish Automation";default:return"Publish"}case f1.d.Preparing:return"Preparing";case f1.d.PreparingDatabase:switch(t){case!0:return"Approve";case!1:return"Preparing"}break;case f1.d.Deploying:switch(n){case pj.J_c.Slack:return"Publishing to Slack";case pj.J_c.Telegram:return"Publishing to Telegram";case pj.J_c.TimeBased:return"Publishing Automation";default:return"Publishing"}default:(0,s0.A)(e)}}(l,p&&f||null,!!s),g=!1,m=!1;switch(l){case f1.d.Ready:case f1.d.Suspended:case f1.d.ProcessingLifecycleCommand:o=(0,c.Y)(hn.A,{});break;case f1.d.Loading:o=(0,c.Y)(hn.A,{}),g=!0;break;case f1.d.Preparing:o=(0,c.Y)(hn.A,{}),g=!0,m=!0;break;case f1.d.PreparingDatabase:s?(o=(0,c.Y)(hI.A,{color:ry.LU.orangeStronger}),m=!0,g=!1):(o=(0,c.Y)(di.A,{}),m=!0,g=!0);break;case f1.d.Deploying:o=(0,c.Y)(di.A,{}),m=!0;break;default:(0,s0.A)(l)}var v=oC(),w=!!(0,f4.Q)(),y=(n=(0,am.A)().dotReplit,r=(t=(0,u._)((0,d.useState)(null),2))[0],i=t[1],(0,d.useEffect)(function(){return n.watch(function(e){var n;if(e.error)return i(null);i((null==(n=e.config.deployment)?void 0:n.target)||null)})},[n]),r),b=(0,t9.p)(),x=(0,dB.Jw)(b?hA:hY,hc.Deploy);return(0,c.Y)(hF,{text:h,icon:o,onClick:function(){l===f1.d.Ready&&(0,oB.u4)(oB.AZ.DEPLOY_PROJECT_SELECTED,{source:"deploy_button",has_agent_session:w}),v({pane:{type:"deployments",flow:{skipIntro:null!==y&&w,isAgentDeployment:null!==y&&w}}})},disabled:g,loading:m,rounded:!0,iconOnly:void 0!==a&&a,tourStepRef:b?x:void 0,colorway:l===f1.d.Ready?"primary":void 0})}var hP={self:ol.wp.rowWithGap(1),open:(0,l7.AH)([ol.wp.borderRadius(0,4,4,0),ol.wp.px(4)])};function hO(){var e,n,t=(0,f0.uS)(),r=(0,fQ.Jz)(),i=(0,fQ.GQ)(),o=oC(),a=(0,fQ.Tp)({openDeploymentsPane:function(){o({pane:{type:"deployments"}})}}).redeployWithNoNewOptions,l=(0,ad.A)().showError,s=(0,fX.j)(),p=(0,f3.C)().agentStackPlatformType,f=(0,B.jt)(),h=(0,u._)((0,d.useState)(void 0),2),g=h[0],m=h[1];(0,d.useEffect)(function(){if(i&&"HostingBuildDeployStatusAction"===i.__typename)switch(i.status){case pj.nHS.Success:case pj.nHS.Failed:m(i.status)}},[i]),(0,d.useEffect)(function(){t===f1.d.Deploying&&m(void 0)},[t]);var v=function(){switch(p){case pj.J_c.Slack:return"Republish to Slack";case pj.J_c.Telegram:return"Republish to Telegram";case pj.J_c.TimeBased:return"Republish Automation";default:return"Republish"}}(),w=function(){switch(p){case pj.J_c.Slack:return"Publishing to Slack";case pj.J_c.Telegram:return"Publishing to Telegram";case pj.J_c.TimeBased:return"Publishing Automation";default:return"Publishing"}}(),y=void 0,b=!1,x=!1;switch(t){case f1.d.Ready:e="Republish",n=(0,c.Y)(hn.A,{}),g&&(g===pj.nHS.Success?(n=(0,c.Y)(hE,{color:ry.LU.accentPositiveDefault}),y="Success"):(n=(0,c.Y)(hE,{color:ry.LU.accentNegativeDefault}),y="An error occurred"));break;case f1.d.Suspended:e=v,n=(0,c.Y)(hE,{color:ry.LU.greyDefault}),y="Published app suspended";break;case f1.d.Loading:e=v,n=(0,c.Y)(hn.A,{}),b=!0,x=!0;break;case f1.d.ProcessingLifecycleCommand:e=v,n=(0,c.Y)(hE,{color:ry.LU.orangeStronger}),x=!0,y="Updating published app";break;case f1.d.Preparing:e="Preparing",n=(0,c.Y)(di.A,{}),x=!0,b=!0;break;case f1.d.PreparingDatabase:s?(e="Approve",n=(0,c.Y)(hI.A,{color:ry.LU.orangeStronger}),x=!0,b=!1):(e="Preparing",n=(0,c.Y)(di.A,{}),x=!0,b=!0);break;case f1.d.Deploying:e=w,n=(0,c.Y)(di.A,{}),x=!0;break;default:(0,s0.A)(t)}r&&(e="Error",n=(0,c.Y)(hE,{color:ry.LU.accentNegativeDefault}),y=r);var _=(0,t9.p)();return(0,c.FD)(ou.S,{css:hP.self,children:[(0,c.Y)(hF,{text:e,icon:n,tooltip:y,onClick:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:if(t===f1.d.Deploying||t===f1.d.Suspended||t===f1.d.ProcessingLifecycleCommand||t===f1.d.Preparing||t===f1.d.PreparingDatabase)return o({pane:{type:"deployments"}}),[2];if(g&&(m(void 0),g===pj.nHS.Failed)||r)return o({pane:{type:"deployments",data:{view:f2.P.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a({hasAgentSession:f})];case 2:return e.sent(),[3,4];case 3:return l(e.sent().message),[3,4];case 4:return[2]}})})()},disabled:b,loading:x}),(0,c.Y)(l9.m_,{tooltip:"Open Publishing pane",children:(0,c.Y)(al.$n,{size:_?"small":void 0,text:"",iconLeft:(0,c.Y)(cT.A,{}),onClick:function(){o({pane:{type:"deployments"}})},css:hP.open})})]})}var hT=function(){var e=oC(),n=(0,t9.p)();return(0,c.Y)(al.$n,{size:n?"small":void 0,text:"Republish",iconLeft:(0,c.Y)(hn.A,{}),onClick:function(){e({pane:{type:"deployments"}})}})};function hL(e){var n=e.iconOnly,t=(0,fQ.i$)(),r=(0,fQ.cF)(),i=(0,fQ.mj)().deployability;return t&&r?i.redeploy.isAuthorized?(0,c.Y)(hO,{}):(0,c.Y)(hT,{}):(0,c.Y)(hU,{iconOnly:n})}var hM=t(63285),hG=t.n(hM),hN=t(55917),hH=t(27600),hz=t(37827),hW=t(63914);function hB(e){var n=e?1560:1400;return(0,rb.x)({desktopButton:(0,N._)({},ol.$_.max(n),[ol.wp.display.none]),mobileButton:(0,N._)({},ol.$_.min(n),[ol.wp.display.none])})}let hj=function(e){var n=e.lesson,r=(0,ad.A)().showError,i=(0,hz.mO)().fireCircularBurstFrom,o=(0,d.useRef)(null),a=(0,hH.j)(),l=(0,u._)((0,d.useState)(!1),2),s=l[0],p=l[1],f=(0,fC.A)().showPrivateUpsell,h=(0,u._)((0,hN.F8)({onError:function(){return r("Something went wrong")},onCompleted:function(e){var t,l;(null==(t=e.completeUserCourseLesson)?void 0:t.__typename)!=="UpdatedUserCourseLesson"?r((null==(l=e.completeUserCourseLesson)?void 0:l.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===n.id?(o.current&&!a&&i({element:o.current}),p(!0)):r("Something went wrong")}}),2),g=h[0],m=h[1].loading,v="Lesson completed \uD83C\uDF89",w="Mark lesson completed",y=function(){(0,hW._)({action:"completed",lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug}),g({variables:{input:{userLessonId:n.id}}})},b=hG()(function(){return Promise.all([t.e(8441),t.e(2292)]).then(t.bind(t,32292))},{loadableGenerated:{webpack:function(){return[32292]}},ssr:!1});return(0,c.FD)(c.FK,{children:[null!==n.timeCompleted?(0,c.FD)(c.FK,{children:[(0,c.Y)(al.$n,{size:"small",ref:o,disabled:!0,text:v,colorway:"primary",css:hB(f).desktopButton}),(0,c.Y)(l9.m_,{tooltip:v,css:hB(f).mobileButton,children:(0,c.Y)(al.$n,{ref:o,disabled:!0,text:"\uD83C\uDF89",colorway:"primary"})})]}):(0,c.FD)(c.FK,{children:[(0,c.Y)(al.$n,{size:"small",onClick:y,text:m?"Verifying":w,colorway:"primary",loading:m,css:hB(f).desktopButton}),(0,c.Y)(l9.m_,{tooltip:w,css:hB(f).mobileButton,children:(0,c.Y)(al.$n,{iconLeft:(0,c.Y)(dQ.A,{}),onClick:y,text:"",colorway:"primary",loading:m})})]}),(0,c.Y)(o3.a,{isOpen:s,onRequestClose:function(){return p(!1)},children:(0,c.Y)(b,{lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug})})]})};var h$=t(67526);function hq(e){var n,t=e.lesson,r=(n="tutorial",ra((0,K.A)(function(){return(0,ea.eU)(function(e){return e(e2).find(function(t){return!t.isHidden&&e(t.dataAtom).type===n})})},[n]))),i=ru(i3),o=(0,fC.A)().showPrivateUpsell,a="Show tutorial",l=(0,c.Y)(h$.A,{}),u=function(){return i()};return r?(0,c.Y)(hj,{lesson:t}):(0,c.FD)(c.FK,{children:[(0,c.Y)(al.$n,{size:"small",colorway:"primary",iconLeft:l,text:a,css:hB(o).desktopButton,onClick:u}),(0,c.Y)(l9.m_,{tooltip:a,css:hB(o).mobileButton,children:(0,c.Y)(al.$n,{colorway:"primary",iconLeft:l,text:"",onClick:u})})]})}var hK=t(36735),hV=t(4039),hZ=t(40153),hJ=t(95182),hX=[ol.wp.position.absolute,ol.wp.center,ol.wp.textAlign.center,ol.wp.backgroundColor.accentNegativeStronger,ol.wp.color.accentNegativeDimmest,ol.wp.left(8),ol.wp.top(-10),ol.wp.p(2),ol.wp.minWidth(14),ol.wp.height(14),ol.wp.borderRadius(16),ol.wp.fontSize(10),ol.wp.zIndex(re.qL),{pointerEvents:"none",boxShadow:"0 0 0 2px ".concat(ry.LU.backgroundRoot)}],hQ=(0,rb.x)({badge:hX,badgeWithDot:[hX,[ol.wp.minWidth(8),ol.wp.width(8),ol.wp.height(8),ol.wp.backgroundColor.accentNegativeStronger,{top:-2,right:-2}]]}),h0=(0,rb.x)({popover:[ol.wp.borderRadius(8),ol.wp.maxWidth(350),ol.wp.width("calc(100% - 24px)")],header:[ol.wp.width("100%"),ol.wp.border({color:ry.LU.outlineDimmest,width:ry.LU.borderWidthDefault,direction:"bottom"})],list:[ol.wp.maxHeight("calc(100vh - 160px)"),ol.wp.overflowY("auto")],iconBadgeWrapper:[ol.wp.position.relative]});let h1=function(e){var n=e.pathname,t=e.showCount,r=(0,u._)((0,d.useState)(!1),2),i=r[0],o=r[1],a=(0,hZ.A)().count,l=(0,t9.p)();return(0,c.FD)(dF.Wv,{label:"Notifications",css:h0.popover,isOpen:i,onOpenChange:o,placement:"bottom",children:[function(e){var r=e.ref,u=(0,cQ._)(e,["ref"]);return(0,c.Y)(sL.K0,(0,r4._)((0,p._)({},u),{ref:r,size:l?28:32,alt:"Notifications","aria-label":a?a+" notifications":"No notifications",onClick:function(){o(!i),(0,oB.u4)(oB.AZ.HEADER_LAYOUT_NOTIFICATIONS_TOGGLED,{open:!i,source:n.replace(/\//g,"")})},children:(0,c.FD)(ou.S,{css:h0.iconBadgeWrapper,children:[(0,c.Y)(hJ.A,{}),a>0&&t?(0,c.Y)(ou.S,{css:hQ.badge,children:(0,c.Y)(au.EY,{variant:"small",multiline:!1,children:a>99?"99+":a})}):null,a>0&&!t?(0,c.Y)(ou.S,{css:hQ.badgeWithDot}):null]})}))},(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{"aria-level":1,css:h0.header,p:12,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,c.Y)(au.EY,{variant:"subheadBig",multiline:!1,children:"Notifications"}),(0,c.Y)(dj.v,{href:"/notifications",prefetch:!1,text:"View all",iconRight:(0,c.Y)(cv.A,{}),onClick:function(){return o(!1)},size:"small",variant:"outlined"})]}),(0,c.Y)(ou.S,{css:h0.list,children:(0,c.Y)(hV.A,{compact:!0,count:10,loadMore:!0,markAsSeen:!0})})]})]})};var h2=t(99229);function h4(e){var n=e.repl,t=e.currentUser,r=e.hideRightActions;return(0,c.FD)(ou.S,{row:!0,gap:6,align:"center",justify:"end",css:ol.wp.noDragRegion,children:[(0,c.Y)(dw,{}),r?null:(0,c.FD)(c.FK,{children:[(0,c.Y)(fJ,{}),(0,c.Y)(h3,{repl:n})]}),(0,c.Y)(h6,{currentUser:t,hideNotifications:r})]})}var h5={socialGroup:(0,l7.AH)([ol.wp.rowWithGap(1),ol.wp.align.stretch,ol.wp.borderRadius(),ol.wp.overflow("hidden")]),invitePopover:(0,l7.AH)([ol.wp.width(400)]),inviteButton:(0,l7.AH)([dR.b.filled,(i={borderTopLeftRadius:0,borderBottomLeftRadius:0},(0,N._)(i,ol.$_.max("tabletMax"),{svg:[ol.wp.mr(0)],span:[ol.wp.display.none]}),(0,N._)(i,'&[aria-expanded="true"]',{backgroundColor:ry.LU.interactiveBackgroundActive}),(0,N._)(i,'&[data-icon-only="true"]',{svg:[ol.wp.mr(0)],span:[ol.wp.display.none]}),i)])};function h3(e){var n,t,r,i,o,a=e.repl,l=e.iconOnlyButtons,s=(0,u._)((0,d.useState)(!1),2),p=s[0],f=s[1],h=(0,u._)((0,d.useState)(!1),2),g=h[0],m=h[1],v=oC(),w=pz(oR()),y=(0,lN.oR)(),b=(null==(n=a.owner)?void 0:n.__typename)==="Team",x=a.authorizations.viewPermissions.isAuthorized,_=(null==(t=a.org)?void 0:t.type)==="team"?"Access":"Invite",S=(null==a||null==(i=a.authorizations)||null==(r=i.viewDeploymentConfig)?void 0:r.isAuthorized)&&!y;(0,oX.SJ)(function(){return[cR.toggleInviteDialog.id,function(){return f(function(e){return!e})}]},[f]);var Y=(0,t9.p)();return(0,c.FD)(c.FK,{children:[(null==a?void 0:a.lesson)?(0,c.Y)(hq,{lesson:a.lesson}):null,(0,c.FD)(o6.ui,{css:h5.socialGroup,background:"root",children:[(0,c.Y)(fZ,{onAvatarClick:w}),x?(0,c.Y)(c.FK,{children:(0,c.Y)(ou.S,{css:{"&:only-child .invite-button":[ol.wp.borderRadius()]},children:(0,c.FD)(dF.Wv,{isOpen:p,placement:"bottom end",label:_,css:h5.invitePopover,onOpenChange:function(e){if(p&&!g)return void f(!1);e&&(0,oB.u4)(oB.AZ.INVITE_MODAL_OPENED,{replId:a.id,source:"replEnvironment"}),f(e)},children:[(0,c.Y)(al.$n,{iconLeft:(0,c.Y)(h2.A,{}),css:h5.inviteButton,className:"invite-button",text:_,"aria-expanded":p,"data-icon-only":l,size:Y?"small":void 0}),(0,c.Y)(fU,{handleUpgradeTriggered:function(e){return m(e)},replId:a.id,isTeamRepl:b,org:null!=(o=a.org)?o:void 0})]})})}):null]}),S&&a?(0,c.Y)(ou.S,{children:(0,c.Y)(hL,{iconOnly:l})}):null,y?(0,c.Y)(al.$n,{text:"Extension Devtools",iconLeft:(0,c.Y)(lj.A,{}),onClick:function(){v({pane:{type:"extensionDevtools"}})}}):null]})}function h6(e){var n=e.currentUser,t=e.hideNotifications,r=(0,s.useRouter)(),i=(0,q.A)();return(0,c.Y)(c.FK,{children:i?(0,c.Y)(pH.L,{}):(0,c.FD)(c.FK,{children:[t?null:(0,c.Y)(ou.S,{row:!0,children:(0,c.Y)(h1,{pathname:r.pathname,showCount:!1})}),(0,c.Y)(hK.Ay,{currentUser:n,hideTeamInHeader:!0})]})})}function h8(){var e=(0,f._)(["\n  query WorkspaceRunButton($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return h8=function(){return e},e}var h7={},h9=(0,h.J1)(h8()),ge=t(57880),gn=(o={},(0,N._)(o,cx.ll.IDLE,"Run"),(0,N._)(o,cx.ll.RUNNING,"Stop"),(0,N._)(o,cx.ll.STOPPING,"Stopping"),(0,N._)(o,cx.ll.OFFLINE,"Working"),(0,N._)(o,cx.ll.BEFORE_RUN,"Working"),o),gt=t(39030),gr=t(70111),gi=t(77901),go=[ol.wp.rowWithGap(4),ol.wp.justify.center,ol.wp.align.center,ol.wp.height(32),ol.wp.minWidth(48),ol.wp.px(8),ol.wp.borderRadius(4),ol.wp.cursor.pointer,ol.wp.position.relative,ol.wp.fontWeight.medium,ol.wp.zIndex(1)],ga=(0,rb.x)({wrapper:[ol.wp.noDragRegion,ol.wp.position.relative,ol.wp.borderRadius("default")],runButtonLabel:[ol.wp.display.none,(0,N._)({},"@media (min-width: ".concat(sv.LO.tabletMax,"px)"),[ol.wp.display.block])],runButtonIdle:(0,eE._)(go).concat([ol.wp.color.accentPositiveStrongest,ol.wp.backgroundColor.accentPositiveDimmer,{border:"1px solid",borderColor:"transparent","&:disabled":[ol.wp.color.foregroundDimmer,ol.wp.backgroundColor.backgroundHighest,ol.wp.cursor.default],"&:hover:not(:disabled)":[{color:"white"},ol.wp.backgroundColor.accentPositiveDefault],":focus-visible":{outlineColor:"".concat(ry.LU.accentPositiveStrongest)}}]),runButtonRunning:(0,eE._)(go).concat([ol.wp.color.foregroundDimmer,ol.wp.backgroundColor.backgroundHighest,{border:"1px solid",borderColor:"transparent","&:hover":[ol.wp.color.foregroundDefault,ol.wp.backgroundColor.greyDimmest],"&:active":[{borderColor:ry.LU.accentPrimaryDefault}]}]),runButtonRunByAgent:(0,eE._)(go).concat([ol.wp.color.foregroundDefault,ol.wp.backgroundColor.blurpleDimmer,ol.wp.maxWidth(68),{border:"1px solid",borderColor:"transparent","&:before":[{content:'"Running"'}],"&:hover":[ol.wp.color.foregroundDimmer,ol.wp.backgroundColor.blurpleDimmest,ol.wp.minWidth(68),{"&::before":[{content:'"Stop"'}]}],"&:active":[{borderColor:ry.LU.accentPrimaryDefault}]}]),agentBanner:[ol.wp.colorMixBg(ry.LU.blurpleDimmest,"transparent",.6),ol.wp.borderRadius("default",0,0,"default"),{'&[data-visible="false"]':{visibility:"hidden",transform:"translateX(30px)",position:"absolute",maxWidth:0,opacity:0},'&[data-visible="true"]':{transform:"translateX(4px)",opacity:1,visibility:"visible",justifyContent:"center",height:"32px",maxWidth:"32px",paddingY:"4px",padding:"4px 8px 4px 6px"},transition:"\ntransform 0.2s linear,\nopacity 0.2s linear\n"}]});function gl(e){var n=e.isOffline,t=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isRunning,o=e.runButtonName,a=e.shortcut,l=e.isAgentRunButtonNotConfigured,u=e.isStatusButton;if(n)return"Connecting to the workspace";if(t)return u?"Stop App (Agent is running it)":"Agent is running your App";if(l)return"Agent hasn't configured the run button yet";if(r)return"Run button is not configured";var s=(0,cx.y$)(o);return(0,c.FD)(ou.S,{px:4,gap:4,justify:"center",align:"center",children:[o?(0,c.Y)(au.EY,{color:"dimmer",variant:"small",children:i?gn[cx.ll.RUNNING]+" all workflows":gn[cx.ll.IDLE]+" ".concat(s)}):null,a?(0,c.Y)(oX._y,{keyCombo:a,fontSize:12}):null]})}function gu(e){var n=e.stop,t=e.cancel;return(0,c.FD)(ou.S,{children:[(0,c.Y)(au.EY,{children:"Stopping your project while the agent is working can lead to unexpected interruptions that incur additional costs. Are you sure you want to stop?"}),(0,c.FD)(ou.S,{pt:12,row:!0,gap:12,justify:"end",children:[(0,c.Y)(al.$n,{text:"Cancel",onClick:t}),(0,c.Y)(al.$n,{iconLeft:(0,c.Y)(gi.A,{}),text:"Stop",onClick:function(){n(),t()},colorway:"negative"})]})]})}function gc(e){var n=e.isRunning,t=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isAgentRunButtonNotConfigured,o=e.handleRunButtonClick,a=(0,u._)((0,d.useState)(!1),2),l=a[0],s=a[1];return t?(0,c.FD)(c.FK,{children:[(0,c.Y)(o3.a,{isOpen:l,onRequestClose:function(){return s(!1)},children:(0,c.Y)(gu,{stop:o,cancel:function(){return s(!1)}})}),(0,c.Y)(ou.S,{tag:"button",css:ga.runButtonRunByAgent,onClick:function(){return s(!0)}})]}):n?(0,c.FD)(ou.S,{tag:"button",css:ga.runButtonRunning,onClick:o,children:[(0,c.Y)(gi.A,{size:16}),(0,c.Y)(au.EY,{multiline:!1,css:ga.runButtonLabel,children:gn[cx.ll.RUNNING]})]}):(0,c.FD)(ou.S,{tag:"button",disabled:r||i,css:ga.runButtonIdle,onClick:o,children:[(0,c.Y)(gr.A,{size:16}),(0,c.Y)(au.EY,{multiline:!1,css:ga.runButtonLabel,children:gn[cx.ll.IDLE]})]})}function gs(){var e,n,t,r,i,o=(r={variables:{id:(0,eo.A)()}},i=(0,p._)({},h7,r),g.I(h9,i)).data,a=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl:null,l=(n=null==(e=(0,dB.Os)(hY,hc.Run))?void 0:e.isActive,{tourRefs:e.tourRef,isAnyTourStepActive:n}).tourRefs,c=(0,oX.Jn)(cR.run.id),s=(0,u._)((0,d.useState)(!1),2),f=s[0],h=s[1],m=(0,cC.g3)(),v=null!=(t=null==m?void 0:m.workflowId)?t:cx.Ov,w=(0,cC.lO)(),y=w.isRunning,b=w.isAgentRunningWorkflow,x=w.isOffline,_=w.isWorkflowsLoading,S=w.isDisabled,Y=(0,d.useMemo)(function(){return x||_},[x,_]),A=(0,ge.F)(),I=(0,cC.qP)();return(0,d.useEffect)(function(){b&&f&&h(!1)},[b,f]),{tourRefs:l,isAgentRunningWorkflow:b,isOffline:x,isOfflineOrLoading:Y,isWorkflowsLoading:_,runButtonName:v,runShortcut:c,isRunning:y,isDisabled:S,handleRunButtonClick:(0,d.useCallback)(function(){if(a){var e,n,t,r,i,o,l;(0,oB.u4)(oB.AZ.PROJECT_RAN,{placement:"primary_btn",replId:a.id,replTitle:a.title,rootOriginReplUrl:a.rootOriginReplUrl,templateTitle:null==(t=a.source)||null==(n=t.release)||null==(e=n.repl)?void 0:e.title,templateOwner:null==(l=a.source)||null==(o=l.release)||null==(i=o.repl)||null==(r=i.owner)?void 0:r.username})}(0,oB.u4)(oB.AZ.RUN_BUTTON_CLICKED,{source:"header",runner:"workflows"}),I()},[a,I]),dropdownEnabled:!Y&&!A,isAgentRunButtonNotConfigured:A}}function gd(e){var n=e.attachTourRefs,t=gs(),r=t.tourRefs,i=t.isAgentRunningWorkflow,o=t.isOffline,a=t.isOfflineOrLoading,l=t.runButtonName,u=t.runShortcut,s=t.isRunning,d=t.isDisabled,p=t.handleRunButtonClick,f=t.dropdownEnabled,h=t.isAgentRunButtonNotConfigured,g=dn();return(0,c.FD)(ou.S,{innerRef:void 0!==n&&n?r:void 0,css:ga.wrapper,row:!0,align:"center",children:[(0,c.Y)(ou.S,{css:ga.agentBanner,"data-visible":i&&!o?"true":"false",children:(0,c.Y)(he.A,{})}),(0,c.Y)(l9.m_,{placement:"bottom",tooltip:gl({isRunning:s,isAgentRunningWorkflow:i,isDisabled:d,isOffline:a,runButtonName:l,shortcut:u,isAgentRunButtonNotConfigured:h}),children:a?(0,c.FD)(ou.S,{tag:"button",disabled:!0,css:ga.runButtonRunning,children:[(0,c.Y)(di.A,{size:16}),(0,c.Y)(au.EY,{multiline:!1,css:ga.runButtonLabel,children:"Loading"})]}):(0,c.Y)(ou.S,{dataCy:"ws-run-btn",children:(0,c.Y)(gc,{isRunning:s,isAgentRunningWorkflow:i,isDisabled:d,isAgentRunButtonNotConfigured:h,handleRunButtonClick:p})})}),f?(0,c.Y)(gt.A,{openPane:g,isVisible:!i}):null]})}var gp=t(69490),gf=t.n(gp),gh=(0,ry.CK)("index.module.css",["--height"]);let gg=(0,d.memo)(function(e){var n,t=e.repl,r=e.currentUser,i=(0,q.A)(),o=(0,dg.d0)(),a="centeredVisualPlanner"===oT(),l=(0,B.jt)()&&(null==t||null==(n=t.config)?void 0:n.isInPlanningPhase)===!0;return(0,c.Y)(o6.ui,{tag:"header",px:12,pl:8,style:(0,N._)({backgroundColor:"transparent"},gh.height,re.uF+"px"),clsx:[gf().root,(0,N._)({},gf().desktopAppWindowsOs,i&&o)],children:t&&r?(0,c.FD)(c.FK,{children:[(0,c.Y)("div",{clsx:(0,N._)({},gf().opaqueOnHover,a),children:(0,c.Y)(pk,{repl:t,isAgentCentered:a})}),(0,c.Y)(gm,{isAgentCentered:a,isVisualPlanningLayout:l}),(0,c.Y)("div",{clsx:(0,N._)({},gf().opaqueOnHover,a),children:(0,c.Y)(h4,{repl:t,currentUser:r,hideRightActions:a||l})})]}):null})});function gm(e){var n=e.isAgentCentered,t=e.isVisualPlanningLayout,r=(0,dm.A)();return t?(0,c.Y)(pG,{}):n?(0,c.Y)(ou.S,{}):(null==r?void 0:r.status)==="error"||(null==r?void 0:r.status)==="rebuilding-after-error"?(0,c.Y)(pF,{nixState:r}):(0,c.Y)(gd,{attachTourRefs:!0})}var gv=(0,rx.v)(["opacity","pointerEvents"]),gw=gv.cssVars,gy=gv.styleTokens,gb=(0,l7.i7)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),gx=(0,l7.i7)({from:{opacity:0},to:{opacity:1}}),g_={root:(0,l7.AH)([ol.wp.width("100%"),ol.wp.top(0),ol.wp.left(0),ol.wp.px(12),ol.wp.pl(8),ol.wp.pt(4),ol.wp.position.absolute,ol.wp.dragRegion,ol.wp.noSelect,ol.wp.flex.row,ol.wp.justify.spaceBetween,{alignItems:"center",pointerEvents:gy.pointerEvents,opacity:gy.opacity},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(gb," 0.2s ease-in-out, ").concat(gx," 0.2s ease-in-out")},animation:"".concat(gx," 0.2s ease-in-out")}]),left:(0,l7.AH)([ol.wp.minWidth(100),ol.wp.align.start]),right:(0,l7.AH)([ol.wp.minWidth(100),ol.wp.align.end])};let gS=(0,d.memo)(function(e){var n,t=e.doesBonsaiSupportWorkspace2,r="centeredVisualPlanner"===oT();return t?(0,c.FD)(ou.S,{style:(n={},(0,N._)(n,gw.opacity,r?.5:1),(0,N._)(n,gw.pointerEvents,r?"none":"all"),n),tag:"header",css:g_.root,children:[(0,c.Y)(ou.S,{css:g_.left}),r?(0,c.Y)(ou.S,{}):(0,c.Y)(gd,{attachTourRefs:!0}),(0,c.Y)(ou.S,{css:g_.right,children:r?null:(0,c.Y)(fJ,{})})]}):null});var gY=t(21727),gA=t(99874),gI=t.n(gA);function gk(e){var n,t={running:e.isAgentRunningWorkflow?(0,c.Y)(cN.A,{color:ry.LU.blurpleDefault}):(0,c.Y)(gi.A,{color:ry.LU.foregroundDimmest}),stopped:(0,c.Y)(gr.A,{color:e.disabled?ry.LU.foregroundDimmest:ry.LU.accentPositiveStronger}),loading:(0,c.Y)(di.A,{color:ry.LU.foregroundDimmest})}[e.status];return(0,c.FD)(o6.ui,{elevated:e.elevated,clsx:[gI().root,(n={},(0,N._)(n,gI().running,"running"===e.status),(0,N._)(n,gI().agent,e.isAgentRunningWorkflow),n)],children:[(0,c.Y)(sL.K0,{disabled:e.disabled,dataCy:"ws-run-btn",alt:"Run or stop the app",tooltipContents:e.tooltip,onClick:e.onClick,size:28,children:t}),e.isAgentRunningWorkflow?(0,c.Y)(ou.S,{clsx:gI().agentStatusIcon,align:"center",justify:"center",children:(0,c.Y)(gi.A,{size:12,color:ry.LU.foregroundDimmest})}):null]})}function gE(){var e=gs(),n=e.isOfflineOrLoading,t=e.isRunning,r=e.handleRunButtonClick,i=e.isAgentRunningWorkflow,o=e.isDisabled,a=e.runButtonName,l=e.runShortcut,s=e.isAgentRunButtonNotConfigured,p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1],g=t?"running":"stopped";n&&(g="loading");var m=i?function(){return h(!0)}:r;return(0,c.FD)(c.FK,{children:[(0,c.Y)(gk,{disabled:o||s,status:g,isAgentRunningWorkflow:i,onClick:m,tooltip:gl({isRunning:t,isAgentRunningWorkflow:i,isDisabled:o,isOffline:n,runButtonName:a,shortcut:l,isAgentRunButtonNotConfigured:s,isStatusButton:!0})}),(0,c.Y)(o3.a,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,c.Y)(gu,{stop:r,cancel:function(){return h(!1)}})})]})}var gC=t(59603),gD=t(30007),gR=t(92059),gF=t.n(gR);function gU(e){var n=e.flipped,t=oL(),r=(0,us.A)(t.isOpen),i=(0,oX.Jn)(uJ.id),o=(0,dB.Jw)(hA,hc.Filetree),a=t.toggle;(0,oX.SJ)(function(){return[uJ.id,function(){return a()}]},[a]);var l=r?gD.A:gC.A;return(0,c.Y)(sL.K0,{ref:o,onClick:function(){return a()},alt:"Toggle files",dataCy:"toggle-files-sidebar",tooltipContents:(0,c.Y)(gP,{isOpen:r,shortcut:i}),size:28,children:(0,c.Y)(l,{clsx:(0,N._)({},gF().flipped,n)})})}function gP(e){var n=e.shortcut,t=e.isOpen;return(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(au.EY,{multiline:!1,variant:"small",children:(t?"Close":"Open")+" files"}),n?(0,c.Y)(oX._y,{fontSize:10,keyCombo:n}):null]})}var gO=t(3171),gT=t.n(gO);function gL(e){var n,t,r,i=e.users,o=void 0===i?[]:i,a=e.onAvatarClick,l=e.repl,s=(null==(n=l.owner)?void 0:n.__typename)==="Team",p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1];return(0,c.FD)(ou.S,{row:!0,align:"center",gap:4,children:[o.length?(0,c.Y)(gM,{users:o,onAvatarClick:a}):null,(0,c.FD)(dF.Wv,{isOpen:f,onOpenChange:h,label:"Home",placement:"bottom start",children:[(null==(t=l.org)?void 0:t.type)==="team"?(0,c.Y)(al.$n,{size:"small",iconLeft:(0,c.Y)(h2.A,{}),text:"Access"}):(0,c.Y)(sL.K0,{alt:"Invite collaborator",size:28,children:(0,c.Y)(h2.A,{})}),(0,c.Y)(ou.S,{clsx:gT().inviteDialog,children:(0,c.Y)(fU,{replId:l.id,isTeamRepl:s,org:null!=(r=l.org)?r:void 0,handleUpgradeTriggered:function(){}})})]})]})}function gM(e){var n=e.users,t=e.onAvatarClick,r=n.slice(0,2),i=n.length-2,o=(0,u._)((0,d.useState)(!1),2),a=o[0],l=o[1];return(0,c.FD)(ou.S,{row:!0,gap:4,children:[r.map(function(e,n){return(0,c.Y)(gG,{onClick:function(){return t(e)},user:e,stacked:n>0},e.username)}),i>0?(0,c.FD)(dF.Wv,{isOpen:a,onOpenChange:l,label:"Home",placement:"bottom start",children:[(0,c.Y)(al.$n,{size:"small",text:"+".concat(i),clsx:[gT().stacked,gT().remainingCountButton]}),(0,c.FD)(dK.W1,{children:[(0,c.Y)(dK.j,{text:"Observe..."}),n.slice(2).map(function(e){return(0,c.Y)(dK.Dr,{onAction:function(){return t(e)},icon:(0,c.Y)(fi.e,{size:24,src:e.image||null,username:e.username,ringColor:e.color}),label:e.username},e.username)})]})]}):null]})}function gG(e){var n=e.user,t=e.stacked,r=e.onClick;return(0,c.Y)(sL.K0,{alt:"Observe ".concat(n.username),onClick:r,clsx:[gT().avatar,(0,N._)({},gT().stacked,t)],children:(0,c.Y)(fi.e,{size:24,src:n.image||null,username:n.username,ringColor:n.color})})}var gN=t(9965),gH=t(71738),gz=t(34305),gW=t(33095),gB=t(88067),gj=t(10922),g$=t(93593),gq=t(32197),gK=t(54766),gV=t(31700),gZ=t(36837),gJ=t(38005),gX=t(19175),gQ=t(81342),g0=t(90451),g1=t(42388),g2=t(95636),g4=t(67466),g5=t(73367),g3=t(30453),g6=t(75429),g8=t.n(g6);function g7(e){var n,t,r,i,o,a,l,s,f,h,g,m,v,w,y=(0,u._)((0,d.useState)(null),2),b=y[0],x=y[1],_=(n=e.repl,f={ssr:!1,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"},h=gV.i9,g=(0,gq.Rw)((0,p._)({variables:{count:h},skip:!!(null==(t=n.org)?void 0:t.id)},f)),m=(0,gq.ZO)((0,p._)({variables:{count:h,orgId:null==(r=n.org)?void 0:r.id},skip:!(null==(i=n.org)?void 0:i.id)},f)),v=[],((null==(l=m.data)||null==(a=l.currentUser)||null==(o=a.org)?void 0:o.__typename)==="Org"?v=m.data.currentUser.org.recentRepls.items:(null==(s=g.data)?void 0:s.allRecentRepls)&&(v=g.data.allRecentRepls),(v=v.filter(function(e){return e.id!==n.id}).slice(0,gK.G)).length)?v:null),S=(0,hZ.A)().count,Y=(0,gB.i)().replitStatus,A=null==(w=e.repl.org)?void 0:w.slug,I=A?(0,dH.EG)({slug:A}).home:{href:"/home",as:"/~"},k=(0,V.m6)(),E=(0,V.E5)("simplifiedTabletUI");return k?E?(0,c.Y)(ou.S,{clsx:g8().emptySpacer}):null:(0,c.FD)(c.FK,{children:[(0,c.Y)(gz.h8,{children:(0,c.Y)(gJ.h,{children:(0,c.FD)(c.FK,{children:[(0,c.FD)(dK.W1,{"aria-label":"Navigation menu",clsx:g8().menu,children:[(0,c.Y)(dK.Dr,{icon:(0,c.Y)(fl.A,{}),label:"Home",href:I.href,as:I.as}),_?(0,c.FD)(c.FK,{children:[(0,c.Y)(mn,{repls:_}),(0,c.Y)(dK.wv,{})]}):null,(0,c.Y)(gX.s,{setActiveModal:function(e){return x({type:e})},currentUser:e.currentUser,notificationCount:S}),e.currentUser.isMemberOfAnyOrg?(0,c.Y)(g4.m,{currentUser:e.currentUser}):null,(0,c.Y)(dK.wv,{}),(0,c.Y)(g5.$,{}),(0,c.Y)(g0.p,{setActiveModal:function(e){return x({type:e})},replitStatus:Y,children:(0,c.Y)(mr,{setActiveModal:x})}),"error"===Y?(0,c.Y)(g2.s,{replitStatus:Y}):null,(0,c.Y)(gQ.S,{currentUser:e.currentUser}),(0,c.Y)(dK.wv,{}),(0,c.Y)(g1.Y,{})]}),e.showUpsell?(0,c.Y)(me,{}):null]})})}),(0,c.FD)(o3.a,{isOpen:null!==b,onRequestClose:function(){return x(null)},children:[(null==b?void 0:b.type)==="support"?(0,c.Y)(gZ.A,{onRequestClose:function(){return x(null)}}):null,(null==b?void 0:b.type)==="notifications"?(0,c.Y)(g9,{}):null,(null==b?void 0:b.type)==="referral"?(0,c.Y)(gH.Wx,{trackingContext:"workspace-nav-menu"}):null,(null==b?void 0:b.type)==="feedback"?(0,c.Y)(mi,{session:b.session,onClose:function(){return x(null)}}):null]})]})}function g9(){return(0,c.FD)(ou.S,{gap:12,children:[(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Notifications"}),(0,c.Y)(hV.A,{count:10,loadMore:!0,markAsSeen:!0})]})}function me(){var e=(0,pA.F)().isFreemiumStarterPlanUsersOwnRepl,n=(0,dD.i)().agentUsage;return e?(0,c.Y)(ou.S,{gap:8,px:8,pt:8,clsx:g8().usage,children:(0,c.Y)(dC,{title:"".concat(u3.g$," usage"),limit:null==n?void 0:n.limit,usage:null==n?void 0:n.usage,shouldShowImprovedPaywallUpsell:!1})}):null}function mn(e){var n=e.repls;return(0,c.FD)(gN.H9,{children:[(0,c.Y)(dK.j,{text:"Recent"}),n.map(function(e){return(0,c.Y)(mt,{repl:e},e.id)})]})}function mt(e){var n=e.repl,t=(0,gW.k)(n);return(0,c.FD)(dK.iy,(0,r4._)((0,p._)({textValue:n.title,clsx:g8().repl},(0,dX.q1)(n)),{children:[(0,c.FD)(ou.S,{align:"center",row:!0,gap:6,grow:!0,shrink:!0,pl:0,children:[(0,c.Y)(cs.Ay,{size:20,alt:n.title,iconUrl:n.iconUrl}),(0,c.Y)(au.EY,{children:n.title})]}),t&&"Paused"!==t.label?(0,c.Y)(au.EY,{variant:"small",color:"dimmer",children:t.label}):null]}),n.id)}function mr(e){var n=(0,pA.F)().isFreemiumStarterPlanUsersOwnRepl,t=(0,B.jt)(),r=(0,B.NC)(),i=(0,ed.Rj)(function(){return t?r.sessions.agent.current:r.sessions.chat.open.latest},[r,t]);return!i||n?null:(0,c.Y)(dK.Dr,{icon:(0,c.Y)(g3.A,{}),label:"Submit feedback",onAction:function(){return e.setActiveModal({type:"feedback",session:i})}})}function mi(e){var n=e.session,t=e.onClose,r=(0,ad.A)(),i=r.showConfirm,o=r.showError,a=function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return[4,n.submitUserFeedback({type:u7.O3q.AGENT_FEEDBACK_UNKNOWN,comment:e})];case 1:if(!r.sent().ok)return o("Failed to send feedback. Please try again."),[2];return i("Feedback received."),t(),[2]}})})()};return(0,T._P)({controlName:"flag-top-ai-spenders",type:"boolean"})?(0,c.Y)(g$.L,{onSubmit:a}):(0,c.Y)(gj.O,{onSubmit:a})}function mo(e){var n,t=(n=rl(ih),(0,d.useMemo)(function(){return new es.V_(function(e){return e.next(n.current),n.subscribe(function(n){return e.next(n)})})},[n])),r=(0,ed._)(id,ro()),i=(0,ed._)(rT,ro());return(0,d.useMemo)(function(){var n,o,a;return n={headerWidth:es.cP.from(r).select(function(n){return n[e]}),tabHeaderWidth:t.select(function(n){return n[e]}),sidebarWidth:es.cP.from(i).select(function(n){return n[e]})},o=null,a=null,new es.V_(function(e){return es.cP.combine(n.headerWidth,n.tabHeaderWidth,n.sidebarWidth).subscribe(function(n){var t=(0,u._)(n,3),r=t[0],i=t[1],l=t[2];if(null!==r){var c=null===a?null:a-r+10;if(null!==a&&l>a){"large"!==o&&(o="large",e.next("large"));return}if(i<=200&&"small"!==o){o="small",a=r,e.next("small");return}i>200&&"large"!==o&&(null===c||i>200+c)&&(o="large",e.next("large"))}})})},[t,r,i,e])}var ma=t(40607),ml=t.n(ma),mu=(0,ry.CK)("index.module.css",["--z-index"]);function mc(e){var n=ru(ip),t=(0,q.A)();return(0,gY.A)(function(r){t||n(e,r.width)})}function ms(){return(0,N._)({},mu.zIndex,rw.W.tiledPane.toString())}function md(e){var n=e.repl,t=e.currentUser,r=oT(),i=(0,q.A)();return(0,c.FD)(c.FK,{children:[i?(0,c.Y)(ou.S,{clsx:ml().desktopDragRegion}):null,(0,c.Y)(mp,{repl:n,currentUser:t}),(0,c.Y)(mh,{repl:n}),"centeredVisualPlanner"===r?(0,c.Y)(mg,{repl:n,currentUser:t}):null]})}function mp(e){var n=e.repl,t=e.currentUser,r=oM(),i=(0,us.A)(r.agentFiletreeOrder),o=ms(),a=rc(n6),l=mc("left"),u=(0,ed.J2)(mo("left"));return(0,c.Y)(ou.S,{row:!0,align:"center",innerRef:l,style:o,clsx:ml().left,children:(0,c.FD)(ou.S,{px:6,row:!0,align:"center",children:[(0,c.Y)(dy.A,{}),"agent-filetree"!==i?(0,c.Y)(gU,{}):(0,c.Y)(sH,{}),(0,c.Y)(g7,{currentUser:t,repl:n,showUpsell:"small"===u}),(0,c.Y)(pY,{repl:n,getDesktopLayoutState:a,hideTitle:"small"===u}),(0,c.Y)(gE,{}),"small"===u?null:(0,c.Y)(mf,{})]})})}function mf(){var e=(0,pA.F)().isFreemiumStarterPlanUsersOwnRepl,n=(0,T._P)({controlName:"flag-improved-paywall-upsell"});return e?(0,c.FD)(ou.S,{row:!0,gap:4,children:[(0,c.Y)(dP,{shouldShowImprovedPaywallUpsell:n}),n?(0,c.Y)(dx.A,{text:"Upgrade",context:"agent_freemium_quota_v2",colorway:"primary",variant:"default",highlightUpsell:"agent",size:"small"}):null]}):null}function mh(e){var n,t,r=e.repl,i=mc("right"),o=ms(),a=oM(),l=(0,us.A)(a.agentFiletreeOrder),u=(0,ed.J2)(mo("right")),s=r.authorizations.viewPermissions.isAuthorized,d=(null==(t=r.authorizations)||null==(n=t.viewDeploymentConfig)?void 0:n.isAuthorized)&&!r.lesson,p=(0,uF.Q4)(),f=pz(oR()),h=(0,q.A)(),g=(0,dg.d0)();return(0,c.Y)(ou.S,{row:!0,align:"center",style:o,clsx:ml().right,innerRef:i,children:(0,c.FD)(ou.S,{px:6,row:!0,gap:4,align:"center",clsx:(0,N._)({},ml().desktopAppWindowsOs,g&&h),children:[(0,c.Y)(fJ,{}),s?(0,c.Y)(gL,{repl:r,users:p,onAvatarClick:f}):null,d?(0,c.Y)(hL,{iconOnly:"small"===u}):null,(null==r?void 0:r.lesson)?(0,c.Y)(hq,{lesson:r.lesson}):null,"agent-filetree"===l?(0,c.Y)(gU,{flipped:!0}):(0,c.Y)(sH,{})]})})}function mg(e){var n=e.currentUser,t=e.repl,r=ms();return(0,c.FD)(o6.ui,{row:!0,clsx:ml().planningHeader,justify:"space-between",align:"center",px:6,style:r,children:[(0,c.FD)(ou.S,{px:6,row:!0,align:"center",clsx:ml().planningHeaderLeft,children:[(0,c.Y)(dy.A,{}),(0,c.Y)(g7,{showUpsell:!1,currentUser:n,repl:t}),(0,c.Y)(au.EY,{children:t.title})]}),(0,c.Y)(ou.S,{align:"center",justify:"center",clsx:ml().planningTimeline,children:(0,c.Y)(pG,{})}),(0,c.Y)(ou.S,{})]})}function mm(){var e=(0,f._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return mm=function(){return e},e}var mv=(0,h.J1)(mm());function mw(){return"Notification"in window?"true"===nQ.A.get(my,"string")?"dismissed":window.Notification.permission:"denied"}var my="notifications/dismissedModal";function mb(e){nQ.A.set(my,String(e))}var mx={};function m_(e){return(0,nZ._)(function(e){var n,t,r,i,o,a,l,u,c,s,d;return(0,nJ.YH)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,c=void 0===(u=e.cacheDuration)?0:u,!document.hidden&&document.hasFocus()||"granted"!==mw()||(s=Date.now(),a in mx&&mx[a]+c>s))return[2];if(!o)return[3,2];return[4,(0,nZ._)(function(){var e,n;return(0,nJ.YH)(this,function(t){switch(t.label){case 0:if(null===nX.V)return[2];return[4,nX.V.query({query:mv,variables:{username:o}})];case 1:return[2,null==(n=t.sent().data)||null==(e=n.user)?void 0:e.image]}})})()];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),mx[a]=s,[2]}})}).apply(this,arguments)}var mS=t(10947),mY=t(1989);function mA(e,n){var t=(0,oe.A)(n);return(0,d.useMemo)(function(){var n,r;return n="current"in e?new es.V_(function(n){return n.next(e.current),e.subscribe(function(e){return n.next(e)})}):e,r=function(){return t.current()},new es.V_(function(e){var t=null,i=null,o=null,a=null,l=n.subscribe(function(n){null==t||t.stop(),i&&(clearTimeout(i),i=null);var l=r();if(!l&&a&&(l=a),!1===l){o=n,e.next(n);return}a=l;var u=!0===l?{}:l,c=u.snappiness,s=void 0===c?400:c,d=u.ramp,f=u.delay,h=void 0===f?0:f,g=0,m={};for(var v in n)m[v]=o&&v in o?o[v]:n[v];t=new uI.F3(function(t,r){for(var i in g+=t,n){if("number"!=typeof m[i]||"number"!=typeof n[i]){m[i]=n[i];continue}var l=m[i],u=n[i],c=l>=0&&l<=1&&u>=0&&u<=1?.001:void 0;m[i]=(0,mY.L)({current:l,target:u,elapsed:g,delta:t,snappiness:s,ramp:d,minStepSize:c})}e.next((0,p._)({},m)),nl()(m,n)&&(a=null,o=n,r())}),h>0?i=setTimeout(function(){i=null,null==t||t.start()},h):t.start()});return function(){null==t||t.stop(),i&&clearTimeout(i),l()}})},[e,t])}var mI=t(43722),mk=t(23680),mE=t.n(mk),mC=(0,ry.CK)("Border.module.css",["--header-height","--border-color","--box-shadow","--y-offset"]);let mD=(0,d.memo)(function(e){var n,t=e.paneId,r=(0,cQ._)(e,["paneId"]),i=oP(t),o=(0,us.A)(i.paneType),a=(0,us.A)(i.border),l=(0,us.A)(i.isMaximized),s=(0,mI.A)(),p=ry.LU.outlineDefault,f="none",h=0,g=0;switch(a){case"dragging":case"floating":p=ry.LU.outlineDefault,f=ry.LU.shadow2,h=r.headerHeight,g=6}var m=ra((0,K.A)(function(){return(0,ea.eU)(function(e){return e(nn)===t})},[t]));s&&m&&(p=s.color,f="0 0 0 3px ".concat(s.color));var v=(0,u._)((0,d.useState)(!1),2),w=v[0],y=v[1];return((0,ed.q3)((0,sP.S)(),{next:"webview"===o?y:void 0}),l)?null:(0,c.Y)(ou.S,{style:(n={},(0,N._)(n,mC.headerHeight,"".concat(h,"px")),(0,N._)(n,mC.borderColor,p),(0,N._)(n,mC.boxShadow,f),(0,N._)(n,mC.yOffset,g+"px"),n),clsx:[mE().root,(0,N._)({},mE().pulse,w)]})});var mR=ou.D.div,mF=(0,l7.AH)([ol.wp.width("100%"),ol.wp.position.absolute,ol.wp.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),mU=(0,l7.AH)([ol.wp.height("100%"),ol.wp.position.absolute,ol.wp.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),mP=(0,l7.AH)([ol.wp.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function mO(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var mT={topLeft:(0,l7.AH)([ol.wp.top(0),ol.wp.left(0),mO("topLeft")]),topRight:(0,l7.AH)([ol.wp.top(0),ol.wp.right(0),mO("topRight")]),bottomLeft:(0,l7.AH)([ol.wp.bottom(0),ol.wp.left(0),mO("bottomLeft")]),bottomRight:(0,l7.AH)([ol.wp.bottom(0),ol.wp.right(0),mO("bottomRight")])};function mL(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,c.Y)(mR,{onPointerDown:r,style:(0,N._)({height:t},n,-t),css:mF});if("right"===n||"left"===n)return(0,c.Y)(mR,{onPointerDown:r,style:(0,N._)({width:t},n,-t),css:mU});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,c.Y)(mR,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[mP,mT[n]]})}var mM=["bottom","right","left","bottomRight","bottomLeft"],mG=(0,d.memo)(function(e){var n=ru(iJ);return(0,c.Y)(c.FK,{children:mM.map(function(t){return(0,c.Y)(mL,{size:8,edge:t,onPointerDown:function(r){(0,ud.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mN=["top","right","left","topRight","topLeft"],mH=(0,d.memo)(function(e){var n=ru(iJ);return(0,c.Y)(c.FK,{children:mN.map(function(t){return(0,c.Y)(mL,{size:8,edge:t,onPointerDown:function(r){(0,ud.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mz=t(93754),mW=t(31804),mB=t(29100),mj=t(55226),m$=t.n(mj),mq=(0,ry.CK)("index.module.css",["--transform-x","--transform-y","--scale","--transform-origin-x","--width","--height","--opacity","--interaction-blanket-display","--pointer-events","--user-select","--border-top-left-radius","--border-top-right-radius","--border-gap","--iframe-pointer-events"]),mK=(0,d.memo)(function(e){var n,t,r,i,o,a,l,u,s=e.paneId,p=(0,ne.Vv)().Content,f=oP(s),h=(0,us.A)(f.isHidden),g=(0,us.A)(f.data),m=(0,us.A)(f.isActive),v=(0,us.A)(f.isCommitted);(0,t_.a$)(s,g);var w=(n=ap(),t=ru(rV),r=ru(tz),i=ru(nr),o=ru(tg),a=(0,t9.p)(),(0,K.A)(function(){return function(e){switch(e.operation){case"commit":i(s);return;case"open":if(e.floating)return void t(e.pane,{commit:!0,location:"center"});n({pane:e.pane,activate:!0,placement:e.secondary&&!a?{type:"secondary",relativeTo:s}:{type:"after",paneId:s}});return;case"replace":r({paneId:s,pane:e.pane});return;case"remove":o(e.pane.id);return;case"openPip":return;default:(0,s0.A)(e)}}},[i,s,r,o,n,t,a])),y=(l=(0,am.A)().container,u=(0,mz.A)({container:l,service:"panetracker"}).channel,(0,d.useCallback)(function(e,n){u&&u.send({paneMetricsTracker:{pane:e,flow:n}})},[u]));return(0,c.Y)(p,{pane:g,options:{paneId:s,isHidden:h,performPaneOperation:w,isActive:m,isCommitted:v,emitPaneMetrics:y}})});let mV=(0,d.memo)(function(e){var n=e.paneId,t=oE(),r=function(e){var n,t=e.paneId,r=(0,u._)((0,mS.H)({accept:[tH.pt.File,mW.N.Pane,mW.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var r=n.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:t})},drop:function(e,n){var r=n.getClientOffset();if(r){if(e.type===mW.N.Pane)return void a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:t});if("nodes"===e.type){var i=(0,ne.u9)(e.nodes);i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:t})}if(e.type===mW.N.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:t})}}}}),2),i=r[0].isOver,o=r[1],a=(n=ru(r_),(0,d.useEffect)(function(){i||n(null)},[i,n]),{drag:ru(iE),drop:ru(iC)});return o}({paneId:n}),i=oP(n),o=(0,us.A)(i.isActive),a=(0,us.A)(i.isFloating),l=(0,us.A)(i.isModal),s=(0,us.A)(i.paneType),p=(0,q.A)(),f=(0,dg.vm)(),h=(0,dg.d0)(),g=(f||h)&&p?re.uF:0,m=(0,d.useRef)(null);(0,rv.d)(m,mA(i.properties,i.getTransitionEnabled),function(e){var n,t=e.width,r=e.height,i=e.x,o=e.y,a=e.scale,l=e.opacity;return n={},(0,N._)(n,mq.width,t+"px"),(0,N._)(n,mq.height,r+"px"),(0,N._)(n,mq.transformX,i+"px"),(0,N._)(n,mq.transformY,o+"px"),(0,N._)(n,mq.scale,a.toString()),(0,N._)(n,mq.opacity,l.toString()),n}),(0,rv.d)(m,i.transformOriginXAtom,function(e){return(0,N._)({},mq.transformOriginX,e)}),(0,rv.d)(m,i.viewportInset,function(e){return{"--fixed-position-offset-x":-e.x+"px","--fixed-position-offset-y":-e.y-g+"px"}}),(0,rv.d)(m,i.isHidden,function(e){return(0,N._)({},mq.pointerEvents,e?"none":"auto")}),(0,rv.d)(m,i.zIndex,function(e){return{"z-index":e.toString()}}),(0,rv.d)(m,i.disableInteractions,function(e){var n;return n={},(0,N._)(n,mq.interactionBlanketDisplay,e?"block":"none"),(0,N._)(n,mq.userSelect,e?"none":"auto"),(0,N._)(n,mq.iframePointerEvents,e?"none":"auto"),n});var v=o?void 0:function(){t(n,{commit:"codeEditor"!==s})},w=(0,oq.kg)(),y=oT(),b="agentChat"===s,x=(0,N._)({},mq.borderGap,"".concat(4,"px")),_=(0,t9.p)();a||(x.borderTopLeftRadius=4,x.borderTopRightRadius=4);var S=(0,a_.S)([m,a?void 0:r],{breadcrumb:"client/replEnvironmentDesktop/Pane/index.tsx:324"}),Y=ru(oA),A=(0,us.A)(i.headerHeight);return(0,c.Y)(c.FK,{children:(0,c.Y)(oq.ph,{value:n,children:(0,c.Y)(o6.ui,{role:"tabpanel",id:n,"aria-labelledby":"tab-".concat(n),innerRef:S,clsx:m$().root,style:x,elevated:!(b&&"centeredVisualPlanner"===y)&&!_,onMouseEnter:function(){return Y(n)},onMouseLeave:function(){return Y(null)},children:(0,c.FD)(mB.A,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,K.A)(function(){return{paneType:s}},[s]),children:[(0,c.FD)(ou.S,{clsx:m$().container,onMouseDown:v,onContextMenu:v,innerRef:function(e){return w(n,e)},style:"agentChat"===s?{overflowX:"hidden"}:void 0,children:[(0,c.Y)(ou.S,{tabIndex:-1}),(0,c.Y)(mK,{paneId:n})]}),(0,c.Y)(mD,{headerHeight:A,paneId:n}),a&&!l?(0,c.Y)(mG,{paneId:n}):null,(0,c.Y)(ou.S,{clsx:m$().interactionBlanket})]},n)})})})});(0,rb.x)({handle:[ol.wp.minWidth(16),ol.wp.height("100%")]});var mZ=t(50470),mJ=t(61800),mX=t.n(mJ),mQ=(0,ry.CK)("Tab.module.css",["--width","--x","--color","--bg","--font-style"]);function m0(e){var n;return n={},(0,N._)(n,mQ.width,e.width+"px"),(0,N._)(n,mQ.x,e.x+"px"),(0,N._)(n,mQ.bg,e.active?ry.LU.surfaceBackground:""),(0,N._)(n,mQ.color,e.active?ry.LU.foregroundDefault:""),n}function m1(e){var n=e.layout,t=e.paneId,r=e.paneGroupId,i=oI(t),o=(0,d.useMemo)(function(){return n.tab(t)},[n,t]),a=(0,d.useRef)(null),l=oP(e.paneId),s=(0,ed.J2)(l.isCommitted),f=(0,t_.WM)((0,ne.xS)(i)?i.data.path:null),h=(U=(F={paneId:t,paneGroupId:r}).paneId,P=F.paneGroupId,O=(0,oq.gB)(),T=ok(),L=ss({paneId:U}),M=c5({paneId:U,paneGroupId:P}),G=c3(),H=(0,ne.Vv)(),(0,d.useCallback)(function(){var e=T(U).pane,n=O(U),t=function(e){return!!e&&(void 0===e?"undefined":(0,eC._)(e))==="object"&&"data"in e};return{data:{type:"context",label:"Search actions",icon:(0,c.Y)(H.Icon,{pane:e})},commands:function(){return[{data:{type:"group",key:"pane-actions"},commands:function(){var e,r;return(null!=(r=null==n||null==(e=n.commands)?void 0:e.flatMap(function(e){return e.commands}))?r:[]).filter(t)}},{data:{type:"group",key:"secondary"},commands:function(){return[G(U),L].concat((0,eE._)(M)).filter(t)}}]}}},[O,H,T,U,L,M,G])),g=(0,uH.EF)().onContextMenu;(0,rv.d)(a,mA(o,function(){return!0}),m0);var m=ru(tg),v=ru(tj),w=(0,ne.Vv)(),y=w.getTitle(i),b=w.Icon({pane:i,size:16}),x=function(){var e=(0,d.useRef)(null),n=(0,d.useRef)(!1),t=(0,ed.HJ)(!1);function r(){var r=e.current;if(r){var i=r.scrollWidth>r.clientWidth;t.set(i),n.current=!1}}var i=(0,gY.A)(function(){n.current||(n.current=!0,requestAnimationFrame(r))});return{state:t,ref:(0,a_.S)([e,i])}}(),_=(0,ed.J2)(x.state),S=void 0;(0,ne.xS)(i)&&i.data.path?S=i.data.path:_&&(S=y);var Y=!s&&"commands"!==i.type,A=ru(nr),I=(0,ed.G9)(l.isActive),k=function(){I.current&&!s?A(t):v(t)},E=(z=e.paneId,W=e.layout,j=(B=(0,u._)((0,mZ.i)({type:mW.N.Pane,item:function(){return{type:mW.N.Pane,paneId:z,width:80}},end:function(){W.dragState.set(null)},collect:function(e){var n=e.getItem();return{isActive:(null==n?void 0:n.paneId)===z,isDragging:e.isDragging()}}}),2))[0],$=B[1],q=ru(tJ),K=j.isDragging,V=j.isActive,(0,d.useEffect)(function(){q(K)},[q,K]),(0,d.useEffect)(function(){W.dragState.set(V?{id:z}:null)},[W,V,z]),{dragRef:$}).dragRef,C=(0,a_.S)([a,e.isOnlyTab?void 0:E]),D=(0,ed.G9)(n.state),R=(0,d.useRef)(null);if(null===R.current){var F,U,P,O,T,L,M,G,H,z,W,B,j,$,q,K,V,Z,J=null==(Z=D.current)?void 0:Z.tabs.get(t);J&&(R.current=m0((0,r4._)((0,p._)({},J),{active:!0})))}return(0,c.FD)(o6.ui,{style:(0,p._)((0,N._)({},mQ.fontStyle,Y?"italic":"inherit"),R.current),onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),m(t))},elevated:!0,innerRef:C,align:"center",justify:"center",row:!0,clsx:mX().tab,onContextMenu:function(e){return g(e,{command:h()})},children:[(0,c.Y)(l9.m_,{tooltip:S,delay:"long",placement:"bottom",isDisabled:!S,children:function(e,n){return(0,c.FD)(ou.S,(0,r4._)((0,p._)({},e),{innerRef:n,pl:6,tag:"button",clsx:mX().tabButton,row:!0,grow:!0,shrink:!0,align:"center",gap:6,onClick:k,children:[b,(0,c.Y)(au.EY,{ref:f?void 0:x.ref,multiline:!1,clsx:mX().title,children:y}),f?(0,c.Y)(au.EY,{variant:"small",clsx:mX().title,color:"dimmest",multiline:!1,children:f}):null]}))}}),(0,c.Y)(sL.K0,{alt:"Close tab",clsx:mX().closeButton,size:28,onClick:function(){return m(t)},children:(0,c.Y)(c0.A,{size:12})})]})}var m2=t(37743),m4={newTabButtonWidth:28,defaultTabWidth:160,gap:4},m5=function(){function e(n){var t=this;(0,m2._)(this,e),this.containerWidth=new es.N(0),this.isHovered=new es.N(!1),this.dragState=new es.N(null),this.dropState=new es.N(null),this.state=new es.V_(function(e){var n=null;return es.cP.combine(t.paneIds,t.containerWidth,t.isHovered,t.dragState,t.dropState).subscribe(function(t){var r=(0,u._)(t,5),i=r[0],o=r[1],a=r[2],l=r[3],c=r[4];if(c){var s,d,f=c.item.type===mW.N.Pane?c.item:null,h=f?null==n||null==(d=n.tabs)?void 0:d.get(f.paneId):null;s={xOffset:c.pointer.x,width:h?h.width:m4.defaultTabWidth,id:f?f.paneId:void 0}}var g=function(e){var n,t,r=e.ids,i=e.gap,o=e.containerWidth,a=e.defaultTabWidth,l=e.newTabButtonWidth,u=e.matchWidths,c=e.dropArea,s=e.dragState,d=new Map;if(0===r.length||0===o)return{tabs:d};s?_="own-tab":(null==c?void 0:c.id)&&(_="external");var p=o-l-i,f=r.length;"external"===_&&(f+=1);var h=f-1,g=f*a+h*i<=p?a:(p-h*i)/f,m=u&&r.length<u.size,v=0,w=!0,y=!1,b=void 0;try{for(var x,_,S,Y=r[Symbol.iterator]();!(w=(S=Y.next()).done);w=!0){var A,I,k=S.value,E=m&&null!=(I=null==u||null==(A=u.get(k))?void 0:A.width)?I:g,C=v+E+i/2;c&&c.xOffset>=v&&c.xOffset<C&&(x={preview:{x:v,width:E},index:d.size},v+=E+i);var D=(null==s?void 0:s.id)===k;d.set(k,{x:v,width:D?0:E}),D||(v+=E+i)}}catch(e){y=!0,b=e}finally{try{w||null==Y.return||Y.return()}finally{if(y)throw b}}return c&&!x&&(x={preview:{x:v,width:m&&null!=(t=null==u||null==(n=u.get(r[r.length-1]))?void 0:n.width)?t:g},index:d.size}),{tabs:d,dropData:x}}((0,r4._)((0,p._)({containerWidth:o,ids:i,matchWidths:a&&n?n.tabs:void 0},m4),{dropArea:s,dragState:l||void 0}));nl()(n,g)||(n=g,e.next(g))})}),this.dropIndex=new es.V_(function(e){var n=null;return t.state.subscribe(function(t){var r,i,o=null!=(i=null==(r=t.dropData)?void 0:r.index)?i:null;o!==n&&(n=o,e.next(o))})}),this.setContainerWidth=function(e){t.containerWidth.set(e)},this.tabs=new es.V_(function(e){return t.state.select(function(e){return e?Array.from(e.tabs.keys()):[]}).subscribe(e)}),this.newTab=new es.V_(function(e){var n=null;return t.state.subscribe(function(t){var r,i=Array.from(t.tabs.keys()).pop(),o=i?t.tabs.get(i):null;if(o){var a={x:o.x+o.width+4,width:28,visible:!t.dropData};t.dropData&&(null==(r=t.dropData)?void 0:r.index)>=t.tabs.size&&(a.x+=t.dropData.preview.width+4),nl()(n,a)||(n=a,e.next(a))}})}),this.dropPreview=new es.V_(function(e){var n=null;return t.state.subscribe(function(t){var r,i,o=null!=(i=null==(r=t.dropData)?void 0:r.preview)?i:null;nl()(n,o)||(n=o,e.next(o))})}),this.width=new es.V_(function(e){return t.containerWidth.subscribe(e)}),this.paneIds=n.paneIds,this.activeId=n.activeId}return e.prototype.tab=function(e){var n=this;return new es.V_(function(t){var r=null;return es.cP.combine(n.state,n.activeId,n.dropState).subscribe(function(n){var i,o,a=(0,u._)(n,3),l=a[0],c=a[1],s=a[2],d=l.tabs.get(e);if(d){var f=(0,r4._)((0,p._)({},d),{active:c===e,isBeingDragged:(null==s||null==(i=s.item)?void 0:i.type)===mW.N.Pane&&(null==s||null==(o=s.item)?void 0:o.paneId)===e});nl()(r,f)||(r=f,t.next(f))}})})},e}(),m3=t(93695),m6=t.n(m3),m8=(0,ry.CK)("index.module.css",["--new-tab-width","--new-tab-x","--drop-preview-width","--drop-preview-x","--drop-preview-opacity"]),m7=(0,d.memo)(function(e){var n,t,r,i,o,a,l,s,p,f,h,g,m,v,w,y,b,x,_,S,Y,A=oU(e.headerId),I=(0,d.useMemo)(function(){return new m5({paneIds:es.cP.from(A.panes),activeId:es.cP.from(A.activeTabPaneId)})},[A.panes,A.activeTabPaneId]),k=(0,ed.J2)(I.tabs),E=(0,gY.A)(function(e){return I.setContainerWidth(e.width)},{type:"debounce",wait:100}),C=ru(tG),D=(null==k?void 0:k.length)===1,R=(0,us.A)(A.activeTabPaneId),F=(t=(n={paneGroupId:e.headerId,activeTabPaneId:R}).paneGroupId,r=n.activeTabPaneId,o=(i=function(e){var n=e.paneGroupId,t=ru(it),r=ru(ir),i=ru(ia),o=(0,K.A)(function(){return{start:function(e){t({paneGroupId:n,mouse:e.mouse})},update:function(e){r(e)},end:function(e){i(e)}}},[n,t,r,i]);return{isDragging:ra((0,K.A)(function(){return(0,ea.eU)(function(e){var t;return n===(null==(t=e(r7))?void 0:t.paneGroupId)})},[n])),dnd:o}}({paneGroupId:t})).isDragging,a=i.dnd,l=oF().toggleMaximizedPaneGroup,s=oO(t),p=(0,us.A)(s.isMaximized),f=oE(),{dnd:a,cursor:o?"grabbing":"grab",onPointerDown:function(e){f(r),!p&&"button"in e&&0===e.button&&(0,ud.j)(e,{start:a.start,move:a.update,end:a.end})},toggleMaximizedPaneGroup:l,isMaximized:p}),U=F.cursor,P=F.onPointerDown,O=F.toggleMaximizedPaneGroup,T=F.isMaximized,L=(0,d.useRef)(null),M=(h=e.headerId,g=(0,d.useRef)(null),m=(0,ed.G9)(I.dropIndex),v=ru(tG),w=ru(tV),y=oU(h),b=(0,us.A)(y.panes),x=(0,d.useCallback)(function(e,n){var t=(null==n?void 0:n.index)!==null?null==n?void 0:n.index:b.length;if("nodes"===e.type){var r=(0,ne.u9)(e.nodes);r.length>0&&v({activate:!0,commit:!0,paneGroupId:h,index:t,panes:r});return}if(e.type===mW.N.NewPane)return void v({activate:!0,paneGroupId:h,index:t,panes:[e.pane]});if("paneId"in e){var i=b.includes(e.paneId)?b.length-1:b.length;w({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupId:h})}},[v,w,h,b]),S=(_=(0,u._)((0,mS.H)({accept:[tH.pt.File,mW.N.Pane,mW.N.NewPane],hover:function(e,n){var t=n.getClientOffset(),r=t&&g.current?{x:t.x-g.current.x,y:t.y-g.current.y}:{x:0,y:0};I.dropState.set({item:e,pointer:r})},collect:function(e){var n,t;return g.current=null!=(t=null==(n=L.current)?void 0:n.getBoundingClientRect())?t:null,{isOver:e.isOver()}},drop:function(e,n){var t,r=null!=(t=m.current)?t:null;I.dropState.set(null),n.didDrop()||x(e,null!==r?{index:r}:null)}}),2))[0].isOver,Y=_[1],(0,d.useEffect)(function(){S||I.dropState.set(null)},[S,I]),{dropRef:Y}).dropRef,G=(0,a_.S)([E,L,M]),H=(0,q.A)(),z=(0,dg.d0)();return(0,c.FD)(ou.S,{row:!0,grow:!0,shrink:!0,align:"start",clsx:m6().tabBar,children:[T?(0,c.Y)(dy.A,{}):null,(0,c.FD)(ou.S,{grow:!0,shrink:!0,row:!0,clsx:m6().tabs,innerRef:G,onMouseEnter:function(){return I.isHovered.set(!0)},onMouseLeave:function(){return I.isHovered.set(!1)},onPointerDown:D&&!T?P:void 0,children:[(0,c.Y)(m9,{paneGroupId:e.headerId,activeTabPaneId:R,isMaximized:T,toggleMaximizedPaneGroup:O,cursor:U,onPointerDown:D?void 0:P}),(0,c.Y)(vn,{layout:I}),null==k?void 0:k.map(function(n){return(0,c.Y)(m1,{paneGroupId:e.headerId,paneId:n,layout:I,isOnlyTab:D},n)}),(0,c.Y)(ve,{layout:I,onClick:function(){return C({paneGroupId:e.headerId,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}})]}),T?(0,c.Y)(sL.K0,{clsx:(0,N._)({},m6().desktopAppWindowsOs,z&&H),size:28,alt:"Minimize",onClick:function(){return O({paneGroupId:e.headerId})},children:(0,c.Y)(si.A,{})}):null]})});function m9(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=e.toggleMaximizedPaneGroup,i=e.isMaximized,o=e.cursor,a=e.onPointerDown,l=sa({paneId:t,paneGroupId:n}),u=(0,uH.EF)().onContextMenu;return(0,c.Y)(ou.S,{onContextMenu:function(e){return u(e,{command:l})},onDoubleClick:function(){r({paneGroupId:n})},title:i?"Double click to restore.":"Double click to maximize. Drag to move.",clsx:m6().dragArea,style:{cursor:i?void 0:o},onPointerDown:a})}function ve(e){var n=e.layout,t=(0,d.useRef)(null),r=ra(oG),i=(0,dB.Jw)(hA,hc.NewTab);(0,rv.d)(t,n.newTab,function(e){var n;return n={},(0,N._)(n,m8.newTabWidth,e.width+"px"),(0,N._)(n,m8.newTabX,e.x+"px"),(0,N._)(n,"opacity",e.visible?"1":"0"),n});var o=(0,a_.S)([t,i]),a=(0,ed.Rj)(function(){return n.width.select(function(e){return e>320})},[n]),l="Tools & files";return(0,c.Y)(ou.S,{innerRef:o,clsx:m6().newTab,children:r&&a?(0,c.Y)(al.$n,{clsx:m6().newTabTextButton,onClick:e.onClick,variant:"nofill",iconLeft:(0,c.Y)(lB.A,{}),text:l,style:{width:160}}):(0,c.Y)(sL.K0,{size:28,alt:l,onClick:e.onClick,children:(0,c.Y)(lB.A,{})})})}function vn(e){var n=e.layout,t=(0,d.useRef)(null);return(0,rv.d)(t,n.dropPreview,function(e){var n;return n={},(0,N._)(n,m8.dropPreviewWidth,(e?e.width:80)+"px"),(0,N._)(n,m8.dropPreviewX,(e?e.x:"50%")+"px"),(0,N._)(n,m8.dropPreviewOpacity,e?"1":"0"),n}),(0,c.Y)(ou.S,{innerRef:t,clsx:m6().dropPreview})}var vt=t(10384),vr=t.n(vt),vi=(0,ry.CK)("index.module.css",["--left","--top","--scale","--transform-origin-x","--width","--height","--z-index","--transform-x","--transform-y","--border-radius","--controls-opacity","--opacity","--padding-left","--padding-top"]);let vo=(0,d.memo)(function(e){var n,t=e.headerId,r=oU(t),i=(0,us.A)(r.activeTabPaneId),o=oO(t),a=(0,us.A)(o.isFloating),l=(0,us.A)(o.isBeingDragged),u=(0,us.A)(o.isModal),s=(0,us.A)(o.isMaximized),f=(0,d.useRef)(null);(0,rv.d)(f,mA(o.properties,o.getTransitionEnabled),function(e){var n,t,r,i=e.width,o=e.height,a=e.x,l=e.y,u=e.scale,c=e.opacity,s=e.positioning;return(0,p._)((n={},(0,N._)(n,vi.width,i+"px"),(0,N._)(n,vi.height,o+"px"),(0,N._)(n,vi.scale,u.toString()),(0,N._)(n,vi.opacity,c.toString()),n),"transform"===s?(t={},(0,N._)(t,vi.transformX,Math.round(a)+"px"),(0,N._)(t,vi.transformY,Math.round(l)+"px"),(0,N._)(t,vi.top,"0px"),(0,N._)(t,vi.left,"0px"),t):(r={},(0,N._)(r,vi.transformX,"0px"),(0,N._)(r,vi.transformY,"0px"),(0,N._)(r,vi.top,Math.round(l)+"px"),(0,N._)(r,vi.left,Math.round(a)+"px"),r))}),(0,rv.d)(f,o.transformOriginX,function(e){return(0,N._)({},vi.transformOriginX,e)}),(0,rv.d)(f,o.zIndex,function(e){return{"z-index":e.toString()}});var h=ru(oA);return(0,rv.d)(f,rl((0,d.useMemo)(function(){return(0,ea.eU)(function(e){return e(oA)===i})},[i])),function(e){return(0,N._)({},vi.controlsOpacity,e?"1":"0")}),(0,c.FD)(o6.ui,{innerRef:f,clsx:vr().surface,row:!0,align:"center",style:(n={},(0,N._)(n,vi.borderRadius,"4px"),(0,N._)(n,vi.paddingTop,(!s&&a?6:0)+"px"),(0,N._)(n,vi.paddingLeft,(s||l||a?6:0)+"px"),n),onMouseEnter:function(){return h(i)},onMouseLeave:function(){return h(null)},children:[(0,c.Y)(m7,{headerId:t}),a&&!u?(0,c.Y)(mH,{paneId:i}):null]})});var va=t(42028);function vl(){var e=oC(),n=(0,d.useCallback)(function(n){return e({pane:n})},[e]),t=rc(nx),r=ru(tg);return function(e){var i=ne.Xc[e];i&&(n({type:i}),t().forEach(function(e){var n=(0,u._)(e,2),t=n[0],o=n[1];"agentChat"!==o.type&&o.type!==i&&r(t)}))}}var vu=t(7195),vc=t(78636),vs=t(77760),vd={Content:function(e){var n,t=(0,u._)((0,d.useState)(null),2),r=t[0],i=t[1];(0,oq.HP)(function(){return r},[r]),(0,oq.Qt)(function(){return{type:"agentChat",focusInput:function(){return null==r?void 0:r.focus()}}},[r]);var o=e.options.performPaneOperation,a=(0,d.useCallback)(function(e){return o({operation:"open",pane:e,secondary:"ghostwriterChat"!==e.type})},[o]),l=vl(),s=(0,d.useCallback)(function(e){o({operation:"openPip",data:e})},[o]),p=(0,vu.n)(null==(n=e.pane.data)?void 0:n.sessionId),f=p.session,h=p.setSession,g=(0,d.useCallback)(function(e){o({operation:"replace",pane:{type:"agentChat",data:{sessionId:e.id}}}),h(e)},[o,h]),m=oT(),v=ru(iD),w=ra(iR),y=(0,am.A)(),b=y.secrets,x=y.fs;return(0,c.Y)(vc.j,{secrets:b,readFile:x.readFile,session:f,setSession:g,inputRef:i,openPane:a,onPlanApproval:function(e){e&&l(e),v("tilingLayout")},isDesktopOrTabletAgentPresentationCentered:"centeredVisualPlanner"===m,isDesktopLayoutAgentPresentationTransitionInProgress:w,openPip:s})},Icon:function(e){var n=e.size;return(0,c.Y)(sO.l,{size:n})},getTitle:function(){return"Agent"},description:u3.RB,category:ne.bY.WorkspaceFeatures,decode:function(e){return va.T(vs.V,e)}},vp=t(97357),vf=t(30284);function vh(){var e=(0,f._)(["\n  query ConfiguredTools($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hasAuthUsers\n        defaultBucket {\n          ... on Bucket {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return vh=function(){return e},e}var vg={},vm=(0,h.J1)(vh()),vv=t(97172),vw=t(32289);function vy(e){var n,t,r,i,o,a,l,s,f,h,m,v,w,y,b,x,_,S,Y,A=e.openPane,I=e.currentPaneId,k=(0,am.A)().fs,E=(0,ne.Vv)(),C=(0,d.useCallback)(function(e){var n=e.path,t=(0,ne.QY)({path:n});(0,oB.u4)(vf.AZ.TOOL_OPENED,{source:"New Tab",tool:t}),A({pane:{type:t,data:{path:n}}})},[A]),D=ru(i9),R=rc(nx),F=(0,d.useCallback)(function(e){if((0,oB.u4)(vf.AZ.TOOL_OPENED,{source:"New Tab",tool:e.type}),I&&(0,ne.gG)(e.type)){var n=R().find(function(n){var t=(0,u._)(n,2);return t[0],t[1].type===e.type});if(n)return D({from:n[0],to:I})}A({pane:e})},[A,R,I,D]),U=cE((0,d.useCallback)(function(e){F({type:"developer",data:{tab:e}})},[F])),P=(0,uv.J)(),O=(0,t_.Sx)(),T=(x=(n=(0,eo.A)(),o=(i=(null==(r=(null==(t=(0,vp.Rq)({variables:{replId:n}}).data)?void 0:t.getRepl.__typename)==="Repl"?t.getRepl:null)?void 0:r.config)||{}).isServer,a=i.isAgentStack,l=i.isExpertMode,(0,d.useMemo)(function(){return a?[{type:"automations"}]:l?(0,eE._)(o?[{type:"webview"}]:[]).concat([{type:"runnerOutput"}]):[{type:"webview"}]},[o,a,l])),_=(v=(null==(m=(f={variables:{replId:(0,eo.A)()}},h=(0,p._)({},vg,f),g.I(vm,h)).data)?void 0:m.getRepl.__typename)==="Repl"?m.getRepl:null,w=void 0!==(0,vv.GK)().database,y=!!(null==v?void 0:v.hasAuthUsers),b=(null==v||null==(s=v.defaultBucket)?void 0:s.__typename)==="Bucket",(0,d.useMemo)(function(){var e=[];return y&&e.push({type:"replitAuth"}),w&&e.push({type:"neon"}),b&&e.push({type:"objectStorage"}),e},[w,y,b])),S=(0,oJ.Tb)(),Y=ra(nx),(0,d.useMemo)(function(){var e=new Map,n=new Set,t=[],r=function(r,i){if((0,ne.En)(i))return void t.push(i);if(!n.has(i.type)){n.add(i.type);var o=e.get(r);o?o.push(i):e.set(r,[i])}},i=!0,o=!1,a=void 0;try{for(var l,c=x[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r("output",s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}var d=!0,p=!1,f=void 0;try{for(var h,g=_[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;r("configured",m)}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}var v=!0,w=!1,y=void 0;try{for(var b,A=vb[Symbol.iterator]();!(v=(b=A.next()).done);v=!0){var I=b.value;r("suggested",I)}}catch(e){w=!0,y=e}finally{try{v||null==A.return||A.return()}finally{if(w)throw y}}var k=!0,E=!1,C=void 0;try{for(var D,R=S[Symbol.iterator]();!(k=(D=R.next()).done);k=!0){var F=D.value;r("rest",F)}}catch(e){E=!0,C=e}finally{try{k||null==R.return||R.return()}finally{if(E)throw C}}var U=[],P=!0,O=!1,T=void 0;try{for(var L,M=e.values()[Symbol.iterator]();!(P=(L=M.next()).done);P=!0){var G=L.value,N=!0,H=!1,z=void 0;try{for(var W,B=G[Symbol.iterator]();!(N=(W=B.next()).done);N=!0)!function(){var e=W.value,n=!(0,ne.gG)(e.type)&&!(0,ne.xS)(e)&&Y.find(function(n){var t=(0,u._)(n,2);return(t[0],t[1]).type===e.type});n&&U.push(n)}()}catch(e){H=!0,z=e}finally{try{N||null==B.return||B.return()}finally{if(H)throw z}}}}catch(e){O=!0,T=e}finally{try{P||null==M.return||M.return()}finally{if(O)throw T}}return{groupedPanes:e,existingNonSingletonTools:U,extensions:t}},[x,_,S,Y])),L=T.groupedPanes,M=T.existingNonSingletonTools,G=T.extensions;return(0,d.useMemo)(function(){var e,n,t,r=(0,um.g)({openFile:C,fs:k,shouldHideFile:P,getRecentFiles:O}),i=(n=(e={fs:k,openFile:C}).openFile,t=e.fs,{match:oj.KK,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,c.Y)(lB.A,{})},commands:function(e){var r=e.searchQuery,i=e.active;return r&&i?[{match:oj.G2,data:{type:"action",description:"Create a new file",label:r,icon:(0,c.Y)(vw.A,{path:r}),run:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,t.stat(r)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(r,'" already exists')}];return[4,t.writeFile(r,lC.A.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+r+'"'}];return n({path:r}),[2]}})})()}}}]:[]}}),o=[],a=function(e,n){if(n.panes&&0!==n.panes.length){var t=[],r=!0,i=!1,a=void 0;try{for(var l,s=n.panes[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)!function(){var e=l.value;if(!M.some(function(n){var t=(0,u._)(n,2);return(t[0],t[1]).type===e.type}))t.push(vx(e,F,E,n.large))}()}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}o.push({data:"context"===e.type?(0,r4._)((0,p._)({},e),{icon:(0,c.Y)(c.FK,{})}):e,commands:function(){return t}})}};return a({type:"context",label:"Your App"},{panes:L.get("output"),large:!0}),a({type:"group",key:"configured"},{panes:L.get("configured")}),M.length>0&&I&&o.push({data:{label:"Jump to existing tab",type:"context",icon:(0,c.Y)(c.FK,{})},commands:function(){return M.map(function(e){var n=(0,u._)(e,2),t=n[0];return vx(n[1],function(){D({from:t,to:I})},E)})}}),a({type:"context",label:"Suggested"},{panes:L.get("suggested")}),a({type:"group",key:"Other tools"},{panes:L.get("rest")}),o.push({data:{type:"context",label:"Extensions",icon:(0,c.Y)(c.FK,{})},commands:function(){return G.map(function(e){return vx(e,F,E)})}}),M.length>0&&o.push({data:{key:"existing-non-singleton-tools",type:"group"},commands:function(){return M.map(function(e){var n=(0,u._)(e,2);return vx((n[0],n[1]),F,E)})}}),o.push(U),o.push({data:{type:"context",label:"Files",icon:(0,c.Y)(c.FK,{})},commands:function(){return[r,i]}}),{data:{type:"group",key:"root",description:"Search for tools & files"},commands:function(){return o}}},[k,O,P,C,U,L,G,M,I,D,F,E])}var vb=[{type:"deployments"},{type:"integrations"},{type:"neon"},{type:"objectStorage"},{type:"replitAuth"},{type:"securityScan"},{type:"envEditor"}];function vx(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?24:void 0,o=t.getTitle(e),a=t.Icon({pane:e,size:i});return{match:(0,oV.T)({pane:e,aliases:oZ.f.get(e.type),iconSize:i}),data:{key:"extension"===e.type?"extension-".concat(e.data.installationId,"-").concat(e.data.path):void 0,type:"action",label:o,icon:a,run:function(){return n(e)}}}}var v_=t(34563),vS={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,i=e.pane.data.autoFocus,o=ru(nr),a=(0,d.useRef)(null);(0,oq.HP)(function(){return{focus:function(){var e;return null==(e=a.current)?void 0:e.call(a)}}},[]);var l=(0,d.useCallback)(function(e){t({operation:"replace",pane:e.pane}),o(r),(0,oB.u4)(oB.AZ.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,o]),u=vy({currentPaneId:r,openPane:l});return(0,c.Y)(ou.S,{pt:16,grow:!0,shrink:!0,children:(0,c.Y)(o8.r,{autoFocus:i,command:u,focusRef:a,showToolDescriptions:!0})})},Icon:function(){return null},getTitle:function(){return"New tab"},category:ne.bY.Other,decode:v_.D},vY=t(51997),vA=t(32580),vI=t(90830),vk={Content:function(e){var n=e.options,t=n.paneId,r=n.performPaneOperation,i=e.pane.flow,o=oL(),a=o.isOpen,l=o.toggle,u=(0,d.useCallback)(function(){a.current||l()},[a,l]);return(0,c.Y)(vA.A,{flow:i,closeConfigPane:function(){return r({operation:"remove",pane:{id:t}})},useReadFile:vY.A,openSidebar:u,onNewPaneSelected:function(e){return r({operation:"open",pane:e})},openConsole:function(){return r({operation:"open",pane:{type:"runnerOutput"}})}})},Icon:function(){return(0,c.Y)(cy.A,{})},getTitle:function(){return"Configure Repl"},category:ne.bY.WorkspaceFeatures,decode:vI.D},vE=t(48500),vC=(0,l7.AH)([ol.wp.border({color:ry.LU.outlineDimmest,width:1,style:"solid"}),ol.wp.width("100%"),ol.wp.height("100%"),ol.wp.overflow("hidden"),{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none"}]),vD={Content:function(e){var n,t=e.pane;return(0,c.Y)(o6.ui,{css:vC,children:(0,c.Y)("iframe",{title:"Replit Docs",src:(null==t||null==(n=t.data)?void 0:n.url)||nK.ik.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{color:ry.LU.yellowStrongest,size:n},children:(0,c.Y)(lW.A,{})})},getTitle:function(){return"Docs"},description:"View Replit Documentation to learn about workspace features, AI, Deployments, and more",category:ne.bY.Other,decode:vE.D},vR=t(59784),vF=(0,l7.AH)([ol.wp.backgroundColor.backgroundDefault,ol.wp.height("100%"),ol.wp.borderRadius(4),{overflow:"hidden"}]),vU=(0,l7.AH)([ol.wp.width("100%"),ol.wp.height("100%"),ol.wp.justify.center,ol.wp.align.center,ol.wp.display.flex]);function vP(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,i=(0,av.Z_)(t.installationId),o=(0,av.X_)(t.installationId),a=lM({extension:i,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,ay.sU)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,u=a.isValidExtensionPaneUrl,s=a.getIframeProps,d=a.reloadSandbox;return(0,oq.Qt)(function(){return{type:"extension",commands:[{name:"Actions",commands:[{match:oj.G2,data:{icon:(0,c.Y)(cM.A,{}),label:"Refresh",type:"action",description:"Refresh extension",key:"refresh",run:function(){d()}}}]}]}},[d]),(0,c.Y)(ou.S,{className:"extension-pane",css:vF,children:o&&l?(0,c.Y)(c.FK,{children:u()?(0,c.Y)("iframe",(0,p._)({},s({css:{width:"100%",height:"100%",border:"none"}}))):(0,c.Y)(ou.S,{p:12,children:(0,c.FD)(au.EY,{children:["Invalid url:"," ",(0,c.Y)(vR.R,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,c.Y)(ou.S,{css:vU,children:(0,c.Y)(di.A,{})})})}var vO=ep.ZU.Object({extensionId:ep.ZU.Unsafe(ep.ZU.String()),installationId:ep.ZU.Unsafe(ep.ZU.String()),baseUrl:ep.ZU.String(),path:ep.ZU.String(),name:ep.ZU.String(),filePath:ep.ZU.Optional(ep.ZU.Union([ep.ZU.String(),ep.ZU.Null(),ep.ZU.Undefined()])),icon:ep.ZU.Optional(ep.ZU.Union([ep.ZU.String(),ep.ZU.Null(),ep.ZU.Undefined()]))}),vT=ep.ZU.Object({type:ep.ZU.Literal("extension"),data:vO}),vL={Content:function(e){var n=e.pane,t=e.options,r=ah();return(0,c.Y)(vP,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,c.Y)(ou.S,{style:{width:t,height:t,position:"relative"},children:(0,c.Y)(uU.A,{src:(0,ay.sU)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""})}):(0,c.Y)(lj.A,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+"  "+e.data.name:e.data.name},category:ne.bY.WorkspaceExtensions,decode:function(e){return va.T(vT,e)}},vM=t(5819),vG=t(45731),vN=t(89943),vH=t(1069),vz=t(57069);function vW(){var e=(0,f._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return vW=function(){return e},e}function vB(){var e=(0,f._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return vB=function(){return e},e}var vj={};vW();var v$=(0,h.J1)(vB()),vq=t(30411),vK=t(87261),vV=t(83096),vZ=t(85801),vJ=(0,rb.x)({codeBlock:[ol.wp.borderRadius(8),ol.wp.position.relative],codeBlockCopyButton:[ol.wp.position.absolute,ol.wp.top(4),ol.wp.right(4)],selectionContainer:[ol.wp.maxHeight(400),ol.wp.overflowY("scroll")],fsNode:[ol.wp.flex.row,ol.wp.rowWithGap(8),ol.wp.align.center,ol.wp.px(4),ol.wp.py(2),ol.wp.borderRadius(8),ol.wp.cursor.pointer],fsNodeActive:[ol.wp.backgroundColor.backgroundHigher]});function vX(e){var n=e.content,t=(0,ad.A)().showConfirm;return(0,c.FD)(o6.ui,{tag:"code",elevated:!0,css:vJ.codeBlock,p:8,children:[n,(0,c.Y)(sL.K0,{alt:"Copy",tooltipBehavior:"hidden",css:vJ.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,c.Y)(cU.A,{})})]})}function vQ(e){var n,t=e.glob,r=e.openFile,i=e.children,o=(0,u._)((0,d.useState)([]),2),a=o[0],l=o[1],s=(0,u._)((0,d.useState)(""),2),f=s[0],h=s[1],g=(0,vK.c)(),m=(0,am.A)().fs,v=(0,lN.s_)(),w=(0,d.useMemo)(function(){return(0,uI.tL)(t)},[t]);return((0,d.useEffect)(function(){w&&m.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(w)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[w,v]),w)?(0,c.FD)(ou.S,{css:vJ.selectionContainer,gap:16,children:[(0,c.Y)(au.EY,{variant:"subheadDefault",children:(0,c.FD)(ou.S,{gap:12,children:[(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Choose an image"}),v?(0,c.Y)(dY.N,{icon:(0,c.Y)(vZ.A,{}),colorway:"primary",text:(0,c.FD)(ou.S,{gap:2,children:[(0,c.FD)(au.EY,{children:["Images must be served from"," ",(0,c.Y)("span",{css:[ol.wp.font.code,ol.wp.backgroundColor.accentPrimaryDimmer,ol.wp.borderRadius(4),ol.wp.px(4),ol.wp.py(2),ol.wp.mr(2),ol.wp.border({color:ry.LU.accentPrimaryDefault})],children:v.path}),"."]}),(0,c.Y)(au.EY,{css:[ol.wp.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,c.FD)(au.EY,{css:[ol.wp.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,c.Y)("span",{css:[ol.wp.font.code,ol.wp.fontSize("small"),ol.wp.backgroundColor.backgroundHigher,ol.wp.borderRadius(4),ol.wp.px(4),ol.wp.py(2),ol.wp.mr(2),ol.wp.border({color:ry.LU.outlineDefault})],children:null==(n=t.match(/\{(.*)\}/))?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,c.Y)(vq.Ay,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,l=e.getMenuProps;return(0,c.FD)(ou.S,(0,r4._)((0,p._)({},o({refKey:"innerRef"})),{gap:16,children:[(0,c.Y)(ou.S,{css:[ol.wp.position.relative],children:(0,c.Y)(vV.pd,(0,p._)({id:g("file-search")},n({ref:null,value:f,onChange:function(e){return h(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,c.Y)(ou.S,{children:a&&a.length?(0,c.Y)(ou.S,(0,r4._)((0,p._)({elevated:!0,tag:"ul",css:(ol.wp.pt(8),ol.wp.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(f)}).filter(function(e){return!v||e.path.startsWith(v.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,c.FD)(ou.S,(0,r4._)((0,p._)({tag:"li",css:[vJ.fsNode,n===i&&vJ.fsNodeActive]},r({item:e,index:n,disabled:!!v&&!e.path.startsWith(v.relativePath)})),{children:[(0,c.Y)(vw.A,{path:e.path,size:16}),(0,c.Y)(au.EY,{children:e.filename}),(0,c.Y)(au.EY,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,c.Y)(ou.S,{pt:8,children:(0,c.Y)(au.EY,{color:"dimmer",children:(0,c.FD)("em",{children:["No files found matching ",(0,c.Y)("code",{children:t})]})})})})]}))}})]}):(0,c.FD)(ou.S,{css:[ol.wp.flex.column,ol.wp.colWithGap(16)],children:[(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,c.FD)(au.EY,{children:["The glob pattern ",(0,c.Y)("code",{children:t})," could not be parsed."]}),(0,c.Y)(ou.S,{css:ol.wp.border({direction:"bottom",color:ry.LU.backgroundHigher})}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.Y)(au.EY,{children:(0,c.Y)("strong",{children:"Match all Javascript Files"})}),(0,c.Y)(vX,{content:"**/*.js"})]}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.Y)(au.EY,{children:(0,c.Y)("strong",{children:"Match JSON files at root level"})}),(0,c.Y)(vX,{content:"*.json"})]}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.Y)(au.EY,{children:(0,c.Y)("strong",{children:"Match specified file extensions"})}),(0,c.Y)(vX,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}var v0=t(59093),v1=t(38848),v2=function(e){return e.Installing="Installing",e.Loading="Loading",e.Failed="Failed",e.Success="Success",e}(v2||{}),v4={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function v5(e){var n=e.isOpen,t=e.close,r=e.onSubmit,i=(0,lH.mN)(),o=(0,lH.FS)(),a=(0,u._)((0,d.useState)(null),2),l=a[0],s=a[1],p=(0,u._)((0,d.useState)(!0),2),f=p[0],h=p[1],g=(0,u._)((0,d.useState)(null),2),m=g[0],v=g[1],w=(0,u._)((0,d.useState)(null),2),y=w[0],b=w[1],x=(0,d.useRef)(null),_=(0,u._)((0,d.useState)(null),2),S=_[0],Y=_[1],A=(0,u._)((0,d.useState)(null),2),I=A[0],k=A[1],E=(y||I||"").startsWith("/")?y||I:"/"+(y||I),C=(0,u._)((0,d.useState)(null),2),D=C[0],R=C[1],F=function(){k(null),s(null),b(null),Y(null),R(null),v(null)},U=function(){h(!0),s(null)};(0,d.useEffect)(function(){b(I)},[I]);var P=(0,d.useCallback)(function(e){return(0,nZ._)(function(){var n,t,r,a;return(0,nJ.YH)(this,function(u){switch(u.label){case 0:if(!E||!f||"Success"===l||"Failed"===l)return[2];if(n=function(e,n){return(0,nZ._)(function(){var t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return s("Loading"),v(t=(0,ay.sU)(e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return R(n),s("Success"),h(!1),[2,!0];return[2,!1]}})})()},t=e||o)return[3,8];s("Installing"),u.label=1;case 1:return u.trys.push([1,5,,8]),[4,i()];case 2:if(!(r=u.sent()))return[3,4];return[4,P(r)];case 3:case 6:return u.sent(),[2];case 4:case 7:return[3,8];case 5:if(u.sent(),!o)return[3,7];return[4,P(o)];case 8:if(!t)return[3,11];return a=E.replace(/^(\/public|\/static)/,""),[4,n(t,a.slice(1))];case 9:if(u.sent())return[3,11];return[4,n(t,E)];case 10:u.sent(),u.label=11;case 11:return[2]}})})()},[o,E,i,l,f]);(0,d.useEffect)(function(){if(S){var e=S.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});k((-1!==t?"/".concat(S):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||S),h(!0),P()}},[P,S]);var O=S?S.split("/"):[],T=O[O.length-1];return(0,c.Y)(o3.a,{isOpen:n,onRequestClose:t,children:S?(0,c.FD)(ou.S,{css:[ol.wp.flex.column,ol.wp.colWithGap(16)],children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(al.$n,{text:"Back",size:"small",iconLeft:(0,c.Y)(v0.A,{}),onClick:function(){Y(null),F()}}),(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(v1.A,{}),(0,c.Y)(au.EY,{color:"dimmer",children:T||""})]})]}),(0,c.Y)(au.EY,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,c.FD)(ou.S,{gap:4,children:[(0,c.Y)(vV.pd,{defaultValue:y||"",ref:x,placeholder:"/icon.png",onChange:function(e){return b(e.target.value)},autoFocus:!0,disabled:"Loading"===l||"Installing"===l||"Success"===l}),m&&("Loading"===l||"Success"===l||"Failed"===l)?(0,c.Y)("a",{href:m,target:"_blank",children:(0,c.FD)(au.EY,{color:"dimmer",variant:"small",css:[ol.wp.rowWithGap(4),ol.wp.display.flex,{fontStyle:"italic"}],children:[(0,c.FD)("span",{css:[ol.wp.truncate],children:["Loading"===l?"Checking ":null,"Success"===l?"Found at ":null,"Failed"===l?"Failed to load ":null,m]}),(0,c.Y)(ou.S,{css:[ol.wp.display.inlineBlock],children:(0,c.Y)(cP.A,{})})]})}):null]}),(0,c.FD)(ou.S,{row:!0,justify:"space-between",align:"center",children:[(0,c.Y)(ou.S,{row:!0,gap:4,align:"center",children:l?(0,c.Y)(c.FK,{children:"Loading"===l?(0,c.Y)(di.A,{}):(0,c.Y)(dY.N,{text:v4[l],colorway:"Failed"===l?"negative":"positive",icon:"Failed"===l?(0,c.Y)(pD.A,{}):(0,c.Y)(dQ.A,{})})}):null}),"Failed"===l?(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(al.$n,{text:"Add Anyways",onClick:function(){var e=I||S;null!==e&&r(e),F(),t()},size:"small"}),(0,c.Y)(al.$n,{text:"Try Again",onClick:function(){U()},size:"small"})]}):null,D&&"Success"===l?(0,c.Y)(al.$n,{text:"Continue",iconLeft:(0,c.Y)(dQ.A,{}),colorway:"primary",onClick:function(){r(D),F(),t()}}):null]})]}):(0,c.Y)(vQ,{openFile:Y,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var v3=t(80325),v6=t(48485),v8=(0,rb.x)({centerRowGap8:[ol.wp.rowWithGap(8),ol.wp.align.center],featureContainer:[ol.wp.flex.column,ol.wp.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[ol.wp.border({style:"dashed"}),ol.wp.borderRadius(8),ol.wp.p(16),ol.wp.colWithGap(8),ol.wp.center],featureDetails:[ol.wp.flex.column,ol.wp.colWithGap(4),ol.wp.flex.growAndShrink(1)],newFeatureFieldWrapper:[ol.wp.border({direction:"bottom",color:ry.LU.backgroundHighest})],inputCounterFlex:[ol.wp.flex.row,ol.wp.justify.spaceBetween,ol.wp.align.center]});function v7(e){var n=e.features,t=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,u._)((0,d.useState)([]),2),a=o[0],l=o[1],s=(0,u._)((0,d.useState)(!1),2),p=s[0],f=s[1];return(0,c.FD)(ou.S,{children:[(0,c.FD)(ou.S,{pb:12,children:[(0,c.FD)(ou.S,{css:v8.centerRowGap8,children:[(0,c.FD)(ou.S,{css:v8.centerRowGap8,children:[(0,c.Y)(v6.A,{}),(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,c.Y)(sL.K0,{onClick:function(){f(!p)},alt:"Add a new Feature",tooltipBehavior:p?"hidden":"default",disabled:p,children:(0,c.Y)(lB.A,{})})]}),(0,c.Y)(au.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,c.FD)(ou.S,{gap:8,children:[p?(0,c.Y)(we,{onSubmit:function(e){t(e),f(!1)},onCancel:function(){return f(!1)}}):null,(0,c.Y)(ou.S,{css:v8.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,c.Y)(we,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,c.Y)(v9,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,eE._)(e).concat([t])})},onDelete:function(){i(t)}},t)}):(0,c.Y)(c.FK,{children:p?null:(0,c.FD)(ou.S,{css:v8.noFeaturesPlaceholder,children:[(0,c.Y)(au.EY,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,c.Y)(al.$n,{variant:"outlined",text:"New Feature",iconLeft:(0,c.Y)(lB.A,{}),onClick:function(){return f(!0)}})]})})})]})]})}function v9(e){var n=e.feature,t=e.onEdit,r=e.onDelete,i=e.isLast;return(0,c.FD)(o6.ui,{elevated:!0,css:[ol.wp.flex.row,ol.wp.rowWithGap(8),ol.wp.align.center,ol.wp.p(8),i?null:ol.wp.border({direction:"bottom",color:ry.LU.backgroundHighest})],children:[(0,c.Y)(wn,{size:64,icon:n.image}),(0,c.FD)(ou.S,{css:v8.featureDetails,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,c.Y)(au.EY,{children:n.title}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(sL.K0,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,c.Y)(uM.A,{color:ry.LU.accentNegativeStronger})}),(0,c.Y)(sL.K0,{alt:"Edit",tooltipBehavior:"hidden",onClick:t,children:(0,c.Y)(v3.A,{})})]})]}),(0,c.Y)(au.EY,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function we(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,i=e.isLast,o=(0,u._)((0,d.useState)((null==r?void 0:r.title)||""),2),a=o[0],l=o[1],s=(0,u._)((0,d.useState)((null==r?void 0:r.body)||""),2),p=s[0],f=s[1],h=(0,u._)((0,d.useState)((null==r?void 0:r.image)||null),2),g=h[0],m=h[1],v=a.length>=3&&p.length>=16;return(0,c.FD)(o6.ui,{css:[ol.wp.flex.column,i||r?null:ol.wp.borderRadius(8),r?ol.wp.border({color:ry.LU.outlineDefault}):[i?null:ol.wp.border({direction:"bottom",color:ry.LU.backgroundHighest})]],elevated:!0,children:[(0,c.FD)(ou.S,{css:v8.newFeatureFieldWrapper,p:8,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,c.Y)(au.EY,{children:a||"New Feature"}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(al.$n,{text:"Cancel",onClick:t}),(0,c.Y)(al.$n,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:p,image:g})},disabled:!v})]})]}),(0,c.FD)(ou.S,{p:8,gap:8,children:[(0,c.FD)(ou.S,{gap:4,children:[(0,c.FD)(ou.S,{css:v8.inputCounterFlex,children:[(0,c.Y)(au.EY,{color:"dimmer",children:"Title"}),(0,c.Y)(wt,{value:a.length,min:3})]}),(0,c.Y)(vV.pd,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,c.FD)(ou.S,{gap:4,children:[(0,c.FD)(ou.S,{css:v8.inputCounterFlex,children:[(0,c.Y)(au.EY,{color:"dimmer",children:"Body"}),(0,c.Y)(wt,{value:p.length,min:16})]}),(0,c.Y)(vV.ov,{value:p,onChange:function(e){return f(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.FD)(ou.S,{gap:4,grow:!0,shrink:!0,children:[(0,c.Y)(au.EY,{color:"dimmer",children:"Image (Recommended)"}),(0,c.Y)(au.EY,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your App. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,c.Y)(wn,{size:100,icon:g,editable:!0,onSubmit:function(e){m(e)}})]})]})]})}function wn(e){var n=e.size,t=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,am.A)().container,l=(0,ag.A)(a).url,s=l&&t?(0,ay.sU)(l,t):null,p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1];return(0,c.FD)(c.FK,{children:[(0,c.Y)(o6.ui,{background:"default",css:[i?dR.b.filledAndOutlined:null,ol.wp.flex.row,ol.wp.center,ol.wp.width(n),ol.wp.height(.75*n),ol.wp.maxWidth(n),ol.wp.maxHeight(.75*n),ol.wp.borderRadius(4),ol.wp.border({color:ry.LU.backgroundHighest}),ol.wp.flex.grow(1),{background:s?"".concat(ry.LU.backgroundDefault," url(").concat(s,") no-repeat center center / cover"):ry.LU.backgroundDefault}],onClick:function(){return h(!0)},children:s?null:(0,c.Y)(v1.A,{color:ry.LU.foregroundDimmest,size:24})}),i?(0,c.Y)(v5,{isOpen:f,close:function(){return h(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function wt(e){var n=e.value,t=e.min;return(0,c.FD)(au.EY,{css:{color:n>=t?ry.LU.accentPositiveStronger:ry.LU.foregroundDimmest},children:[n,"/",t]})}var wr={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},wi=function(){var e=(0,u._)((0,d.useState)(null),2),n=e[0],t=e[1],r=(0,d.useCallback)(function(e){t(function(n){if(!n)throw Error(wr.stateUndefined);return(0,r4._)((0,p._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},wo=function(){var e=(0,am.A)(),n=e.fs,t=e.dotReplit,r=wi(),i=r.state,o=r.setState,a=r.updateString,l=(0,u._)((0,d.useState)(0),2),c=l[0],s=l[1],f=(0,u._)((0,d.useState)(!1),2),h=f[0],g=f[1],m=(0,d.useCallback)(function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,n.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return e.sent(),[2]}})})()];case 1:return e.sent(),[2]}})})()},[n]);(0,d.useEffect)(function(){o(null);var e=!1,r=function(){};return(0,nZ._)(function(){var i,l,c,s,d,p,f;return(0,nJ.YH)(this,function(h){switch(h.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(c=(l=u._.apply(void 0,[h.sent(),2]))[0],s=l[1],e)return[2];if(!c.files||s.error)return o({fileReadError:wr.readFile}),[2];if(p=(0,lD.me)(function(e){let n="/"===e.charAt(0),t="/"===e.slice(-1),r=(function(e,n){let t=0;for(let n=e.length-1;n>=0;n--){let r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(n)for(;t--;)e.unshift("..");return e})(e.split("/").filter(e=>!!e),!n).join("/");return r||n||(r="."),r&&t&&(r+="/"),(n?"/":"")+r}(null!=(d=null==(i=s.config.extension)?void 0:i.outputDirectory)?d:"dist")),!(f=function(e){var n,t=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;if("extension.json"===s)return s;s.endsWith("/extension.json")&&i.push(s)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if(!m.startsWith(r))return m}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return null!=(n=i[0])?n:null}({filePaths:c.files,outputDir:p})))return o({fileReadError:wr.noManifest}),[2];return r=n.watchTextFile(f,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:f})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:wr.removedManifest})},onError:function(){o({fileReadError:wr.readFile})}}),[2]}})})(),function(){r(),e=!0}},[n,a,t,c,o]);var v=(0,d.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=vG._3(i.manifestStr);return(0,ay.Kf)(e)}catch(e){return{error:e,manifest:null}}},[i]),w=(0,d.useCallback)(function(e){if(!i||(null==v?void 0:v.error)||null!==i.fileReadError)throw Error(wr.parseManifest);var n=vG.F6(i.manifestStr,e);i.writeChange((0,vN.s)(i.manifestStr,n)),a(n)},[i,v,a]),y={retry:function(){s(function(e){return e+1})},creatingExtensionJson:h,setCreatingExtensionJson:g,createExtensionJson:m,updateString:a,updateManifest:w};return i?"string"==typeof i.fileReadError?(0,r4._)((0,p._)({},y),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):v?v.manifest?(0,r4._)((0,p._)({},y),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:v}):(0,r4._)((0,p._)({},y),{__status:"fileParseError",state:i,parsed:{manifest:null,error:v.error}}):(0,r4._)((0,p._)({},y),{__status:"fileReadError",state:{fileReadError:wr.noManifest},parsed:null}):(0,r4._)((0,p._)({},y),{__status:"loading",state:null,parsed:null})},wa=function(e){return e.loading="loading",e.fileReadError="fileReadError",e.fileParseError="fileParseError",e.success="success",e}({}),wl=function(){return(0,c.Y)(ou.S,{css:[ol.wp.display.flex,ol.wp.width("100%"),ol.wp.height("100%")],justify:"center",align:"center",children:(0,c.Y)(di.A,{})})},wu=t(87102);function wc(e){var n=e.children;return(0,c.Y)(ou.S,{gap:12,p:16,children:(0,c.Y)(o6.ui,{elevated:!0,css:[ol.wp.borderRadius(8),ol.wp.colWithGap(8)],p:16,children:n})})}var ws=t(41382),wd=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,c.Y)(wc,{children:(0,c.FD)(ou.S,{gap:16,p:8,children:[(0,c.FD)(ou.S,{row:!0,gap:8,css:[ol.wp.display.flex,ol.wp.align.center],children:[(0,c.Y)(pD.A,{}),(0,c.Y)(au.EY,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Details:"}),(0,c.Y)(ou.S,{gap:8,children:(0,aA._)(n,wu.yk)?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,c.FD)(ou.S,{css:[ol.wp.display.flex,ol.wp.flex.row,ol.wp.rowWithGap(4)],children:[(0,c.Y)(au.EY,{css:[ol.wp.font.code,ol.wp.color.orangeStrongest,ol.wp.backgroundColor.orangeDimmest],children:t}),(0,c.Y)(au.EY,{children:r})]},n)}):(0,c.Y)(ou.S,{tag:"pre",children:n.message})}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(al.$n,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,ws.a)(r)})}}),(0,c.Y)(al.$n,{iconLeft:(0,c.Y)(h$.A,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},wp=function(e){var n=e.message,t=wo(),r=t.createExtensionJson,i=t.creatingExtensionJson,o=t.retry,a=t.setCreatingExtensionJson;return(0,c.FD)(wc,{children:[(0,c.FD)(ou.S,{row:!0,gap:8,css:[ol.wp.display.flex,ol.wp.align.center],children:[(0,c.Y)(pD.A,{}),(0,c.Y)(au.EY,{variant:"subheadDefault",children:n})]}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(al.$n,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,c.Y)(di.A,{}):(0,c.Y)(lB.A,{}),onClick:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})()}}),(0,c.Y)(al.$n,{text:"Retry",iconLeft:(0,c.Y)(cM.A,{}),onClick:function(){o()}})]})]})},wf=t(66121),wh=t(37558),wg=t(99854),wm=t(74013),wv=t(68075),ww=t(71291),wy=t(67405),wb=(0,rb.x)({iconContainer:[ol.wp.position.relative,ol.wp.width(64),ol.wp.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[ol.wp.flex.column,ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0)],iconOverlay:[ol.wp.flex.column,ol.wp.colWithGap(4),ol.wp.center,ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),ol.wp.width("100%"),ol.wp.height("100%"),ol.wp.backgroundColor.backgroundOverlay,ol.wp.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}]});function wx(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,lH.FS)(),i=(0,lH.mN)(),o=(0,lH.WB)(),a=(0,lH.EF)(),l=(0,lN.HG)(),s=(0,u._)((0,d.useState)(!1),2),p=s[0],f=s[1],h=(0,u._)((0,d.useState)(!1),2),g=h[0],m=h[1];return(0,c.Y)(ou.S,{css:[ol.wp.flex.wrap,{rowGap:8}],row:!0,gap:8,children:(0,c.FD)(ou.S,{row:!0,gap:8,children:[r||g?(0,c.FD)(c.FK,{children:[(0,c.Y)(al.$n,{size:"small",text:"Reload",iconLeft:g?(0,c.Y)(di.A,{}):(0,c.Y)(cM.A,{}),disabled:g,onClick:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:if(!r)return[2];return m(!0),[4,o(r.installationId)];case 1:return e.sent(),m(!1),[2]}})})()}}),(0,c.Y)(al.$n,{size:"small",text:"Unload",iconLeft:(0,c.Y)(ww.A,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,c.Y)(al.$n,{size:"small",text:"Load locally",colorway:"primary",iconLeft:p?(0,c.Y)(di.A,{}):(0,c.Y)(wm.A,{}),loading:p,onClick:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return f(!0),[4,i()];case 1:return e.sent(),f(!1),[2]}})})()}}),l?(0,c.Y)(al.$n,{size:"small",text:"View on Store",iconLeft:(0,c.Y)(wy.A,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,c.Y)(al.$n,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,c.Y)(v3.A,{})})]})})}function w_(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,am.A)().container,i=(0,ag.A)(r).url,o=wo(),a=o.parsed,l=o.state,u=o.__status;if(u===wa.loading)return(0,c.Y)(wl,{});if(u===wa.fileReadError)return(0,c.Y)(wp,{message:l.fileReadError});var s=a.manifest,d=a.error;return d?(0,c.Y)(wd,{performPaneOperation:n,manifestPath:l.manifestPath,error:d}):(0,c.Y)(ou.S,{gap:16,css:[ol.wp.width("100%")],children:(0,c.FD)(o6.ui,{elevated:!0,css:[ol.wp.borderRadius(8),ol.wp.colWithGap(8)],p:12,children:[(0,c.FD)(ou.S,{row:!0,gap:16,align:"center",children:[(0,c.Y)(ou.S,{css:[ol.wp.display.flex,ol.wp.flex.row],grow:0,children:(0,c.Y)(wh.B,{size:64,baseUrl:null!=i?i:null,icon:s.icon})}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,children:[(0,c.Y)(wg.z,{align:"center",justify:"space-between",children:(0,c.Y)(au.EY,{variant:"subheadDefault",children:s.name})}),(0,c.Y)(au.EY,{variant:"text",color:"dimmest",children:s.description})]})]}),(0,c.Y)(wx,{setSelectedTab:t,performPaneOperation:n})]})})}function wS(e){var n,t,r,i,o,a,l,s,f,h,m=e.manifest,v=e.onSubmit,w=e.updateManifest,y=(0,lN.HG)(),b=(0,aa.T)(),x=(0,vK.c)(),_=(0,u._)((0,d.useState)(null!=(l=m.name)?l:""),2),S=_[0],Y=_[1],A=(0,u._)((0,d.useState)(null!=(s=m.description)?s:""),2),I=A[0],k=A[1],E=(0,u._)((0,d.useState)(null!=(f=m.longDescription)?f:void 0),2),C=E[0],D=E[1],R=(0,u._)((0,d.useState)(!1),2),F=R[0],U=R[1],P=(0,am.A)().container,O=(0,ag.A)(P).url,T=(n={variables:{id:y||""},skip:!y},t=(0,p._)({},vj,n),g.I(v$,t)),L=T.data,M=T.loading,G=T.refetch,N=(0,u._)((0,vz.$I)(),2),H=N[0],z=N[1].loading,W=(null==L||null==(r=L.extension)?void 0:r.__typename)==="Extension"&&(null==L||null==(i=L.extension)?void 0:i.user.id)===b,B=(null==L||null==(o=L.extension)?void 0:o.__typename)==="Extension"&&(null==L||null==(a=L.extension)?void 0:a.isListed);return(0,c.FD)(ou.S,{tag:"form",gap:16,onSubmit:function(e){e.preventDefault(),v({name:S,description:I,longDescription:C})},children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,children:[(0,c.Y)(au.EY,{css:[ol.wp.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),M||z?(0,c.Y)(di.A,{}):(0,c.FD)(wf.z,{css:ol.wp.colWithGap(8),name:"extensionListingStatus",value:B?"listed":"unlisted",disabled:!W,onChange:function(e){H({variables:{extensionId:y||"",isListed:"listed"===e.target.value}}).then(function(){return G()})},children:[W?null:(0,c.Y)(ou.S,{css:[ol.wp.width("fit-content")],children:(0,c.Y)(dY.N,{text:"You need to release this extension before listing it.",icon:(0,c.Y)(vZ.A,{}),colorway:"yellow"})}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(wf.s,{id:x("listed"),value:"listed"}),(0,c.Y)("label",{htmlFor:x("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(wf.s,{id:x("unlisted"),value:"unlisted"}),(0,c.Y)("label",{htmlFor:x("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,c.Y)(d$.a,{}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("name"),children:[(0,c.Y)(au.EY,{children:"Extension Name"}),(0,c.Y)(vV.pd,{id:x("name"),placeholder:"Give your extension a name",value:S,onChange:function(e){Y(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,children:[(0,c.Y)(au.EY,{children:"Extension Icon"}),(0,c.FD)(ou.S,{row:!0,gap:12,align:"center",children:[(0,c.FD)(ou.S,{css:wb.iconContainer,children:[(0,c.Y)(ou.S,{css:wb.iconWrapper,children:(0,c.Y)(wh.B,{size:64,baseUrl:null!=O?O:null,icon:m.icon})}),(0,c.FD)(ou.S,{css:wb.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return U(!0)},children:[(0,c.Y)(v3.A,{}),(0,c.Y)(au.EY,{variant:"small",children:"Edit"})]})]}),(0,c.Y)(al.$n,{text:"Choose from file system",iconLeft:(0,c.Y)(wv.A,{}),onClick:function(){return U(!0)}})]})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("tagline"),children:[(0,c.FD)(ou.S,{gap:0,children:[(0,c.Y)(au.EY,{children:"Tagline"}),(0,c.Y)(au.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,c.Y)(vV.pd,{id:x("tagline"),placeholder:"Give your extension a short tagline",value:I,onChange:function(e){k(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("longDescription"),children:[(0,c.FD)(ou.S,{gap:0,children:[(0,c.Y)(au.EY,{children:"Description"}),(0,c.Y)(au.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,c.Y)(vV.ov,{id:x("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=C?C:"",onChange:function(e){D(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,c.Y)(d$.a,{}),(0,c.Y)(v7,{features:null!=(h=m.features)?h:[],onDelete:function(e){if((null==(n=m.features)?void 0:n.length)===1&&0===e){var n,t,r=(0,p._)({},m);delete r.features,w(r)}else w((0,r4._)((0,p._)({},m),{features:null==(t=m.features)?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;w((0,r4._)((0,p._)({},m),{features:(0,eE._)(null!=(i=null==(t=m.features)?void 0:t.slice(0,n))?i:[]).concat([e],(0,eE._)(null!=(o=null==(r=m.features)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;w((0,r4._)((0,p._)({},m),{features:(0,eE._)(null!=(n=m.features)?n:[]).concat([e])}))}}),(0,c.Y)(ou.S,{row:!0,gap:12,css:[{alignSelf:"end"},ol.wp.pt(8)],children:(0,c.Y)(al.$n,{text:"Continue",iconRight:(0,c.Y)(cv.A,{}),colorway:"primary",type:"submit",disabled:!S||!I||!C})}),(0,c.Y)(v5,{isOpen:F,close:function(){return U(!1)},onSubmit:function(e){w((0,r4._)((0,p._)({},m),{icon:e}))}})]})}function wY(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,u._)((0,d.useState)([]),2),l=a[0],s=a[1],p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1];return(0,c.FD)(ou.S,{children:[(0,c.FD)(ou.S,{pb:12,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(lV.A,{}),(0,c.Y)(au.EY,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,c.Y)(sL.K0,{onClick:function(){return h(!f)},alt:"Add a new File Handler",tooltipBehavior:f?"hidden":"default",disabled:f,children:(0,c.Y)(lB.A,{})})]}),(0,c.Y)(au.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,c.FD)(ou.S,{gap:8,children:[f?(0,c.Y)(wA,{onSubmit:function(e){t(e),h(!1)},onCancel:function(){h(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,c.Y)(wA,{initialFileHandler:e,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,c.FD)(o6.ui,{css:[ol.wp.borderRadius(8),ol.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,c.Y)(au.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,c.FD)(ou.S,{row:!0,gap:12,align:"center",children:[(0,c.Y)(sL.K0,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(n)},children:(0,c.Y)(uM.A,{})}),(0,c.Y)(sL.K0,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){s(function(e){return(0,eE._)(e).concat([n])})},children:(0,c.Y)(v3.A,{})}),(0,c.Y)(al.$n,{iconLeft:(0,c.Y)(wv.A,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,c.Y)(c.FK,{children:f?null:(0,c.FD)(ou.S,{css:[ol.wp.border({style:"dashed"}),ol.wp.borderRadius(8),ol.wp.p(16),ol.wp.colWithGap(8),ol.wp.center],children:[(0,c.Y)(au.EY,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,c.Y)(al.$n,{variant:"outlined",text:"New File Handler",iconLeft:(0,c.Y)(lB.A,{}),onClick:function(){return h(!0)}})]})})]})]})}function wA(e){var n,t,r,i,o=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,s=(0,u._)((0,d.useState)(null!=(n=null==l?void 0:l.name)?n:""),2),p=s[0],f=s[1],h=(0,u._)((0,d.useState)(null!=(t=null==l?void 0:l.icon)?t:""),2),g=h[0],m=h[1],v=(0,u._)((0,d.useState)(null!=(r=null==l?void 0:l.handler)?r:""),2),w=v[0],y=v[1],b=(0,u._)((0,d.useState)(null!=(i=null==l?void 0:l.glob)?i:""),2),x=b[0],_=b[1],S=(0,vK.c)();return(0,c.FD)(o6.ui,{css:[ol.wp.borderRadius(8),ol.wp.border({color:ry.LU.outlineDimmest}),ol.wp.p(8),ol.wp.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:p,icon:g,handler:w,glob:x})},elevated:!0,children:[(0,c.FD)(ou.S,{css:[ol.wp.border({color:ry.LU.outlineDimmest,direction:"bottom"}),ol.wp.align.center,ol.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,c.Y)(au.EY,{multiline:!1,children:p||"New File Viewer"}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(al.$n,{text:"Cancel",onClick:function(){a()}}),(0,c.Y)(al.$n,{colorway:"primary",iconLeft:(0,c.Y)(dQ.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("name"),children:[(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,c.Y)(vV.pd,{id:S("name"),placeholder:"SVG Editor",value:p,onChange:function(e){f(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("handler"),children:[(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,c.Y)(vV.pd,{id:S("handler"),placeholder:"/svg-editor",value:w,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("glob"),children:[(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,c.Y)(vV.pd,{id:S("glob"),placeholder:"*.svg",value:x,onChange:function(e){_(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("icon"),children:[(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,c.Y)(vV.pd,{id:S("icon"),placeholder:"/svg-editor-logo.png",value:g,onChange:function(e){m(e.currentTarget.value)},required:!0})]})]})]})}function wI(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,u._)((0,d.useState)([]),2),l=a[0],s=a[1],p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1];return(0,c.FD)(ou.S,{children:[(0,c.FD)(ou.S,{pb:12,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(o1.A,{}),(0,c.Y)(au.EY,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,c.Y)(sL.K0,{onClick:function(){return h(!f)},alt:"Add a new tool",disabled:f,tooltipBehavior:f?"hidden":"default",children:(0,c.Y)(lB.A,{})})]}),(0,c.Y)(au.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,c.FD)(ou.S,{gap:8,children:[f?(0,c.Y)(wk,{onSubmit:function(e){t(e),h(!1)},onCancel:function(){h(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,c.Y)(wk,{initialTool:e,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,c.FD)(o6.ui,{css:[ol.wp.borderRadius(8),ol.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,c.Y)(au.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,c.FD)(ou.S,{row:!0,gap:12,align:"center",children:[(0,c.Y)(sL.K0,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(n)},children:(0,c.Y)(uM.A,{})}),(0,c.Y)(sL.K0,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){s(function(e){return(0,eE._)(e).concat([n])})},children:(0,c.Y)(v3.A,{})}),(0,c.Y)(al.$n,{iconLeft:(0,c.Y)(c7.A,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,c.Y)(c.FK,{children:f?null:(0,c.FD)(ou.S,{css:[ol.wp.border({style:"dashed"}),ol.wp.borderRadius(8),ol.wp.p(16),ol.wp.colWithGap(8),ol.wp.center],children:[(0,c.Y)(au.EY,{color:"dimmest",children:"You haven't added any tools"}),(0,c.Y)(al.$n,{variant:"outlined",text:"New Tool",iconLeft:(0,c.Y)(lB.A,{}),onClick:function(){return h(!0)}})]})})]})]})}function wk(e){var n,t,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,l=(0,u._)((0,d.useState)(null!=(n=null==a?void 0:a.name)?n:""),2),s=l[0],p=l[1],f=(0,u._)((0,d.useState)(null!=(t=null==a?void 0:a.icon)?t:null),2),h=f[0],g=f[1],m=(0,u._)((0,d.useState)(null!=(r=null==a?void 0:a.handler)?r:""),2),v=m[0],w=m[1],y=(0,vK.c)();return(0,c.FD)(o6.ui,{tag:"form",css:[ol.wp.borderRadius(8),ol.wp.border({color:ry.LU.outlineDimmest}),ol.wp.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),i({name:s,icon:h,handler:v})},children:[(0,c.FD)(ou.S,{css:[ol.wp.border({color:ry.LU.outlineDimmest,direction:"bottom"}),ol.wp.align.center,ol.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,c.Y)(au.EY,{multiline:!1,children:s||"New Tool"}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(al.$n,{text:"Cancel",onClick:function(){o()}}),(0,c.Y)(al.$n,{colorway:"primary",iconLeft:(0,c.Y)(dQ.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("name"),children:[(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,c.Y)(vV.pd,{id:y("name"),placeholder:"SQL Viewer",value:s,onChange:function(e){p(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("handler"),children:[(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,c.Y)(vV.pd,{id:y("handler"),placeholder:"/sql",value:v,onChange:function(e){w(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("icon"),children:[(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,c.Y)(vV.pd,{id:y("icon"),placeholder:"/sql-logo.png",value:null!=h?h:"",onChange:function(e){g(e.currentTarget.value||null)},required:!0})]})]})]})}function wE(e){var n,t,r=e.manifest,i=e.performPaneOperation,o=e.update,a=(0,lH.FS)(),l=(0,lH.mN)(),s=(0,u._)((0,d.useState)(null),2),f=s[0],h=s[1];return(0,c.FD)(ou.S,{gap:24,css:[ol.wp.width("100%")],children:[(0,c.Y)(wY,{onOpen:function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){return h(e),[2]})})()},onDelete:function(e){var n;o((0,r4._)((0,p._)({},r),{fileHandlers:null==(n=r.fileHandlers)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,i,a,l;o((0,r4._)((0,p._)({},r),{fileHandlers:(0,eE._)(null!=(a=null==(t=r.fileHandlers)?void 0:t.slice(0,n))?a:[]).concat([e],(0,eE._)(null!=(l=null==(i=r.fileHandlers)?void 0:i.slice(n+1))?l:[]))}))},onCreate:function(e){var n;o((0,r4._)((0,p._)({},r),{fileHandlers:(0,eE._)(null!=(n=r.fileHandlers)?n:[]).concat([e])}))},fileHandlers:null!=(n=r.fileHandlers)?n:[]}),(0,c.Y)(wI,{onOpen:function(e){return(0,nZ._)(function(){var n,t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:if(n=a)return[3,2];return[4,l()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return i({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=e.name)?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})})()},onDelete:function(e){var n;o((0,r4._)((0,p._)({},r),{tools:null==(n=r.tools)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,i,a,l;o((0,r4._)((0,p._)({},r),{tools:(0,eE._)(null!=(a=null==(t=r.tools)?void 0:t.slice(0,n))?a:[]).concat([e],(0,eE._)(null!=(l=null==(i=r.tools)?void 0:i.slice(n+1))?l:[]))}))},onCreate:function(e){var n;o((0,r4._)((0,p._)({},r),{tools:(0,eE._)(null!=(n=r.tools)?n:[]).concat([e])}))},tools:null!=(t=r.tools)?t:[]}),(0,c.Y)(o3.a,{isOpen:!!f,onRequestClose:function(){return h(null)},children:f?(0,c.Y)(vQ,{glob:f.glob,openFile:function(e){return(0,nZ._)(function(){var n,t;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:if(!f)throw Error("Expected pending file handler");if(n=a)return[3,2];return[4,l()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return i({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=f.name)?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,ay.sU)(n.baseUrl,f.handler),filePath:e}}}),h(null),[2]}})})()}}):null})]})}var wC=t(30724),wD=t(50618),wR=t(2718),wF=(0,l7.AH)(dR.b.filled,ol.wp.position.relative,ol.wp.p(4),ol.wp.border({color:ry.LU.outlineDimmer}),ol.wp.backgroundColor.backgroundHigher,{"&[data-complete]":[ol.wp.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),wU=function(e){var n=e.complete,t=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,c.Y)(ou.S,{tag:"li",css:wF,"data-complete":n,children:(0,c.FD)(ou.S,{p:4,children:[(0,c.FD)(ou.S,{row:!0,gap:6,align:"center",children:[n?(0,c.Y)(dQ.A,{color:ry.LU.accentPositiveStrongest,size:16,css:[ol.wp.mr(4)]}):null!=o?o:null,(0,c.Y)(au.EY,{variant:"small",color:n?"dimmer":"default",css:[ol.wp.fontWeight.medium],children:i})]}),r?(0,c.Y)(au.EY,{color:"dimmer",variant:"small",children:r}):null,(0,c.Y)(ou.S,{children:(0,c.Y)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",children:"Start"})})]})})};let wP=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,wC.g)("extensions-onboarding-checklist"),i=r.isDone,o=r.setAsDone,a=(0,wC.g)("extensions-onboarding-checklist-create"),l=a.isDone,u=a.setAsDone,s=(0,wC.g)("extensions-onboarding-checklist-concepts"),f=s.isDone,h=s.setAsDone,g=(0,wC.g)("extensions-onboarding-checklist-api"),m=g.isDone,v=g.setAsDone,w=(0,wC.g)("extensions-onboarding-checklist-publish").isDone;if((0,d.useEffect)(function(){u()},[]),void 0===i||!0===i)return null;var y=[l,f,m,w].filter(Boolean).length,b=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,c.Y)(lj.A,{})},{name:"concepts",title:"Learn key concepts",complete:!!f,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:nK.ik.EXTENSIONS}}}),(0,oB.u4)(oB.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),h()},icon:(0,c.Y)(wD.A,{})},{name:"learn",title:"Use the API",complete:!!m,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:nK.ik.EXTENSIONS}}}),(0,oB.u4)(oB.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),v()},icon:(0,c.Y)(ck.A,{})},{name:"publish",title:"Publish your Extension",complete:!!w,onClick:function(){t(1)},icon:(0,c.Y)(wR.A,{})}];return(0,c.Y)("section",{css:[ol.wp.width("100%")],children:(0,c.FD)(ou.S,{gap:12,children:[(0,c.Y)(ou.S,{gap:2,children:(0,c.FD)(ou.S,{row:!0,gap:12,css:[ol.wp.flex.wrap],align:"center",children:[(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,c.FD)(ou.S,{row:!0,gap:12,align:"center",children:[(0,c.Y)(ou.S,{row:!0,gap:2,align:"center",justify:"center",children:Array.from({length:b.length}).map(function(e,n){return(0,c.Y)(ou.S,{css:[ol.wp.borderRadius(8),ol.wp.width(12),ol.wp.height(4),n<y?ol.wp.backgroundColor.accentPositiveDefault:ol.wp.backgroundColor.backgroundHighest]},n)})}),(0,c.Y)(au.EY,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(y,"/").concat(b.length)}),(0,c.Y)(sL.K0,{alt:"Hide section",onClick:o,children:(0,c.Y)(c0.A,{})})]})]})}),(0,c.Y)(ou.S,{tag:"ul",css:[ol.wp.flex.wrap,{listStyleType:"none",gap:ry.LU.space8}],row:!0,children:b.map(function(e,n){return(0,c.Y)(wU,(0,p._)({},e),n)})})]})})};var wO=t(37962);function wT(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=wo(),i=r.__status,o=r.parsed,a=r.state,l=r.updateString;if("loading"===i)return(0,c.Y)(wl,{});if("fileReadError"===i)return(0,c.Y)(wp,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var u=o.error;return(0,c.Y)(wd,{performPaneOperation:n,manifestPath:a.manifestPath,error:u})}var s=o.manifest;return"success"===i&&s?(0,c.FD)(ou.S,{css:[ol.wp.width("100%")],pt:12,gap:24,align:"center",children:[(0,c.Y)(w_,{performPaneOperation:n,setSelectedTab:t}),(0,c.Y)(wP,{performPaneOperation:n,setSelectedTab:t}),(0,c.Y)(ou.S,{css:[ol.wp.border({direction:"bottom",width:4,color:ry.LU.outlineDimmest}),ol.wp.width("100%")]}),(0,c.FD)(ou.S,{gap:8,css:[ol.wp.width("100%")],children:[(0,c.FD)(ou.S,{gap:2,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(wO.A,{}),(0,c.Y)(au.EY,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,c.FD)(au.EY,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,c.Y)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:nK.ik.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,c.Y)(ou.S,{css:[ol.wp.borderRadius(4),ol.wp.border({color:ry.LU.outlineDimmest,width:1}),ol.wp.flex.row,ol.wp.align.center,ol.wp.p(8),ol.wp.flex.wrap,{gap:12},ol.wp.width("fit-content")],children:vH.W.map(function(e){var n;return(0,c.FD)(ou.S,{row:!0,gap:6,align:"center",children:[(0,c.Y)(lq.S,{id:e.key,checked:null==(n=s.scopes)?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,i,o=(null==(t=s.scopes)?void 0:t.some(function(n){return n.name===e.key}))&&!n?vG.F6(a.manifestStr,(0,r4._)((0,p._)({},s),{scopes:null==(r=s.scopes)?void 0:r.filter(function(n){return n.name!==e.key})})):vG.F6(a.manifestStr,(0,r4._)((0,p._)({},s),{scopes:(0,eE._)(null!=(i=s.scopes)?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,vN.s)(a.manifestStr,o)),l(o)}}),(0,c.Y)("label",{htmlFor:e.key,css:[ol.wp.fontSize(12),ol.wp.cursor.pointer],children:(0,c.Y)("abbr",{title:e.description,css:[{textDecorationColor:ry.LU.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,c.Y)(wE,{performPaneOperation:n,manifest:s,update:function(e){var n=vG.F6(a.manifestStr,e);a.writeChange((0,vN.s)(a.manifestStr,n)),l(n)}})]}):(0,c.Y)("div",{children:"unknown state"})}var wL=t(8761),wM=t(53556),wG=t(45440),wN=t(95513),wH=t(24857),wz=(0,rb.x)({logViewerTopLevel:[ol.wp.height("100%")],logsContainer:[ol.wp.scrollbar.thin,ol.wp.backgroundColor.backgroundDefault,ol.wp.overflowY("scroll"),ol.wp.flex.growAndShrink(1)],logViewerHeader:[ol.wp.border({direction:"bottom",width:ry.LU.borderWidthDefault}),ol.wp.display.flex,ol.wp.flex.row,ol.wp.rowWithGap(8),ol.wp.align.center],logViewerHeaderControl:[ol.wp.flex.row,ol.wp.rowWithGap(4),ol.wp.align.center],logLine:[ol.wp.font.code,dR.b.listItem,ol.wp.rowWithGap(2),ol.wp.align.center],logLineIcon:[{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function wW(e){var n=e.log,t=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,u._)((0,d.useState)(!1),2),a=o[0],l=o[1],s=(0,wM.A)().ref;return(0,c.FD)(ou.S,{css:[ol.wp.flex.column,function(e){if(e===wN.$.warn)return{color:ry.LU.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===wN.$.error)return{color:ry.LU.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=ry.LU.backgroundHigher;return t===wN.$.warn?n="rgba(150, 125, 0, 0.5)":t===wN.$.error&&(n="rgba(229, 34, 34, 0.5)"),{color:ry.LU.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,c.FD)(ou.S,{css:wz.logLine,p:2,onClick:function(){return l(function(e){return!e})},children:[(0,c.Y)(ou.S,{css:wz.logLineIcon,p:4,children:(0,c.Y)(function(){return n.logLevel===wN.$.warn?(0,c.Y)(pD.A,{size:16}):n.logLevel===wN.$.error?(0,c.Y)(wH.A,{size:16}):(0,c.Y)(vZ.A,{size:16,css:{opacity:0}})},{})}),(0,c.Y)(au.EY,{maxLines:10,css:wz.logMessage,variant:"small",children:n.message}),a?(0,c.Y)(fo.A,{size:16}):(0,c.Y)(d8.A,{size:16})]}),a?(0,c.Y)(ou.S,{children:(0,c.Y)(wL.Ay,{ref:s,css:wG.$1,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}let wB=function(){var e=(0,lT.Du)(aW.MN),n=(0,lT.Ol)(aW.KO),t=(0,u._)((0,lT.Cj)(aW.gT),2),r=t[0],i=t[1],o=(0,d.useRef)(null);return(0,d.useEffect)(function(){var e,n=o.current;n&&(null==(e=n.children[n.children.length-1])||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,c.FD)(ou.S,{css:wz.logViewerTopLevel,children:[(0,c.FD)(ou.S,{className:"log-viewer-header",css:wz.logViewerHeader,p:8,children:[(0,c.Y)(ou.S,{css:wz.logViewerHeaderControl,style:{flexGrow:1},children:(0,c.Y)(vV.pd,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,c.FD)(ou.S,{css:wz.logViewerHeaderControl,children:[(0,c.Y)(sL.K0,{alt:"Clear logs",onClick:function(){return n()},children:(0,c.Y)(c0.A,{id:"clear-logs"})}),(0,c.Y)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,c.Y)(ou.S,{css:wz.logsContainer,innerRef:o,children:e.map(function(n,t){var r;return(0,c.Y)(wW,{log:n,prevLevel:null==(r=e[t-1])?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})};var wj=t(90676),w$=t(57933);function wq(){var e=(0,f._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return wq=function(){return e},e}function wK(){var e=(0,f._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return wK=function(){return e},e}function wV(){var e=(0,f._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return wV=function(){return e},e}function wZ(){var e=(0,f._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return wZ=function(){return e},e}function wJ(){var e=(0,f._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return wJ=function(){return e},e}var wX={},wQ=(0,h.J1)(wq()),w0=(0,h.J1)(wK(),at.Fz),w1=(0,h.J1)(wV()),w2=(0,h.J1)(wZ()),w4=(0,h.J1)(wJ()),w5=t(56101),w3=ou.D.button,w6=function(e){return e.Pending="pending",e.Active="active",e.Complete="complete",e.Error="error",e}({}),w8=function(){return(0,c.Y)(ou.S,{css:[ol.wp.border({color:ry.LU.outlineDimmest,direction:"top"})],grow:!0,row:!0})},w7=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,i=e.state,o=e.onClick,a=e.disabled,l=e.hideLoadingIcon,u=(0,al.J)(r),s=(0,al.Jt)(r);return(0,c.Y)(w3,{type:"button",css:[ol.wp.reset.button,ol.wp.position.relative,o&&dR.b.nofill,ol.wp.px(8),ol.wp.py(2),ol.wp.borderRadius(4),ol.wp.rowWithGap(4),ol.wp.align.center,{borderRadius:ry.LU.borderRadiusRound}].concat((0,eE._)("error"===i?[ol.wp.color.accentNegativeStronger]:"active"===i?[ol.wp.backgroundColor.accentPrimaryDimmer,ol.wp.color.accentPrimaryStrongest]:"complete"===i?[ol.wp.color.accentPositiveStronger]:[ol.wp.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,c.Y)(al.EE,{text:n,iconSize:s,textVariant:u,iconRight:function(){if("error"===i)return(0,c.Y)(pD.A,{});if("active"===i){if(l)return;return(0,c.Y)(di.A,{})}return"complete"===i?(0,c.Y)(dQ.A,{}):(0,c.Y)(wO.A,{})}()})})},w9=t(92949),ye=t(59552),yn=t(32512),yt=t(54154),yr=function(e){return e.Details="Details",e.Init="Init",e.CreatingExtension="CreatingExtension",e.CreatingExtensionError="CreatingExtensionError",e.Queued="Queued",e.Deploying="Deploying",e.DeployError="DeployError",e.Success="Success",e}(yr||{}),yi=["CreatingExtension","Deploying"],yo=function(e){return e.Details="Details",e.Init="Configure",e.Create="Create",e.Deploy="Deploy",e}(yo||{}),ya=["Details","Configure","Deploy"];function yl(e){var n,t,r,i,o,a=e.performPaneOperation,l=(0,am.A)(),s=l.container,f=l.fs,h=l.dotReplit,g=(0,u._)((n=(0,p._)({},wX,void 0),w$._(w1,n)),1)[0],v=(0,wC.g)("extensions-onboarding-checklist-".concat("publish")).setAsDone,w=(0,u._)((0,d.useState)(null),2),y=w[0],b=w[1],x=(0,u._)((0,d.useState)("Details"),2),_=x[0],S=x[1],Y=(0,u._)((0,d.useState)(null),2),A=Y[0],I=Y[1],k=wo(),E=k.__status,C=k.parsed,D=k.state,R=k.updateManifest,F=(0,w5.W)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),U=F.value,P=F.setValue,O=F.error,T=F.validate,L=(0,u._)((0,d.useState)([]),2),M=L[0],G=L[1],N=(0,d.useCallback)(function(e){return a({operation:"open",secondary:!0,pane:{type:(0,ne.QY)(e),data:e}})},[a]),H=(0,u._)((0,w9.A)({openFile:N,listFiles:f.listFiles}),2),z=H[0],W=H[1],B=(0,ye.V)();t=(0,p._)({},wX,{variables:{extensionId:null!=y?y:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&G(function(e){return(0,eE._)(e).concat((0,eE._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===pj.nHS.Success?S("Success"):t.status===pj.nHS.Failed&&S("DeployError"))}},skip:"Deploying"!==_||!y}),wj.R(wQ,t),(0,d.useEffect)(function(){z&&(z.clear(),M.forEach(function(e){z.write(e.replaceAll("\n","\r\n"))}))},[M,z]);var j=(0,d.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){b(null),I(null),P(null);return}n.buildCommand&&I(n.buildCommand),n.outputDirectory&&P(n.outputDirectory),n.extensionID&&b(n.extensionID)}},[P]);(0,d.useEffect)(function(){var e=!1;return(0,nZ._)(function(){var n;return(0,nJ.YH)(this,function(t){switch(t.label){case 0:return[4,h.getConfig()];case 1:if(n=t.sent(),e)return[2];return j(n),[2]}})})(),function(){e=!0}},[h,j]);var $=(0,d.useCallback)(function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return b(e),[4,h.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})})()},[h]),q=(0,d.useCallback)(function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return I(e),[4,h.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})})()},[h]),K=(0,u._)((0,d.useState)(null),2),V=K[0],Z=K[1],J=(0,u._)((0,d.useState)(null),2),X=J[0],Q=J[1],ee=(0,u._)((0,d.useState)(null),2),en=ee[0],et=ee[1],er=(0,u._)((0,d.useState)(null),2),ei=er[0],ea=er[1],el=(0,u._)((0,d.useState)(null),2),eu=el[0],ec=el[1],es=(0,u._)((r=(0,p._)({},wX,void 0),m.n(w0,r)),1)[0],ed=(0,eo.A)(),ep=(0,u._)((i=(0,p._)({},wX,void 0),m.n(w2,i)),1)[0],ef=(0,u._)((0,d.useState)(null),2),eh=ef[0],eg=ef[1],em=(0,d.useCallback)(function(e){var n=e.name,t=e.description;return(0,nZ._)(function(){var e,r,i;return(0,nJ.YH)(this,function(o){switch(o.label){case 0:return[4,ep({variables:{name:n,description:t}})];case 1:if((r=o.sent()).errors)return[2,{error:r.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(i=null==(e=r.data)?void 0:e.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===i.__typename||"UserError"===i.__typename||"UnauthorizedError"===i.__typename)return[2,{error:"Failed to create extension: "+i.message,result:null}];if("Extension"===i.__typename)return[2,{error:null,result:i}];throw Error("Unexpected response from createExtension mutation")}})})()},[ep]),ev=(0,u._)((o=(0,p._)({},wX,void 0),m.n(w4,o)),1)[0],ew=(0,d.useCallback)(function(){return(0,nZ._)(function(){var e,n,t,r,i,o,a,l,u,c,d,p,h,m,w,b,x,_;return(0,nJ.YH)(this,function(Y){switch(Y.label){case 0:return e=y,[4,T()];case 1:if(null==(n=Y.sent())?void 0:n.message)return et(null==n?void 0:n.message),[2];if(!U)throw Error("expected output folder");return t=(0,lD.Fd)(U),(r=function(){S("Init"),G([]),ec(null),et(null),Q(null),Z(null)})(),[4,f.flush()];case 2:if(Y.sent(),!e)return[3,11];return[4,g({variables:{extensionId:e}})];case 3:if((i=Y.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,5];return[4,new Promise(function(n){eg({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eg(null),n(e)}})})];case 4:case 6:if(!Y.sent())return r(),[2];return e=null,[3,11];case 5:if(!((null==o?void 0:o.__typename)==="Extension"&&!o.canDeployExtension))return[3,7];return[4,new Promise(function(n){eg({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){eg(null),n(e)}})})];case 7:if(!((null==o?void 0:o.__typename)==="Extension"&&o.canDeployExtension))return[3,10];if(u=null==C||null==(a=C.manifest)?void 0:a.name,c=null==C||null==(l=C.manifest)?void 0:l.description,!(u&&u!==o.name||c&&c!==o.description))return[3,9];return[4,ev({variables:{extensionId:e,description:null!=c?c:void 0,name:null!=u?u:void 0}})];case 8:Y.sent(),Y.label=9;case 9:return[3,11];case 10:throw Error("Encountered an unknown error. Please contact support.");case 11:if(e)return[3,13];return S("CreatingExtension"),[4,em({name:null!=(h=null==C||null==(d=C.manifest)?void 0:d.name)?h:"My extension",description:null!=(m=null==C||null==(p=C.manifest)?void 0:p.description)?m:"My extension's description"})];case 12:if(null!==(w=Y.sent()).error)return S("CreatingExtensionError"),ea(w.error),[2];$(e=w.result.id),Y.label=13;case 13:var I;if(!e)throw Error("expected extension id to be set");return[4,(I=t,new Promise(function(e){var n=s.openChannel({service:"gcsfiles"},function(t){return t.channel.request({persistMirror:{path:I}}).then(function(t){t.ok,n(),e()}),function(e){e.willReconnect&&n()}})}))];case 14:Y.sent(),S("Queued"),Y.label=15;case 15:return Y.trys.push([15,17,,18]),[4,es({variables:{extensionId:e,replId:ed,outputDirectory:t,buildCommand:null!=A?A:""}})];case 16:return b=Y.sent(),[3,18];case 17:if(x=Y.sent(),S("DeployError"),x.message.includes("received message larger than max"))return ec("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return ec(x.message),[2];case 18:if(b.errors)return S("DeployError"),ec("Internal error. Please contact support: "+b.errors.map(function(e){return e.message}).join(", ")),[2];if(!b.data)return S("DeployError"),ec("Encountered an unknown error. Please contact support."),[2];if("Extension"===(_=b.data.deployExtension2).__typename)return S("Deploying"),v(),(0,oB.u4)(oB.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),Z(_),[2];if("message"in _)return S("DeployError"),ec(_.message),[2];return S("DeployError"),ec("Encountered an unknown error. Please contact support."),[2]}})})()},[A,s,U,T,ed,f,S,es,g,ev,y,em,$,v,C]),ey=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(_),eb=ya.indexOf(ey);function ex(){return X?"Build error: ".concat(X):en?"Validation error: ".concat(en):en?"Create extension error: ".concat(ei):eu?"Deploy error: ".concat(eu):void 0}var e_=(0,av.Ot)().find(function(e){return e.extensionId===y}),eS=(0,u._)((0,d.useState)(!1),2),eY=eS[0],eA=eS[1],eI=(0,av.Sc)(),ek=(0,d.useMemo)(function(){return eY?(0,c.Y)(di.A,{}):e_?(0,c.Y)(dQ.A,{}):(0,c.Y)(wm.A,{})},[eY,e_]),eC=(0,lL.D)().values.global,eD=(0,hz.mO)().fireBurst,eR=(0,u._)((0,d.useState)(!1),2),eF=eR[0],eU=eR[1],eP=(0,d.useRef)(null);if((0,d.useEffect)(function(){eP.current&&!eF&&"Success"===_&&(eD({x:eP.current.getBoundingClientRect().left,y:eP.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,hz.Im)(300,5e3)},size:function(){return{width:(0,hz.Im)(8,16),height:(0,hz.Im)(8,16)}},color:[eC.tealStronger,eC.blurpleStronger,eC.yellowStronger]}),eD({x:eP.current.getBoundingClientRect().right,y:eP.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,hz.Im)(300,5e3)},size:function(){return{width:(0,hz.Im)(8,16),height:(0,hz.Im)(8,16)}},color:[eC.blueStronger,eC.greenStronger,eC.pinkStronger]}),eU(!0))},[_,eC,eD,eF]),E===wa.loading)return(0,c.Y)(wl,{});if(E===wa.fileReadError)return(0,c.Y)(wp,{message:D.fileReadError});var eO=C.manifest,eT=C.error;return eT?(0,c.Y)(wd,{performPaneOperation:a,manifestPath:D.manifestPath,error:eT}):(0,c.FD)(ou.S,{css:[ol.wp.flex.column,ol.wp.display.flex,ol.wp.height("100%"),ol.wp.justify.center,ol.wp.align.center,ol.wp.position.relative],children:[(0,c.Y)(ou.S,{css:[ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),ol.wp.right(0)],className:"Confetti",innerRef:eP}),(0,c.FD)(ou.S,{css:[ol.wp.width("100%"),ol.wp.maxWidth(vM.R)],grow:!0,shrink:!0,p:12,pt:16,gap:24,children:["Success"!==_?(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{gap:16,children:[(0,c.Y)(au.EY,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,c.Y)(ou.S,{row:!0,gap:4,align:"center",children:ya.map(function(e,n){var t;return(0,c.FD)(d.Fragment,{children:[0!==n&&(0,c.Y)(w8,{}),(0,c.Y)(w7,{state:(t=n)<eb?w6.Complete:t!==eb?w6.Pending:["CreatingExtensionError","DeployError"].includes(_)?w6.Error:w6.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===_?(0,c.Y)(ou.S,{css:[ol.wp.flex.column,ol.wp.colWithGap(8),ol.wp.width("100%")],children:(0,c.Y)(wS,{manifest:eO,updateManifest:R,onSubmit:function(e){R((0,p._)({},eO,e)),S("Init")}})}):null,"Details"!==_?(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{gap:16,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(pT.A,{}),(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Build settings"}),(0,c.Y)(ou.S,{css:[ol.wp.border({color:ry.LU.backgroundHighest,direction:"y"})],grow:!0})]}),(0,c.FD)(ou.S,{gap:4,children:[(0,c.FD)("label",{htmlFor:"buildCommand",css:[ol.wp.display.flex,ol.wp.rowWithGap(4),ol.wp.align.center],children:[(0,c.Y)(au.EY,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,c.Y)(l9.m_,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,c.Y)(vZ.A,{size:12})})]}),(0,c.Y)(vV.pd,{value:null!=A?A:"",onChange:function(e){return q(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==_&&yi.includes(_)})]}),(0,c.FD)(ou.S,{gap:4,children:[(0,c.FD)("label",{htmlFor:"outputFolder",css:[ol.wp.display.flex,ol.wp.rowWithGap(4),ol.wp.align.center],children:[(0,c.Y)(au.EY,{color:"dimmer",variant:"small",children:"Output folder"}),(0,c.Y)(l9.m_,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,c.Y)(vZ.A,{size:12})})]}),(0,c.Y)(vV.pd,{id:"outputFolder",value:null!=U?U:"",disabled:"Init"!==_&&yi.includes(_),onChange:function(e){P(e.currentTarget.value),h.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),O?(0,c.Y)(au.EY,{css:[ol.wp.color.accentNegativeStronger],children:O.message}):null]}),(0,c.Y)(al.$n,{text:"Init"===_||_.endsWith("Error")?"Deploy and Release":"Deploying",iconLeft:"Init"===_||_.endsWith("Error")?(0,c.Y)(hn.A,{}):(0,c.Y)(di.A,{}),onClick:ew,disabled:"Init"!==_&&yi.includes(_),colorway:"primary"}),(0,c.FD)(au.EY,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,c.Y)("a",{href:nK.aC.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),M.length>0?(0,c.FD)(ou.S,{gap:8,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(yt.A,{}),(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Build logs"}),(0,c.Y)(ou.S,{css:[ol.wp.border({color:ry.LU.backgroundHighest,direction:"y"})],grow:!0})]}),ex()?(0,c.Y)(dY.N,{text:ex(),colorway:"red",icon:(0,c.Y)(wH.A,{})}):null,(0,c.Y)(ou.S,{css:[ol.wp.display.flex,ol.wp.py(12),ol.wp.pl(16),ol.wp.borderRadius(8),ol.wp.overflow("hidden"),{border:"1px solid ".concat(ry.LU.outlineDimmest),backgroundColor:null==B?void 0:B.background}],children:(0,c.Y)(ou.D.div,{css:[ol.wp.width("100%"),ol.wp.maxWidth("100%")],ref:W})})]}):null,eh?(0,c.FD)(o6.ui,{elevated:!0,css:[ol.wp.borderRadius(8)],p:8,gap:8,children:[(0,c.Y)(au.EY,{variant:"text",multiline:!0,maxLines:3,children:eh.message}),(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(al.$n,{text:"No",css:[ol.wp.flex.grow(1)],onClick:function(){return eh.callback(!1)}}),(0,c.Y)(al.$n,{text:"Yes",colorway:"primary",css:[ol.wp.flex.grow(1)],onClick:function(){return eh.callback(!0)}})]})]}):null]}):null]}):null,V&&"Success"===_?(0,c.FD)(ou.S,{gap:16,children:[(0,c.FD)(ou.S,{gap:4,children:[(0,c.Y)(au.EY,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,c.Y)(ou.S,{py:8,children:(0,c.Y)(yn.q,{showMetadata:!1,extension:V,onClick:function(){a({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,ao.PM)(V.id)}}})}})}),(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(wD.A,{}),(0,c.Y)(au.EY,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,c.Y)(ou.S,{css:[ol.wp.border({color:ry.LU.backgroundHighest,direction:"y"})],grow:!0})]}),(0,c.FD)(ou.S,{css:[ol.wp.border({color:ry.LU.outlineDimmest}),ol.wp.borderRadius(8)],p:12,gap:8,children:[(0,c.Y)(au.EY,{variant:"subheadDefault",children:"Install your Extension"}),(0,c.Y)(au.EY,{color:"dimmer",children:"Once installed, you can use the extension in any of your Apps."}),(0,c.Y)(al.$n,{text:e_?"Already installed":"Install Extension",colorway:e_?"green":"primary",disabled:eY||!!e_,iconLeft:ek,loading:eY,onClick:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return eA(!0),[4,eI({extensionId:(0,ao.PM)(V.id),replId:null})];case 1:return e.sent(),eA(!1),[2]}})})()}})]})]}):null]})]})}var yu=t(30416),yc=t(21769);function ys(e){var n=e.performPaneOperation,t=(0,u._)((0,d.useState)(0),2),r=t[0],i=t[1];return(0,c.Y)(ou.S,{css:[ol.wp.flex.column,ol.wp.height("100%"),ol.wp.position.relative],children:(0,c.FD)(yu.tU,{css:[ol.wp.flex.grow(1),ol.wp.flex.column,ol.wp.align.center,ol.wp.display.flex,ol.wp.overflow("hidden")],selectedIndex:r,onSelectionChange:function(e){return i(e)},children:[(0,c.Y)(o6.ui,{css:[ol.wp.top(0),ol.wp.width("100%"),ol.wp.zIndex(1)],align:"center",children:(0,c.FD)(yu.wb,{css:[ol.wp.align.center,ol.wp.width("100%"),ol.wp.pb(0),ol.wp.maxWidth(vM.R)],children:[(0,c.Y)(yu.oz,{css:[ol.wp.p(12),ol.wp.height("100%"),ol.wp.borderRadius(0)],iconLeft:(0,c.Y)(fl.A,{}),children:"Home"}),(0,c.Y)(yu.oz,{css:[ol.wp.p(12),ol.wp.height("100%"),ol.wp.borderRadius(0)],iconLeft:(0,c.Y)(yc.A,{}),children:"Releases"}),(0,c.Y)(yu.oz,{css:[ol.wp.p(12),ol.wp.height("100%"),ol.wp.borderRadius(0)],iconLeft:(0,c.Y)(wH.A,{}),children:"Logs"}),(0,c.Y)(ou.S,{grow:!0}),(0,c.Y)(o6.ui,{css:[{boxShadow:"inset 0 -1px 0 ".concat(ry.LU.outlineDimmest)}],p:8,children:(0,c.Y)(al.$n,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:nK.ik.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,c.Y)(h$.A,{}),css:[ol.wp.display.inlineFlex]})})]})}),(0,c.FD)(yu.T2,{css:[ol.wp.flex.grow(1),ol.wp.align.center,ol.wp.justify.center,ol.wp.width("100%"),ol.wp.display.flex,ol.wp.overflow("hidden")],children:[(0,c.Y)(yu.Kp,{css:[ol.wp.height("100%"),ol.wp.p(12),ol.wp.maxWidth(vM.R),ol.wp.display.flex,ol.wp.width("100%"),ol.wp.justify.center,ol.wp.overflowY("scroll")],children:(0,c.Y)(wT,{performPaneOperation:n,setSelectedTab:i})}),(0,c.Y)(yu.Kp,{css:[ol.wp.height("100%"),ol.wp.width("100%"),ol.wp.overflowY("scroll")],children:(0,c.Y)(yl,{performPaneOperation:n})}),(0,c.Y)(yu.Kp,{css:[ol.wp.height("100%"),ol.wp.width("100%")],children:(0,c.Y)(wB,{})})]})]})})}var yd=ep.ZU.Object({type:ep.ZU.Literal("extensionDevtools")}),yp={Content:function(e){var n=e.options.performPaneOperation;return(0,c.Y)(ys,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,c.Y)(lj.A,{size:n})},getTitle:function(){return"Extensions Devtools"},description:"Manage and debug workspace extensions",category:ne.bY.WorkspaceExtensions,decode:function(e){return va.T(yd,e)}},yf=t(78200),yh=t(3251);function yg(e){var n=ru(tz),t=(0,av.Sc)(),r=(0,av.l$)(),i=(0,av.Ot)(),o=(0,d.useCallback)(function(t,r){if("cover"===t){if(null===r)return void o("store",null);n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,u=null!=(l=null==(a=i.find(function(n){return n.extensionId===e.coverPageExtensionId}))?void 0:a.installationId)?l:null;return(0,c.Y)(yf.G,{existingInstallationId:u,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:function(){return(0,nZ._)(function(){var n;return(0,nJ.YH)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,ao.qq)(n.id)]}})})()},uninstallExtension:function(e){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})})()}})}return(0,c.Y)(yh.A,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var ym=ep.ZU.Union([ep.ZU.Object({page:ep.ZU.Union([ep.ZU.Literal("store"),ep.ZU.Literal("manage")])}),ep.ZU.Object({page:ep.ZU.Literal("cover"),coverPageExtensionId:ep.ZU.Unsafe(ep.ZU.String())})]),yv=ep.ZU.Object({type:ep.ZU.Literal("extensionStore"),data:ym}),yw={Content:function(e){return(0,c.Y)(yg,(0,r4._)((0,p._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{color:ry.LU.yellowStronger,size:n},children:(0,c.Y)(lj.A,{})})},getTitle:function(){return"Extension Store"},description:"Find and install workspace extensions",category:ne.bY.WorkspaceExtensions,decode:function(e){return va.T(yv,e)}},yy=t(76428),yb=ep.ZU.Object({type:ep.ZU.Literal("replAuth")}),yx=t(53432),y_={Content:yy.A,Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{color:ry.LU.orangeStrongest,size:n},children:(0,c.Y)(yx.A,{})})},getTitle:function(){return"Authentication"},description:"Let users log in to your App using a prebuilt login page or customize your own button",category:ne.bY.CloudServices,decode:function(e){return va.T(yb,e)}},yS=function(e){var n;null==(n=e.focus)||n.call(e)};function yY(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?yS:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,u=e.boundary,c=(0,d.useRef)(null);return(0,d.useEffect)(function(){if(c.current){var e=c.current,r=function(r){if(!n(r))return;if(l)p=(0,eE._)(e.querySelectorAll(l));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),p=(0,eE._)(o)}if(0!==p.length){var c=document.activeElement;if(e.contains(c)){if(l)if(u){var s=null==c?void 0:c.closest(u),d=null==c?void 0:c.closest(l);c=d||(null==s?void 0:s.querySelector(l))}else c=null==c?void 0:c.closest(l);if(l&&(!c||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var p,f,h=null==(f=document.activeElement)?void 0:f.querySelector(l);h?i(h):i(p[0]);return}if(!c){r.preventDefault(),r.stopPropagation(),i(p[0]);return}var g=p.findIndex(function(e){return e===c});if(-1===g){r.preventDefault(),r.stopPropagation(),i(p[0]);return}var m=t({event:r,children:p,activeIndex:g,activeElement:c});!a&&(m<0||m>p.length-1)||(i(m<0?p[p.length-1]:m>p.length-1?p[0]:p[m]),r.stopPropagation(),r.preventDefault())}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[u,n,t,i,c,l,a]),c}var yA=t(48576),yI=t(1195),yk=(0,rb.x)({queryPill:[ol.wp.display.inline,ol.wp.fontSize(ry.LU.fontSizeDefault)],popover:[{"& > .popover-control-container":ol.wp.mr(0)}]});function yE(e){var n=e.text;return(0,c.Y)(pP.a,{css:yk.queryPill,text:0===n.length?"":n})}function yC(e){var n=e.query,t=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,c.FD)(ou.S,{gap:24,children:[(0,c.FD)(au.EY,{children:["Replace ",(0,c.Y)(yE,{text:n})," with ",(0,c.Y)(yE,{text:t})," ","in ",(0,sl.A)("match",r,!0),"?"]}),(0,c.Y)(au.EY,{children:"This operation cannot be undone!"}),(0,c.FD)(ou.S,{row:!0,gap:12,justify:"end",children:[(0,c.Y)(al.$n,{onClick:function(){return i()},text:"Cancel"}),(0,c.Y)(al.$n,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,sl.A)("match",r,!0)),iconLeft:(0,c.Y)(yI.A,{})})]})]})}function yD(e){var n=e.disabled,t=e.loading,r=e.query,i=e.replacement,o=e.results,a=e.replace,l=e.onReplace,s=e.buttonProps,f=(0,u._)((0,d.useState)(!1),2),h=f[0],g=f[1],m=(0,d.useMemo)(function(){return o.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[o]);return(0,c.Y)(ou.S,{css:yk.popover,children:(0,c.FD)(f$.A,{isOpen:h,maxWidth:400,showArrow:!0,children:[(0,c.Y)(al.$n,(0,r4._)((0,p._)({},s),{text:"Replace all",disabled:n||t,onClick:function(){g(function(e){return!e})}})),(0,c.Y)(yC,{query:r,replacement:i,numMatches:m,onCancel:function(){return g(!1)},onConfirm:function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return g(!1),(0,oB.u4)(oB.AZ.SEARCH_PANE_USED,{action:"replace"}),[4,a()];case 1:return e.sent().success&&l(),[2]}})})()}})]})})}var yR=t(21733),yF=(0,rb.x)({self:[ol.wp.position.relative,ol.wp.flex.shrink(1),ol.wp.width("100%")],iconWrapper:[ol.wp.position.absolute,ol.wp.top(0),ol.wp.right(0),ol.wp.height("100%"),ol.wp.p(4)]}),yU=(0,d.forwardRef)(function(e,n){var t,r=e.onClear,i=(0,cQ._)(e,["onClear"]);return(0,c.FD)(ou.S,{css:yF.self,children:[(0,c.Y)(yR.O,(0,p._)({ref:n},i)),((null==(t=i.value)?void 0:t.length)||0)>0?(0,c.Y)(ou.S,{css:yF.iconWrapper,children:(0,c.Y)(sL.K0,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(ry.LU.backgroundHighest," !important")}},children:(0,c.Y)(c0.A,{})})}):null]})});yU.displayName="SearchInput";var yP=t(53736),yO=t(40180),yT=t(44232),yL=(0,rb.x)({self:[ol.wp.width("fit-content"),ol.wp.display.inlineBlock,ol.wp.color.accentNegativeDefault,ol.wp.fontWeight.bold]});function yM(e){var n=e.content;return(0,c.Y)(c.FK,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,eE._)(e).concat([(0,c.Y)(ou.D.span,{css:yL.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var yG=t(95526),yN=ou.D.span,yH="SearchMatch",yz=function(e){return e.HIGHLIGHT="highlight",e.REMOVE="remove",e.ADD="add",e.TEXT="text",e}(yz||{});function yW(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}var yB=(0,rb.x)((a={self:[ol.wp.width("fit-content"),ol.wp.display.inline,ol.wp.cursor.pointer,{"&:focus-visible":[ol.wp.focusRing]},ol.wp.mx(1),ol.wp.px(2),ol.wp.borderRadius(4)]},(0,N._)(a,"highlight",[ol.wp.backgroundColor.accentPrimaryDimmest,yW(ry.LU.accentPrimaryDimmer)]),(0,N._)(a,"remove",[ol.wp.backgroundColor.accentNegativeDimmest,yW(ry.LU.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,N._)(a,"add",[ol.wp.backgroundColor.accentPositiveDimmest,yW(ry.LU.accentPositiveDimmer)]),(0,N._)(a,"hiddenTextWrapper",[ol.wp.display.inlineBlock,ol.wp.mx(2),{"& > div":[ol.wp.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,N._)(a,"firstHiddenTextWrapper",[ol.wp.ml(0)]),(0,N._)(a,"lastHiddenTextWrapper",[ol.wp.mr(0)]),a));function yj(e){var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,c.Y)(c.FK,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var u=t[l],c=u.start+u.length;o.push({start:a,end:u.start,type:"text"});var s=n.substring(u.start,c);i.length>0&&i!==s?(o.push({start:u.start,end:c,type:"remove"}),o.push({start:-1,end:c,type:"add"})):o.push({start:u.start,end:c,type:"highlight",matchIndex:l}),a=c}return o.push({start:a,end:n.length,type:"text"}),o})({content:n,matches:t,dedentBy:r,replacement:i}).map(function(e,t,r){var u=e.start,s=e.end,p=e.type,f="".concat(u,"-").concat(s),h=s-u;if("text"===p){var g=r[t+1];if(0===t&&h>50)return(0,c.FD)(d.Fragment,{children:[(0,c.Y)(yN,{css:[yB.hiddenTextWrapper,yB.firstHiddenTextWrapper],children:(0,c.Y)(sL.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(s-50)},children:(0,c.Y)(yG.A,{})})},f),(0,c.Y)("span",{children:n.substring(s-50,s)})]},f);if(t===r.length-1&&h>50)return(0,c.FD)(d.Fragment,{children:[(0,c.Y)("span",{children:n.substring(u,u+50)}),(0,c.Y)(yN,{css:[yB.hiddenTextWrapper,yB.lastHiddenTextWrapper],children:(0,c.Y)(sL.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(u+50)},children:(0,c.Y)(yG.A,{})})},f)]},f);if(g&&h>100)return(0,c.FD)(d.Fragment,{children:[(0,c.Y)("span",{children:n.substring(u,u+50)}),(0,c.Y)(yN,{css:yB.hiddenTextWrapper,children:(0,c.Y)(sL.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(u+50)},children:(0,c.Y)(yG.A,{})})},f),(0,c.Y)("span",{children:n.substring(s-50,s)})]},f)}var m=-1===u?i:n.substring(u,s);if("text"===p)return(0,c.Y)(d.Fragment,{children:m},f);var v=null,w=r[t-1];return"add"===p&&(null==w?void 0:w.type)==="remove"&&(v=n.substring(w.start,w.end)),(0,c.Y)(y$,{content:m,type:p,isRegex:o,query:a,replacement:i,removedText:v,onClick:function(e){e.stopPropagation(),l(s)}},f)})})}function y$(e){var n=e.content,t=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,l=(0,cQ._)(e,["content","type","isRegex","replacement","query","removedText"]),u=n,s=void 0;switch(t){case"highlight":s="Matched text ".concat(u);break;case"remove":s="Removed text ".concat(u);break;case"add":if(s="Added text ".concat(u),r&&null!==a)try{u=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,c.Y)(ou.D.span,(0,r4._)((0,p._)({css:[yB.self,yB[t]],tabIndex:0,"aria-label":s,role:"button","data-nav":yH},l),{children:"add"===t?(0,c.Y)(yM,{content:u}):u}))}var yq=(0,rb.x)({self:[ol.wp.width("100%"),ol.wp.flex.wrap],text:[ol.wp.display.block,ol.wp.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function yK(e){var n=e.error;return(0,c.FD)(ou.S,{css:yq.self,pt:8,pb:8,row:!0,gap:4,align:"center",justify:"center",children:[(0,c.Y)(pD.A,{}),(0,c.Y)(au.EY,{css:yq.text,multiline:!1,children:n})]})}var yV=t(66787),yZ=t(88166),yJ="SearchLine",yX="--search-line-number-width",yQ=(0,rb.x)({self:[ol.wp.overflow("hidden"),ol.wp.cursor.pointer,ol.wp.borderRadius(4),{"&:focus-visible":[ol.wp.focusRing],"&:hover, &:focus-visible":[ol.wp.backgroundColor.backgroundHighest]}],content:[ol.wp.font.code,ol.wp.maxWidth("100%"),ol.wp.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[ol.wp.display.inlineBlock,ol.wp.color.foregroundDimmest,ol.wp.mr(8),ol.wp.pl(8)],lineNumber:[ol.wp.display.inlineBlock,ol.wp.textAlign.right,{width:"var(".concat(yX,")")}]});function y0(e){var n=e.lineNumber,t=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.onFileLineClicked,l=(0,cQ._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),u=(0,K.A)(function(){return function(e){(0,oB.u4)(oB.AZ.SEARCH_PANE_RESULT_CLICKED,(0,p._)({},l)),a({path:i,lineNumber:n,columnNumber:e})}},[n,l,i,a]),s=(0,K.A)(function(){return function(){var e=r.length>0?r[0]:null;u(e?e.start+e.length:0)}},[r,u]);return(0,c.FD)(ou.S,{tabIndex:0,css:yQ.self,row:!0,gap:8,align:"stretch","data-nav":yJ,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),s())},onClick:s,children:[(0,c.Y)(ou.S,{css:yQ.lineNumberWrapper,children:(0,c.Y)(ou.S,{tag:"span",css:yQ.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,c.Y)("pre",{css:yQ.content,children:(0,c.Y)(yj,{isRegex:l.isRegex,content:t,matches:r,dedentBy:o,query:l.query,replacement:l.replacement,onOpenAtPosition:u})})]})}var y1=t(83031),y2="SearchFileNav",y4="SearchFileHeaderNav",y5="SearchQueryNav",y3="SearchQueryTogglesNav",y6=parseInt(ry.zu.space24,10)+10,y8=(0,rb.x)({header:[ol.wp.rowWithGap(4),ol.wp.align.center,ol.wp.rowWithGap(6),ol.wp.flex.growAndShrink(1),ol.wp.overflow("hidden")],headerParentPathText:[ol.wp.flex.shrink(1e7)],headerFileNameText:[ol.wp.flex.shrink(1)],headerMatchesCountPill:[ol.wp.height(20),ol.wp.flex.shrink(0)],accordionWrapper:[ol.wp.mx(4),ol.wp.border({direction:"top",color:ry.LU.outlineDimmest})],accordionChildren:[ol.wp.p(4)],linesWrapper:[ol.wp.overflow("hidden"),ol.wp.borderRadius(4),ol.wp.font.code]});function y7(e){var n=e.path,t=e.lines,r=e.dedentBy,i=e.isFirst,o=e.expanded,a=e.onClick,l=e.scrollOffset,u=e.onFileLineClicked,s=e.searchResultBackgroundColor,f=(0,cQ._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),h=(0,uY.g)("fontSize").preferences.fontSize,g=(0,d.useRef)(null),m=(0,K.A)(function(){return t.reduce(function(e,n){return e+n.matches.length},0)},[t]),v=(0,K.A)(function(){var e=t[t.length-1];if(!e)return{};var n=(0,yZ.V)(e.lineNumber),r=(0,yV.s)(h);return(0,N._)({fontSize:h,lineHeight:r},yX,"".concat(n,"ch"))},[t,h]);return(0,c.Y)(o6.ui,{css:y8.accordionWrapper,style:v,"data-nav":y2,innerRef:g,children:(0,c.Y)(y1.A,{expanded:void 0===o||o,onClick:function(){a(g.current)},headerProps:{"data-nav":"".concat(y4," ").concat(yJ," ").concat(i?"".concat(y5," ").concat(y3):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===l?0:l,"px"),borderRadius:0,backgroundColor:s}},headerContent:(0,c.FD)(ou.S,{css:y8.header,children:[(0,c.Y)(vw.A,{path:n,size:16}),(0,c.Y)(au.EY,{css:y8.headerFileNameText,multiline:!1,children:(0,i_.WP)(n)}),(0,c.Y)(au.EY,{color:"dimmest",css:y8.headerParentPathText,multiline:!1,children:(0,i_._6)(n).replace(/^\.\//,"")}),(0,c.Y)(pP.a,{variant:"muted",text:"".concat(m," ").concat((0,sl.A)("match",m)),css:y8.headerMatchesCountPill})]}),children:(0,c.Y)(ou.S,{css:y8.accordionChildren,children:(0,c.Y)(ou.S,{css:y8.linesWrapper,children:t.map(function(e){return(0,c.Y)(y0,(0,r4._)((0,p._)({},e,f),{path:n,dedentBy:r,onFileLineClicked:u}),e.lineNumber)})})})})})}var y9=t(56064),be=(0,rb.x)({container:[ol.wp.border({direction:"bottom",color:ry.LU.outlineDimmest})],actions:[ol.wp.display.flex,ol.wp.rowWithGap(4)]});function bn(e){var n="collapse"===e.collapseExpandAllState;return(0,c.FD)(ou.S,{css:be.container,p:4,row:!0,align:"center",justify:"space-between",children:[(0,c.FD)(au.EY,{color:"dimmer",children:[e.totalCount," results in ",(0,sl.A)("file",e.fileCount,!0)]}),(0,c.FD)(ou.S,{css:be.actions,children:[(0,c.Y)(sL.K0,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,c.Y)(uq.A,{})}),(0,c.Y)(sL.K0,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,c.Y)(uP.A,{}):(0,c.Y)(y9.A,{})})]})]})}var bt=t(85011),br=(0,l7.i7)({from:{opacity:0},to:{opacity:1}}),bi=(0,rb.x)({listWrapper:[ol.wp.overflowY("auto"),ol.wp.flex.grow(1),{contain:"strict"}],list:[ol.wp.width("100%"),ol.wp.position.relative],listItem:[ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),ol.wp.width("100%")],resultRow:[{animation:"".concat(br," 120ms linear forwards")}]});function bo(e){var n,t,r,i,o,a,l,s,f,h,g=e.results,m=e.error,v=e.paneRef,w=e.onFileLineClicked,y=e.onOpenSearchPane,b=e.searchResultBackgroundColor,x=(0,cQ._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),_=(0,K.A)(function(){return g.filter(function(e){return e.lines.length>0})},[g]),S=(0,K.A)(function(){return _.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[_]),Y=(0,u._)((0,d.useState)({}),2),A=Y[0],I=Y[1],k=(0,d.useRef)(null),E=(0,yT.Te)({count:_.length,getScrollElement:function(){return k.current},estimateSize:function(e){var n;return function(e,n){var t=e.length;if(n)for(var r=n-24,i=0;i<e.length;i++){var o=e[i],a=9*(0,yZ.V)(i)+9*o.content.length+4*o.matches.length;a>r&&(t+=Math.floor(r/a)+1)}return y6+20+24.39*t+2*t}(_[e].lines,null==v||null==(n=v.current)?void 0:n.offsetWidth)},overscan:3}),C=E.getVirtualItems(),D=(0,d.useRef)(null),R=(0,d.useCallback)(function(e){var n=k.current;if(n&&D.current!==e){if(e.matches('[data-nav*="'.concat(y4,'"]')))return void e.focus();var t=e.closest('[data-nav="'.concat(y2,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(y4,'"]'));if(!r)return void e.focus();var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;D.current=e;var a=function(){n.scrollTop===o&&(n.removeEventListener("scroll",a),D.current===e&&(e.focus(),D.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:o})}else e.focus()}},[]),F=(n={selector:'[data-nav*="'.concat(y4,'"]'),boundary:'[data-nav*="'.concat(y2,'"]')},t=(0,d.useCallback)(function(e){return"Tab"===e.key},[]),r=(0,d.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),yY((0,r4._)((0,p._)({},n),{isValid:t,move:r}))),U=(i={selector:'[data-nav*="'.concat(yJ,'"]'),focus:R},o=(0,d.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),a=(0,d.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),yY((0,r4._)((0,p._)({},i),{isValid:o,move:a}))),P=(l={selector:'[data-nav*="'.concat(yH,'"]'),focus:R},s=(0,d.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),f=(0,d.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),yY((0,r4._)((0,p._)({},l),{isValid:s,move:f}))),O=(0,yO.P)(F,U,P),T=(0,K.A)(function(){return _.length===Object.keys(A).length&&Object.values(A).every(Boolean)},[A,_.length]),L=null;return _.length>0?L=(0,c.FD)(c.FK,{children:[(0,c.Y)(bn,{fileCount:_.length,totalCount:S,collapseExpandAllState:T?"expand":"collapse",onToggleCollapseExpandAll:function(){T?I({}):I(_.reduce(function(e,n){return(0,r4._)((0,p._)({},e),(0,N._)({},n.path,!0))},{}))},onStartNewSearch:y}),(0,c.Y)(ou.D.div,{ref:k,css:bi.listWrapper,children:(0,c.Y)(ou.S,{css:bi.list,style:{height:E.getTotalSize()},children:(0,c.Y)(ou.S,{css:bi.listItem,style:{transform:"translateY(".concat(null==(h=C[0])?void 0:h.start,"px)")},innerRef:O,children:C.map(function(e){var n,t=_[e.index],r=t.path;return(0,c.Y)(ou.D.div,{"data-index":e.index,ref:E.measureElement,css:bi.resultRow,children:(0,c.Y)(y7,(0,r4._)((0,p._)({},t,x),{scrollOffset:null==(n=C[0])?void 0:n.start,onFileLineClicked:w,isFirst:0===e.index,expanded:!0!==A[r],searchResultBackgroundColor:b,onClick:function(e){if(I(function(e){return(0,r4._)((0,p._)({},e),(0,N._)({},r,!(r in e)||!e[r]))}),k.current&&e){var n,t,i=Math.floor(null!=(t=null==(n=C[0])?void 0:n.start)?t:0),o=Math.floor(k.current.scrollTop),a=e.offsetTop+i;a>o||k.current.scrollTo({top:a-1})}}}))},e.key.toString())})})})})]}):m===bt.F.EMPTY_RESULTS&&(L=(0,c.Y)(yA.A,{pane:{type:"searchReplace"},headerText:m})),(0,c.FD)(c.FK,{children:[m&&m!==bt.F.EMPTY_RESULTS?(0,c.Y)(yK,{error:m}):null,L]})}var ba=t(11960);function bl(e){return(0,d.useMemo)(function(){return(0,eE._)((0,ba.l0)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var bu=function(e){return e.QUERY_EMPTY="The query is empty",e.QUERY_SAME="The query is the same as replacement",e.NO_MATCHES="No matches were found to replace",e.RG_EMPTY="Ripgrep didn't return a response",e.NOT_MOUNTED="Component wasn't mounted",e}({}),bc=t(86197),bs=t(63806),bd=t(64850),bp=t(83317),bf=t(69806),bh=t(97902),bg=t(97041),bm="SearchQueryControlsNav",bv="SearchQueryExcludeNav",bw="SearchQueryControlsColumnNav",by=(0,l7.i7)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),bb=ol.kL.min(360),bx=(0,rb.x)({self:[ol.wp.height("100%"),ol.wp.width("100%"),ol.wp.overflow("hidden"),ol.wp.px(4),ol.wp.container()],filesIncludeExcludeWrapper:[ol.wp.mt(6),ol.wp.border({direction:"top",color:ry.LU.outlineDimmest}),(0,N._)({},bb,[ol.wp.rowWithGap(6),ol.wp.align.start,ol.wp.mt(0),{border:"none"}])],inputWithLabel:[ol.wp.flex.growAndShrink(1),ol.wp.colWithGap(1)],inputLabelText:[{userSelect:"none"},ol.wp.color.foregroundDimmest,ol.wp.truncate,{fontSize:ry.LU.fontSizeSmall}],inputLabel:[ol.wp.flex.shrink(1),ol.wp.m(0),{lineHeight:1}],input:[ol.wp.viewStyle,ol.wp.border(),{blockSize:ry.LU.space32,"::placeholder":{color:ry.LU.foregroundDimmest},"&:hover::placeholder":{color:ry.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:ry.LU.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[ol.wp.rowWithGap(2),ol.wp.align.center,(0,N._)({order:2},bb,[{order:1," > *":ol.wp.height("100%")}])],closeWrapper:[(0,N._)({order:1},bb,{order:2," > *":ol.wp.height("100%")})],results:[ol.wp.position.relative,{flex:"1 1 auto"}],searchWrapper:[{flex:"0 1 auto"}],expandCollapseButton:[ol.wp.height(32)],searchInputAndOptionsWrapper:(0,N._)({flex:1,display:"grid",gap:4,gridTemplateColumns:"1fr max-content"},bb,{gridTemplateColumns:"1fr max-content max-content"}),replacementWrapper:[ol.wp.ml(24),ol.wp.pl(4),ol.wp.pb(6)],replaceInputWrapper:[ol.wp.border({direction:"top",color:ry.LU.outlineDimmest}),(0,N._)({},bb,[ol.wp.rowWithGap(4),ol.wp.pt(0),ol.wp.align.center,{border:"none"}])],loadingBar:[ol.wp.position.absolute,ol.wp.mt(2),ol.wp.height(1),ol.wp.borderRadius(2),ol.wp.width("100%"),ol.wp.backgroundColor.accentPrimaryDimmer,{animation:"".concat(by," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function b_(e){var n=e.updateData,t=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,u=e.isMatchingWholeWords,s=e.setIsMatchingWholeWords,d=e.isCollapsed,p=e.setIsCollapsed,f=e.executeSearch,h=e.searchInputRef,g=e.onCloseRequested;return(0,c.FD)(ou.S,{css:bx.searchWrapper,pb:4,row:!0,gap:4,children:[(0,c.Y)(sL.K0,{onClick:function(){return p(function(e){return!e})},alt:d?"Show replacement options":"Hide replacement options",css:bx.expandCollapseButton,children:d?(0,c.Y)(d8.A,{}):(0,c.Y)(fo.A,{})}),(0,c.FD)(ou.S,{css:bx.searchInputAndOptionsWrapper,children:[(0,c.Y)(yU,{"data-nav":"".concat(y5," ").concat(bm),ref:h,autoSize:!0,placeholder:"Search",value:t,css:bx.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,uA.T$)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),f())}}),(0,c.FD)(ou.S,{css:bx.optionsWrapper,children:[(0,c.Y)(yP.A,{alt:"case sensitive","data-nav":"".concat(bm," ").concat(bw),icon:(0,c.Y)(bf.A,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,c.Y)(yP.A,{alt:"regular expressions","data-nav":"".concat(bm," ").concat(bw),icon:(0,c.Y)(bh.A,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,c.Y)(yP.A,{alt:"whole words","data-nav":"".concat(bm," ").concat(bw),icon:(0,c.Y)(bg.A,{}),checked:u,onClick:function(){return s(function(e){return!e})}})]}),(0,c.Y)(ou.S,{css:bx.closeWrapper,row:!0,gap:2,align:"center",children:g?(0,c.Y)(sL.K0,{onClick:g,alt:"Close",children:(0,c.Y)(c0.A,{})}):null})]})]})}function bS(e){var n=e.updateData,t=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,l=e.includeGlob,u=e.setIncludeGlob,s=e.excludeGlob,d=e.setExcludeGlob,p=e.replace,f=e.results;return(0,c.FD)(ou.S,{css:bx.replacementWrapper,children:[(0,c.FD)(ou.S,{css:bx.replaceInputWrapper,pt:8,gap:6,children:[(0,c.Y)(yU,{"data-nav":"".concat(y5," ").concat(bm," ").concat(bv),autoSize:!0,placeholder:"Replacement",value:t,css:bx.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,c.Y)(ou.S,{css:bx.optionsWrapper,children:(0,c.Y)(yD,{query:i,replacement:t,results:f,disabled:0===i.length,loading:o,replace:p,onReplace:a,buttonProps:{"data-nav":"".concat(bm," ").concat(y3," ").concat(bw)}})})]}),(0,c.FD)(ou.S,{css:bx.filesIncludeExcludeWrapper,pt:8,gap:8,children:[(0,c.FD)(ou.S,{css:bx.inputWithLabel,id:"filesToInclude",children:[(0,c.Y)("label",{htmlFor:"filesToIncludeInput",css:bx.inputLabel,children:(0,c.Y)(au.EY,{css:bx.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,c.Y)(yU,{id:"filesToIncludeInput","data-nav":"".concat(y5," ").concat(bm),autoSize:!0,value:l,css:bx.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){u(e),n({initialIncludeGlob:e})},onClear:function(){u(""),n({initialIncludeGlob:""})}})]}),(0,c.FD)(ou.S,{css:bx.inputWithLabel,id:"filesToExclude",children:[(0,c.Y)("label",{htmlFor:"filesToExcludeInput",css:bx.inputLabel,children:(0,c.Y)(au.EY,{css:bx.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,c.Y)(yU,{id:"filesToExcludeInput","data-nav":"".concat(bm," ").concat(bv),autoSize:!0,value:s,css:bx.input,onChange:function(e){d(e),n({initialExcludeGlob:e})},onClear:function(){d(""),n({initialExcludeGlob:""})}})]})]})]})}function bY(e){var n,t,r,i,o,a,l,s,f,h,g,m,v,w,y,b,x,_,S,Y,A,I,k,E,C,D,R,F,U,P,O,L,M,G,N,H,z,W,B,j,$,q=e.isActive,V=e.initialQuery,Z=void 0===V?"":V,J=e.initialReplacement,X=void 0===J?"":J,Q=e.initialIncludeGlob,ee=void 0===Q?"":Q,en=e.initialExcludeGlob,et=void 0===en?"":en,er=e.searchInputRef,ei=e.onDataChanged,eo=e.onFileLineClicked,ea=e.onOpenSearchPane,el=e.onCloseRequested,eu=e.searchResultBackgroundColor,ec=(0,u._)((0,d.useState)(Z),2),es=ec[0],ed=ec[1],ep=(0,u._)((0,d.useState)(X),2),ef=ep[0],eh=ep[1],eg=(0,u._)((0,d.useState)(!1),2),em=eg[0],ev=eg[1],ew=(0,u._)((0,d.useState)(!1),2),ey=ew[0],eb=ew[1],ex=(0,u._)((0,d.useState)(!1),2),e_=ex[0],eS=ex[1],eY=(0,u._)((0,d.useState)(!0),2),eA=eY[0],eI=eY[1],ek=(0,u._)((0,d.useState)(et),2),eC=ek[0],eD=ek[1],eR=(0,u._)((0,d.useState)(ee),2),eF=eR[0],eU=eR[1],eP=bl(eC),eO=bl(eF),eT=(0,d.useRef)(null),eL=(t=(n={query:es,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,excludeGlobs:eP,includeGlobs:eO}).query,r=n.isRegex,i=n.isCaseSensitive,o=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,f=void 0===(s=n.excludeGlobs)?[]:s,g=(h=(0,am.A)()).container,m=h.dotReplit,v=(0,bd.o)(m),w=(0,T._P)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),b=(y=(0,u._)((0,d.useState)([]),2))[0],x=y[1],S=(_=(0,u._)((0,d.useState)(null),2))[0],Y=_[1],I=(A=(0,u._)((0,d.useState)(t.length>0),2))[0],k=A[1],E=(0,K.A)(function(){return(0,eE._)(f).concat((0,eE._)(v||[]),(0,eE._)(bs.TJ))},[f,v]),C=g.getConnectionState(),D=(0,d.useMemo)(function(){return(0,bp.A)({container:g,onError:function(e){return Y(e)},onUpdate:function(e){return x(e)},onLoadingStateChange:function(e){return k(e)},isStreaming:!0,trackLatency:w})},[]),(0,d.useEffect)(function(){C===ab.KN.CONNECTED&&D({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:E})},[C,D,t,r,i,o,l,E,v]),{loading:I,error:S,data:b,search:function(){return D({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:E})}}),eM=eL.loading,eG=eL.error,eN=eL.data,eH=eL.search;(0,dG.A)(function(){""!==es&&(0,oB.u4)(oB.AZ.SEARCH_PANE_USED,{action:"search",isRegex:em,isCaseSensitive:ey,hasIncludes:eO.length>0,hasExcludes:eP.length>0})},[es,eO,eP,em,ey],1e3);var ez=(F=(R={replacement:ef,query:es,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,excludeGlobs:eP,includeGlobs:eO,fileList:eG?void 0:eN}).query,U=R.replacement,P=R.fileList,O=(0,cQ._)(R,["query","replacement","fileList"]),L=(0,am.A)().container,G=(M=(0,u._)((0,d.useState)(!1),2))[0],N=M[1],z=(H=(0,u._)((0,d.useState)(null),2))[0],W=H[1],j=(B=(0,u._)((0,d.useState)(!1),2))[0],$=B[1],{replace:(0,d.useCallback)(function(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:var t;return $(!0),W(null),[4,(t=(0,p._)({container:L,query:F,replacement:U,fileList:null==P?void 0:P.map(function(e){return e.path})},O),(0,nZ._)(function(){var e,n,r,i,o,a,l,u,c;return(0,nJ.YH)(this,function(s){switch(s.label){case 0:if(n=t.container,r=t.fileList,0===(i=(0,cQ._)(t,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:bu.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:bu.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=n).exec.apply(a,(0,eE._)((0,bc.Qq)((0,r4._)((0,p._)({},i),{context:1,mode:"files"}))))];case 2:if((u=s.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===u.error?bu.NO_MATCHES:u.error}];o=(null==(l=u.output)?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],s.label=3;case 3:var d,f,h,g,m,v,w,y;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:bu.NO_MATCHES}];return[4,(e=n).exec.apply(e,(0,eE._)((f=(d=i).replacement,h=d.query,g=d.isRegex,m=d.isCaseSensitive,v=d.isMatchingWholeWords,w=["sd"],y=[h.indexOf("\n")>=0?"m":"e",m?"c":"i"],v&&y.push("w"),w.push("--flags",y.join("")),!g&&w.push("--string-mode"),h.startsWith("-")&&(h="\\"+h),w.push(h,f),w)).concat((0,eE._)(o)))];case 4:if((c=s.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:c.error}];return[2,{success:!0}]}})})())];case 1:return(e=n.sent()).success||W(e.errorMessage),$(!1),N(e.success),[2,e]}})})()},[L,F,U,P,O]),loading:j,error:z,data:G}),eW=ez.loading,eB=ez.replace,ej=(0,d.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==ei||ei({initialQuery:es,initialReplacement:ef,initialIncludeGlob:eF,initialExcludeGlob:eC},e)},[ei,es,ef,eC,eF]);(0,d.useLayoutEffect)(function(){ed(Z),eh(X),eU(ee),eD(et)},[Z,X,ee,et]);var e$=yY({selector:'[data-nav*="'.concat(y5,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(y5,'"]')),r=e.target.matches("[data-nav*=".concat(y4,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eq=yY({selector:'[data-nav*="'.concat(y3,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(y3,'"]')),r=e.target.matches("[data-nav*=".concat(y4,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eK=yY({selector:'[data-nav*="'.concat(bw,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(y3,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(bw,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(y3,'"]'));return(n.preventDefault(),n.stopPropagation(),i)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),eV=yY({selector:'[data-nav*="'.concat(bv,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(bv,'"]')),r=e.target.matches("[data-nav*=".concat(y5,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eZ=yY({selector:'[data-nav*="'.concat(bm,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(bw,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),eJ=(0,a_.S)([e$,eq,eK,eV,eZ],{breadcrumb:"client/workspace/components/SearchReplace/index.tsx:661"}),eX=(0,d.useCallback)(function(e){"Escape"===e.key&&(null==el||el())},[el]);return(0,c.FD)(ou.S,{css:bx.self,innerRef:eJ,onKeyDown:eX,children:[(0,c.Y)(b_,{isActive:q,query:es,setQuery:ed,updateData:ej,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,setIsRegex:ev,setIsCaseSensitive:eb,setIsMatchingWholeWords:eS,isCollapsed:eA,setIsCollapsed:eI,executeSearch:eH,searchInputRef:er,onCloseRequested:el}),eA?null:(0,c.Y)(bS,{replacement:ef,setReplacement:eh,updateData:ej,query:es,replaceLoading:eW,search:eH,includeGlob:eF,setIncludeGlob:eU,excludeGlob:eC,setExcludeGlob:eD,replace:eB,results:eN}),(0,c.FD)(ou.S,{css:bx.results,children:[eM?(0,c.Y)(ou.S,{css:bx.loadingBar},es):null,0===es.length&&0===eN.length?(0,c.Y)(yA.A,{pane:{type:"searchReplace"},bodyText:"Enter a search query above to see results."}):(0,c.Y)(bo,{isRegex:em,query:es,replacement:ef,include:eF,exclude:eC,results:eN,error:eG,paneRef:eT,onOpenSearchPane:ea,onFileLineClicked:eo,searchResultBackgroundColor:eu})]})]})}var bA=ep.ZU.Object({type:ep.ZU.Literal("searchReplace"),data:ep.ZU.Optional(ep.ZU.Object({initialQuery:ep.ZU.Optional(ep.ZU.String()),initialReplacement:ep.ZU.Optional(ep.ZU.String()),initialIncludeGlob:ep.ZU.Optional(ep.ZU.String()),initialExcludeGlob:ep.ZU.Optional(ep.ZU.String())}))}),bI={Content:function(e){var n=e.pane,t=e.options;return(0,c.Y)(bE,{paneData:(null==n?void 0:n.data)||{},isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,c.Y)(uw.A,{size:n})},getTitle:function(e){var n,t=null==e||null==(n=e.data)?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},description:"Search through the text contents of your App",category:ne.bY.WorkspaceFeatures,decode:function(e){return va.T(bA,e)}},bk=(0,rb.x)({wrapper:[ol.wp.height("100%"),ol.wp.width("100%")]});function bE(e){var n=e.paneData,t=e.isActive,r=e.performPaneOperation,i=(0,d.useRef)(null),o=(0,d.useCallback)(function(){var e,n;null==(e=i.current)||e.select(),null==(n=i.current)||n.focus()},[]);(0,oq.Qt)(function(){return{type:"searchReplace",focusSearchInput:o}},[o]),(0,oq.HP)(function(){return{focus:o}},[o]);var a=(0,d.useCallback)(function(e){r({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[r]),l=(0,d.useCallback)(function(){r({operation:"commit"}),r({operation:"open",pane:{type:"searchReplace"}})},[r]),u=(0,d.useCallback)(function(e,n){r({operation:"replace",pane:{type:"searchReplace",data:(0,p._)({},e,n)}})},[r]);return(0,c.Y)(ou.S,{css:bk.wrapper,pt:6,children:(0,c.Y)(bY,(0,r4._)((0,p._)({},n),{isActive:t,searchInputRef:i,onFileLineClicked:a,onOpenSearchPane:l,onDataChanged:u,searchResultBackgroundColor:ry.LU.backgroundDefault}))})}var bC=t(65797),bD=t(39794),bR=t(13481),bF=t(87384),bU=t(79320),bP=t(85586),bO=function(e){return e.Ready="READY",e.Loading="LOADING",e.Error="ERROR",e}(bO||{}),bT=function(e){var n=e.progress;return(0,c.Y)(l9.m_,{tooltip:"Progress: ".concat(Math.round(100*n*10)/10,"%"),children:(0,c.Y)(ou.S,{css:[ol.wp.width("100%"),ol.wp.height(4),ol.wp.backgroundColor.backgroundHigher],children:(0,c.Y)(ou.S,{css:[ol.wp.width("".concat(100*n,"%")),ol.wp.height("100%"),ol.wp.backgroundColor.purpleDefault]})})})},bL=ep.ZU.Object({type:ep.ZU.Literal("tutorial")}),bM={Content:function(){var e,n,t,r,i=(0,am.A)().fs,o=(e=ra(iQ),n=ra(i1),t=ru(i4),n||!e?null:t),a=(0,dB.Jw)(bD.C.id,bD.j.Sidepane),l=(0,u._)((0,d.useState)([]),2),s=l[0],p=l[1],f=(0,u._)((0,d.useState)("LOADING"),2),h=f[0],g=f[1],m=(0,eo.A)(),v=(0,u._)((0,bC.A)("tutorialProgress--".concat(m),0),2),w=v[0],y=v[1],b=(0,u._)((0,d.useState)(!1),2),x=b[0],_=b[1],S=(0,d.useRef)(null),Y=(0,aa.T)(),A=Y?Y.toString():"",I=(0,uF.vO)(),k=(0,uF.rM)(),E=(0,bF.A)(k),C=(0,K.A)(function(){return E?function(e){var n,t;return E({code:e,insertAt:null!=(t=null==(n=I())?void 0:n.position.offset)?t:"end"})}:void 0},[E,I]),D=(0,bP.wp)(A,m),R=D?(0,c.Y)(bP.Q9,{challenge:D}):null,F=(0,d.useCallback)(function(){S.current&&(S.current.scrollTop=0)},[S]);return((0,d.useEffect)(function(){var e=!1;return(0,nZ._)(function(){var n,t,r,o,a,l,c,s,d,f,h,m,v,w;return(0,nJ.YH)(this,function(y){switch(y.label){case 0:return g("LOADING"),[4,i.readDir(bU.T)];case 1:if(n=y.sent(),e)return[2];if(n.error)return g("ERROR"),[2];return t=[],[4,Promise.all(n.children.filter(function(e){var n;return e.type===tH.pt.File&&(null==(n=bs.Jh.from(e.filename))?void 0:n.id)==="markdown"}).map(function(e){var n="".concat(bU.T,"/").concat(e.filename);return Promise.all([n,i.readFile(n)])}))];case 2:if(r=y.sent(),e)return[2];o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)f=(d=(0,u._)(s.value,2))[0],(h=d[1]).error?g("ERROR"):(v=h.content.toString(),w=RegExp("^#\\s(?<title>.*)").exec(v),t.push({title:null==w||null==(m=w.groups)?void 0:m.title,content:v,path:f}))}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return p(t),g("READY"),[2]}})})(),function(){e=!0}},[i]),(0,d.useEffect)(function(){s[w]||y(0)},[w,y,s]),"LOADING"===h)?(0,c.Y)(ou.S,{css:[ol.wp.center],grow:!0,shrink:!0,children:(0,c.Y)(di.A,{})}):"ERROR"===h?(0,c.Y)(ou.S,{css:[ol.wp.center],grow:!0,shrink:!0,children:(0,c.FD)(ou.S,{css:[ol.wp.center,ol.wp.colWithGap(4)],children:[(0,c.Y)(c0.A,{color:ry.LU.accentNegativeDefault}),(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===s.length?(0,c.Y)(ou.S,{css:[ol.wp.center],grow:!0,shrink:!0,children:(0,c.FD)(ou.S,{css:[ol.wp.center,ol.wp.colWithGap(4)],children:[(0,c.Y)(c0.A,{color:ry.LU.accentNegativeDefault}),(0,c.Y)(au.EY,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):x?(0,c.FD)(ou.S,{css:[ol.wp.overflowY("scroll"),ol.wp.flex.growAndShrink(1),ol.wp.p(8),ol.wp.colWithGap(16)],children:[(0,c.Y)(au.EY,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,c.Y)(ou.S,{grow:!0,shrink:!0,gap:8,children:s.map(function(e,n){return(0,c.FD)(ou.S,{css:[w===n?ol.wp.backgroundColor.backgroundHighest:ol.wp.backgroundColor.backgroundHigher,ol.wp.borderRadius(4),ol.wp.rowWithGap(8),ol.wp.align.center,ol.wp.cursor.pointer,w===n?{outline:"solid 2px ".concat(ry.LU.outlineDimmest)}:{},{":hover":{outline:"solid 2px ".concat(ry.LU.outlineDimmest)}}],p:8,onClick:function(){y(n),_(!1)},children:[(0,c.Y)(ou.S,{css:[ol.wp.backgroundColor.backgroundHighest,ol.wp.width(20),ol.wp.height(20),ol.wp.borderRadius("full"),ol.wp.center,{outline:"solid 1px ".concat(ry.LU.outlineDimmest)}],children:(0,c.Y)(au.EY,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,c.Y)(au.EY,{css:[ol.wp.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,c.Y)(ou.S,{innerRef:a,css:[ol.wp.height("100%")],children:(0,c.FD)(ou.S,{dataCy:"tutorial-viewer-content",innerRef:S,css:[ol.wp.overflowY("scroll"),ol.wp.flex.growAndShrink(1),ol.wp.p(16),ol.wp.pb(48),ol.wp.colWithGap(16)],children:[o?(0,c.Y)(al.$n,{text:"Show tutorial video",iconLeft:(0,c.Y)(cL.A,{}),onClick:function(){return o()}}):null,R,s.length>1&&(0,c.Y)(al.$n,{text:"Table of Contents",iconLeft:(0,c.Y)(yt.A,{}),onClick:function(){return _(!0)}}),(0,c.Y)(bR.A,{fs:i,path:s[w].path,source:s[w].content,sourcePos:!1,onCodeInsert:C}),s.length>1&&(0,c.FD)(ou.S,{css:[ol.wp.position.absolute,ol.wp.width("100%"),ol.wp.left(0),ol.wp.bottom(0),ol.wp.overflow("hidden")],children:[(0,c.Y)(bT,{progress:(w+1)/s.length}),(0,c.FD)(ou.S,{css:[ol.wp.width("100%"),ol.wp.height(40),ol.wp.align.center,ol.wp.flex.row],children:[(0,c.Y)(ou.S,{tag:"button",css:[ol.wp.backgroundColor.backgroundHigher,ol.wp.cursor.pointer,ol.wp.width(40),ol.wp.height("100%")],p:8,justify:"center",onClick:function(){w>0&&(y(function(e){return e-1}),F())},children:w>0&&(0,c.Y)(v0.A,{size:24})}),(0,c.Y)(ou.S,{tag:"button",css:[ol.wp.height("100%"),ol.wp.justify.spaceBetween,ol.wp.backgroundColor.backgroundHighest,ol.wp.align.center,ol.wp.p(8),ol.wp.cursor.pointer,{userSelect:"none"}],grow:!0,shrink:!0,row:!0,gap:8,onClick:function(){w<s.length-1&&(y(function(e){return e+1}),F())},children:w<s.length-1&&(0,c.FD)(c.FK,{children:[(0,c.FD)(au.EY,{multiline:!1,css:[ol.wp.flex.growAndShrink(1),ol.wp.textAlign.left,ol.wp.fontSize(ry.LU.fontSizeSubheadDefault)],children:[(0,c.FD)("span",{css:[ol.wp.color.foregroundDimmer],children:["Next",s[w+1].title?": ":" page"]}),(0,c.Y)("b",{children:null!=(r=s[w+1].title)?r:""})]}),(0,c.Y)(d8.A,{size:24})]})})]})]})]})})},Icon:function(e){var n=e.size;return(0,c.Y)(h$.A,{size:n})},getTitle:function(){return"Tutorial"},category:ne.bY.Other,decode:function(e){return va.T(bL,e)}},bG=t(41683),bN=t(51033),bH=t(70537),bz=t(15473),bW=t(71204),bB=t(22170),bj=t(22239),b$=t(1095),bq=t(26),bK=t(91806),bV={Content:function(e){var n,t,r=e.pane.data,i=e.options.performPaneOperation,o=(0,d.useRef)(null),a=(0,B.jt)(),l=(0,bz.z)().isExpertMode,u=(0,f5.Y)().isAgentStackRepl,s=(0,am.A)(),f=s.ports,h=s.container,g=(0,bG.w)(f),m=(0,d.useMemo)(function(){var e;return null!=(e=(0,bW.E)(r,g))?e:80},[r,g]),v=(0,bB.X)(m),w=(0,py.A)(),y=w.didConnectOnce,b=w.didDisconnect,x=(0,d.useCallback)(function(e){i({operation:"open",secondary:!1,pane:e})},[i]),_=(0,d.useCallback)(function(){return x({type:"developer",data:{tab:["networking"]}})},[x]),S=(0,d.useCallback)(function(){return x({type:"deployments"})},[x]),Y=null==r?void 0:r.previewScreenSize,A=(0,d.useCallback)(function(e){i({operation:"replace",pane:{type:"webview",data:{previewScreenSize:e}}})},[i]),I=(0,bq.xQ)({openDeploymentsPane:S,includeSharing:!0}).getCommandGroups;return((0,oq.Qt)(function(){var e={type:"webview",refresh:function(){var e;null==(e=o.current)||e.refresh()},navigate:function(e,n){var t;null==(t=o.current)||t.navigateTo(e,n)}},n=I();return n.length>0?(0,r4._)((0,p._)({},e),{commands:n}):e},[I]),u)?(0,c.Y)(bj.q,{openPane:x}):!a||l||u?v?(0,c.Y)(b$.A,{openNetworkingTool:_,didConnectOnce:y,didDisconnect:b}):(0,c.Y)(bW.Q,{ref:o,initialPort:m,initialPath:null==r||null==(n=r.ports)?void 0:n.path,openPane:x,ports:f,container:h,previewScreenSize:Y,setPreviewScreenSize:A}):(0,c.Y)(bZ,{ref:o,initialPort:m,initialPath:null==r||null==(t=r.ports)?void 0:t.path,openPane:x,previewScreenSize:Y,setPreviewScreenSize:A})},Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{size:n},children:(0,c.Y)(cO.A,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:ne.bY.WorkspaceFeatures,decode:bK.D4},bZ=(0,d.forwardRef)(function(e,n){var t=e.initialPort,r=e.initialPath,i=e.openPane,o=e.previewScreenSize,a=e.setPreviewScreenSize,l=(0,bH.X5)(),u=(0,am.A)(),s=u.ports,d=u.container,p=l.state===bH.J4.READY||l.state===bH.J4.LAST_RESORT_READY,f=(0,T._P)({controlName:"flag-rapid-no-more"});if(!p)return(0,c.Y)(bN.j,{webviewState:l,openPane:i,hasFlagRapidNoMore:f});var h=l.state===bH.J4.READY?l.presentPort:l.externalPort,g=l.state===bH.J4.READY?l.presentRoute:r;return(0,c.Y)(c.FK,{children:(0,c.Y)(bW.Q,{ref:n,initialPort:null!=h?h:t,initialPath:null!=g?g:r,ports:s,container:d,openPane:i,previewScreenSize:o,setPreviewScreenSize:a})})}),bJ=t(56634),bX=t(28420),bQ=t(34687),b0=t(2958),b1=t(738),b2=(0,rx.v)(["opacity","pointerEvents"]),b4=b2.styleTokens,b5=b2.cssVars,b3={opacity:b4.opacity,pointerEvents:b4.pointerEvents},b6=t(56374),b8=(0,rx.v)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),b7=b8.cssVars,b9=b8.styleTokens,xe=(0,rb.x)({root:[ol.wp.center,ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),(l={transform:"translate(".concat(b9.transformX,", ").concat(b9.transformY,")"),width:b9.width,height:b9.height,cursor:b9.cursor,zIndex:b9.zIndex},(0,N._)(l,ol.$_.canHover,[{"&:hover":{zIndex:rw.W.gutterHovered}}]),(0,N._)(l,"&:hover .blanket",{transform:"scale(".concat(b9.hoverScaleX,", ").concat(b9.hoverScaleY,")")}),(0,N._)(l,"& .icon",{transform:"rotate(".concat(b9.rotation,")")}),(0,N._)(l,"&:active .blanket",[ol.wp.height("200vh"),ol.wp.width("200vw"),{transform:"translate(-50%, -50%)"}]),(0,N._)(l,"&:not(:active):hover > .grip",(0,N._)({},b7.gripColor,ry.LU.foregroundDefault)),l)],blanket:ol.wp.coverContainer}),xn=(0,d.memo)(function(e){var n,t,r,i,o=function(e){var n,t,r,i,o,a,l,u,c,s=rQ(e),d=r0(e),p=nD(d),f=nR(d),h=r1(e),g=(n=rQ(e),(0,K.A)(function(){return(0,el.mg)(n,function(e){return!!e.snapped})},[n])),m=r2(e),v=(t=nD(r0(e)),r=r2(e),(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(t),i=n.width,o=n.height;return e(r)?i:o})},[t,r])),w=(i=rQ(e),(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(i),t=n.snapped,r=n.stacked;return"right"===t?r?180:90:"left"===t?270*!r:0})},[i])),y=(o=r2(e),a=r1(e),l=nD(r0(e)),(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(l),t=n.width,r=n.height,i=e(a),u=e(o),c=e(nf);return u?{width:i?t:24,height:c?6:2}:{height:i?r:24,width:c?6:2}})},[l,o,a])),b=(u=nD(r0(e)),c=r2(e),(0,K.A)(function(){return(0,ea.eU)(function(e){var n=e(u),t=n.width,r=n.height;return(e(c)?t:r)<24})},[u,c]));return{handle:rl(s),size:rl(p),position:rl(f),isActive:rl(h),isSnapped:rl(g),isStacked:rl(m),length:rl(v),rotation:rl(w),gripSize:rl(y),gripIsHidden:rl(b)}}(e.handleId),a=(n=(0,d.useRef)(null),t=(0,hH.j)(),r=ra(nf),(0,rv.d)(n,o.size,function(e){var n,t=e.width,r=e.height;return n={},(0,N._)(n,b7.width,t+"px"),(0,N._)(n,b7.height,r+"px"),n}),(0,rv.d)(n,o.position,function(e){var n,t=e.x,r=e.y;return n={},(0,N._)(n,b7.transformX,Math.round(t)+"px"),(0,N._)(n,b7.transformY,Math.round(r)+"px"),n}),(0,rv.d)(n,o.rotation,function(e){return(0,N._)({},b7.rotation,e+"deg")}),(0,rv.d)(n,o.gripIsHidden,function(e){return(0,N._)({},b7.gripVisibility,e?"hidden":"visible")}),(0,rv.d)(n,o.length,function(e){return(0,N._)({},b7.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")}),(0,rv.d)(n,rl(no),function(e){var n,t;return"centeredVisualPlanner"===e?(n={},(0,N._)(n,b5.pointerEvents,"none"),(0,N._)(n,b5.opacity,"0"),n):(t={},(0,N._)(t,b5.pointerEvents,"auto"),(0,N._)(t,b5.opacity,"1"),t)}),i=r?3:2,(0,rv.d)(n,o.isStacked,function(e){var n;return n={},(0,N._)(n,b7.cursor,e?"row-resize":"col-resize"),(0,N._)(n,b7.hoverScaleX,(e?1:i).toString()),(0,N._)(n,b7.hoverScaleY,(e?i:1).toString()),n}),(0,rv.d)(n,o.isActive,function(e){var n;return n={},(0,N._)(n,b7.gripColor,e?"radial-gradient(circle, ".concat(ry.LU.accentPrimaryDefault," calc(100% - 48px), transparent)"):ry.LU.outlineDimmest),(0,N._)(n,b7.zIndex,(e?rw.W.gutterActive:rw.W.gutter).toString()),n}),(0,rv.d)(n,o.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,N._)(n,b7.gripWidth,t+"px"),(0,N._)(n,b7.gripHeight,r+"px"),n}),n),l=ru(rX),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,d.useRef)(e),t=ru(tx),r=rc(nh);return(0,d.useCallback)(function(i){if(i.snapped)return void t({leftPath:i.leftPath,percent:n.current});Promise.resolve(r()).then(function(r){var o=eD(r,i.leftPath);if(!o||!eI(o))throw Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})})},[e,t,r])}(),s=(0,d.useRef)(null),p=(0,us.A)(o.isSnapped);return(0,c.FD)(ou.S,{style:b3,innerRef:a,css:xe.root,onDoubleClick:function(){u(o.handle.current)},onPointerDown:function(e){(0,ud.j)(e,{start:function(){var e=o.handle.current;s.current=document.activeElement,l({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){l({type:"update",moveDelta:e.delta})},end:function(){var e,n;l({type:"end"}),null==(n=s.current)||null==(e=n.focus)||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,c.Y)(ou.S,{className:"blanket",css:xe.blanket}),p?(0,c.Y)(b6.A,{className:"icon"}):null]})}),xt=t(1594),xr=t(47414),xi=t(88521),xo=t(12267),xa=t(35046),xl=t(14106),xu="video.json",xc=(0,xl.join)(bU.T,xu),xs=t(71696);function xd(){var e=(0,f._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return xd=function(){return e},e}var xp={},xf=(0,h.J1)(xd()),xh=t(84383),xg=t(91539),xm=t(95678),xv="/public/sounds/mixkit-achievement-bell-600.wav",xw={direction:"reverse",state:{isExecutingPlan:!1},reducer:function(e,n){if(e.sender.type!==u7.utd.AI)return!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"agentPlanEventContents":var r=t.agentPlanEventContents;if(!r)break;if(!0===r.requiresApproval)return n.notification={id:r.planId,text:"Plan is waiting for approval"},n.isExecutingPlan=!0,!1;if(n.isExecutingPlan&&r.step.subSteps.every(function(e){return e.status===u7.jhd.STEP_COMPLETE}))return n.notification={id:r.planId,text:"Plan has been completed!"},n.isExecutingPlan=!1,!1;break;case"agentAskUserForActionRequest":var i=t.agentAskUserForActionRequest.request;if((null==i?void 0:i.$kind)==="userSecretsRequest")return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;return n.notification={id:e.id,text:"Agent has an update for you"},!1;case"agentTimelineEventContents":var o,a=t.agentTimelineEventContents,l=a.toolData,u=a.toolName;if((null==l?void 0:l.$kind)==="messageData"){switch(null==(o=l.messageData.agentAction.optionType)?void 0:o.$kind){case"messageButtonAction":return n.notification={id:e.id,text:"Agent has a question for you"},!1;case"secretRequestAction":return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;case"deployRequestAction":return n.notification={id:e.id,text:"Agent needs your permission to publish the application"},!1}if("user_response"===u)return n.notification={id:e.id,text:"Agent has a question for you"},!1}}n.notification=void 0}};function xy(){var e=(0,f._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return xy=function(){return e},e}var xb=(0,h.J1)(xy()),xx=t(6520);function x_(){var e=(0,f._)(["\n  query TrackMultiplayer($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return x_=function(){return e},e}var xS={},xY=(0,h.J1)(x_());function xA(){var e=oC(),n=(0,lN.oR)(),t=rc(nx),r=ru(tk);return(0,d.useCallback)(function(i){var o=!!i&&i.reveal;if(n)return void e({pane:{type:"runnerOutput"},activate:!1,commit:!0});var a=t().find(function(e){var n=(0,u._)(e,2);return"runnerOutput"===(n[0],n[1]).type});a||e({pane:{type:"runnerOutput"},activate:!1,commit:!0}),o&&a&&r({paneId:a[0],activate:!0})},[n,t,e,r])}function xI(e,n,t){var r=ra(nI),i=ru(tN),o=ru(tk),a=rc(nx);(0,oX.SJ)(function(){if(r)return[e,function(){var e=a().find(function(e){return(0,u._)(e,2)[1].type===n.type});if(e)return void o({paneId:e[0],activate:!0});i((0,r4._)((0,p._)({},t),{pane:n,activate:!0,placement:{type:"secondary"}}))}]},[r,i,o])}var xk=t(314),xE=t(1923),xC=t(29829),xD=t(98118),xR=t(24481),xF=t(46153),xU=t(7083),xP=t(98803),xO=t(74237),xT=t(57194),xL=t(25691),xM=t(5568),xG=t(10044),xN=t(67486),xH=t(50568),xz=t(85271),xW=t(89385),xB=t(87380);function xj(){var e=(0,f._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return xj=function(){return e},e}var x$={},xq=(0,h.J1)(xj()),xK=t(26216),xV=t(27784),xZ=t(20016),xJ=t(67571),xX=t(8787),xQ=t(70918),x0=t(38197),x1=t(6132);function x2(e){var n,t,r,i,o,a,l,s,f,h,v,w,y,b,x,_,S,Y,A,I,k,E,C,D,R,F,U,P,O,L,M,N,H,z,W,j,$,q,V,Z,J,X,Q,ee,en,et,er,ei,ea,el,eu,ep,ef,eh,eg,em,ev,ew,ey,eb,ex,e_,eS,eY,eA,eI,ek,eE,eD,eR,eF,eU,eP,eO,eT,eL,eM,eG,eN,eH,ez,eW,eB,ej,e$,eq,eK,eV,eZ,eJ,eX,eQ,e0,e1,e2,e4,e5,e3,e6,e8,e7,e9,ne,nt,nr,no,na,nl,nu,nc,ns,nd,ng,nm,nv,ny,nb,nx,n_,nS,nA,nk,nE,nC,nD,nR,nF=e.repl,nU=e.currentUser,nP=(0,am.A)(),nO=nP.replspaceApi,nT=nP.dotReplit,nL=nP.container,nM=nP.ports;n=(0,am.A)().lspnix,t=(0,uY.g)("codeIntelligence").preferences.codeIntelligence,r=(0,T._P)({controlName:"flag-download-more-ram"}),i=(0,t_.L2)().length>0,(0,d.useEffect)(function(){if(r&&!i||!t)return void n.disable();n.enable()},[n,t,i,r]),o=(0,u._)((0,xg.eY)(),1)[0],a=ru(te),l=(0,K.A)(function(){return ec()(a,1e3)},[a]),s=(0,eo.A)(),(0,d.useEffect)(function(){var e=function(){l({replId:s,force:!1}),l.flush()};if(!o)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[l,s,o]),(0,d.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&l({replId:s,force:!1})};if(!o)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[l,s,o]),(0,d.useEffect)(function(){if(!o){var e=null;return function n(){e=setTimeout(function(){l({replId:s,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}}},[l,s,o]),(0,d.useEffect)(function(){return function(){l({replId:s,force:!1}),l.flush()}},[l,s,o]),(0,xi.A)(),(0,xV.A)(),(0,xJ.A)({workspaceType:"desktop"}),(0,d.useEffect)(function(){var e=function(e){"s"===e.key&&(0,uA.T$)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),h=(f=(0,am.A)()).container,v=f.presence,(0,d.useEffect)(function(){var e=v.onUserJoin(function(n){var t,r=null==(t=h.getContext())?void 0:t.repl;if(r){var i,o=n.username;return(i=r.id,(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:if(!nX.V)throw Error("Expected Apollo client");return[4,nX.V.query({query:xb,variables:{id:i}})];case 1:return[2,(null==(e=n.sent().data)?void 0:e.getRepl.__typename)==="Repl"?e.getRepl.title:null]}})})()).then(function(e){e&&m_({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(r.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})}),function(){e()}}})},[v,h]),w=(0,eo.A)(),y=(0,uY.g)("agentAudioNotification").preferences.agentAudioNotification,x=(0,d.useCallback)(function(e,n){if(y&&document.hidden)try{new Audio(xv).play()}catch(e){}m_({title:"Agent Update",body:n,tag:"".concat(w,"-").concat(e),icon:"/public/images/ai/agent/AgentIconStandard.png",cacheDuration:3e5})},[y,w]),_=(0,uY.g)("agentAudioNotification").preferences.agentAudioNotification,S=(0,xm.T)(),Y=(0,T._P)({controlName:"flag-sound-on",default:!1}),A=(0,B.NC)(),I=(0,ed.J2)(A.sessions.agent.current),k=(0,d.useMemo)(function(){return null==I?void 0:I.reduce(xw,1)},[I]),E=null==I?void 0:I.agent.state,C=(0,d.useMemo)(function(){return E&&k?es.cP.combine(E,k):null},[E,k]),D=(0,d.useRef)(null),R=(0,d.useRef)(0),(0,ed.q3)(E,{next:function(e){if(e){var n=e.state,t=D.current;if(Y&&_&&!S&&t===u7.g32.AGENT_STATE_RUNNING&&n===u7.g32.AGENT_STATE_PAUSED){var r=Date.now();r-R.current>=15e3&&(new Audio(xv).play(),R.current=r)}D.current=n}}}),(0,ed.q3)(C,{next:function(e){var n=(0,u._)(e,2),t=n[0],r=n[1].notification;r&&(null==t?void 0:t.state)===u7.g32.AGENT_STATE_PAUSED&&x(r.id,r.text)}}),F=(0,uF.B$)({sessionId:null!=(b=null==I?void 0:I.id)?b:null}),(0,d.useEffect)(function(){(null==F?void 0:F.request.status)==="pending"&&x(F.request.sessionId,"Agent needs your help with testing")},[F,x]),(0,xH.A)(),(0,xG.o)(),U=(0,am.A)().presence,(0,d.useEffect)(function(){return U.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,oB.u4)(vf.AZ.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,oB.u4)(vf.AZ.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[U]),(0,xX.A)(),P=(0,am.A)().presence,O=ra(ni),(0,d.useEffect)(function(){P.updateOpenFile(O)},[P,O]),M=(L=(0,ad.A)()).showConfirm,N=L.showNotice,H=L.hideMessage,z=L.showError,W=(0,am.A)().container,j=(0,d.useRef)(!1),(0,d.useEffect)(function(){var e=W.onToast(function(e){e.startsWith("PANIC")||N(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=W.onConnectionStateChanged(function(e){if(n&&(H(n),n=null),e===xs.KN.CONNECTED){t&&j.current&&(n=M("Connected",1500),j.current=!1),t=!0;return}if(t){if(e===xs.KN.CONNECTING){n=N("Reconnecting");return}if(e===xs.KN.DISCONNECTED){n=z("Disconnected"),j.current=!0;return}}});return function(){n&&H(n),e(),r()}},[W,M,N,z,H]),$=(0,ad.A)().showConfirm,q=(0,am.A)().fs,(0,d.useEffect)(function(){var e=q.registerOnFlushSuccess(function(e,n){if(n===tH.sT.MANUAL_SAVE){var t="Saved ".concat(e);$(t,Math.max(1e4,t.length/.025+1e3))}});return function(){e()}},[q,$]),Z=(V=(0,ad.A)()).showNotice,J=V.showError,(0,de.b)(function(e,n){var t=n.signal;return(0,nZ._)(function(){var n,r;return(0,nJ.YH)(this,function(i){switch(i.label){case 0:return[4,e.pythonMigration.detectLegacyPython.rpc({},{signal:t})];case 1:if(!(n=i.sent()).ok||!n.payload.oldVenvDetected)return[2];return[4,e.pythonMigration.migratePython.rpc({},{signal:t})];case 2:if(!(r=i.sent()).ok)return"NOP"!==r.payload.code&&J((0,c.FD)(c.FK,{children:[(0,c.Y)("div",{children:"Failed to migrate legacy Python configuration."}),(0,c.Y)("div",{children:"You may need to reinstall your Python packages, or contact support."})]}),1e4),[2];return Z((0,c.FD)(c.FK,{children:[(0,c.Y)("div",{children:"This Repl contained legacy Python configuration"}),(0,c.Y)("div",{children:"and has been automatically migrated."})]}),1e4),[2]}})})()},[J,Z]),X=ra(nI),Q=xA(),ee=(0,dB.Os)(bD.C.id,bD.j.Output),(0,d.useEffect)(function(){if(X&&(null==ee?void 0:ee.isActive)){var e=setInterval(function(){Q()},200);return function(){clearInterval(e)}}},[null==ee?void 0:ee.isActive,Q,X]),xI(cR.showShell.id,{type:"shell"}),xI(cR.showDocs.id,{type:"docs"}),xI(cR.showGit.id,{type:"git"}),xI(cR.showSettings.id,{type:"preferences"}),xI(cR.showConsole.id,{type:"runnerOutput"}),xI(cR.showReplitAi.id,{type:"ghostwriterChat"},{commit:!0}),(0,xE.A)(),en=(0,am.A)().presence,et=oR(),(0,d.useEffect)(function(){return en.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=en.getFollowedUser();r&&r.id===n.id&&t&&et({path:t})})},[en,et]),ei=(er=(0,u._)((0,d.useState)(null),2))[0],ea=er[1],(0,d.useEffect)(function(){return en.onFollowedUserChanged(ea)},[en]),(0,d.useEffect)(function(){if(ei){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){en.unfollowUser()}},[ei]),el=(0,uF.xu)(),eh=(null==(ef=(eu={variables:{replId:(0,eo.A)()}},ep=(0,p._)({},x$,eu),g.I(xq,ep)).data)?void 0:ef.getRepl.__typename)==="Repl"?ef.getRepl:null,(0,d.useEffect)(function(){var e;eh&&(null==(e=eh.templateInfo)?void 0:e.label.includes("Blank Repl"))&&el(!0)},[el,eh]),eg=ru(i2),em=(0,am.A)().fs,ev=(0,bU.A)().isTutorial,ew=(0,oe.A)(eg),(0,d.useEffect)(function(){if(ev){var e=!1,n=em.watchDir(bU.T,{onChange:function(n){(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(t){switch(t.label){case 0:if(!n.find(function(e){return e.type===tH.pt.File&&e.filename===xu}))return[2,null];return[4,em.readFile(xc)];case 1:if((e=t.sent()).error)return[2,null];return[2,e.content.toString()]}})})().then(function(n){if(!e){if(!n)return void ew.current(null);var t=null;try{t=vG._3(n)}catch(e){}var r=(void 0===t?"undefined":(0,eC._)(t))==="object"&&"string"==typeof t.embedUrl?t.embedUrl:null;ew.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){ew.current(null)},onError:function(){ew.current(null)}});return function(){e=!0,n()}}},[em,ev,ew]),ey=(0,bU.A)().isTutorial,eb=ru(i3),(0,d.useEffect)(function(){ey&&eb()},[eb,ey]),ex=(0,xx.A)(),e_=(0,uF.RF)(),(0,d.useEffect)(function(){e_({paneType:"envEditor",indicatorType:ex?ry.LU.redStronger:void 0})},[ex,e_]),(0,xN.R)({onOpenEnvEditor:function(){nG({pane:{type:"envEditor"},activate:!0,placement:{type:"secondary"}})}}),eS=ra(nn),eY=(0,t_.T_)(),eA=(0,t_.nF)(),(0,d.useEffect)(function(){eS?eY(eS):eA()},[eY,eA,eS]),eI=(0,oq.eZ)(),ek=rl(oa),eE=rc(nn),eD=(0,oe.A)(eI),(0,d.useEffect)(function(){var e=function(e){e&&(null!==n&&clearTimeout(n),n=setTimeout(function(){var e=eE();e&&eD.current(e)}))},n=null;e(ek.current);var t=ek.subscribe(e);return function(){null!==n&&clearTimeout(n),t()}},[ek,eD,eE]),eR=ra(tJ),eF=ru(oD),(0,d.useEffect)(function(){var e=function(){eF()};if(eR)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[eR,eF]),(0,xM.A)(),eU=ra(nI),eP=(0,oq.gB)(),eO=rc(nw),(0,oX.SJ)(function(){if(eU)return[cR.webviewRefresh.id,function(){var e=eO().filter(function(e){return"webview"===(0,u._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,u._)(i.value,1)[0],l=eP(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}]},[eU,eP,eO]),(0,xz.A)(),(0,xa.i)(!(null==(nD=nF.org)?void 0:nD.id));var nG=ap(),nN=(0,B.jt)();(0,d.useEffect)(function(){return s7.NA("replId",nF.id),function(){s7.NA("replId",void 0)}},[nF.id]),(0,d.useEffect)(function(){return s7.NA("agent",nN),(0,lP.$Y)(nN),function(){s7.NA("agent",void 0),(0,lP.qh)()}},[nN]),(0,xk.A)({repl:nF,currentUser:nU,container:nL}),eT=(0,eo.A)(),eM=(eL=(0,am.A)()).container,eG=eL.ports,eH=(0,u._)((eN=(0,p._)({},xp,void 0),m.n(xf,eN)),1)[0],ez=(0,uY.g)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,eW=(0,lN.oR)(),eB=(0,B.jt)(),ej=oC(),e$=(0,d.useCallback)(function(e){e.isForwarded&&!eB&&(eW||ej({pane:{type:"vnc"}}),eH({variables:{input:{id:eT,isVnc:!0}}}))},[eB,eW,eH,eT,ej]),eq=(0,d.useCallback)(function(e){var n=e.isForwarded,t=e.isOpen,r=e.data;n&&(void 0===t||t)&&!eB&&(ez&&!eW&&ej({pane:{type:"webview",data:r}}),eH({variables:{input:{id:eT,isServer:!0}}}))},[eW,eB,eT,eH,ez,ej]),(0,d.useEffect)(function(){return eG.portsState.subscribe(ec()(function(e){if(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.configuration,u=a.isOpen;if(l.isVnc)return void e$({isForwarded:u});var c=l.type===xh.gH.FORWARDED;eq({isForwarded:c,isOpen:u,data:{ports:function(e){var n=e.configuration;if(n.localPort)return{type:"local",path:"/",port:n.localPort};var t=(0,xh.Zd)(n);if(t)return{type:"external",path:"/",port:t}}(a)}})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},500,{leading:!0}))},[eM,eG.portsState,eq,e$]),(0,xZ.A)(),eK=(0,T._P)({controlName:"flag-open-telemetry-tracing"}),e3=(eZ=(eV=(0,u._)((0,d.useState)(!1),2))[0],eJ=eV[1],eQ=(eX=(0,u._)((0,d.useState)(Date.now()),2))[0],e0=eX[1],e2=(e1=(0,u._)((0,d.useState)(Date.now()),2))[0],e4=e1[1],(0,d.useEffect)(function(){var e=function(){eJ(!document.hidden),document.hidden?e4(Date.now()):e0(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),e5={visibility:eZ,visibleTime:eQ,hiddenTime:e2}).visibility,e6=e5.visibleTime,e8=e5.hiddenTime,(0,d.useEffect)(function(){eK&&e3&&(e6-e8)/1e3>60&&(0,G.O)(xB.rA)},[eK,e3,e8,e6]),e7=(0,am.A)().ports,e9=(0,uY.g)("forwardPortsAutomatically").preferences,(0,d.useEffect)(function(){e7.setForwardPortsAutomatically(e9.forwardPortsAutomatically)},[e9.forwardPortsAutomatically,e7]),(0,xo.A)(nF,nU);var nH=ru(np),nz=(0,hH.j)();(0,d.useEffect)(function(){nH(!nz)},[nz,nH]);var nW=ru(nf),nB=(0,xr.A)();(0,d.useEffect)(function(){nW(nB)},[nB,nW]),nt=(0,am.A)().presence,nr=(0,eo.A)(),no=(0,d.useRef)(!1),nc=(na={variables:{replId:nr}},nl=(0,p._)({},xS,na),nu=g.I(xY,nl)).data,ns=nu.loading,nd=0,(null==nc?void 0:nc.getRepl.__typename)==="Repl"&&(nd=nc.getRepl.multiplayers.length,(null==(ne=nc.getRepl.owner)?void 0:ne.__typename)==="User"&&(nd+=1)),(0,d.useEffect)(function(){if(!ns&&!no.current){var e=nt.onActiveUsersChange(function(){no.current=!0,e(),(0,oB.u4)(oB.AZ.MULTIPLAYER_REPL_OPENED,{replId:nr,participantsCount:nd,usersOnlineCount:nt.getActiveUsers().length})});return e}},[nr,ns,nd,nt]);var nj=(0,t_.c_)();(0,d.useEffect)(function(){nO.setWaitForFileClose(nj)},[nO,nj]);var n$=(0,xg.iO)(),nq=ra(nY);(0,d.useEffect)(function(){nq&&n$(nq)},[n$,nq]),nm=(ng=(0,am.A)()).packager,nv=ng.toolchain,(0,d.useEffect)(function(){var e=setTimeout(function(){(0,nZ._)(function(){var e,n,t,r,i,o,a,l,u,c;return(0,nJ.YH)(this,function(s){switch(s.label){case 0:if(!nv.configs.current||!nm)return[2];e=nv.configs.current.packagers,n=!0,t=!1,r=void 0,s.label=1;case 1:s.trys.push([1,7,8,9]),i=e[Symbol.iterator](),s.label=2;case 2:if(n=(o=i.next()).done)return[3,6];return a=o.value,[4,nm.listSpecfile(a.id)];case 3:var d;return(l=s.sent()).packages&&l.packages.length>0&&(u=l.packages.map(function(e){return e.name||""})||[],lP.vF.info("packager installed packages",{packagerId:a.id,language:a.language,packages:u}),(0,oB.u4)(vf.AZ.PACKAGER_PACKAGES_INSTALLED,{packages:u})),[4,(d=(5+5*Math.random())*1e3,(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){return setTimeout(function(){return e()},d)})];case 1:return e.sent(),[2]}})})())];case 4:s.sent(),s.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return c=s.sent(),t=!0,r=c,[3,9];case 8:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})()},(10+5*Math.random())*1e3);return function(){clearTimeout(e)}},[nm,nv.configs.current]),ny=(0,t_.RG)(),nb=(0,oq.eZ)(),(0,d.useEffect)(function(){var e=function(){var e=ny();e&&nb(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[nb,ny]),(0,xF.A)();var nK=ru(iI),nV=ru(ik),nQ=(0,am.A)().fs;(0,xW.A)({fs:nQ,openMultipleFiles:nK,openMultipleURLs:nV,waitForFileClose:nj,isMobileWorkspace:!1}),(0,oJ.Pt)({supportsAgent:nN}),(0,cC.I7)({dotReplit:nT}),(0,x0.en)();var n0=oC();(0,dB.Os)(dW.X.id,dW.F.ProjectPane,{onEnter:function(){return n0({pane:{type:"project"},commit:!0,activate:!0})}}),(0,xQ.A)(nM),nx=xA(),n_=(0,d.useCallback)(function(){nx({reveal:!1})},[nx]),(0,cC.bD)(n_,[n_]),(0,xC.u)(),(0,xR.M)(),(0,xK.H)(),(0,xP.k)(),(0,xT.t)(),(0,xO.i)(),(0,xD.E)(),(0,xU.e)(!!(null==(nR=nF.config)?void 0:nR.isAgentRepl));var n1=oC(),n2=(0,d.useCallback)(function(e){n1({pane:{type:e},activate:!1,reveal:!1,commit:!0})},[n1]);return(0,xt.A)({handleOpenPane:n2}),(0,xL.A)(),nS=oM().setAgentPosition,nA=(0,uY.g)("agentPosition").preferences.agentPosition,(0,d.useEffect)(function(){nS(nA)},[nS,nA]),(0,uF.R9)(),nk=rc(nh),nE=oC(),nC=function(e){var n,t=nk();(null==(n=t.tiling)?void 0:n.type)==="paneGroup"&&1===t.tiling.panes.length&&nE({pane:e,activate:!1})},(0,B.zv)("received-completed-event",function(e){var n=e.event.contents.contents;if((0,x1.VF)(n,"agentTimelineEventContents")){var t=n.agentTimelineEventContents.toolData;(null==t?void 0:t.$kind)==="createPostgresqlDatabaseData"&&nC({type:"neon"})}}),null}var x4=t(62293);function x5(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,c.Y)(c.FK,{children:n});var i="workspace-desktop-new-user-tour"===t.id||"workspace-desktop-tour-2024"===t.id;function o(e){i&&t&&(0,oB.ls)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,c.Y)(x4.f,{tour:t,onStep:function(e){t&&((0,oB.u4)(oB.AZ.WORKSPACE_TOUR_STEP_VIEWED,{tour:t.id,stepId:e.toLowerCase()}),o(e))},onDone:function(e){(0,oB.u4)(oB.AZ.WORKSPACE_TOUR_DISMISSED,{tour:t.id,stepId:e.toLowerCase(),didComplete:e===t.steps[t.steps.length-1].id}),o(e)},children:n})}var x3=t(44007),x6=t(95353),x8=t(2418),x7=t(63082),x9=t.n(x7),_e=t(10409);function _n(){var e=(0,ed.J2)((0,sP.S)()),n=(0,ed.J2)((0,sU.e)()),t=_e.O.prompt;return e?t=_e.O.agentWorking:n&&(t=_e.O.agentWaiting),t?(0,c.Y)(x9(),{children:(0,c.Y)("link",{rel:"shortcut icon",href:t,sizes:"192x192",type:"image/png"})}):null}var _t=t(63570),_r=t(27144),_i=t(21234),_o=t(5278);function _a(){var e=(0,f._)(["\n  query PublishedAs($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n    }\n  }\n"]);return _a=function(){return e},e}var _l={},_u=(0,h.J1)(_a()),_c=t(73920),_s=t(95570),_d=".replit-dynamic-template",_p=t(66541),_f=t(95069),_h=t(68898);function _g(){var e,n,t,r,i,o,a,l,s,f,h,m,v,w,y,b,x,_,S,Y=(0,u._)((0,d.useState)(!1),2),A=Y[0],I=Y[1],k=(0,d.useCallback)(function(e){switch(e){case"starting":return void I(!0);case"none":return void I(!1);case"running":if(!A)throw Error("expected repl not to need dynamic template initialization")}},[I,A]),E=(0,u._)((0,d.useState)([]),2),C=E[0],D=E[1],R=(0,vK.c)();n=(e={handleRPC:(0,d.useCallback)(function(e){switch(e.type){case"progress":case"failed":return D(function(n){return(0,eE._)(n).concat([(0,p._)({key:R(n.length)},e)])}),null;case"query":case"prompt":case"confirm":var n=(0,_o.A)();return D(function(t){return(0,eE._)(t).concat([(0,p._)({respond:n,key:R(t.length)},e)])}),n.promise;default:throw Error("unhandled request type: "+JSON.stringify(e))}},[R]),onConnStateChange:k}).handleRPC,t=e.onConnStateChange,r=(0,T._P)({controlName:"octopus-smokescreen"}),l=(i={variables:{id:(0,eo.A)()}},o=(0,p._)({},_l,i),a=g.I(_u,o)).loading,s=a.data,f=(0,K.A)(function(){if(l)return!1;var e=null==s?void 0:s.getRepl;return(null==e?void 0:e.__typename)==="Repl"&&e.publishedAs===pj.Q_w.Template},[l,s]),m=(h=(0,am.A)()).container,v=h.fs,y=(w=(0,u._)((0,d.useState)(!1),2))[0],b=w[1],_=(x=(0,mz.A)({container:m,service:"exec",skip:!y})).channel,S=x.isConnecting,(0,d.useEffect)(function(){!r||f||l||(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,v.stat(_d)];case 1:return b(e.sent().exists),[2]}})})()},[v,r,f,l,b]),(0,d.useEffect)(function(){if(!S){if(!_)throw Error("exec channel is not open");var e=(0,_o.A)();e.promise.then(function(){return(0,nZ._)(function(){var e;return(0,nJ.YH)(this,function(n){switch(n.label){case 0:return[4,_.request({input:JSON.stringify({type:"start"})+"\n"})];case 1:if(!(e=n.sent()).ok)throw Error((e.error,": "+e.error));return[2]}})})()});var r=_.onCommand(function(r){switch(r.body){case"state":r.state===_c.api.State.Running?(t("starting"),e.resolve()):t("none");return;case"output":var i,o,a=r.output;if(!a)return;try{o=JSON.parse(a)}catch(e){throw Error("failed to parse dynamic template output: ".concat(e))}null==(i=n(o))||i.then(function(e){return _.send({input:JSON.stringify(e)+"\n"})});return;case"stderr":_s.warn("got dynamic template generator stderr:",r.stderr);return;case"error":_s.error("got dynamic template generator error:",r.error);return;case"ok":return;default:throw Error("unhandled exec channel body: ".concat(r.body))}});return _.send({exec:{args:["sh",_d],lifecycle:_c.api.Exec.Lifecycle.STDIN}}),function(){r()}}},[_,n,S,t,y]);var F=C.map(function(e){switch(e.type){case"progress":return(0,c.Y)(_m,(0,p._)({},e));case"failed":return(0,c.Y)(_v,(0,p._)({},e));case"query":return(0,c.Y)(_w,(0,p._)({},e));case"prompt":return(0,c.Y)(_y,(0,p._)({},e));case"confirm":return(0,c.Y)(_b,(0,p._)({},e))}});return(0,c.Y)(o3.a,{isOpen:A,onRequestClose:function(){return I(!1)},children:(0,c.Y)(ou.S,{gap:8,children:F})})}function _m(e){var n=e.progress,t=(0,cQ._)(e,["progress"]);return(0,c.FD)(ou.S,(0,r4._)((0,p._)({},t),{children:["progress: ",n]}))}function _v(e){var n=e.error,t=(0,cQ._)(e,["error"]);return(0,c.FD)(ou.S,(0,r4._)((0,p._)({},t),{children:["error: ",n]}))}function _w(e){var n=e.query,t=e.options,r=e.respond,i=(0,cQ._)(e,["query","options","respond"]),o=(0,u._)((0,d.useState)(null),2),a=o[0],l=o[1],s=(0,u._)((0,d.useState)(!1),2),f=s[0],h=s[1],g=(0,vK.c)(),m=(0,d.useCallback)(function(){null!==a&&(h(!0),r.resolve({type:"answer",answer:t[a]}))},[a,t,r]);return(0,c.FD)(ou.S,(0,r4._)((0,p._)({},i),{children:["query: ",n,t.map(function(e,t){return(0,c.FD)("label",{children:[(0,c.Y)("input",{type:"radio",name:n,value:t,checked:a===t,onChange:function(){f||l(t)}}),e]},g(t))}),(0,c.Y)(al.$n,{text:"submit",onClick:m})]}))}function _y(e){var n=e.prompt,t=e.respond,r=(0,cQ._)(e,["prompt","respond"]),i=(0,u._)((0,d.useState)(""),2),o=i[0],a=i[1],l=(0,u._)((0,d.useState)(!1),2),s=l[0],f=l[1],h=(0,d.useCallback)(function(){f(!0),t.resolve({type:"answer",answer:o})},[o,t]);return(0,c.FD)(ou.S,(0,r4._)((0,p._)({},r),{children:["prompt: ",n,(0,c.Y)(vV.pd,{disabled:s,inputMode:"text",title:n,onChange:function(e){return a(e.currentTarget.value)}}),(0,c.Y)(al.$n,{text:"submit",onClick:h})]}))}function _b(e){var n=e.confirm,t=e.dataConfirmation,r=e.respond,i=(0,cQ._)(e,["confirm","dataConfirmation","respond"]),o=Object.keys(t),a=Object.values(t);return(0,c.FD)(ou.S,(0,r4._)((0,p._)({},i),{children:["confirm: ",n,(0,c.FD)(_p.A,{"aria-label":"the data to be used to generate your App",children:[(0,c.Y)(_h.A,{children:o.map(function(e){return(0,c.Y)(_i.VP,{isRowHeader:!0,children:e},e)})}),(0,c.Y)(_f.A,{children:(0,c.Y)(_i.fI,{children:a.map(function(e,n){return(0,c.Y)(_i.fh,{children:e},o[n])})})})]}),(0,c.Y)(al.$n,{text:"yes",onClick:function(){return r.resolve({type:"answer",answer:"yes"})}}),(0,c.Y)(al.$n,{text:"no",onClick:function(){return r.resolve({type:"answer",answer:"no"})}})]}))}var _x=t(10681),__=t(22198);let _S=function(e){return(0,c.Y)(o3.a,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,c.FD)(ou.S,{gap:24,children:[(0,c.Y)(au.Y9,{variant:"headerDefault",level:2,css:ol.wp.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,c.Y)(au.EY,{children:"Never miss messages from your collaborators if youre in another tab or window."}),(0,c.FD)(ou.S,{row:!0,gap:12,justify:"end",children:[(0,c.Y)(al.$n,{onClick:e.onCancel,text:"Deny",iconLeft:(0,c.Y)(c0.A,{})}),(0,c.Y)(al.$n,{text:"Allow notifications",colorway:"positive",iconLeft:(0,c.Y)(dQ.A,{}),onClick:e.onConfirm})]})]})})};var _Y=t(7069),_A=t(91981),_I=t(49540),_k=t(69681),_E=t.n(_k),_C=(0,ry.CK)("index.module.css",["--x","--y","--width","--height","--z-index","--expand-blanket-opacity","--expand-blanket-pointer-events","--expand-blanket-width","--sidebar-resize-handle-width","--sidebar-resize-handle-grip-color"]);function _D(){}function _R(){var e=oT(),n=ru(iD),t=ra(iR),r=(0,am.A)(),i=r.secrets,o=r.fs,a=oC(),l=(0,d.useCallback)(function(e){(0,oB.u4)(vf.AZ.TOOL_OPENED,{source:"Agent Sidebar",tool:e.type}),a({pane:e})},[a]),s=vl(),p=(0,vu.n)(),f=p.session,h=p.setSession,g=p.setSessionId,m=oM(),v=(0,d.useRef)(null);(0,rv.d)(v,mA(m.rect,m.getTransitionEnabled),function(e){var n;return n={},(0,N._)(n,_C.x,e.x+"px"),(0,N._)(n,_C.y,e.y+"px"),(0,N._)(n,_C.width,e.width+"px"),(0,N._)(n,_C.height,e.height+"px"),n});var w=(0,us.A)(m.displayState),y=(0,u._)((0,d.useState)(null),2),b=y[0],x=y[1],_=m.setChatRef;(0,d.useEffect)(function(){if(b)return _({setSessionId:g,focusInput:function(){return b.focus()}}),function(){_(null)}},[b,_,g]);var S=(0,t9.p)(),Y=(0,dB.Jw)(hA,hc.Agent);return(0,c.FD)(o6.ui,{elevated:"centered"!==w&&!S,innerRef:v,clsx:_E().root,style:(0,N._)({},_C.zIndex,rw.W.tiledPane.toString()),children:[(0,c.Y)(vc.j,{secrets:i,readFile:o.readFile,session:f,setSession:h,openPane:l,onPlanApproval:function(e){e&&s(e),n("tilingLayout")},isDesktopOrTabletAgentPresentationCentered:"centeredVisualPlanner"===e,isDesktopLayoutAgentPresentationTransitionInProgress:t,openPip:_D,inputRef:x,workspaceTourStepRef:Y}),(0,c.Y)(_F,{})]})}var _F=(0,d.memo)(function(){var e,n=(0,d.useRef)(null),t=oM(),r=(0,d.useRef)(null);(0,rv.d)(r,t.gutter,function(e){return(0,N._)({},_C.sidebarResizeHandleWidth,e+"px")});var i=(0,us.A)(t.agentFiletreeOrder);return(0,c.Y)(ou.S,{innerRef:r,clsx:[_E().sidebarResizeHandle,(e={},(0,N._)(e,_E().left,"filetree-agent"===i),(0,N._)(e,_E().right,"agent-filetree"===i),e)],align:"center",justify:"center",onDoubleClick:function(){t.toggle("collapsed"===t.displayState.current)},onPointerDown:function(e){(0,ud.j)(e,{start:function(){n.current=document.activeElement,t.resizeSidebar({type:"start"})},move:function(e){var n=e.delta;t.resizeSidebar({type:"update",moveDelta:n})},end:function(){var e,r;t.resizeSidebar({type:"end"}),null==(r=n.current)||null==(e=r.focus)||e.call(r)}})}})}),_U=t(48495),_P=t.n(_U);(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"b"});var _O=(0,ry.CK)("index2.module.css",["--width","--height","--transform","--pointer-events","--opacity","--z-index"]),_T=(0,d.memo)(function(){var e=(0,d.useRef)(null),n=oL(),t=n.view;(0,rv.d)(e,mA(t,n.getTransitionEnabled),function(e){var n;return n={},(0,N._)(n,_O.width,e.width+"px"),(0,N._)(n,_O.height,e.height+"px"),(0,N._)(n,_O.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,N._)(n,_O.pointerEvents,e.isOpen?"all":"none"),(0,N._)(n,_O.opacity,e.opacity.toString()),(0,N._)(n,_O.zIndex,rw.W.filetreeDragLayer.toString()),n});var r=uj(),i=r.filetree,o=r.activeModal,a=r.closeModal,l=r.onRootContextMenu;return(0,c.FD)(c.FK,{children:[(0,c.FD)(o6.ui,{clsx:_P().root,innerRef:e,children:[(0,c.Y)(_L,{filetree:i}),(0,c.FD)(ou.S,{clsx:_P().content,grow:!0,shrink:!0,children:[(0,c.Y)(uS,{onContextMenu:l}),(0,c.Y)(ou.S,{grow:!0,shrink:!0,dataCy:"sidebar-filetree-section",children:(0,c.Y)(l3.J,{store:i.store})})]}),(0,c.Y)(ug,{})]}),(0,c.FD)(o3.a,{isOpen:!!o,onRequestClose:a,children:[(null==o?void 0:o.type)==="conflicts"?(0,c.Y)(l6.A,{paths:o.data.conflicts.map(function(e){return e.path}),onCancel:a,onConfirm:function(){var e=o.data;"move"===e.type?i.move({nodes:e.nodes,to:e.to,overwrite:!0}):i.upload({files:e.files,parentPath:e.to,overwrite:!0}),a()}}):null,(null==o?void 0:o.type)==="deleteNode"?(0,c.Y)(u$.A,(0,r4._)((0,p._)({},(0,ul.D)(o.data.nodes)),{delete:function(){return o.data.confirm()},hideModal:a})):null]})]})});function _L(e){var n=e.filetree,t=oL().toggle,r=(0,d.useCallback)(function(){return t(!1)},[t]);return(0,c.FD)(ou.S,{clsx:_P().header,row:!0,gap:4,align:"center",pl:6,pr:4,children:[(0,c.Y)(ou.S,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:(0,c.Y)(au.EY,{css:_P().title,children:"Files"})}),(0,c.FD)(ou.S,{row:!0,gap:0,align:"center",children:[(0,c.Y)(sL.K0,{dataCy:"filetree-add-file",alt:"New file",onClick:function(){n.create(tH.pt.File)},children:(0,c.Y)(uq.A,{})}),(0,c.Y)(sL.K0,{alt:"New folder",onClick:function(){n.create(tH.pt.Directory)},children:(0,c.Y)(uK.A,{})}),(0,c.Y)(uc.U,{closeFiletree:r,filetree:n})]})]})}var _M=(0,rb.x)({root:[ol.wp.position.absolute,ol.wp.borderRadius(8),ol.wp.pt(16),ol.wp.align.center,{border:"1px solid",borderColor:ry.LU.outlineDimmest}],content:[ol.wp.width("100%"),ol.wp.flex.growAndShrink(1)]});function _G(){var e=ra(rG),n=ra(n2),t=ru(tA),r=function(){var e,n=(0,u._)((0,mS.H)({accept:[tH.pt.File,mW.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){i.drag()},drop:function(e){if("nodes"===e.type){var n=(0,ne.u9)(e.nodes);n.length>0&&i.drop({panes:n})}}}),2),t=n[0].isOver,r=n[1],i=(e=ru(r_),(0,d.useEffect)(function(){t||e(null)},[t,e]),{drag:ru(rL),drop:ru(rM)});return r}(),i=vy({openPane:(0,d.useCallback)(function(e){(0,oB.u4)(oB.AZ.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),t({pane:e.pane,edge:"left"})},[t])});return(0,c.Y)(ou.S,{style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)"),zIndex:n?100:void 0},css:_M.root,innerRef:r,children:(0,c.Y)(ou.S,{css:_M.content,children:(0,c.Y)(o8.r,{autoFocus:!0,command:i,showToolDescriptions:!0})})})}var _N=ep.ZU.Object({width:ep.ZU.Number({minimum:0})}),_H=ep.ZU.Object({layout:ex,data:ep.ZU.Record(ep.ZU.String(),ep.ZU.Object({type:ep.ZU.String()})),agent:ep.ZU.Optional(_N)});function _z(e,n,t){var r=null;try{r=va.T(_H,e)}catch(e){}if(null===r)return null;var i={layout:r.layout,data:{},type:"saved",agent:r.agent},o=new Set,a=function(e){var n=new Set,t=!0,r=!1,i=void 0;try{for(var o,a=e.floating[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,u=!0,c=!1,s=void 0;try{for(var d,p=l.panes[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;n.add(f)}}catch(e){c=!0,s=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw s}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e.tiling&&function e(t){if("paneGroup"!==t.type)return t.children.forEach(e);var r=!0,i=!1,o=void 0;try{for(var a,l=t.panes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;n.add(u)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(e.tiling),n}(i.layout),l=!0,c=!1,s=void 0;try{for(var d,p=Object.entries(r.data)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=(0,u._)(d.value,2),h=f[0],g=f[1];if(a.has(h)){var m=n(g.type,g);if(!m){o.add(h);continue}i.data[h]=m}}}catch(e){c=!0,s=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw s}}return(0,eK.jM)(i,function(e){var n=function(n){if(a.has(n))return void eW(e.layout,n)},r=!0,i=!1,l=void 0;try{for(var c,s=o[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var d=c.value;n(d)}}catch(e){i=!0,l=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw l}}var p=!0,f=!1,h=void 0;try{for(var g,m=Object.entries(e.data)[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=(0,u._)(g.value,2),w=v[0],y=v[1];("commands"===y.type||"codeEditor"===y.type&&!y.data.path||"agentProgress"===y.type||t.wsUiSimplification&&"agentChat"===y.type)&&(delete e.data[w],n(w))}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}})}var _W=t(77986),_B=t(81160),_j=t(82804),_$=t.n(_j);function _q(e){var n,t,r,i,o,a,l,f,h,g,m,v,w,y,b,x,_,S,Y=e.repl,A=e.currentUser,I=(0,s.useRouter)(),k=(0,Z.pE)("enterInAgentMode","boolean"),E=(0,Z.pE)("agent","boolean"),C=(0,Z.pE)("enterInExpertMode","boolean"),D=(0,Z.pE)("popupId","string"),R=(0,V.Po)(I),F=(0,V.ME)(I,"workspace2"),U=(0,t7.E)(),P=(0,u._)((0,d.useState)(function(){var e;return(0,ne.HJ)({config:(e=(0,bJ.P)(),(0,r4._)((0,p._)({},e),{webview:bV,commands:vS,docs:vD,tutorial:bM,extension:vL,extensionStore:yw,replAuth:y_,searchReplace:bI,deployments:bQ.B,config:vk,integrations:b0.u,extensionDevtools:yp,csvPreview:bX.J,agentChat:vd,agentProgress:b1.M,multiplayer:b1.M})),filePaneFlag:U})}),1)[0],O=(0,T._P)({controlName:"flag-agent-everywhere"}),L=null,M=(0,Z.pE)("gitImport","boolean"),G=!!Y.config.isAgentRepl,N=!!Y.config.isAgentStack,H=k||G||O,z=(0,t9.p)();D?L=_z(!(w=nQ.A.get(n3(D)))||"string"==typeof w&&parseInt(w,10)<Date.now()?null:nQ.A.get(n5(D)),P.decode,{isAgentChatEnabled:H,wsUiSimplification:z}):Y.layoutState?L=_z(Y.layoutState,P.decode,{isAgentChatEnabled:H,wsUiSimplification:z}):M&&!O&&(L={type:"default",data:Object.values(y={config:{paneId:(0,nq.A)(),pane:{type:"config",flow:"githubImport"}},codeEditor:{paneId:(0,nq.A)(),pane:{type:"codeEditor",data:{path:""}}},output:{paneId:(0,nq.A)(),pane:{type:"runnerOutput"}},shell:{paneId:(0,nq.A)(),pane:{type:"shell"}}}).reduce(function(e,n){var t=n.pane;return e[n.paneId]=t,e},{}),layout:{floating:[],tiling:{type:"split",percent:100,stacked:!1,children:[{id:(0,nq.A)(),type:"paneGroup",percent:40,activeIndex:0,panes:[y.config.paneId]},{type:"split",percent:60,stacked:!0,children:[{id:(0,nq.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[y.codeEditor.paneId]},{id:(0,nq.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[y.output.paneId,y.shell.paneId]}]}]}}}),(E||G||O)&&(S=L?"saved":C?"split-with-console":N?"split-with-automations":"split-with-webview");var W=(l=(n={repl:Y,currentUser:A,isAgentChatEnabled:H,enteredWithAgentPrompt:k}).repl,f=n.currentUser,g=void 0!==(h=n.isAgentChatEnabled)&&h,m=n.enteredWithAgentPrompt,v=(0,t9.p)(),l&&f&&null==l.lesson&&!l.config.isInPlanningPhase&&(!v||g)?void 0!==m&&m||f.hasSeenWorkspaceTour2024&&f.hasSeenWorkspaceTour2025?g?null:!f.hasSeenProjectsTour2024&&(null==(a=l.project)?void 0:a.id)?dW.X:null:(r=(t={hasAgentTool:g,wsUiSimplification:v,hasSeenWorkspaceTour2024:f.hasSeenWorkspaceTour2024}).hasAgentTool,i=t.wsUiSimplification,o=t.hasSeenWorkspaceTour2024,i?{id:hA,steps:[o?hh:hf,hv,hb,h_,hx],options:{disableAnimation:!0}}:{id:hY,steps:[r?hp:hg,hm,hv,hy,hS].filter(Boolean),options:{disableAnimation:!0}}):null),B=(b=(0,Z.pE)("deploymentPane","boolean"),x=(0,Z.pE)("projectPane","boolean"),(0,K.A)(function(){return b?{type:"deployments"}:x?{type:"project"}:void 0},[b,x])),$=(!!(null==(_=Y.origin)?void 0:_.id)||C)&&!Y.config.isInPlanningPhase,q=(k||!!Y.config.isInPlanningPhase)&&!Y.config.figmaUrl&&!$;return(0,c.FD)(J.Ve,{currentUsername:A.username,replId:Y.id,children:[(0,c.Y)(uF.CP,{children:(0,c.Y)(ri,{initialPane:B,savedLayoutState:L,isExtension:!!Y.config.isExtension,isBlankRepl:j(Y),popupId:D,agentCenteredLayout:q,agentLayoutVariation:S,agentPosition:A.workspacePreferences.agentPosition,children:(0,c.Y)(x5,{tour:W,userId:A.id,children:(0,c.Y)(_K,{ui:P,repl:Y,currentUser:A,isBonsaiWebview:R,doesBonsaiSupportWorkspace2:F,agentChatEnabled:H,enterInExpertMode:C,agentIsEverywhere:O},Y.id)})})}),(0,c.Y)(X.A,{})]})}function _K(e){var n,t,r,i,o,a,l,s,p,f,h,g,m,v,w,y,b,x,_,S=e.repl,Y=e.currentUser,A=e.isBonsaiWebview,I=e.doesBonsaiSupportWorkspace2,k=e.ui,E=e.agentChatEnabled,C=e.agentIsEverywhere,D=e.enterInExpertMode,R=(n=oR(),t=ru(iI),r=ru(ik),i=(0,xg.iO)(),o=(0,T._P)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),a="html"===S.language?"html":"outputs",s=(l=(0,u._)((0,d.useState)(!1),2))[0],p=l[1],h=(f=(0,u._)((0,d.useState)(!1),2))[0],g=f[1],m=(0,fj.q6)(),v=(0,fj.DJ)(),w=(0,T._P)({controlName:"flag-open-telemetry-tracing"}),y=(0,T._P)({controlName:"flag-multi-lsp-connections"}),b=(0,K.A)(function(){return{runnerMode:a,onPresenceCommand:m,getColorForUser:v,onUnrecoverableError:(0,x8.A)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===$.ub.NotAllowed?p(!0):e===$.ub.RequiresRefresh&&g(!0)},throwBsod:i}),openFile:n,openMultipleFiles:t,openMultipleURLs:r,enableUserEvents:o,enableMultipleLSPClientsPerFile:y,openTelemetryTracing:w,enableReplspaceSshTokenPassthrough:!0}},[o,a,n,t,r,i,m,v,w,y]),x=(0,x3.q)(b),(0,K.A)(function(){return{services:x,isPleaseRefresh:h,isNotAllowed:s}},[x,h,s])),F=R.services,U=R.isPleaseRefresh,P=R.isNotAllowed,O=(0,bz.z)(),L=O.setExpertMode,M=O.isExpertMode;(0,d.useEffect)(function(){D&&L&&C&&!M&&L(!0)},[L,C,D,M]),(0,_I.X$)(!!S.layoutState);var G=(0,K.A)(function(){return(0,sW.Y)(null==Y?void 0:Y.keybindings.keybindings)},[Y]);if(!F)return null;var N=S.authorizations.useAdvancedChat.isAuthorized;return(0,c.Y)(B.KH,{replId:S.id,currentUser:Y,hasAccessToAdvancedModel:N,agentChatEnabled:E,orgId:null==(_=S.org)?void 0:_.id,children:(0,c.Y)(uH.SF,{children:(0,c.FD)(sK,{services:F,ui:k,repl:S,userKeybindings:G,children:[(0,c.FD)(mB.A,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,c.Y)(sm,{}),(0,c.Y)(cW,{isAdmin:Y.isAdmin,isSubscribed:Y.isSubscribed}),(0,c.Y)(_Y.A,{repl:S}),A&&!I?(0,c.Y)(s5,{}):null,(0,c.Y)(an,{}),(0,c.Y)(sX,{repl:S}),(0,c.Y)(x2,{repl:S,currentUser:Y}),(0,c.Y)(dh,{}),(0,c.Y)(dd,{}),(0,c.Y)(_J,{isBonsaiWebview:A,doesBonsaiSupportWorkspace2:I,repl:S,currentUser:Y}),(0,c.Y)(l1,{}),(0,c.Y)(lZ,{}),(0,c.Y)(_t.A,{}),(0,c.Y)(_g,{}),(0,c.Y)(_Z,{isMultiplayerSession:S.multiplayers.length>0}),(0,c.Y)(_x.A,{isOpen:P}),(0,c.Y)(__.A,{isOpen:U}),(0,c.Y)(_B.$,{}),(0,c.Y)(_W.F,{}),(0,c.Y)(l$,{}),(0,c.Y)(sQ,{}),(0,c.Y)(_r.P,{}),(0,c.Y)(_A.y,{repl:S}),(0,c.Y)(oW,{})]}),(0,c.Y)(_V,{replId:S.id})]})})})}function _V(e){var n,t=e.replId,r=(0,u._)((0,xg.eY)(),1)[0],i=(0,u._)((n=(0,p._)({},z,void 0),m.n(W,n)),1)[0],o=(0,d.useCallback)(function(){i({variables:{input:{replId:t,state:{}}}})},[i,t]);return(0,d.useEffect)(function(){r&&o()},[r,o]),(0,c.Y)(x6.A,{})}function _Z(e){var n,t,r,i,o,a=(n=e.isMultiplayerSession,r=(t=(0,u._)((0,d.useState)(!1),2))[0],i=t[1],o=(0,dB.qv)(),(0,d.useEffect)(function(){!o&&n&&"default"===mw()&&i(!0)},[n,o]),{shouldShowModal:r,hideModal:(0,d.useCallback)(function(){mb(!0),i(!1)},[]),confirm:(0,d.useCallback)(function(){return(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){switch(e.label){case 0:return[4,(0,nZ._)(function(){return(0,nJ.YH)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})()];case 1:return e.sent(),mb(!1),[2]}})})()];case 1:return e.sent(),i(!1),[2]}})})()},[])}),l=a.shouldShowModal,s=a.hideModal,p=a.confirm;return l?(0,c.Y)(_S,{onCancel:s,onConfirm:p}):null}var _J=(0,d.memo)(function(e){var n,t,r,i,o,a,l,u=e.isBonsaiWebview,s=e.doesBonsaiSupportWorkspace2,p=e.repl,f=e.currentUser,h=(n=ru(nz),t=(0,q.A)(),r=(0,dg.vm)(),i=(0,dg.d0)(),o=(r||i)&&t?re.uF:0,a=(0,d.useRef)(null),l=(0,gY.A)(function(e){var t=e.width,r=e.height;if(t&&r&&a.current){var i=a.current.getBoundingClientRect(),l=i.top;n({width:t,height:r,x:i.left,y:l-o})}}),(0,d.useCallback)(function(e){a.current=e,l(e)},[l])),g=ra(nS),m=ra(eZ),v=ra(eJ),w=ra(eX),y=(0,d.useRef)(null),b=(0,B.jt)(),x=(0,d.useCallback)(function(e){h(e),y.current=e},[h]),_=(0,t9.p)(),S=(0,q.A)();return(0,c.FD)(o6.ui,{innerRef:x,clsx:[_$().contentContainer,(0,N._)({},_$().desktopApp,S)],style:_?void 0:{backgroundColor:"transparent"},children:[g?(0,c.FD)(c.FK,{children:[u&&!_?(0,c.Y)(gS,{doesBonsaiSupportWorkspace2:s}):(0,c.Y)(c.FK,{children:_?(0,c.Y)(md,{repl:p,currentUser:f}):(0,c.Y)(gg,{repl:p,currentUser:f})}),_?(0,c.Y)(_T,{}):(0,c.Y)(uQ,{}),(0,c.FD)("main",{id:"main-content",children:[v.map(function(e){return(0,c.Y)(xn,{handleId:e},e)}),w.map(function(e){return(0,c.Y)(vo,{headerId:e},e)}),m.map(function(e){return(0,c.Y)(mV,{paneId:e},e)}),0===m.length?(0,c.Y)(_G,{}):null]}),(0,c.Y)(rO,{}),(0,c.Y)(oY,{}),(0,c.Y)(sE,{}),(0,c.Y)(uH.tz,{}),_&&b?(0,c.Y)(_R,{}):null]}):null,(0,c.Y)(_n,{})]})}),_X=t(84149),_Q=t(44263),_0=t(85916),_1=t(58124),_2=t(11756),_4=t(46356),_5=t(78950),_3=t(6609),_6=t(99968),_8=t(28659),_7=t.n(_8);let _9=function(){var e,n,t,r=null,i=(0,s.useRouter)().query;if(!i.replUrl)throw Error("Expected replUrl to be set");if(!i.replId)throw Error("Expected replId to be set");var o=(0,u._)((0,M.t)(),2),a=(o[0],o[1]),l=i.replUrl.toString(),f=i.replId.toString(),h=(0,L.A)(f).loading,m=(e={variables:{replId:f,environment:(0,_1.v)(),platform:(0,_2.V)()},ssr:!!i.ssr},n=(0,p._)({},U,e),g.I(P,n)),v=m.data,w=m.loading,y=m.error,b=(0,T._P)({controlName:"flag-token-email-verification"}),x=(null==v?void 0:v.currentUser)||void 0,_=(null==v?void 0:v.getRepl)&&("Repl"===v.getRepl.__typename||"ReplRedirect"===v.getRepl.__typename||"ReplSubscriptionExpired"===v.getRepl.__typename)?v.getRepl:null,S=(null==v?void 0:v.getRepl)&&"Repl"!==v.getRepl.__typename&&"ReplRedirect"!==v.getRepl.__typename&&"ReplSubscriptionExpired"!==v.getRepl.__typename?v.getRepl.message:null,Y=(null==_?void 0:_.__typename)==="Repl"?_:null,A="https://replit.com".concat(l),I=null!=(t=null==Y?void 0:Y.description)?t:void 0,k=null!=S?S:null==y?void 0:y.message,E=(0,u._)((0,d.useState)(!1),2),C=E[0],D=E[1];(0,d.useEffect)(function(){return D(!0)},[]);var R=b&&x&&!x.isVerified;return r=R?(0,c.Y)(ou.S,{clsx:_7().emailVerificationWrapper,grow:!0,shrink:!0,children:(0,c.Y)(O.A,{})}):k?(0,c.Y)(ou.S,{align:"center",justify:"center",grow:!0,shrink:!0,children:(0,c.Y)(au.EY,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):w||!C||a||h?(0,c.Y)(ou.S,{clsx:_7().loadingAnimationWrapper,grow:!0,shrink:!0,children:(0,c.Y)(_5.A,{height:100})}):Y&&x?(0,c.Y)(_4.A.Provider,{value:Y.id,children:(0,c.Y)(_q,{repl:Y,currentUser:x},Y.id)}):(0,c.Y)(ou.S,{clsx:_7().loadingAnimationWrapper,grow:!0,shrink:!0,children:(0,c.Y)(_5.A,{height:100})}),(0,c.Y)(_3.A,{children:(0,c.FD)(_6.A,{dataCy:"workspace-page",title:"".concat((null==Y?void 0:Y.title)||"Loading..."),oembedUrl:A,description:I,noHeader:!R,noMain:!R,noSidebar:!R,noFooter:!0,hideEmailVerify:!0,children:[(0,c.Y)(G.d,{}),(0,c.Y)(_0.A,{replResponse:_,replUrl:l,children:(0,c.FD)(o6.ui,{clsx:_7().surface,children:[(0,c.Y)(_X.z,{}),(0,c.Y)(_Q.u,{}),r]})})]})})}},29765:(e,n,t)=>{"use strict";t.d(n,{cr:()=>u,ZA:()=>I});var r=t(95570),i="object"==typeof localStorage&&(localStorage.getItem("debug")?.includes("next-usequerystate")||localStorage.getItem("debug")?.includes("nuqs"))||!1;function o(e,...n){if(!i)return;let t=function(e,...n){return e.replace(/%[sfdO]/g,e=>{let t=n.shift();return"%O"===e&&t?JSON.stringify(t).replace(/"([^"]+)":/g,"$1:"):String(t)})}(e,...n);performance.mark(t),r.log(e,...n)}function a(e,n,t){try{return e(n)}catch(e){return!function(e,...n){i&&r.warn(e,...n)}("[nuqs] Error while parsing value `%s`: %O"+(t?" (for key `%s`)":""),n,e,t),null}}function l(e){function n(n){if(void 0===n)return null;let t="";if(Array.isArray(n)){if(void 0===n[0])return null;t=n[0]}return"string"==typeof n&&(t=n),a(e.parse,t)}return{...e,parseServerSide:n,withDefault(e){return{...this,defaultValue:e,parseServerSide:t=>n(t)??e}},withOptions(e){return{...this,...e}}}}l({parse:e=>e,serialize:e=>`${e}`}),l({parse:e=>{let n=parseInt(e);return Number.isNaN(n)?null:n},serialize:e=>Math.round(e).toFixed()}),l({parse:e=>{let n=parseInt(e,16);return Number.isNaN(n)?null:n},serialize:e=>{let n=Math.round(e).toString(16);return n.padStart(n.length+n.length%2,"0")}}),l({parse:e=>{let n=parseFloat(e);return Number.isNaN(n)?null:n},serialize:e=>e.toString()});var u=l({parse:e=>"true"===e,serialize:e=>e?"true":"false"});l({parse:e=>{let n=parseInt(e);return Number.isNaN(n)?null:new Date(n)},serialize:e=>e.valueOf().toString()}),l({parse:e=>{let n=new Date(e);return Number.isNaN(n.valueOf())?null:n},serialize:e=>e.toISOString()});var c={409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using %s, but %s was about to load on top.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for keys %s. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function s(e){return`[nuqs] ${c[e]}
  See https://err.47ng.com/NUQS-${e}`}var d=t(16614),p=t(21462),f=t(95570),h=function(){if("undefined"==typeof window||!window.GestureEvent)return 50;try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}(),g=new Map,m={history:"replace",scroll:!1,shallow:!0,throttleMs:h},v=new Set,w=0,y=null;function b(e){return g.get(e)??null}function x(e,n){let t=e.split("#")[0]??"";return t+function(e){if(0===e.size)return"";let n=[];for(let[t,r]of e.entries())n.push(`${t}=${r.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E")}`);return"?"+n.join("&")}(n)+location.hash}var _=Symbol("__nuqs__SYNC__"),S="__nuqs__NO_SYNC__",Y=Symbol("__nuqs__NOTIFY__"),A=function(e){return{all:e=e||new Map,on:function(n,t){var r=e.get(n);r?r.push(t):e.set(n,[t])},off:function(n,t){var r=e.get(n);r&&(t?r.splice(r.indexOf(t)>>>0,1):e.set(n,[]))},emit:function(n,t){var r=e.get(n);r&&r.slice().map(function(e){e(t)}),(r=e.get("*"))&&r.slice().map(function(e){e(n,t)})}}}();function I(e,{history:n="replace",shallow:t=!0,scroll:r=!1,throttleMs:i=h,parse:l=e=>e,serialize:u=String,defaultValue:c,startTransition:Y}={history:"replace",scroll:!1,shallow:!0,throttleMs:h,parse:e=>e,serialize:String,defaultValue:void 0}){let k=(0,d.useRouter)(),E=(0,d.useSearchParams)(),[C,D]=p.useState(()=>{let n=b(e),t="object"!=typeof location?E?.get(e)??null:new URLSearchParams(location.search).get(e)??null,r=n??t;return null===r?null:a(l,r,e)}),R=p.useRef(C);o("[nuqs `%s`] render - state: %O, iSP: %s",e,C,E?.get(e)??null),p.useEffect(()=>{if("14.0.3"!==window.next.version)return;let n=E.get(e)??null,t=null===n?null:a(l,n,e);o("[nuqs `%s`] syncFromUseSearchParams %O",e,t),R.current=t,D(t)},[E?.get(e),e]),p.useInsertionEffect(()=>{function n(n){o("[nuqs `%s`] updateInternalState %O",e,n),R.current=n,D(n)}function t(t){let r=t.get(e)??null,i=null===r?null:a(l,r,e);o("[nuqs `%s`] syncFromURL %O",e,i),n(i)}return o("[nuqs `%s`] subscribing to sync",e),A.on(_,t),A.on(e,n),()=>{o("[nuqs `%s`] unsubscribing from sync",e),A.off(_,t),A.off(e,n)}},[e]);let F=p.useCallback((a,l={})=>{let d="function"==typeof a?a(R.current??c??null):a;A.emit(e,d);var p={history:l.history??n,shallow:l.shallow??t,scroll:l.scroll??r,throttleMs:l.throttleMs??i,startTransition:l.startTransition??Y};let b=null===d?null:u(d);return o("[nuqs queue] Enqueueing %s=%s %O",e,b,p),g.set(e,b),"push"===p.history&&(m.history="push"),p.scroll&&(m.scroll=!0),!1===p.shallow&&(m.shallow=!1),p.startTransition&&(v.add(p.startTransition),m.shallow=!1),m.throttleMs=Math.max(p.throttleMs??h,Number.isFinite(m.throttleMs)?m.throttleMs:0),null===y&&(y=new Promise((e,n)=>{if(!Number.isFinite(m.throttleMs)){o("[nuqs queue] Skipping flush due to throttleMs=Infinity"),e(new URLSearchParams(location.search)),setTimeout(()=>{y=null},0);return}function t(){w=performance.now();let[t,r]=function(e){let n=new URLSearchParams(location.search);if(0===g.size)return[n,null];let t=Array.from(g.entries()),r={...m},i=Array.from(v);for(let[e,i]of(g.clear(),v.clear(),m.history="replace",m.scroll=!1,m.shallow=!0,m.throttleMs=h,o("[nuqs queue] Flushing queue %O with options %O",t,r),t))null===i?n.delete(e):n.set(e,i);try{let t=window.next?.router;if("string"==typeof t?.state?.asPath){let e=x(t.state.asPath.split("?")[0]??"",n);o("[nuqs queue (pages)] Updating url: %s",e),("push"===r.history?t.push:t.replace).call(t,e,e,{scroll:r.scroll,shallow:r.shallow})}else{let t=x(location.origin+location.pathname,n);o("[nuqs queue (app)] Updating url: %s",t),("push"===r.history?history.pushState:history.replaceState).call(history,history.state,S,t),r.scroll&&window.scrollTo(0,0),r.shallow||function(e,n){let t=r=>{if(r===e.length)return n();let i=e[r];if(!i)throw Error("Invalid transition function");i(()=>t(r+1))};t(0)}(i,()=>{e.replace(t,{scroll:!1,shallow:!1})})}return[n,null]}catch(e){return f.error(s(429),t.map(([e])=>e).join(),e),[n,e]}}(k);null===r?e(t):n(t),y=null}setTimeout(function(){let e=performance.now()-w,n=m.throttleMs,r=Math.max(0,Math.min(n,n-e));o("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",r,n),0===r?t():setTimeout(t,r)},0)})),y},[e,n,t,r,i,Y]);return[C??c??null,F]}"object"==typeof history&&function(){let e="1.15.3",n=history.__nuqs_patched;if(n){n!==e&&f.error(s(409),n,e);return}for(let n of(o("[nuqs] Patching history with %s",e),["pushState","replaceState"])){let e=history[n].bind(history);history[n]=function(t,r,i){if(!i)return o("[nuqs] history.%s(null) (%s) %O",n,r,t),e(t,r,i);let a=r===S?"internal":"external",l=new URL(i,location.origin).searchParams;if(o("[nuqs] history.%s(%s) (%s) %O",n,i,a,t),"external"===a){for(let[e,n]of l.entries()){let t=b(e);null!==t&&t!==n&&(o("[nuqs] Overwrite detected for key: %s, Server: %s, queue: %s",e,n,t),l.set(e,t))}setTimeout(()=>{o("[nuqs] External history.%s call: triggering sync with %s",n,l),A.emit(_,l),A.emit(Y,{search:l,source:a})},0)}else setTimeout(()=>{A.emit(Y,{search:l,source:a})},0);return e(t,r===S?"":r,i)}}Object.defineProperty(history,"__nuqs_patched",{value:e,writable:!1,enumerable:!1,configurable:!1})}()},30354:e=>{e.exports={root:"ExpandAgentButton_root__xRgXe",right:"ExpandAgentButton_right__FvkPK",show:"ExpandAgentButton_show__MvUR5"}},30799:e=>{e.exports={root:"DockSidebar_root__N_L1p",header:"DockSidebar_header__xaaAD",content:"DockSidebar_content__e0_hV",title:"DockSidebar_title__e3CZQ",footerButtons:"DockSidebar_footerButtons__ENw63"}},33095:(e,n,t)=>{"use strict";t.d(n,{k:()=>l});var r=t(21462),i=t(69832),o=t(34305),a=t(9313);function l(e){var n,t,l=(0,o.Ay)(),u=(0,a.A)(),c=(0,r.useMemo)(function(){return u?l.map(function(n){var t,r=n.get(e.id);return r?{status:r.status,label:(0,o.zz)(r.status),appImageUrl:r.appImageUrl}:(null==(t=e.latestAgentStatus)?void 0:t.status)?{status:e.latestAgentStatus.status,label:(0,o.zz)(e.latestAgentStatus.status),appImageUrl:e.latestAgentStatus.appImageUrl}:null}):null},[u,l,e.id,null==(n=e.latestAgentStatus)?void 0:n.status,null==(t=e.latestAgentStatus)?void 0:t.appImageUrl]);return(0,i.J2)(c)}},34305:(e,n,t)=>{"use strict";t.d(n,{h8:()=>v,Ay:()=>w,zz:()=>g});var r=t(34837),i=t(21462),o=t(17844),a=t(12584),l=t(41114),u=t(90676);function c(){var e=(0,a._)(["\n  subscription CurrentUserReplAgentStatuses {\n    currentUserReplAgentStatuses {\n      replId\n      status\n      updatedAt\n      appImageUrl\n    }\n  }\n"]);return c=function(){return e},e}var s={},d=(0,l.J1)(c()),p=t(69832),f=t(9313),h={"waiting-for-user":"Waiting for you","in-progress":"Working"};function g(e){var n;return null!=(n=h[e])?n:"Paused"}var m=(0,i.createContext)(null);function v(e){var n,t,i=e.children,a=(0,p.HJ)(new Map),l=function(e){if(null==e?void 0:e.currentUserReplAgentStatuses){var n=new Map(e.currentUserReplAgentStatuses.map(function(e){return[e.replId,{status:e.status,updatedAt:e.updatedAt,appImageUrl:e.appImageUrl}]}));a.set(n)}};return n={skip:!(0,f.A)(),onError:function(e){},onData:function(e){l(e.data.data)}},t=(0,o._)({},s,n),u.R(d,t),(0,r.Y)(m.Provider,{value:a,children:i})}function w(){var e=(0,i.useContext)(m);if(null===e)throw Error("useCurrentUserAgentStatus must be used within an AgentStatusProvider");return e}},36735:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>ev,UX:()=>eh});var r=t(29935),i=t(17844),o=t(93629),a=t(17459),l=t(12694),u=t(86105),c=t(82643),s=t(34837),d=t(72096),p=t.n(d),f=t(40185),h=t(21462),g=t(83625),m=t(1637),v=t(96513),w=t(98935),y=t(71738),b=t(24517),x=t(32186),_=t(86103),S=t(30375),Y=t(35897),A=t(11063),I=t(34778),k=t(68817),E=t(43162),C=t(8058),D=t(81690),R=t(48473),F=t(8928),U=t(39534),P=t(73712),O=t(70764),T=t(51292),L=t(18712),M=t(31051),G=t(16653),N=t(80339),H=t(73455),z=t(28611),W=t(88337),B=t(3937),j=t(91953),$=t(25227),q=t(73635),K=t(85826);t(64053);var V=t(78745),Z=t(7595),J=t(33683),X=t(26454),Q=t(78479),ee=t(45206),en=t(94686),et=t(84549),er=t(49941),ei=t(53432),eo=t(8440),ea=function(e){(0,I.u4)(I.AZ.NAV_ITEM_CLICK,{target:e,source:"header_avatar_dropdown"})},el=[L.wp.fontSize(U.LU.fontSizeDefault),L.wp.viewStyle,L.wp.height(34),L.wp.px(8),L.wp.py(8),L.wp.flex.row,L.wp.align.center,L.wp.color.foregroundDefault,L.wp.backgroundColor.backgroundDefault,{":not([disabled])":{":hover":{backgroundColor:U.LU.backgroundHigher}}}],eu=[L.wp.flex.row,L.wp.align.center,T.b.listItem,L.wp.px(8),L.wp.py(4),{":not([disabled])":{":hover":{backgroundColor:U.LU.backgroundHigher}}}],ec=(0,O.x)({dropdownItemAndContainer:(0,u._)(eu),popover:[{borderColor:U.LU.outlineDimmest}],buttonContainer:[L.wp.maxWidth("100%"),L.wp.borderRadius(),L.wp.p(0),L.wp.flex.row,L.wp.justify.center,L.wp.focusRing,L.wp.cursor.pointer,T.b.nofill,L.wp.height(34),L.wp.align.center,{'&[aria-expanded="true"]':{backgroundColor:U.LU.interactiveBackgroundActive}}],orgNameContainer:[L.wp.width("100%"),L.wp.pr(8),L.wp.pl(4),L.wp.flex.shrink(1)],dropdown:[L.wp.viewStyle,L.wp.rowWithGap(2),L.wp.align.center,L.wp.color.foregroundDefault,L.wp.borderRadius(8),{"&:hover > svg > path":{fill:U.LU.foregroundDefault},"&:hover div#role-badge":{borderColor:U.LU.backgroundDefault}}],centeredButton:[L.wp.justify.center,L.wp.borderRadius(4)],surface:[L.wp.borderRadius(6),L.wp.backgroundColor.backgroundDefault,L.wp.minWidth(196),L.wp.overflow("hidden")],link:(0,u._)(el),shinyStyling:(0,u._)(el).concat([L.wp.color.foregroundDefault,L.wp.backgroundColor.brandAccentDefault,W.K8,L.wp.cursor.pointer]),linkIcon:[L.wp.mr(8)],divider:[L.wp.backgroundColor.backgroundHigher],dividerV:[L.wp.backgroundColor.backgroundHigher,L.wp.height("100%")],orgNameText:[L.wp.flex.grow(1)],dropdownAvatarAndName:[L.wp.textAlign.left,L.wp.rowWithGap(8),L.wp.maxWidth("100%"),L.wp.flex.growAndShrink(1)],sectionHeader:[L.wp.fontWeight.medium,L.wp.p(8),L.wp.flex.row,L.wp.align.center],themeToggleButtonActive:[L.wp.backgroundColor.backgroundHighest],themeToggleContainer:[{marginLeft:"auto"}],subDropdownContainer:[L.wp.maxHeight(200),L.wp.overflowY("auto")],workspaceDropdownContainer:[L.wp.maxHeight("calc(100vh - 400px)"),L.wp.overflowY("auto")],overflowIndicator:[L.wp.position.absolute,L.wp.bottom(0),L.wp.left(0),L.wp.right(0),L.wp.height(36),L.wp.backgroundColor.backgroundDefault,L.wp.display.flex,L.wp.justify.center,L.wp.align.center,{background:"linear-gradient(transparent, ".concat(U.LU.backgroundDefault," 50%, ").concat(U.LU.backgroundHigher," 80%, ").concat(U.LU.backgroundHighest," 100%)"),opacity:.7,pointerEvents:"none"}],workspaceContainerWrapper:[L.wp.position.relative],advancedThemeText:[L.wp.fontSize(U.LU.fontSizeSmall),L.wp.pl(16)]}),es=(0,O.x)({self:[ec.dropdownItemAndContainer,L.wp.justify.spaceBetween,{backgroundColor:U.LU.interactiveBackground,":not([disabled])":{":hover":{backgroundColor:U.LU.backgroundHighest}}}]}),ed=function(e){var n=e.currentUser,t=e.selected,r=e.onClick;return(0,s.FD)($.S,{css:t?es.self:ec.dropdownItemAndContainer,onClick:r,children:[(0,s.FD)($.S,{css:ec.dropdownAvatarAndName,align:"center",children:[(0,s.Y)(M.e,{src:n.image,username:n.username,fullName:n.fullName,size:20,isOrg:!1}),(0,s.Y)(j.EY,{variant:"text",color:t?"default":"dimmer",multiline:!1,css:ec.orgNameText,children:"Personal"})]}),(0,s.Y)($.S,{align:"center",row:!0,children:t?(0,s.Y)(q.A,{size:16}):null})]})},ep=function(e){var n,t=e.selected,r=e.org,i=e.orgContext,o=e.groupType,a=e.onRoute,l=(0,Y.A)().showError,u=r.name,c=r.slug,d=i.switchOrg,p=function(e){if(!e.currentUserRole)return void l("Something went wrong, please try again.");d({type:v.tWI.Team,id:e.id,slug:e.slug,orgRole:e.currentUserRole,orgDealContext:e.dealContext}),a()},h=(0,E.EG)({slug:c}).home,g=(0,f.useRouter)();return(0,s.FD)($.S,{css:t?es.self:ec.dropdownItemAndContainer,onClick:function(){p(r),g.push(h.href)},children:[(0,s.FD)($.S,{css:ec.dropdownAvatarAndName,align:"center",children:[(0,s.Y)(M.e,{src:null!=(n=r.image)?n:null,username:u,fullName:r.name,size:20}),(0,s.FD)($.S,{row:!0,align:"center",gap:8,children:[(0,s.Y)(j.EY,{variant:"text",color:t?"default":"dimmer",multiline:!1,css:ec.orgNameText,children:u}),o?(0,s.Y)(j.EY,{variant:"small",color:"dimmest",children:(0,C.ep)(o)}):null]})]}),(0,s.Y)($.S,{align:"center",row:!0,children:t?(0,s.Y)(q.A,{size:16}):null})]})},ef=function(e){var n=e.href,t=e.icon,i=e.label,o=e.trackingLabel,a=e.as,u=e.dataCy,d=e.badge,f=(0,m.m)(),g=(0,l._)((0,h.useState)(!1),2),v=g[0],w=g[1],y=function(){return(0,r._)(function(){return(0,c.YH)(this,function(e){switch(e.label){case 0:if("/logout"!==n)return[3,2];return w(!0),[4,(0,b.CI)(f)];case 1:e.sent(),e.label=2;case 2:return ea(o),[2]}})})()};return(0,s.FD)(p(),{passHref:!0,prefetch:!1,as:a,href:n,role:"menuitem",tabIndex:0,onKeyDown:y,onClick:y,css:ec.link,"data-cy":u,children:[(0,s.Y)("span",{css:ec.linkIcon,children:v?(0,s.Y)(J.A,{}):t}),(0,s.FD)($.S,{row:!0,align:"center",justify:"space-between",grow:!0,children:[(0,s.Y)("span",{children:i}),d]})]},i)},eh=function(e){var n=e.currentUser,t=e.orgContext,r=e.loading,i=e.hasOrgs,o=e.onRoute,a=(0,f.useRouter)(),u=(0,h.useRef)(null),c=(0,l._)((0,h.useState)(!1),2),d=c[0],p=c[1],g=(0,A.G)().shouldHidePersonalOrg;return((0,h.useEffect)(function(){var e=function(){if(u.current){var e=u.current,n=e.scrollHeight,t=e.clientHeight,r=e.scrollTop;p(n>t&&!(r+t>=n-1))}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),(0,h.useEffect)(function(){var e=function(){if(u.current){var e=u.current,n=e.scrollHeight,t=e.clientHeight,r=e.scrollTop;p(n>t&&!(r+t>=n-1))}},n=u.current;if(n)return n.addEventListener("scroll",e),function(){return n.removeEventListener("scroll",e)}},[]),(null==n?void 0:n.orgs)&&"CurrentUserOrganizationConnection"===n.orgs.__typename&&(void 0===r||!r)&&void 0!==i&&i)?(0,s.Y)(s.FK,{children:(0,s.FD)($.S,{children:[(0,s.Y)(j.EY,{variant:"small",color:"dimmest",css:ec.sectionHeader,children:"Switch Workspace"}),(0,s.FD)($.S,{css:ec.workspaceContainerWrapper,children:[(0,s.FD)($.S,{innerRef:u,css:ec.workspaceDropdownContainer,children:[g?null:(0,s.Y)(ed,{currentUser:n,selected:void 0===t.orgId,onClick:function(){t.switchOrg({type:v.tWI.Personal}),a.push("/home","/~",{shallow:!1})}}),n.orgs.items.map(function(e){var n=e.org,r=e.type;return(0,s.Y)(ep,{org:n,groupType:r,selected:n.id===t.orgId,orgContext:t,onRoute:o},n.id)})]}),d?(0,s.Y)($.S,{css:ec.overflowIndicator}):null]})]})}):null},eg=function(e){var n=e.icon,t=e.label,r=e.onClick,i=e.trackingLabel,o=e.shiny,a=e.centered;return(0,s.FD)("button",{css:[o?ec.shinyStyling:ec.link,a?ec.centeredButton:[],L.wp.cursor.pointer],onClick:function(){i&&ea(i),r()},children:[(0,s.Y)("span",{css:ec.linkIcon,children:n}),(0,s.Y)("span",{children:t})]})},em=function(){var e,n,t,r,i=(0,P.D)(),o=i.theme,a=i.setActiveTheme,u=(0,l._)((0,h.useState)(!1),2),c=u[0],d=u[1],p=(0,h.useMemo)(function(){return"replitSpooky"===o.id||"number"==typeof o.id},[]),f=(0,w.tS)({variables:{input:{}}}).data,g=(0,w.Np)({variables:{input:{}}}).data,m=(null==f||null==(n=f.currentUser)||null==(e=n.installedThemes)?void 0:e.__typename)==="InstalledThemeConnection"?f.currentUser.installedThemes.items.map(function(e){return e.customTheme}):[],v=(null==g||null==(r=g.currentUser)||null==(t=r.authoredThemes)?void 0:t.__typename)==="CustomThemeConnection"?g.currentUser.authoredThemes.items:[],y=function(e){a(e)},b=function(e,n){e.preventDefault(),e.stopPropagation(),("number"==typeof n||"replitSpooky"===n)&&a(n)};return(0,s.FD)(s.FK,{children:[(0,s.FD)($.S,{css:ec.link,children:[(0,s.Y)(ee.A,{css:ec.linkIcon}),(0,s.Y)(j.EY,{children:"Theme"}),(0,s.FD)($.S,{css:ec.themeToggleContainer,row:!0,gap:8,children:[(0,s.Y)(H.K0,{css:"replitDark"===o.id&&ec.themeToggleButtonActive,onClick:function(){return y("replitDark")},"aria-label":"Dark theme",alt:"Dark theme",children:(0,s.Y)(X.A,{})}),(0,s.Y)(H.K0,{css:"replitLight"===o.id&&ec.themeToggleButtonActive,onClick:function(){return y("replitLight")},"aria-label":"Light theme",alt:"Light theme",children:(0,s.Y)(et.A,{})}),p?(0,s.Y)(s.FK,{children:(0,s.Y)(H.K0,{css:("replitSpooky"===o.id||"number"==typeof o.id)&&ec.themeToggleButtonActive,onClick:function(){d(function(e){return!e})},"aria-label":"More themes",alt:"More themes",children:(0,s.Y)(Q.A,{})})}):null]})]}),c?(0,s.FD)($.S,{css:ec.subDropdownContainer,children:[(0,s.FD)($.S,{css:ec.link,onClick:function(e){return b(e,"replitSpooky")},role:"menuitem",tabIndex:0,children:[(0,s.Y)(j.EY,{css:ec.advancedThemeText,style:{flexGrow:1},children:"spooky"}),"replitSpooky"===o.id?(0,s.Y)(q.A,{size:16}):null]},"spooky"),v.map(function(e){return(0,s.FD)($.S,{css:ec.link,onClick:function(n){return b(n,e.id)},role:"menuitem",tabIndex:0,children:[(0,s.Y)(j.EY,{css:ec.advancedThemeText,style:{flexGrow:1},children:e.title}),o.id===e.id&&(0,s.Y)(q.A,{size:16})]},"authored-".concat(e.id))}),m.map(function(e){return(0,s.FD)($.S,{css:ec.link,onClick:function(n){return b(n,e.id)},role:"menuitem",tabIndex:0,children:[(0,s.Y)(j.EY,{css:ec.advancedThemeText,style:{flexGrow:1},children:e.title}),o.id===e.id&&(0,s.Y)(q.A,{size:16})]},"installed-".concat(e.id))})]}):null]})};let ev=function(e){var n,t=e.currentUser,r=e.hideTeamInHeader,u=(0,f.useRouter)().asPath,c=(0,l._)((0,h.useState)(!1),2),d=c[0],p=c[1],m=(0,l._)((0,h.useState)(!1),2),w=m[0],b=m[1],A=(0,l._)((0,h.useState)(!1),2),I=A[0],P=A[1],O=(0,R.M)(t);(0,Y.A)().showConfirm;var T=(0,S.a)({tablet:!1}),L=(0,_._P)({controlName:"flag-avatar-meridional-badge"}),H=null==t?void 0:t.orgs,q=(0,x.ET)(),J=q.orgId,X=q.loading,Q=(null==H?void 0:H.__typename)==="CurrentUserOrganizationConnection"?null==(n=H.items.find(function(e){var n;return(null==(n=e.org)?void 0:n.id)===J}))?void 0:n.org:null,ee=null==Q?void 0:Q.name,et=null==t?void 0:t.isMemberOfAnyOrg,el=void 0===q.orgId;(0,h.useEffect)(function(){p(!1)},[u]);var eu=(null==Q?void 0:Q.image)?(0,s.Y)(M.e,{src:Q.image,size:20,username:Q.name}):(0,s.Y)(k.T,{}),es=et&&!T&&!r,ed=(0,F.p)();return(0,s.FD)(s.FK,{children:[(0,s.FD)(z.Wv,{isOpen:d,onOpenChange:p,placement:"bottom start",label:"User menu",css:ec.popover,children:[function(e){var n,r=e.ref,l=(0,a._)(e,["ref"]);return(0,s.FD)(g.$,(0,o._)((0,i._)({},l),{ref:r,css:ec.buttonContainer,"aria-label":"User menu","aria-expanded":d,"data-cy":"avatar-dropdown-button",style:{backgroundColor:es?U.LU.interactiveBackground:void 0,height:ed?28:void 0},children:[es?(0,s.FD)(s.FK,{children:[(0,s.FD)($.S,{row:!0,gap:2,grow:!0,shrink:!0,align:"center",children:[(0,s.Y)($.S,{pl:4,children:el?null:eu}),(0,s.Y)($.S,{css:ec.orgNameContainer,children:(0,s.Y)(j.EY,{color:"dimmer",variant:"small",maxLines:1,children:(0,C.Hx)({ownerName:null!=(n=null!=ee?ee:t.firstName)?n:t.username,isInOrg:!el})})})]}),(0,s.Y)(N.a,{css:ec.dividerV})]}):null,(0,s.FD)($.S,{css:ec.dropdown,py:4,pl:8,pr:4,children:[(0,s.Y)(M.e,{size:ed?20:24,src:t.image,username:t.username,fullName:t.fullName,showCoreBadge:!L&&t.userSubscriptionType===v.Ohf.HackerPro}),(0,s.Y)(K.A,{color:U.LU.foregroundDimmest,size:12})]})]}))},(0,s.FD)(B.ui,{tag:"ul",elevated:!0,css:ec.surface,children:[et?(0,s.FD)(s.FK,{children:[(0,s.Y)(eh,{currentUser:t,orgContext:q,loading:X,hasOrgs:et,onRoute:function(){p(!1)}}),(0,s.Y)(G.a,{css:ec.divider})]}):null,(0,s.FD)($.S,{children:[null,(0,s.Y)(ef,{label:"Account",trackingLabel:"Account",as:"/account",href:"/account",dataCy:"avatar-dropdown-account-link",icon:(0,s.Y)(en.A,{}),badge:L&&t.userSubscriptionType===v.Ohf.HackerPro?(0,s.Y)(W.Jj,{}):null}),el?(0,s.Y)(eg,{label:"Refer and earn",onClick:function(){P(!0),ea("referral_link")},icon:(0,s.Y)(Z.A,{})}):null,(0,s.Y)(ef,{label:"Profile",trackingLabel:"Profile",as:O.as,href:O.href,icon:(0,s.Y)(ei.A,{})}),(0,s.Y)(ef,{label:"Create Team",trackingLabel:"Create Team",href:E.NI.href,icon:(0,s.Y)(eo.A,{})}),(0,s.Y)(ef,{label:"CLUI",trackingLabel:"CLUI",as:"/~/cli",href:"/~/cli",icon:(0,s.Y)(er.A,{})}),(0,s.Y)(em,{})]}),(0,s.Y)(G.a,{css:ec.divider}),(0,s.Y)($.S,{children:(0,s.Y)(ef,{label:"Log out",trackingLabel:"Log out",href:"/logout",icon:(0,s.Y)(V.A,{})})})]})]}),(0,s.Y)(D.default,{isOpen:w,onClose:function(){return b(!1)},type:"purchase",analyticsContext:{upgrade:{context:"header_avatar"}}}),(0,s.Y)(y.Zu,{isOpen:I,onClose:function(){return P(!1)},trackingContext:"header-avatar-dropdown"})]})}},37827:(e,n,t)=>{"use strict";t.d(n,{E_:()=>d,Im:()=>u.Im,mO:()=>p});var r=t(17844),i=t(17459),o=t(21462),a=t(27600),l=t(25788),u=t(26197),c=t(47737),s=(0,l._)(),d=function(e){return e[e.East=0]="East",e[e.NorthEast=45]="NorthEast",e[e.North=90]="North",e[e.NorthWest=135]="NorthWest",e[e.West=180]="West",e[e.SouthWest=225]="SouthWest",e[e.South=270]="South",e}({});function p(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preloadImages,n=(0,a.j)(),t=(0,c.m5)();(0,o.useEffect)(function(){if(!t)return s.install(),function(){s.uninstall()}},[t]),(0,o.useEffect)(function(){e&&s.preloadImages(e)},[e]);var l=function(e){n||s.addParticles(e)},d=function(e){n||s.addParticles((0,r._)({numParticles:125,spread:360,velocity:function(){return(0,u.Im)(400,900)},size:function(){return{width:(0,u.Im)(5,15),height:(0,u.Im)(5,25)}}},e))};return{fireBurst:l,fireBurstFrom:function(e){var t=e.element,o=(0,i._)(e,["element"]);if(!n){var a=(0,u.CL)(t),c=a.x,s=a.y;l((0,r._)({x:c,y:s},o))}},fireCircularBurst:d,fireCircularBurstFrom:function(e){var t=e.element,o=(0,i._)(e,["element"]);if(!n){var a=(0,u.CL)(t),l=a.x,c=a.y;d((0,r._)({x:l,y:c},o))}},fireDirectionalBurst:function(e){var t=e.direction,o=(0,i._)(e,["direction"]);n||s.addParticles((0,r._)({heading:t},o))},fireDirectionalBurstFrom:function(e){var t=e.element,o=e.direction,a=(0,i._)(e,["element","direction"]);if(!n){var l=(0,u.CL)(t),c=l.x,d=l.y;s.addParticles((0,r._)({x:c,y:d,numParticles:100,velocity:function(){return(0,u.Im)(400,1500)},spread:60,size:function(){return{width:(0,u.Im)(5,15),height:(0,u.Im)(5,25)}},heading:o},a))}}}}},40607:e=>{e.exports={left:"Header2_left__9hIwC",right:"Header2_right__XiLBj",planningHeader:"Header2_planningHeader__SRV_k",planningTimeline:"Header2_planningTimeline__3UHv7",planningHeaderLeft:"Header2_planningHeaderLeft__5fGKL",desktopAppWindowsOs:"Header2_desktopAppWindowsOs__yUYyW",desktopDragRegion:"Header2_desktopDragRegion__nIuPH"}},44114:e=>{e.exports={iconSurface:"workspaceTour_iconSurface__yeyUZ"}},44263:(e,n,t)=>{"use strict";t.d(n,{n:()=>a,u:()=>o});var r=t(34837),i=t(42793);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},44744:(e,n,t)=>{"use strict";t.d(n,{A:()=>f,z:()=>p});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),u=t(54744);function c(){var e=(0,a._)(["\n  query CreateReplTitle($teamId: Int, $title: String) {\n    replTitle(teamId: $teamId, title: $title)\n  }\n"]);return c=function(){return e},e}var s={},d=(0,l.J1)(c()),p=60;function f(e){var n,t,a=e.preferredTitle,l=e.teamId,c=(0,r._)((0,i.useState)(""),2),f=c[0],h=c[1],g=(0,i.useRef)(null),m=(0,i.useRef)(!1),v=(n={variables:{title:a,teamId:l},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1},t=(0,o._)({},s,n),u.I(d,t)),w=v.data,y=v.previousData,b=(null==w?void 0:w.replTitle)||(null==y?void 0:y.replTitle);(0,i.useEffect)(function(){b&&(m.current||h(b))},[b]);var x=(0,i.useCallback)(function(e){m.current=!0,h(e.slice(0,p))},[]),_=!a&&b===f;return{title:f,setTitle:x,titleInputRef:g,isTitleAutoGenerated:_}}},48495:e=>{e.exports={root:"index2_root__i6WdL",header:"index2_header__1hU2H",content:"index2_content__qZTQc",title:"index2_title__tsDs2"}},54766:(e,n,t)=>{"use strict";t.d(n,{G:()=>i,W:()=>o});var r=t(31700),i=3,o=r.i9},55226:e=>{e.exports={root:"Pane_root__Dz_FC",container:"Pane_container__V2H53",interactionBlanket:"Pane_interactionBlanket__HGhM4"}},61800:e=>{e.exports={tab:"Tab_tab__lRjf7",tabButton:"Tab_tabButton__5cnui",closeButton:"Tab_closeButton__PjB_c",title:"Tab_title__ydBev"}},63914:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i,_:()=>o});var r=t(34778),i=function(e){(0,r.u4)(r.AZ.COURSE_ACTION,e)},o=function(e){(0,r.u4)(r.AZ.LESSON_ACTION,e)}},64957:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(12694),i=t(34837),o=t(21462),a=t(52963),l=t(82954),u=t(26575),c=t(25189),s=t(42793),d=t(39534),p=t(18712),f=t(25227),h=(0,s.AH)(p.wp.dragRegion);function g(){var e,n,t,s,p,g,m,v,w=(0,c.vm)(),y=(0,u.A)(),b=(e=(0,u.A)(),t=(n=(0,r._)((0,o.useState)(!1),2))[0],s=n[1],(0,o.useEffect)(function(){if(e)return s(document.hasFocus()),a.M.onFocusChanged(s)},[e]),t),x=(p=(0,u.A)(),m=(g=(0,r._)((0,o.useState)(!1),2))[0],v=g[1],(0,o.useEffect)(function(){if(p)return a.M.onFullScreenChanged(v)},[p]),m);return w&&y&&!x?(0,i.Y)(f.S,{css:h,children:(0,i.Y)("svg",{width:l.Cp,height:l.GB-16,children:b?null:(0,i.FD)(i.FK,{children:[(0,i.Y)("circle",{cx:19,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:39,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:59,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1})]})})}):null}},65169:e=>{e.exports={root:"Search_root__qfJle"}},68817:(e,n,t)=>{"use strict";t.d(n,{T:()=>c});var r=t(34837),i=t(70764),o=t(18712),a=t(25227),l=t(8440),u=(0,i.x)({placeholder:[o.wp.width(24),o.wp.height(24),o.wp.borderRadius("full"),o.wp.backgroundColor.backgroundRoot,o.wp.display.flex,o.wp.align.center,o.wp.justify.center,o.wp.color.foregroundDefault]}),c=function(){return(0,r.Y)(a.S,{css:u.placeholder,children:(0,r.Y)(l.A,{size:12})})}},69371:(e,n,t)=>{var r=1/0,i=/^\s+|\s+$/g,o=/^0x/i,a="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,l="object"==typeof self&&self&&self.Object===Object&&self,u=a||l||Function("return this")(),c=Object.prototype.toString,s=u.Symbol,d=u.parseInt,p=s?s.prototype:void 0,f=p?p.toString:void 0;e.exports=function(e,n,t){var a;return t||null==n?n=0:n&&(n*=1),d(e=(null==(a=e)?"":function(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||!!e&&"object"==typeof e&&"[object Symbol]"==c.call(e)}(e))return f?f.call(e):"";var n=e+"";return"0"==n&&1/e==-r?"-0":n}(a)).replace(i,""),n||(o.test(e)?16:10))}},69490:e=>{e.exports={opaqueOnHover:"Header_opaqueOnHover__cvJl6",root:"Header_root__fJWuA",desktopAppWindowsOs:"Header_desktopAppWindowsOs__XZvA_"}},69498:(e,n,t)=>{"use strict";t.d(n,{g:()=>w});var r=t(12694),i=t(34837),o=t(21462),a=t(44962),l=t(89890),u=t(16710),c=t(90405),s=t(11901),d=t(39534),p=t(70764),f=t(51292),h=t(18712),g=t(3937),m=t(91953),v=t(25227),w=function(e){var n=e.isIndividualOwner,t=e.showUpgradeForm,p=(0,r._)((0,o.useState)({type:"closed"}),2),f=p[0],h=p[1],w=(0,l.g)();if(!n||"loading"===w.type||"error"===w.type)return null;var b=w.replCount,x=w.isStarterUser,_=w.shouldEnforceUsersOverLimit;if(!x||!_)return null;var S=a.q-b,Y=Array.from({length:a.q}).map(function(e,n){return(0,i.Y)(v.S,{css:y.measureBar,style:{backgroundColor:n<b?(0,c.p)({replCount:b}):d.LU.backgroundDefault,border:n+1>b?"1px solid ".concat(d.LU.outlineDefault):"1px solid ".concat((0,c.A)({replCount:b}))}},n)});return(0,i.FD)(i.FK,{children:[(0,i.Y)(v.S,{tag:"button",css:y.bannerWrapper,onClick:function(e){e.preventDefault(),t?t():h({type:"open",onUpgradeConfirm:w.refetch})},children:(0,i.FD)(g.ui,{css:y.container,p:8,children:[(0,i.Y)(m.EY,{variant:"small",color:"dimmest",height:"singleLine",css:y.text,children:b===a.q-1?"This is your last free app":b<a.q?"You have ".concat(S," free ").concat((0,s.A)("app",S)," left"):"You're at the limit of free Apps"}),(0,i.Y)(v.S,{css:y.measures,row:!0,gap:4,children:Y})]})}),(0,i.Y)(u.k,{setState:h,state:f})]})},y=(0,p.x)({bannerWrapper:[h.wp.reset.button,h.wp.textAlign.left,h.wp.borderRadius()],container:[h.wp.cursor.pointer,h.wp.borderRadius(),f.b.filled,h.wp.rowWithGap(24),h.wp.align.center],text:[h.wp.fontWeight.medium],measures:[h.wp.cursor.pointer,h.wp.flex.growAndShrink(1),h.wp.minWidth(42),h.wp.align.center],measureBar:[h.wp.height(10),h.wp.borderRadius(2),h.wp.overflow("visible"),h.wp.backgroundColor.backgroundDefault,h.wp.flex.growAndShrink(1)]})},69681:e=>{e.exports={root:"AgentChat_root__S4p6B",sidebarResizeHandle:"AgentChat_sidebarResizeHandle__LT0LS",right:"AgentChat_right__QSUg7",left:"AgentChat_left__B_TFP"}},75429:e=>{e.exports={menu:"NavMenu_menu__ob40z",repl:"NavMenu_repl__s6nEw",usage:"NavMenu_usage__aw9WQ",emptySpacer:"NavMenu_emptySpacer__RPXwr"}},78828:(e,n,t)=>{"use strict";t.d(n,{L:()=>P});var r=t(12694),i=t(34837),o=t(21462),a=t(17844),l=t(12584),u=t(41114),c=t(54744);function s(){var e=(0,l._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    fullName\n    image\n    userSubscriptionType\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,l._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,u.J1)(s()),h=(0,u.J1)(d(),f),g=t(96513),m=t(77499),v=t(52963),w=t(39534),y=t(70764),b=t(51292),x=t(18712),_=t(31051),S=t(66277),Y=t(70251),A=t(28611),I=t(3937),k=t(91953),E=t(25227),C=t(85826),D=t(78745),R=t(8548),F=t(94686),U=(0,y.x)({wrapper:[x.wp.noDragRegion],button:[b.b.nofill,x.wp.p(4),x.wp.viewStyle,x.wp.reset.button,x.wp.rowWithGap(2),x.wp.align.center,x.wp.color.foregroundDefault,x.wp.cursor.pointer,x.wp.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:w.LU.foregroundDefault}}],surface:[x.wp.borderRadius(8),x.wp.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[x.wp.ml(8)],menuItem:[],accountModal:[x.wp.overflow("auto"),x.wp.height("100%")],appVersionWrapper:[x.wp.center,x.wp.border({color:w.LU.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n,t=e.showName,l=(0,r._)((0,o.useState)(!1),2),u=l[0],s=l[1],d=(0,r._)((0,o.useState)(!1),2),f=d[0],y=d[1],b=(n=(0,a._)({},p,void 0),c.I(h,n)).data,x=null==b?void 0:b.currentUser;if(!x)return null;var P=[{label:"Home",icon:(0,i.Y)(R.A,{}),onAction:function(){v.M.openExternalUrl("/"),s(!1)}},{label:"Account",icon:(0,i.Y)(F.A,{}),onAction:function(){y(function(e){return!e}),s(!1)}},{label:"Log out",icon:(0,i.Y)(D.A,{}),onAction:function(){v.M.logout()}}];return(0,i.FD)(E.S,{css:U.wrapper,children:[(0,i.FD)(A.Wv,{isOpen:u,onOpenChange:s,placement:"bottom start",label:"Account options",children:[(0,i.FD)("button",{onClick:function(){s(function(e){return!e})},css:U.button,"data-cy":"desktop-app-avatar-menu",children:[(0,i.Y)(_.e,{size:24,src:(null==x?void 0:x.image)||null,username:(null==x?void 0:x.username)||"",fullName:(null==x?void 0:x.fullName)||"",showCoreBadge:x.userSubscriptionType===g.Ohf.HackerPro}),t?(0,i.FD)(E.S,{css:U.username,className:"username",children:["@",null==x?void 0:x.username]}):null,(0,i.Y)(C.A,{color:w.LU.foregroundDimmest,size:12})]}),(0,i.FD)(I.ui,{elevated:!0,css:U.surface,background:"higher",children:[(0,i.Y)(S.W1,{label:"Account options",onAction:function(e){var n=P[parseInt(e,10)];n&&n.onAction()},children:P.map(function(e,n){return(0,i.Y)(S.q7,{"aria-label":e.label,children:(0,i.FD)(E.S,{row:!0,gap:8,align:"center",children:[e.icon,(0,i.Y)(k.EY,{children:e.label})]})},n)})}),(0,i.Y)(E.S,{css:U.appVersionWrapper,py:4,px:8,children:(0,i.Y)(k.EY,{color:"dimmer",variant:"small",dataCy:"desktop-app-version",children:"Version ".concat(v.M.getVersion())})})]})]}),(0,i.Y)(Y.a,{isOpen:f,onRequestClose:function(){return y(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:U.accountModal,children:(0,i.Y)(m.A,{})})]})}},80667:e=>{e.exports={root:"ResizeHandle_root__LCasx",left:"ResizeHandle_left__9Zai2",right:"ResizeHandle_right__PpIC3",grip:"ResizeHandle_grip__sYPtd"}},82804:e=>{e.exports={contentContainer:"Workspace_contentContainer__DubhE",desktopApp:"Workspace_desktopApp__rJAtg"}},82954:(e,n,t)=>{"use strict";t.d(n,{Cp:()=>r,GB:()=>o,xn:()=>i});var r=86,i=140,o=48},84282:e=>{var n=1/0,t=0/0,r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=/^(?:0|[1-9]\d*)$/,u=parseFloat,c=parseInt,s=Object.prototype.toString,d=Math.floor,p=Math.min,f=Math.random;function h(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function g(e){return e?(e=function(e){if("number"==typeof e)return e;if("symbol"==typeof(n=e)||n&&"object"==typeof n&&"[object Symbol]"==s.call(n))return t;if(h(e)){var n,l="function"==typeof e.valueOf?e.valueOf():e;e=h(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=o.test(e);return u||a.test(e)?c(e.slice(2),u?2:8):i.test(e)?t:+e}(e))===n||e===-n?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}e.exports=function(e,n,t){if(t&&"boolean"!=typeof t&&function(e,n,t){if(!h(t))return!1;var r,i,o,a,u,c,d,p=typeof n;return("number"==p?!!(null!=(r=t)&&"number"==typeof(i=r.length)&&i>-1&&i%1==0&&i<=0x1fffffffffffff&&"[object Function]"!=(a=h(o=r)?s.call(o):"")&&"[object GeneratorFunction]"!=a&&(d=null==(d=t.length)?0x1fffffffffffff:d)&&("number"==typeof n||l.test(n))&&n>-1&&n%1==0&&n<d):"string"==p&&n in t)&&(u=t[n],u===(c=e)||u!=u&&c!=c)}(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=g(e),void 0===n?(n=e,e=0):n=g(n)),e>n){var r,i,o=e;e=n,n=o}if(t||e%1||n%1){var a=f();return p(e+a*(n-e+u("1e-"+((a+"").length-1))),n)}return r=e,i=n,r+d(f()*(i-r+1))}},85586:(e,n,t)=>{"use strict";t.d(n,{Q9:()=>f,_:()=>d,wp:()=>p});var r=t(34837),i=t(40185),o=(0,t(86105)._)(["workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website"]).concat(["100-days-of-python","100-days-of-python-promo","add-guest-new-user","agent-banner","agent-disclaimer","ai-image-generation-banner","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","custom-domain-purchase-announcement","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","deployments-synced-secrets","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","home-page-demo-repl-tour-suggestion","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","replit-teams-onboarding-tour","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-assistant-auto-apply-changes","workspace-assistant-auto-restart-repl","workspace-assistant-intro-video","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","workspace-repo-projects-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-tour-2024","workspace-desktop-tour-2025","workspace-bonsai-tour-2025","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","mobileApp-teams-coming-soon-announcement","incident-20240219-action-required-banner","incident-20250711-refund-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card","onboarding-purchase-seen","replit-teams-banner","integrations-toast","starter-changes-announcement-aug-2024","private-deployments-banner","editors-have-secret-access-warning","workspace-right-sidebar-cta","assistant-now-defaulting-to-claude-3-5","org-roles-and-permissions-info-banner","onboarding-seen","teams-sponsorships-onboarding-card","agent-billing-notification-usage-page","agent-billing-notification-creation-entrypoint","agent-billing-creation-disclaimer","agent-billing-workspace-disclaimer","agent-billing-threshold-reached-warning","agent-billing-workspace-flex-credits-almost-reached","agent-billing-announcement","agent-billing-announcement-banner","drizzle-studio-announcement","freemium-agent-access-announcement","referral-program-banner","referral-pending-banner","post-verification-educational-upsell","invoice-threshold-change-announcement","agent-v2-welcome-modal","agent-v2-homepage-modal","agent-mobile-notification-nudge","visual-editor-callout","deterministic-edits-callout","image-gen-awareness-callout","bonsai-ws-agent-onboarding","queue-drawer-callout","viewer-seats-announcement","apps-private-by-default-announcement","agent-billing-v2-announcement","agent-billing-v2-home-banner","agent-chat-mode-intro-callout","effort-based-pricing-announcement","dynamic-intelligence-modal","expert-mode-acknowledged","agent-3-announcement-banner","workspace-deployment-pane-production-database-banner","workspace-database-pane-toggle-tour","max-autonomy-warning-acknowledged"]),a=t(58631),l=t(34778),u=t(30724),c=t(40756),s=t(73635),d=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},p=function(e,n){var t,r=JSON.parse(a.A.get(d(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,o.includes(t)))return r},f=function(e){var n=e.challenge,t=o.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",a=(0,u.g)(t),d=a.isDone,p=a.isLoading,f=a.setAsDone,h=(0,i.useRouter)();return p?null:(0,r.Y)(c.$n,{colorway:d?"primary":"positive",onClick:function(){f(),(0,l.u4)(l.AZ.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.Y)(s.A,{}),size:"big",text:d?"Challenge completed!":"Complete Challenge"})}},86059:e=>{e.exports={container:"FigmaImportEntry_container__0gcKx",replitIcon:"FigmaImportEntry_replitIcon__Vmv79",figmaIcon:"FigmaImportEntry_figmaIcon__cj71Z",button:"FigmaImportEntry_button__tGaaO"}},86296:e=>{e.exports={overlay:"FigmaImport_overlay__to7_u",animationWrapper:"FigmaImport_animationWrapper__8PuMi",progressBarContainer:"FigmaImport_progressBarContainer__GBU7c",progressBarTrack:"FigmaImport_progressBarTrack__AjpdN",progressBarFill:"FigmaImport_progressBarFill__WUllg"}},89742:(e,n,t)=>{"use strict";t.d(n,{B:()=>i});var r=t(90629);function i(e,n){return r.v4(function(t){t.setTag("start-with-ai",!0),n&&t.setExtras(n),r.Cp(e)}),e}},89846:e=>{e.exports={importButtonContainer:"FigmaImportForm_importButtonContainer__wEqpP",limitMeter:"FigmaImportForm_limitMeter__U_gFJ",input:"FigmaImportForm_input__hx_c9",container:"FigmaImportForm_container__ZGfRZ",divider:"FigmaImportForm_divider__POsUX"}},90803:e=>{e.exports={root:"PlanningBadge_root__xmkd4"}},92059:e=>{e.exports={flipped:"FiletreeButton_flipped__X0Trh"}},92084:(e,n,t)=>{"use strict";t.d(n,{Fe:()=>u});var r=t(12584),i=t(41114),o=t(78627);function a(){var e=(0,r._)(["\n  fragment OrgGroupMetadata on OrgGroup {\n    id\n    color\n    slug\n    type\n    name\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgGroupMetadata($orgId: String!, $groupId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              ...OrgGroupMetadata\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return e},e}var u=(0,i.J1)(a());l(),o.rh,o.wW},93695:e=>{e.exports={tabBar:"TabBar_tabBar__ER_xz",tabs:"TabBar_tabs__HezdH",newTab:"TabBar_newTab__Buyvr",newTabTextButton:"TabBar_newTabTextButton__zy_Gs",dragArea:"TabBar_dragArea__Fyv_A",dropPreview:"TabBar_dropPreview__T43OH",desktopAppWindowsOs:"TabBar_desktopAppWindowsOs__aj_RI"}},97608:(e,n,t)=>{"use strict";t.d(n,{Um:()=>f,y3:()=>g,zT:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(54744),l=t(78627);function u(){var e=(0,i._)(["\n  fragment OrgGroupsOrg on Org {\n    ...OrgMetadata\n    authorizations {\n      createOrgGroup {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment OrgGroupsOrgGroup on OrgGroup {\n    id\n    slug\n    type\n    name\n    color\n    isMember\n    memberCount\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query OrgGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var d={},p=(0,o.J1)(u(),l.wW),f=(0,o.J1)(c()),h=(0,o.J1)(s(),f);function g(e){var n=(0,r._)({},d,e);return a.I(h,n)}},99874:e=>{e.exports={root:"RunStatusButton_root__Zgid2",agentStatusIcon:"RunStatusButton_agentStatusIcon__dyBqs",running:"RunStatusButton_running__tAAYE",agent:"RunStatusButton_agent__q_Sk6"}}},e=>{e.O(0,[7433,3451,6976,5325,8185,1938,8463,2647,6614,7368,8508,9066,1425,4611,4357,3030,2634,6549,4739,5621,3669,4490,1234,4254,6041,6504,580,8154,3655,474,4552,121,9451,7313,1701,3245,1316,2290,3577,8229,3739,464,1520,3953,8519,9968,251,4869,2669,5296,479,7682,4908,7276,5168,7420,1574,6045,5556,1973,691,7499,9398,3251,4644,662,5122,7410,1248,4859,8200,6593,636,8792],()=>e(e.s=6125)),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-a4d0428320011be4.js.map